define(["base","app/commonApp","fileinput","fileinputZh"],function(a,e){var n=null;var t=null;var i="-1";var l="0";var r=false;var c="77cdc80cd58711e79e0465a718803ca9";var u=function(){$("#menubar .panel-title").removeClass("active");$("#menubar .panel-title[mid='"+l+"']").addClass("active");s(l)};var o=function(l){var o=function(a,e,n){if(a==false){return"none"}else{return"block"}};e.ajax({url:"../json/menu.json",type:"get",xhrFields:{withCredentials:true},success:function(f,p,m){var d=f.data;if(e.isEn){e.mergeMenuData(d)}t=a.arrayToMap(d,i,false);scopeMenuData=t;n=a.mapToArray(t,i);if(l){$.each(n,function(a,e){if(e&&e.items){$.each(e.items,function(a,n){if(l==n.id){e.active=true;e.items[a].active=true}})}})}a.template({container:$(".ui-menu"),templateId:e.isEn==true?"menu-tpl-en":"menu-tpl",data:n,helper:[{name:"show",event:o}],callback:function(){a.scroll({container:$(".ui-menubar")});$("#menubar .panel-collapse").on("hide.bs.collapse",function(a){$(a.target).parent().find(".panel-title a i:eq(1)").attr("class","fa fa-angle-down")});$("#menubar .panel-collapse").on("show.bs.collapse",function(a){$(a.target).parent().find(".panel-title a i:eq(1)").attr("class","fa fa-angle-up")});$("#menubar .panel-title").on("click",function(){$("#menubar .panel-title").removeClass("active");$(this).addClass("active");if($(this).attr("mid")){var a=$(this).attr("mid");$("#menubar .panel-collapse.in").collapse("hide");s(a);$("#menubar .panel-body li").removeClass("active")}});$("#menubar .panel-body li").on("click",function(){$("#menubar .panel-body li").removeClass("active");$(this).addClass("active");var a=$(this).attr("mid");s(a)});if(r){s(c)}else if(l){s(l)}else{u()}}})},beforeSend:function(a){}})};function s(n){if(chartInterval){window.clearInterval(chartInterval)}if(chartInterval2){window.clearInterval(chartInterval2)}var i=t[n]?t[n]:null;if(i){e.setLocation(scopeMenuData,i.id);a.page.load({container:$(".ui-article"),url:i.url?i.url:"",isUnique:true,callback:function(){$(".ui-menubar #mid").val(n)}})}}return{main:function(){a.page.clearBack();o()},loadPage:function(a){s(a)}}});