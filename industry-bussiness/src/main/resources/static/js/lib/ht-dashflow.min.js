!function(e){"use strict";var t="ht",a=e[t],n=a.Default,i=Math,s=(i.PI,i.sin,i.cos,i.atan2,i.sqrt,i.max),o=i.floor,c=(i.round,i.ceil),h=a.Shape,l=(a.Edge,a.List),d=a.Style,f=a.graph,r=n.getInternal(),p=r.ui(),u=null,g="prototype",w=e.clearInterval,v=e.setInterval,$=function(e){var t=e.data,a=this.dm();if(t&&"add"===e.kind){var n=a.$1c,i=t instanceof h?"shape.":"edge.";n&&t.s(i+"dash.flow")&&n.indexOf(t)<0&&n.push(t)}"clear"===e.kind&&(a.$1c=[])},_=function(e){var t=e.property,a=e.data,n=e.newValue,i=this.dm().$1c,s=a instanceof h?"s:shape.dash.flow":"s:edge.dash.flow";if(i&&t===s)if(n)i.indexOf(a)<0&&i.push(a);else for(var o=i.length,c=0;o>c;c++)if(i[c]===a){i.splice(c,1);break}},y=f.GraphView[g],I=p.EdgeUI[g],m=p.ShapeUI[g],b=m._80o,x=I._80o,D=a.DataModel[g],M=D.prepareRemove,F=y.setDataModel;d["edge.dash.flow.step"]==u&&(d["edge.dash.flow.step"]=3),d["shape.dash.flow.step"]==u&&(d["shape.dash.flow.step"]=3),D.prepareRemove=function(e){M.call(this,e);var t=e._dataModel,a=t.$1c;if(a)for(var n=a.length,i=0;n>i;i++)if(a[i]===e){a.splice(i,1);break}},y.setDataModel=function(e){var t=this,a=t._dataModel;if(a!==e){a&&(a.umm($,t),a.umd(_,t),a.$1c=[]),e.mm($,t),e.md(_,t);var n=e.$1c=[];e.each(function(e){var t=e instanceof h?"shape.":"edge.";e.s(t+"dash.flow")&&n.indexOf(e)<0&&n.push(e)}),F.call(t,e)}},y.setDashFlowInterval=function(e){var t=this,a=t.$2c;t.$2c=e,t.fp("dashFlowInterval",a,e),t.$3c!=u&&(w(t.$3c),delete t.$3c,t.enableDashFlow(e))},y.getDashFlowInterval=function(){return this.$2c},y.$4c=function(){var e,t,a,i=this,h=i.tx(),d=i.ty(),f=i._zoom,p=i.getWidth(),u=i.getHeight(),g={x:-h/f,y:-d/f,width:p/f,height:u/f},w=i.dm().$1c,v=i._56I,$=new l;if(w.forEach(function(t){v[t.getId()]&&(e=i.getDataUI(t),e&&(a=e._79o(),a&&$.add(a)))}),0!==$.size()&&($.each(function(e){n.intersectsRect(g,e)&&(t=n.unionRect(t,e))}),t&&(t&&(n.grow(t,s(1,1/f)),t.x=o(t.x*f)/f,t.y=o(t.y*f)/f,t.width=c(t.width*f)/f,t.height=c(t.height*f)/f,t=n.intersection(g,t)),t))){var _=i._canvas.getContext("2d");_.save(),_.lineCap=n.lineCap,_.lineJoin=n.lineJoin,r.translateAndScale(_,h,d,f),_.beginPath(),_.rect(t.x,t.y,t.width,t.height),_.clip(),_.clearRect(t.x,t.y,t.width,t.height),i.$5c(_,t),_.restore()}},y.$5c=function(e,t){var a,i,s=this;s._93db(e),s.each(function(o){s._56I[o._id]&&(a=s.getDataUI(o),a&&(i=a._79o(),(!t||n.intersectsRect(t,i))&&(a.$7c=!0,a._42(e),delete a.$7c)))}),s._92db(e)},y.enableDashFlow=function(e){var t=this;t.$3c==u&&(t.$3c=v(function(){t.$4c()},e||t.$2c||50))},y.disableDashFlow=function(){var e=this;w(e.$3c),delete e.$3c};var R=function(){var e=this,t=e._data,a=t instanceof h?"shape.":"edge.",n=t.s(a+"dash.pattern"),i=t.s(a+"dash.flow.reverse");if(n&&t.s(a+"dash")&&t.s(a+"dash.flow")&&e.$7c){var s=e.s(a+"dash.offset")||0,o=t.s(a+"dash.flow.step"),c=t.getStyleMap(),l=0;n.forEach(function(e){l+=e}),i&&(o=-o),s-=o,s%=l,c||(t._styleMap=c={}),c[a+"dash.offset"]=s}};I._80o=function(e){x.call(this,e),R.call(this)},m._80o=function(e){b.call(this,e),R.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);