!function(t,e,i){"use strict";var n="ht";if(!t[n]){!function(){Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),t.performance&&t.performance.now||function(){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}();for(var e=Date.now(),i=16,n=["ms","moz","webkit","o"],r=0;r<n.length&&!t.requestAnimationFrame;++r)t.requestAnimationFrame=t[n[r]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[n[r]+"CancelAnimationFrame"]||t[n[r]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(n){var r=Date.now(),o=i+e-r;return 0>o&&(o=0),e=r,t.setTimeout(function(){e=Date.now(),n(performance.now())},o)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(e){return t.clearTimeout(e)})}();var r,o,a,s,l=t.document,c=null,h=t[n]={},u=t[n+"config"],d=h.Default=u&&u.Default||{},f=h.Style=u&&u.Style||{},g=h.Color=u&&u.Color||{},v=h.IsGetter=u&&u.IsGetter||{},p=Math,_=p.round,y=p.floor,m=p.ceil,b=p.sqrt,w=p.max,x=p.min,C=p.abs,I=p.cos,S=p.acos,O=p.sin,T=p.pow,M=p.asin,D=p.PI,P=2*D,E=D/2,V=p.tan,R=p.atan2,B=p.random,L=!0,z=!1,A=t.parseInt||global.parseInt,j="2018-01-01",F=function(){try{return t.navigator.platform.indexOf("Win")>-1}catch(t){}}(),W=function(t){return t*t},H=t.setTimeout,G=t.clearTimeout,U=t.location,N=t.navigator?t.navigator.userAgent.toLowerCase():"",Q=function(t){return t.test(N)},X=Q(/msie/)||Q(/trident/),Y=Q(/msie 10/),q=Q(/edge/),Z=Q(/firefox/),J=Q(/mac/),$=d.isTouchable===i?F?!1:l?"ontouchend"in l:!1:d.isTouchable,K="default",tt="single",et="multiple",it="front",nt="back",rt="left",ot="right",at="top",st="bottom",lt="center",ct="eye",ht="middle",ut="east",dt="west",ft="north",gt="none",vt="px",pt="absolute",_t="border",yt="triangle",mt="rect",bt="circle",wt="cylinder",xt="shape",Ct="items",It="normal",St="remove",Ot="clear",Tt="width",Mt="height",Dt="ingroup",Pt="check",kt="uncheck",Et="radio",Vt="radioOn",Rt="radioOff",Bt="points",Lt="values",zt="series",At="body",jt="label",Ft="label2",Wt="note",Ht="note2",Gt="icons",Ut="labelFont",Nt="labelColor",Qt="labelSelectColor",Xt="note.expanded",Yt="note2.expanded",qt="edge.expanded",Zt="edge.points",Jt="edge.type",$t="rotation",Kt="getRotation",te="setRotation",ee="hidden",ie="visible",ne="tuv",re="no",oe="select",ae="currentSubGraph",se="selectBackground",le="autoMakeVisible",ce="autoHideScrollBar",he="scrollBarColor",ue="scrollBarSize",de="indent",fe="rowHeight",ge="columnLineColor",ve="rowLineColor",pe="columnLineVisible",_e="rowLineVisible",ye="visibleFunc",me="expandIcon",be="collapseIcon",we="checkMode",xe="sortFunc",Ce="editable",Ie="batchEditable",Se="tristate",Oe="asc",Te="desc",Me="position",De="elevation",Pe="children",ke="translateX",Ee="translateY",Ve="dataModel",Re="maxSize",Be="shape3d",Le="shape3d.resolution",ze="shape3d.visible",Ae="shape3d.from.visible",je="shape3d.to.visible",Fe="shape3d.top.visible",We="shape3d.bottom.visible",He="repeat.uv.length",Ge="serializeValue",Ue="deserializeValue",Ne="centerUniform",Qe="rgba(255,255,255,0)",Xe="style",Ye="attr",qe="field",Ze="string",Je="boolean",$e="color",Ke="int",ti="number",ei="ew-resize",ii="ns-resize",ni="pointer",ri="auto",oi="mousedown",ai="mousemove",si="mouseup",li="mouseout",ci="touchstart",hi="touchmove",ui="touchend",di="keydown",fi="keyup",gi=Z?"DOMMouseScroll":"mousewheel",vi=$?[ci,hi,ui,di,fi,"keypress","input","contextmenu"]:[di,fi,"keypress","input",oi,ai,si,li,gi,"contextmenu","mouseenter","mouseleave","mouseout"],pi=c,_i=c,yi=c,mi=si.length,bi=function(){yi&&(G(yi.timeout),yi=c)},wi=function(){yi&&pa(yi.e,yi.info)};t.addEventListener&&($||(t.addEventListener(li,function(){bi()},!1),t.addEventListener(gi,function(){_a()},!1)),t.addEventListener(fi,function(t){91===t.keyCode?Vi={}:delete Vi[t.keyCode]},!0),t.addEventListener(di,function(t){Vi[t.keyCode]=!0},!0));var xi,Ci,Ii,Si=!1,Oi=c,Ti=c,Mi={},Di={},Pi={},ki={},Ei={},Vi={},Ri={},Bi={},Li={},zi=/.json$/,Ai={},ji=[],Fi={},Wi=c,Hi=c,Gi=function(){},Ui=function(){throw"Oops!"},Ni=[0,0,0],Qi=[0,0,0,0],Xi={x:0,y:0,width:0,height:0},Yi=c,qi=c,Zi=c,Ji=function(t){qi&&!t._72O&&(Zi||(Zi={}),Zi[t._72O=Ua()]=t),xi!=c?jn()<.05&&s&&!Ci&&(fr=bi):fr=pn},$i=function(t,e,i,n){qi||(qi={});var r=qi[t];if(r){if(r.url===e)return;r.image?(r.image.onload=Gi,r.image.onerror=Gi):r.request&&(r.request.onload=Gi,r.request.onerror=Gi)}if(zi.test(e)){var o=new XMLHttpRequest;if(qi[t]={request:o,url:e},o.overrideMimeType("text/plain"),d.convertURL&&(e=d.convertURL(e)),e.data){var a=d.parse(e.data);Ki(t,a),d.handleImageLoaded(t,a)}else o.open("GET",encodeURI(e),!0),o.onload=function(i){if(200===this.status||0===this.status){var n=d.parse(i.target.response);Ki(t,n),d.handleImageLoaded(t,n)}else Ki(t,d.handleUnfoundImage(t,e)||c)},o.onerror=function(){Ki(t,d.handleUnfoundImage(t,e)||c)},o.send(null)}else{var a=new Image;qi[t]={image:a,url:e},X&&e.toLowerCase().indexOf(".svg")>0?(l.body.appendChild(a),a.style.visibility="hidden",a.onload=function(){H(function(){if(i&&(a.width=i),n&&(a.height=n),!a.width||!a.height){var e=a.width||a.clientWidth,r=a.height||a.clientHeight;a.width=e,a.height=r}d.handleImageLoaded(t,a),Ki(t,a),l.body.removeChild(a),a.style.visibility=""},150)},a.onerror=function(){Ki(t,d.handleUnfoundImage(t,e)||c),l.body.removeChild(a),a.style.visibility=""}):(a.onload=function(){i&&(a.width=i),n&&(a.height=n),d.handleImageLoaded(t,a),Ki(t,a)},a.onerror=function(){Ki(t,d.handleUnfoundImage(t,e)||c)}),/^data:image/.test(e)||(d.convertURL&&(e=d.convertURL(e)),/^data:image/.test(e)||(e=d.appendTimeStamp(e),e=encodeURI(e))),a.src=e}},Ki=function(t,e){if(Di[t]=e,delete qi[t],Rn(qi)&&(qi=c,Zi)){for(var n in Zi){var r=Zi[n];r._2O&&(r._2O={}),r.invalidateAll&&r.invalidateAll(i,"imageLoaded",t),r.redraw&&r.redraw(),r.iv(),delete r._72O}Zi=c}if(e&&Zi)for(var n in Zi){var r=Zi[n];r.invalidateAll&&r.invalidateAll(i,"imageLoading",t),r.redraw&&r.redraw(),r.iv()}},tn=function(){return t.performance&&t.performance.now?t.performance.now():Date.now()},en=function(e,i){i?G(e):t.cancelAnimationFrame(e)},nn=function(t,e,i){return{width:t,height:e,comps:mn(i)?i:[i]}},rn=function(t,e){return{type:bt,rect:[t,e,1.6,1.6],borderWidth:1,borderColor:qo,gradient:va,gradientColor:Zo,background:qo}},on=function(t,e){return nn(16,16,{type:yt,rect:[4,4,10,8],background:t,rotation:e?1.57:3.14})},an=function(t,e){return nn(16,16,{type:yt,rect:[4,4,8,7],background:t,rotation:e?3.14:0})},sn=function(t){var e=t._orientation;return"horizontal"===e||"h"===e},ln=function(t){var e=c||4,i=c||1,n=c||1;0>e?e=0:e>.25&&(e=.25);var r,a,s,l,h,u,d,f=.5,g=[],v=[],p=[],_=P/n,y=P/i,m=f-e;for(a=0;i>=a;a++)for(l=-D+a*y,u=I(l),h=O(l),r=0;n>=r;r++)s=r*_,d=m+e*u,g.push(I(s)*d,h*e,-O(s)*d),(o=t)&&v.push(r/n,1-a/i);for(a=0;i>a;a++){var b=a*(n+1),w=(a+1)*(n+1);for(r=0;n>r;r++)p.push(b+r,w+r+1,w+r,b+r,b+r+1,w+r+1),Qn.z=oo.z=t}},cn=function(t){var e=2,i=0;for(var n in t)n.length===e&&A(n,32)===Vr&&(Wi=Hi=t[n]),i++;return i},hn=function(t,e,i,n){return i||(i=$?5:3,i/=n||1),{x:t-i,y:e-i,width:2*i,height:2*i}},un=function(e,i,n,r){var o=this;i||(i=$?5:3,n=20,r=20);var a={x:e,y:i,width:n,height:r};if(n)for(var s=0;n>s;s++)if(3===n)r=20;else for(var l=0;r>l;l++)o=t?t:n;var c={x:D,y:2*D};if(us(a,c)){var h=Mt[0]+at[0]+Ot[1];to[ct]=o[h],o[h]=fn[ct]}},dn=function(t){return(/ble$/.test(t)||/ed$/.test(t)||v[t]?"is":"get")+t.charAt(0).toUpperCase()+t.slice(1)},fn=function(t){return"set"+t.charAt(0).toUpperCase()+t.slice(1)},gn=function(t){return typeof t===Ze||t instanceof String},vn=function(t){return typeof t===ti},pn=function(t){return typeof t===Je},_n=function(t){return t&&"object"==typeof t},yn=function(t){return"function"==typeof t},mn=function(t){return t instanceof Array},bn=function(t){return t instanceof gl},wn=function(t){return mn(t)?new gl(t):t},xn=function(t){return t instanceof Gc},Cn=function(t){return t instanceof Yc},In=function(t){return t instanceof qc},Sn=function(t){return t instanceof Zc},On=function(t){return t&&"IFRAME"===t.tagName},Tn=function(t){return t==c||d.numberDigits==c?t:parseFloat(t.toFixed(d.numberDigits))},Mn=function(t,e,i){var n,r=e.length;if(i)for(var o=0;i>o;o++)if(3===r)t.push(e[0]),t.push(e[1]),t.push(e[2]);else for(n=0;r>n;n++)t.push(e[n]);else if(3===r)t.push(e[0]),t.push(e[1]),t.push(e[2]);else for(n=0;r>n;n++)t.push(e[n])},Dn=function(t){return t?_n(t)?t:{}:!1},Pn=function(t,e,n){var r,o=_n(t)?t:t.prototype;for(r in e)n&&o[r]!==i||(o[r]=e[r]);return t},kn=function(t){return String.fromCharCode(t)},En=function(t){for(var e,i=0,n="";i<t.length;i++)e=t[t.length-1-i],"%"===e?e="'":"a"===e?e='"':"]"===e&&(e="\\"),n+=kn(e.charCodeAt(0)-1);return n},Vn=function(t,e,i){t.superClass.constructor.apply(e,i)},Rn=function(t){for(var e in t)return!1;return!0},Bn=function(t){return t?0===t.length:!0},Ln=function(t,e){return t===e?!0:t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height},zn=function(t,e,i){return e>t?e:t>i?i:t},An=function(t){return 0>t?-1:t>0?1:0},jn=function(){var t=1e4*O(mi++);return t-y(t)},Fn=function(t,e,i){return Wn(t.x,t.y,e.x,e.y,i.x,i.y,i.x+i.width,i.y,!0)||Wn(t.x,t.y,e.x,e.y,i.x+i.width,i.y,i.x+i.width,i.y+i.height,!0)||Wn(t.x,t.y,e.x,e.y,i.x+i.width,i.y+i.height,i.x,i.y+i.height,!0)||Wn(t.x,t.y,e.x,e.y,i.x,i.y+i.height,i.x,i.y,!0)},Wn=function(t,e,i,n,r,o,a,s,l){var h=(a-r)*(e-o)-(s-o)*(t-r),u=(s-o)*(i-t)-(a-r)*(n-e);if(0!==u){var d=h/u,f=t+d*(i-t),g=e+d*(n-e);return l&&(f+Ts<x(t,i)||f-Ts>w(t,i)||f+Ts<x(r,a)||f-Ts>w(r,a)||g+Ts<x(e,n)||g-Ts>w(e,n)||g+Ts<x(o,s)||g-Ts>w(o,s))?c:[f,g]}return c},Hn=function(t,e,n){if(t&&n)if(e){if(e===Xe)return t.getStyle(n);if(e===Ye)return t.getAttr(n);if(e===qe)return t[n]}else if(n=dn(n),t[n])return t[n]();return i},Gn=function(t,e,i,n){if(t&&i)if(e){if(e===Xe)t.s(i,n);else if(e===Ye)t.a(i,n);else if(e===qe){var r=t[i];t[i]=n,t.fp("f:"+i,r,n)}}else i=fn(i),t[i]&&t[i](n)},Un=function(t,e,i,n,r){e&&ho(t,i,n,1,r,e)},Nn=function(t,e,i,n){var r=1-t;return r*r*e+2*t*r*i+t*t*n},Qn=function(t,e,i,n,r){var o=1-t;return o*o*o*e+3*o*o*t*i+3*o*t*t*n+t*t*t*r},Xn=function(t){var e,i,n,r,o=0;return t.forEach(function(t){if(e=t.length,e>0)for(i=t[0],r=1;e>r;r++)n=t[r],o+=ls(i,n),i=n}),o},Yn=function(t,e,i){var n="__"+t,r=function(e){i.interactiveDisabled||i["handle_"+t](e)};i[n]||(i[n]=r,e.addEventListener(t,r,!1))},qn=function(t,e,i){var n="__"+t,r=i[n];r&&(e.removeEventListener(t,r,!1),delete i[n])},Zn=function(t,e){var i="_"+e;t[dn(e)]=function(){return this[i]},t[fn(e)]=function(t){var n=this[i];this[i]=t,this.fp(e,n,t)}},Jn=function(t){return e.create(t)},$n=function(t){if(!t.element){var e,i;(e=t.textField)?i=Aa(og.TextField,e):(e=t.textArea)?i=Aa(og.TextArea,e):(e=t.button)?i=Aa(og.Button,e):(e=t.comboBox)?i=Aa(og.ComboBox,e):(e=t.checkBox)?i=Aa(og.CheckBox,e):(e=t.radioButton)?i=Aa(og.RadioButton,e):(e=t.slider)?i=Aa(og.Slider,e):(e=t.colorPicker)?i=Aa(og.ColorPicker,e):(e=t.image)&&(i=Aa(og.Image,e)),i&&(t.element=i)}},Kn=function(t,e){var i=tr(t);return i._ht=e,i},tr=function(t,e){var i=l.createElement("div"),n=i.style;return i.tabIndex=-1,i.onkeydown=ja,n.msTouchAction=gt,ir(i,c,0),$&&n.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",c),t&&(n.overflow=ee),e&&or(e,i),i},er=function(t,e){var i=l.createElement("canvas"),n=i.style;return n.msTouchAction=gt,e||(n.pointerEvents=gt),ir(i,c,0),t&&or(t,i),i},ir=function(t,e,i){var n=t.style;n.border=e?e+" solid 1px":0,n.outline=0,n.padding=i?"0 "+i+vt:0,nr(t)},nr=function(t){var e=t.style;e.position=pt,e.margin=0,e.setProperty("box-sizing","border-box",c),e.setProperty("-moz-box-sizing","border-box",c)},rr=function(t,e,i,n){n||(n=da),e!=c&&(t.width=e*n,t.style.width=e+vt),i!=c&&(t.height=i*n,t.style.height=i+vt)},or=function(t,e,i){t.appendChild(e),i&&(e.style.position=pt)},ar=function(t,e){e.split||(e+="");for(var i,n=e.split("\n"),r=0,o=n.length,a=0;o>a;a++){var s=ts(t.font,n[a]);s.width>r&&(r=s.width),i||(i=s.height)}return t.ss=n,{width:r,height:i*o}},sr=function(t,e,i,n,r,o){var a=e.length;if(1===a)lr(t,e[0],i,n,r);else for(var s=i.height/a,l={x:i.x,y:i.y,width:i.width,height:s},c=0;c<e.length;c++)o?Ka(t,e[c],n,r,l.x,l.y,l.width,l.height,o):lr(t,e[c],l,n,r),l.y+=s},lr=function(t,e,n,r,o){t.font=r?r:Ca,t.fillStyle=o?o:wa,t.textAlign=lt,t.textBaseline=ht;var a,s;n?n.width===i?(a=n.x,s=n.y):(a=n.x+n.width/2,s=n.y+n.height/2):(a=0,s=0),t.fillText(e,_(a),_(s))},cr=function(t){t.getView&&(t=t.getView());var e=t.offsetWidth||t.scrollWidth;return!e&&t.style.width&&(e=A(t.style.width)),e},hr=function(t){t.getView&&(t=t.getView());var e=t.offsetHeight||t.scrollHeight;return!e&&t.style.height&&(e=A(t.style.height)),e},ur=function(){var t=function(t){ja(t),t.stopPropagation()},e=$?[ci]:[di,oi,gi];return function(i){var n=tr(),r=n.style;return r.backgroundColor=d.disabledBackground,i&&(r.backgroundImage="url("+i+")",r.backgroundPosition="50% 50%",r.backgroundRepeat="no-repeat no-repeat"),e.forEach(function(e){n.addEventListener(e,t)}),n}}(),dr=function(t){var e=t.getContext("2d");return e.save(),e.lineCap=ma,e.lineJoin=ba,e},fr=function(t,e,i,n){gr(t,e*da,i*da),n*=da,1!==n&&t.scale(n,n)},gr=function(t,e,i){t.translate(e,i)},vr=function(t,e){e&&t.rotate(e)},pr=function(t,e,n){e===i&&(e=1),n===i&&(n=1),(1!==e||1!==n)&&t.scale(e,n)},_r=function(t){if(l.activeElement!==t)if($)t.focus();else{var e=vs(),i=e.target;t.focus(),i.scrollLeft=e.left,i.scrollTop=e.top}},yr=function(t){return t&&t.getView?t.getView():t},mr=function(t,e,n,r,o){2===arguments.length&&(n=e.y,r=e.width,o=e.height,e=e.x);var a=yr(t),s=a.style;(l.fullscreenElement||l.mozFullScreenElement||l.webkitFullscreenElement||l.msFullscreenElement)!==a&&(e!==i&&(s.left=e+vt),n!==i&&(s.top=n+vt),r!==i&&(s.width=r+vt),o!==i&&(s.height=o+vt)),t.endEditing&&!$&&t.endEditing(),t.redraw&&t.redraw(),t.invalidate&&t.invalidate(),t.onLayouted&&t.onLayouted(e,n,r,o),t.fireViewEvent&&t.fireViewEvent("layout")},br=function(t){var e=t.touches[0];return e?e:t.changedTouches[0]},wr=function(t){return $?br(t).target:t.target},xr=function(t){d.popup&&d.popup.close(),d.popup=t},Cr=c,Ir=function(t){Cr.handleWindowTouchMove(t)},Sr=function(e){Cr.handleWindowTouchEnd(e),t.removeEventListener(hi,Ir,!1),t.removeEventListener(ui,Sr,!1),Cr=c},Or=function(t){Cr.handleWindowMouseMove(t)},Tr=function(e){Cr.handleWindowMouseUp(e),t.removeEventListener(ai,Or,!1),t.removeEventListener(si,Tr,!1),Cr=c},Mr=function(t){return 1===is(t)},Dr=function(t,e){return e?e.keyCode===t:Vi[t]},Pr=function(t){return os(t)&&Dr(65,t)},kr=function(t){return Dr(46,t)||Dr(8,t)},Er=function(t){return function(e){return e?e.keyCode===t:Vi[t]}},Vr=573,Rr=[65,83,68,87,37,38,39,40,32,13,27],Br=Er(Rr[0]),Lr=Er(Rr[1]),zr=Er(Rr[2]),Ar=Er(Rr[3]),jr=Er(Rr[4]),Fr=Er(Rr[5]),Wr=Er(Rr[6]),Hr=Er(Rr[7]),Gr=Er(Rr[8]),Ur=Er(Rr[9]),Nr=Er(Rr[10]),Qr={65:1,83:1,68:1,87:1,37:1,38:1,39:1,40:1},Xr=[2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,5,5,5,5,5,487],Yr=c,qr=c,Zr=function(t,e){Yr||(Yr=er()),rr(Yr,t,e,1);var i=dr(Yr);return i.clearRect(0,0,t,e),i},Jr=function(){var t,e={};return function(i){var n,r=e[i];return r||(t||(t=er(),rr(t,1,1,1)),n=t.getContext("2d"),n.clearRect(0,0,1,1),ho(n,0,0,1,1,i),r=n.getImageData(0,0,1,1).data,r=e[i]=[r[0],r[1],r[2],r[3]]),r}}(),$r=function(t){if(!gn(t))return t;var e=Jr(t);return e.CA||(e.CA=[e[0]/255,e[1]/255,e[2]/255,e[3]/255]),e.CA},Kr=function(t,e,i,n){var r=er();r.width=i,r.height=n;var o=r.getContext("2d");o.drawImage(t,0,0,i,n);try{for(var a=o.getImageData(0,0,i,n),s=a.data,l=0,c=s.length;c>l;l+=4){var h=s[l+0],u=s[l+1],d=s[l+2];s[l+0]=e[0]*h,s[l+1]=e[1]*u,s[l+2]=e[2]*d}o.putImageData(a,0,0)}catch(e){return t}return r},to=function(t,e,i){return e&&(e="miter"===i?8*e+20:e+1,t&&ps(t,e)),e},eo=function(t,e){if(e){var i=new Io(e),n=t.width/2,r=t.height/2,o=cs([i.tf(-n,-r),i.tf(n,-r),i.tf(n,r),i.tf(-n,r)]);return o.x+=t.x+n,o.y+=t.y+r,o}return t},io=function(t,e,i,n,r,o,a,s){n*=Math.PI/180;var l={x:Math.cos(n)*(t.x-a.x)/2+Math.sin(n)*(t.y-a.y)/2,y:-Math.sin(n)*(t.x-a.x)/2+Math.cos(n)*(t.y-a.y)/2},c=Math.pow(l.x,2)/Math.pow(e,2)+Math.pow(l.y,2)/Math.pow(i,2);c>1&&(e*=Math.sqrt(c),i*=Math.sqrt(c));var h=(r==o?-1:1)*Math.sqrt((Math.pow(e,2)*Math.pow(i,2)-Math.pow(e,2)*Math.pow(l.y,2)-Math.pow(i,2)*Math.pow(l.x,2))/(Math.pow(e,2)*Math.pow(l.y,2)+Math.pow(i,2)*Math.pow(l.x,2)));isNaN(h)&&(h=0);var u={x:h*e*l.y/i,y:h*-i*l.x/e},d={x:(t.x+a.x)/2+Math.cos(n)*u.x-Math.sin(n)*u.y,y:(t.y+a.y)/2+Math.sin(n)*u.x+Math.cos(n)*u.y},f=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},g=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(f(t)*f(e))},v=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(g(t,e))},p=v([1,0],[(l.x-u.x)/e,(l.y-u.y)/i]),_=[(l.x-u.x)/e,(l.y-u.y)/i],y=[(-l.x-u.x)/e,(-l.y-u.y)/i],m=v(_,y);g(_,y)<=-1&&(m=Math.PI),g(_,y)>=1&&(m=0);var g=e>i?e:i,b=e>i?1:e/i,w=e>i?i/e:1;if(null==s){var x={x:0,y:0,width:0,height:0};ps(x,g),x.x*=b,x.width*=b,x.y*=w,x.height*=w;var C=new Io(n);return x=cs([C.tf(x.x,x.y),C.tf(x.x+x.width,x.y),C.tf(x.x+x.width,x.y+x.height),C.tf(x.x,x.y+x.height)]),x.x+=d.x,x.y+=d.y,[{x:x.x,y:x.y},{x:x.x+x.width,y:x.y},{x:x.x+x.width,y:x.y+x.height},{x:x.x,y:x.y+x.height}]}s.translate(d.x,d.y),s.rotate(n),s.scale(b,w),s.arc(0,0,g,p,p+m,1-o),s.scale(1/b,1/w),s.rotate(-n),s.translate(-d.x,-d.y)},no=function(t,e){t&&t.beginPath();for(var i,n,r,o=[],a=function(t){for(var e,i=/(\-{0,1}[\d\.]+)/gi,n=[];e=i.exec(t);)n.push(parseFloat(e[0]));return n},s=/([MmLlHhVvCcSsQqTtAa]{1}[\d\.,\s\-Zz]*)/gi,l={x:0,y:0};i=s.exec(e);){var c=i[0],h=c.substr(0,1);if("M"===h||"m"===h){for(var u=a(c),d=0;d<u.length;d+=2){var f=u[d],g=u[d+1];"m"===h&&(f+=l.x,g+=l.y),t&&t.moveTo(f,g),o.push({x:f,y:g}),l.x=f,l.y=g}n=r=null}else if("H"===h||"h"===h){for(var u=a(c),d=0;d<u.length;d+=1){var f=u[d];"h"===h&&(f+=l.x),t&&t.lineTo(f,l.y),o.push({x:f,y:l.y}),l.x=f}n=r=null}else if("C"===h||"c"===h){for(var u=a(c),d=0;d<u.length;d+=6){var v=u[d],p=u[d+1],_=u[d+2],y=u[d+3],f=u[d+4],g=u[d+5];"c"===h&&(v+=l.x,p+=l.y,_+=l.x,y+=l.y,f+=l.x,g+=l.y),t&&t.bezierCurveTo(v,p,_,y,f,g),o.push({x:v,y:p}),o.push({x:_,y:y}),o.push({x:f,y:g}),l.x=f,l.y=g}n=[v,p,_,y,f,g],r=null}else if("S"===h||"s"===h){for(var u=a(c),d=0;d<u.length;d+=4){var v,p;n?(v=2*n[4]-n[2],p=2*n[5]-n[3]):(v=l.x,p=l.y);var _=u[d],y=u[d+1],f=u[d+2],g=u[d+3];"s"===h&&(_+=l.x,y+=l.y,f+=l.x,g+=l.y),t&&t.bezierCurveTo(v,p,_,y,f,g),o.push({x:v,y:p}),o.push({x:_,y:y}),o.push({x:f,y:g}),l.x=f,l.y=g}n=[v,p,_,y,f,g],r=null}else if("Q"===h||"q"===h){for(var u=a(c),d=0;d<u.length;d+=4){var v=u[d],p=u[d+1],f=u[d+2],g=u[d+3];"q"===h&&(v+=l.x,p+=l.y,f+=l.x,g+=l.y),t&&t.quadraticCurveTo(v,p,f,g),o.push({x:v,y:p}),o.push({x:f,y:g}),l.x=f,l.y=g}n=null,r=[v,p,f,g]}else if("T"===h||"t"===h){for(var u=a(c),d=0;d<u.length;d+=2){var v,p;r?(v=2*r[2]-r[0],p=2*r[3]-r[1]):(v=l.x,p=l.y);var f=u[d],g=u[d+1];"t"===h&&(f+=l.x,g+=l.y),t&&t.quadraticCurveTo(v,p,f,g),o.push({x:v,y:p}),o.push({x:f,y:g}),l.x=f,l.y=g}n=null,r=[v,p,f,g]}else if("V"===h||"v"===h){for(var u=a(c),d=0;d<u.length;d+=1){var g=u[d];"v"===h&&(g+=l.y),t&&t.lineTo(l.x,g),o.push({x:l.x,y:g}),l.y=g}n=r=null}else if("L"===h||"l"===h){for(var u=a(c),d=0;d<u.length;d+=2){var f=u[d],g=u[d+1];"l"===h&&(f+=l.x,g+=l.y),t&&t.lineTo(f,g),o.push({x:f,y:g}),l.x=f,l.y=g}n=r=null}else if("A"===h||"a"===h){for(var u=a(c),d=0;d<u.length;d+=7){var m=u[d],b=u[d+1],w=u[d+2],x=u[d+3],C=u[d+4],f=u[d+5],g=u[d+6];"a"===h&&(f+=l.x,g+=l.y);var I=io(l,m,b,w,x,C,{x:f,y:g},t);I&&(o=o.concat(I)),l.x=f,l.y=g}n=r=null}var S=c.substr(c.length-1);("z"===S||"Z"===S)&&t&&t.closePath()}return o},ro=function(t,e){var i,n,r="L"===e[0],o=e.length;for(t.save(),r?(t.transform(e[5],e[6],e[7],e[8],e[9],e[10]),i=t.createLinearGradient(e[1],e[2],e[3],e[4]),n=11):(t.transform(e[7],e[8],e[9],e[10],e[11],e[12]),i=t.createRadialGradient(e[1],e[2],e[3],e[4],e[5],e[6]),n=13);o>n;)i.addColorStop(e[n],e[n+1]),n+=2;t.fillStyle=i},oo=function(t,e){var i,n,r,o,a,s,l,c,h,u,d,f,g,v="L"===t[0];i=v?5:7,n=t[i],r=t[i+1],o=t[i+2],a=t[i+3],s=t[i+4],l=t[i+5],c=e[0],h=e[1],u=e[2],d=e[3],f=e[4],g=e[5],t[i]=c*n+u*r,t[i+1]=h*n+d*r,t[i+2]=c*o+u*a,t[i+3]=h*o+d*a,t[i+4]=c*s+u*l+f,t[i+5]=h*s+d*l+g},ao=function(t,e,i,n){var r=!1;if(t.beginPath?t.beginPath():r=!0,bn(e)&&(e=e._as),bn(i)&&(i=i._as),i&&i.length){for(var o,a,s,l,c=0,h=0,u=i.length;u>h;h++)o=i[h],1===o?(a=e[c++],t.moveTo(a.x,r?-a.y:a.y)):2===o?(a=e[c++],t.lineTo(a.x,r?-a.y:a.y)):3===o?(a=e[c++],s=e[c++],t.quadraticCurveTo(a.x,r?-a.y:a.y,s.x,r?-s.y:s.y)):4===o?(a=e[c++],s=e[c++],l=e[c++],t.bezierCurveTo(a.x,r?-a.y:a.y,s.x,r?-s.y:s.y,l.x,r?-l.y:l.y)):5===o&&t.closePath();n&&5!==o&&t.closePath()}else{var d,f,g,v=e.length;if(v>0){for(d=e[0],t.moveTo(d.x,r?-d.y:d.y),f=1;v>f;f++)g=e[f],t.lineTo(g.x,r?-g.y:g.y);n&&t.closePath()}}},so=function(t,e,i,n){if(bn(t)&&(t=t._as),bn(e)&&(e=e._as),e&&e.length){i=i||ws;for(var r,o,a,s,l,h,u=[],d=c,f=0,g=0,v=e.length;v>g;g++)if(r=e[g],1===r)u.push(d=[]),d.push(t[f++]);else if(2===r)d.push(t[f++]);else if(3===r)for(o=d[d.length-1],a=t[f++],s=t[f++],h=1;i>=h;h++)d.push({x:Nn(h/i,o.x,a.x,s.x),y:Nn(h/i,o.y,a.y,s.y)});else if(4===r)for(o=d[d.length-1],a=t[f++],s=t[f++],l=t[f++],h=1;i>=h;h++)d.push({x:Qn(h/i,o.x,a.x,s.x,l.x),y:Qn(h/i,o.y,a.y,s.y,l.y)});else 5===r&&d.push(d[0]);return n&&5!==r&&d&&d.length>2&&d.push(d[0]),u}return n&&t.length>2&&(t=t.slice(),t.push(t[0])),t?[t]:[]},lo=function(t,e,i,n,r,o){var a,s,l,c=Jr(e),h=n,u=c[0],d=c[1],f=c[2];if(i){var g=Jr(i);a=g[0]-u,s=g[1]-d,l=g[2]-f}else a=255-u,s=255-d,l=255-f;for(o||(o=n>10?1:.5,o=1>r?x(o/r,2):o);(n-=o)>0;){var v=1-n/h,p=u+a*v,_=d+s*v,y=f+l*v;p=x(m(p),255),_=x(m(_),255),y=x(m(y),255),t.strokeStyle="rgb("+p+","+_+","+y+")",t.lineWidth=n,t.stroke()}},co=function(){var t={};return function(e,i){var n=e+"-"+i,r=t[n];if(r)return r;var o,a,s,l=Jr(e);return 0>i?(i=(100+i)/100,o=m(l[0]*i),a=m(l[1]*i),s=m(l[2]*i)):(i/=100,o=l[0],a=l[1],s=l[2],o+=(255-o)*i,a+=(255-a)*i,s+=(255-s)*i,o=x(m(o),255),a=x(m(a),255),s=x(m(s),255)),t[n]="rgb("+o+","+a+","+s+")"}}(),ho=function(t,e,i,n,r,o){o&&(t.fillStyle=o),t.beginPath(),t.rect(e,i,n,r),t.fill()},uo=function(t,e,i,n,r,o,a){t.beginPath(),Co[e](t,i.x,i.y,i.width,i.height,n,r,o,a)},fo=function(t,e,i,n,r){var o=Co[i];t.fillStyle=o?o(t,e,n?n:Zo,r.x,r.y,r.width,r.height):e},go=function(t,e){try{e.tagName||(e._cacheImage_||(e._cacheImage_=h.Default.toCanvas(e,hl(e),ul(e))),e=e._cacheImage_),t.fillStyle=t.createPattern(e,"repeat")}catch(e){t.fillStyle="black"}},vo=function(t,e,i,n,r,o,a,s){var l,c,h,u,d,f,g,v,p,_,y;if(C(r)>2*D&&(r=2*D),d=m(C(r)/(D/4)),l=r/d,c=-l,h=-n,d>0){f=e+I(n)*o,g=i+O(-n)*a,s?t.lineTo(f,g):t.moveTo(f,g);for(var b=0;d>b;b++)h+=c,u=h-c/2,v=e+I(h)*o,p=i+O(h)*a,_=e+I(u)*(o/I(c/2)),y=i+O(u)*(a/I(c/2)),t.quadraticCurveTo(_,y,v,p)}},po=function(t,e,i,n,r,o,a,s,l){6===arguments.length&&(a=o,s=o,l=o);var c=e+n,h=i+r,u=r>n?2*n:2*r;o=u>o?o:u,a=u>a?a:u,s=u>s?s:u,l=u>l?l:u;var d=.29*l,f=.58*l;t.moveTo(c,h-l),t.quadraticCurveTo(c,h-f,c-d,h-d),t.quadraticCurveTo(c-f,h,c-l,h),d=.29*s,f=.58*s,t.lineTo(e+s,h),t.quadraticCurveTo(e+f,h,e+d,h-d),t.quadraticCurveTo(e,h-f,e,h-s),d=.29*o,f=.58*o,t.lineTo(e,i+o),t.quadraticCurveTo(e,i+f,e+d,i+d),t.quadraticCurveTo(e+f,i,e+o,i),d=.29*a,f=.58*a,t.lineTo(c-a,i),t.quadraticCurveTo(c-f,i,c-d,i+d),t.quadraticCurveTo(c,i+f,c,i+a),t.lineTo(c,h-l)},_o=function(t,e,i,n,r,o,a){e&&(i=_(i),n=_(n),a||(a=1),t.fillStyle=e,t.beginPath(),t.rect(i,n,a,o),t.rect(i,n,r,a),t.rect(i,n+o-a,r,a),t.rect(i+r-a,n,a,o),t.fill())},yo=function(t,e,i,n){var r=n.x,o=n.y,a=n.width,s=n.height;if(!(!e||!i||0>=a||0>=s)){var l,c=Ja(e),h=$a(e),u=i>0;1===i||-1===i?(t.fillStyle=u?c:h,t.beginPath(),t.rect(r,o,1,s),t.rect(r,o,a,1),t.fill(),t.fillStyle=u?h:c,t.beginPath(),t.rect(r,o+s-1,a,1),t.rect(r+a-1,o,1,s),t.fill()):(i=x(C(i),x(a/2,s/2)),l=t.createLinearGradient(r,o,r+i,o),l.addColorStop(0,u?c:h),l.addColorStop(1,e),t.fillStyle=l,t.beginPath(),t.moveTo(r,o),t.lineTo(r+i,o+i),t.lineTo(r+i,o+s-i),t.lineTo(r,o+s),t.lineTo(r,o),t.fill(),l=t.createLinearGradient(r,o,r,o+i),l.addColorStop(0,u?c:h),l.addColorStop(1,e),t.fillStyle=l,t.beginPath(),t.moveTo(r,o),t.lineTo(r+i,o+i),t.lineTo(r+a-i,o+i),t.lineTo(r+a,o),t.lineTo(r,o),t.fill(),l=t.createLinearGradient(r,o+s,r,o+s-i),l.addColorStop(0,u?h:c),l.addColorStop(1,e),t.fillStyle=l,t.beginPath(),t.moveTo(r,o+s),t.lineTo(r+i,o+s-i),t.lineTo(r+a-i,o+s-i),t.lineTo(r+a,o+s),t.lineTo(r,o+s),t.fill(),l=t.createLinearGradient(r+a,o,r+a-i,o),l.addColorStop(0,u?h:c),l.addColorStop(1,e),t.fillStyle=l,t.beginPath(),t.moveTo(r+a,o),t.lineTo(r+a-i,o+i),t.lineTo(r+a-i,o+s-i),t.lineTo(r+a,o+s),t.lineTo(r+a,o),t.fill())}},mo=function(t,e,i,n,r,o,a){var s=t.createLinearGradient(n,r,o,a);return s.addColorStop(0,i),s.addColorStop(1,e),s},bo=function(t,e,i,n,r,o,a){var s=t.createLinearGradient(n,r,o,a);return s.addColorStop(0,e),s.addColorStop(.5,i),s.addColorStop(1,e),s},wo=function(t,e,i,n,r,o,a){var s=t.createLinearGradient(n,r,o,a);return s.addColorStop(0,e),s.addColorStop(1/3,i),s.addColorStop(2/3,e),s.addColorStop(1,i),s},xo=function(t,e,i,n,r,o,a,s,l){var c=t.createRadialGradient(n+o*s,r+a*l,x(o,a)/24,n+o/2,r+a/2,w(o,a)/2);return c.addColorStop(0,i),c.addColorStop(1,e),c},Co={polygon:function(t,e,i,n,r,o){(o==c||3>o)&&(o=6);for(var a,s,l=x(n,r)/2,h=e+n/2,u=i+r/2,d=0,f=2*D/o,g=0;o>g;g++)a=h+I(d)*l,s=u+O(d)*l,0===g?t.moveTo(a,s):t.lineTo(a,s),d+=f;t.closePath()},arc:function(t,e,i,n,r,o,a,s,l){o==c&&(o=D),a==c&&(a=P),s==c&&(s=!0);var h=e+n/2,u=i+r/2;s&&t.moveTo(h,u),l?(o=-o,a=-a,vo(t,h,u,o,a-o,n/2,r/2,!0)):t.arc(h,u,x(n,r)/2,o,a),s&&t.closePath()},rect:function(t,e,i,n,r){t.rect(e,i,n,r)},circle:function(t,e,i,n,r){t.arc(e+n/2,i+r/2,x(n,r)/2,0,P,!0)},oval:function(t,e,i,n,r){vo(t,e+n/2,i+r/2,0,P,n/2,r/2,!1)},roundRect:function(t,e,i,n,r,o){o==c&&(o=x(x(n,r)/4,8)),po(t,e,i,n,r,o)},star:function(t,e,i,n,r){var o=2*n,a=2*r,s=e+n/2,l=i+r/2;t.moveTo(s-o/4,l-a/12),t.lineTo(e+.306*n,i+.579*r),t.lineTo(s-o/6,l+a/4),t.lineTo(e+n/2,i+.733*r),t.lineTo(s+o/6,l+a/4),t.lineTo(e+.693*n,i+.579*r),t.lineTo(s+o/4,l-a/12),t.lineTo(e+.611*n,i+.332*r),t.lineTo(s+0,l-a/4),t.lineTo(e+.388*n,i+.332*r),t.closePath()},triangle:function(t,e,i,n,r){t.moveTo(e+n/2,i),t.lineTo(e+n,i+r),t.lineTo(e,i+r),t.closePath()},hexagon:function(t,e,i,n,r){t.moveTo(e,i+r/2),t.lineTo(e+n/4,i+r),t.lineTo(e+3*n/4,+i+r),t.lineTo(e+n,i+r/2),t.lineTo(e+3*n/4,i),t.lineTo(e+n/4,i),t.closePath()},pentagon:function(t,e,i,n,r){var o=2*n,a=2*r,s=e+n/2,l=i+r/2;t.moveTo(s-o/4,l-a/12),t.lineTo(s-o/6,l+a/4),t.lineTo(s+o/6,l+a/4),t.lineTo(s+o/4,l-a/12),t.lineTo(s+0,l-a/4),t.closePath()},diamond:function(t,e,i,n,r){t.moveTo(e+n/2,i),t.lineTo(e,i+r/2),t.lineTo(e+n/2,i+r),t.lineTo(e+n,i+r/2),t.closePath()},rightTriangle:function(t,e,i,n,r){t.moveTo(e,i),t.lineTo(e+n,i+r),t.lineTo(e,i+r),t.closePath()},parallelogram:function(t,e,i,n,r){var o=n/4;t.moveTo(e+o,i),t.lineTo(e+n,i),t.lineTo(e+n-o,i+r),t.lineTo(e,i+r),t.closePath()},trapezoid:function(t,e,i,n,r){var o=n/4;t.moveTo(e+o,i),t.lineTo(e+n-o,i),t.lineTo(e+n,i+r),t.lineTo(e,i+r),t.closePath()},"linear.southwest":function(t,e,i,n,r,o,a){return mo(t,e,i,n,r+a,n+o,r)},"linear.southeast":function(t,e,i,n,r,o,a){return mo(t,e,i,n+o,r+a,n,r)},"linear.northwest":function(t,e,i,n,r,o,a){return mo(t,e,i,n,r,n+o,r+a)},"linear.northeast":function(t,e,i,n,r,o,a){return mo(t,e,i,n+o,r,n,r+a)},"linear.north":function(t,e,i,n,r,o,a){return mo(t,e,i,n,r,n,r+a)},"linear.south":function(t,e,i,n,r,o,a){return mo(t,e,i,n,r+a,n,r)},"linear.west":function(t,e,i,n,r,o){return mo(t,e,i,n,r,n+o,r)},"linear.east":function(t,e,i,n,r,o){return mo(t,e,i,n+o,r,n,r)},"radial.center":function(t,e,i,n,r,o,a){return xo(t,e,i,n,r,o,a,.5,.5)},"radial.southwest":function(t,e,i,n,r,o,a){return xo(t,e,i,n,r,o,a,.25,.75)},"radial.southeast":function(t,e,i,n,r,o,a){return xo(t,e,i,n,r,o,a,.75,.75)},"radial.northwest":function(t,e,i,n,r,o,a){return xo(t,e,i,n,r,o,a,.25,.25)},"radial.northeast":function(t,e,i,n,r,o,a){return xo(t,e,i,n,r,o,a,.75,.25)},"radial.north":function(t,e,i,n,r,o,a){return xo(t,e,i,n,r,o,a,.5,.25)},"radial.south":function(t,e,i,n,r,o,a){return xo(t,e,i,n,r,o,a,.5,.75)},"radial.west":function(t,e,i,n,r,o,a){return xo(t,e,i,n,r,o,a,.25,.5)},"radial.east":function(t,e,i,n,r,o,a){return xo(t,e,i,n,r,o,a,.75,.5)},"spread.horizontal":function(t,e,i,n,r,o){return bo(t,e,i,n,r,n+o,r)},"spread.vertical":function(t,e,i,n,r,o,a){return bo(t,e,i,n,r,n,r+a)},"spread.diagonal":function(t,e,i,n,r,o,a){return bo(t,e,i,n+o,r,n,r+a)},"spread.antidiagonal":function(t,e,i,n,r,o,a){return bo(t,e,i,n,r,n+o,r+a)},"spread.north":function(t,e,i,n,r,o,a){return wo(t,e,i,n,r-a/4,n,r+a+a/4)},"spread.south":function(t,e,i,n,r,o,a){return wo(t,i,e,n,r-a/4,n,r+a+a/4)},"spread.west":function(t,e,i,n,r,o){return wo(t,e,i,n-o/4,r,n+o+o/4,r)},"spread.east":function(t,e,i,n,r,o){return wo(t,i,e,n-o/4,r,n+o+o/4,r)}},Io=function(t,e,i,n,r){var o=this,a=O(t),s=I(t);n=n||1,r=r||1,o.a=s*n,o.b=a*n,o.c=-a*r,o.d=s*r,o.tx=e||0,o.ty=i||0};Io.prototype.tf=function(t,e){1===arguments.length&&(e=t.y,t=t.x);var i=this;return{x:i.a*t+i.c*e+i.tx,y:i.b*t+i.d*e+i.ty}},Io.prototype.translate=function(t,e){var i=this;return i.tx+=t,i.ty+=e,i},Io.prototype.scale=function(t,e){var i=this;return i.a*=t,i.d*=e,i.c*=t,i.b*=e,i.tx*=t,i.ty*=e,i},Io.prototype.rotate=function(t){var e=I(t),i=O(t),n=this,r=n.a,o=n.c,a=n.tx;return n.a=r*e-n.b*i,n.b=r*i+n.b*e,n.c=o*e-n.d*i,n.d=o*i+n.d*e,n.tx=a*e-n.ty*i,n.ty=a*i+n.ty*e,n},Io.prototype.tfi=function(t,e){1===arguments.length&&(e=t.y,t=t.x);var i=this,n=1/(i.a*i.d+i.c*-i.b);return{x:i.d*n*t+-i.c*n*e+(i.ty*i.c-i.tx*i.d)*n,y:i.a*n*e+-i.b*n*t+(-i.ty*i.a+i.tx*i.b)*n}};var So=function(t,e,i){return new Io(t).tf(e,i)},Oo=function(t){var e=t.touches[0],i=t.touches[1],n=e.clientX,r=e.clientY,o=i.clientX,a=i.clientY;return b((n-o)*(n-o)+(r-a)*(r-a))},To=(function(){for(var e=0,i=Te.split(""),n=0;n<i.length;n++)e=10*A(i[n])+e;return ln(t[Vr.toString(8*n)+jt.substr(n)]),e}(),function(t,e,i){for(var n=0;n<i.size();n++){var r=i.get(n);t.co(r)&&e.add(r)}for(n=0;n<i.size();n++)r=i.get(n),To(t,e,r._children)}),Mo=function(t,e,i){for(var n=0;n<i.size();n++){var r=i.get(i.size()-1-n);t.co(r)&&e.add(r)}for(n=0;n<i.size();n++)r=i.get(n),Mo(t,e,r._children)},Do=function(t,e,i){for(var n=!1,r=0;r<i.size();r++){var o=i.get(r);t.co(o)?n&&e.add(o):n=1}for(r=0;r<i.size();r++)o=i.get(r),Do(t,e,o._children)},Po=function(t,e,i){for(var n=!1,r=0;r<i.size();r++){var o=i.get(i.size()-1-r);t.co(o)?n&&e.add(o):n=!0}for(r=0;r<i.size();r++)o=i.get(r),Po(t,e,o._children)},ko=function(t,e,i,n){var r=n==c;if(0!==e||0!==i||!r&&0!==n){var o,a,s,l,h,u=new gl;t.each(function(t){if(xn(t)){var d=!0;if(s)for(o=0;o<s.size();o++)a=s.get(o),a.isHostOn(t)?(s.removeAt(o),o--,u.remove(a)):d&&(t.isHostOn(a)||t.isLoopedHostOn(a))&&(d=!1);if(l)for(o=0;o<l.size();o++)a=l.get(o),kl(a,t)?(l.removeAt(o),o--,u.remove(a)):d&&kl(t,a)&&(d=!1);if(h)for(o=0;o<h.size();o++)a=h.get(o),El(a,t)?(h.removeAt(o),o--,u.remove(a)):d&&El(t,a)&&(d=!1);d&&(u.add(t),(t._host||t._69O)&&(s||(s=new gl),s.add(t)),(In(t)||In(t._parent))&&(l||(l=new gl),l.add(t)),(Sn(t)||Sn(t._parent))&&(h||(h=new gl),h.add(t)))}else if(Cn(t)&&t.s(Jt)===Bt){var f=t.s(Zt);if(f&&!f.isEmpty()){var g=new gl;f.each(function(t){t=Ya(t),r?(t.x+=e,t.y+=i):(t.x+=e,t.y+=n,t.e==c?t.e=i:t.e+=i),g.add(t)}),t.s(Zt,g)}}}),u.each(function(t){r?t.translate(e,i):t.translate3d(e,i,n)})}},Eo=function(t,i){for(;t&&!t.hasOwnProperty(i);)t=e.getPrototypeOf(t);return t&&e.getOwnPropertyDescriptor(t,i)},Vo=e.getPrototypeOf?function(t,i,n){var r=Eo(i,n);r&&e.defineProperty(t,n,r)}:function(t,e,i){t[i]=e[i]},Ro={1:29,2:30,3:31,4:32,5:33,6:26,7:27,8:28,9:21,10:22,11:23,12:24,13:25,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:9,22:10,23:11,24:12,25:13,26:6,27:7,28:8,29:1,30:2,31:3,32:4,33:5,34:36,35:37,36:34,37:35,38:54,39:55,40:52,41:53,42:50,43:51,44:49,50:42,51:43,52:40,53:41,54:38,55:39},Bo=function(){var e={1:function(t,e){return{x:t.x-e.width/2,y:t.y-e.height/2}},2:function(t,e){return{x:t.x+e.width/2,y:t.y-e.height/2}},3:function(t,e){return{x:t.x+t.width/2,y:t.y-e.height/2}},4:function(t,e){return{x:t.x+t.width-e.width/2,y:t.y-e.height/2}},5:function(t,e){return{x:t.x+t.width+e.width/2,
y:t.y-e.height/2}},6:function(t){return{x:t.x,y:t.y}},7:function(t){return{x:t.x+t.width/2,y:t.y}},8:function(t){return{x:t.x+t.width,y:t.y}},9:function(t,e){return{x:t.x-e.width/2,y:t.y+e.height/2}},10:function(t,e){return{x:t.x+e.width/2,y:t.y+e.height/2}},11:function(t,e){return{x:t.x+t.width/2,y:t.y+e.height/2}},12:function(t,e){return{x:t.x-e.width/2+t.width,y:t.y+e.height/2}},13:function(t,e){return{x:t.x+t.width+e.width/2,y:t.y+e.height/2}},14:function(t,e){return{x:t.x-e.width/2,y:t.y+t.height/2}},15:function(t){return{x:t.x,y:t.y+t.height/2}},16:function(t,e){return{x:t.x+e.width/2,y:t.y+t.height/2}},17:function(t){return{x:t.x+t.width/2,y:t.y+t.height/2}},18:function(t,e){return{x:t.x+t.width-e.width/2,y:t.y+t.height/2}},19:function(t){return{x:t.x+t.width,y:t.y+t.height/2}},20:function(t,e){return{x:t.x+t.width+e.width/2,y:t.y+t.height/2}},21:function(t,e){return{x:t.x-e.width/2,y:t.y+t.height-e.height/2}},22:function(t,e){return{x:t.x+e.width/2,y:t.y+t.height-e.height/2}},23:function(t,e){return{x:t.x+t.width/2,y:t.y+t.height-e.height/2}},24:function(t,e){return{x:t.x+t.width-e.width/2,y:t.y+t.height-e.height/2}},25:function(t,e){return{x:t.x+t.width+e.width/2,y:t.y+t.height-e.height/2}},26:function(t){return{x:t.x,y:t.y+t.height}},27:function(t){return{x:t.x+t.width/2,y:t.y+t.height}},28:function(t){return{x:t.x+t.width,y:t.y+t.height}},29:function(t,e){return{x:t.x-e.width/2,y:t.y+t.height+e.height/2}},30:function(t,e){return{x:t.x+e.width/2,y:t.y+t.height+e.height/2}},31:function(t,e){if(t){return{x:t.x+t.width/2,y:t.y+t.height+e.height/2}}else{return{x:0,y:0}}},32:function(t,e){return{x:t.x+t.width-e.width/2,y:t.y+t.height+e.height/2}},33:function(t,e){return{x:t.x+t.width+e.width/2,y:t.y+t.height+e.height/2}},34:function(t,e){return{x:t.x,y:t.y-e.height/2}},35:function(t,e){return{x:t.x+t.width,y:t.y-e.height/2}},36:function(t,e){return{x:t.x,y:t.y+t.height+e.height/2}},37:function(t,e){return{x:t.x+t.width,y:t.y+t.height+e.height/2}},38:function(t,e){return{x:t.x+t.width/4,y:t.y-e.height/2}},39:function(t,e){return{x:t.x+3*t.width/4,y:t.y-e.height/2}},40:function(t){return{x:t.x+t.width/4,y:t.y}},41:function(t){return{x:t.x+3*t.width/4,y:t.y}},42:function(t,e){return{x:t.x+t.width/4,y:t.y+e.height/2}},43:function(t,e){return{x:t.x+3*t.width/4,y:t.y+e.height/2}},44:function(t,e){return{x:t.x+t.width/2,y:t.y+t.height/2-e.height/2}},45:function(t){return{x:t.x+t.width/4,y:t.y+t.height/2}},46:function(t,e){return{x:t.x+t.width/2-e.width/2,y:t.y+t.height/2}},47:function(t,e){return{x:t.x+t.width/2+e.width/2,y:t.y+t.height/2}},48:function(t){return{x:t.x+3*t.width/4,y:t.y+t.height/2}},49:function(t,e){return{x:t.x+t.width/2,y:t.y+t.height/2+e.height/2}},50:function(t,e){return{x:t.x+t.width/4,y:t.y+t.height-e.height/2}},51:function(t,e){return{x:t.x+3*t.width/4,y:t.y+t.height-e.height/2}},52:function(t){return{x:t.x+t.width/4,y:t.y+t.height}},53:function(t){return{x:t.x+3*t.width/4,y:t.y+t.height}},54:function(t,e){return{x:t.x+t.width/4,y:t.y+t.height+e.height/2}},55:function(t,e){return{x:t.x+3*t.width/4,y:t.y+t.height+e.height/2}}};return cn(t)?function(t,i,n){return e[t](i,n?n:Xi)}:void 0}();Pn(g,{highlight:"#1ABC9C",label:"#000",labelSelect:"#FFF",transparent:"rgba(0,0,0,0.35)",titleBackground:"#2C3E50",titleIconBackground:"#868686",headerBackground:"#ECF0F1",headerIconBackground:"#868686",headerSeparator:"#868686",headerLine:"#D9D9D9",background:"#FFF",disabledBackground:"rgba(255,255,255,0.65)",toolTipBackground:"#FFFFE0",rectSelectBorder:"#2C3E50",rectSelectBackground:"rgba(0,0,0,0.35)",editPointBorder:"#2C3E50",editPointBackground:"#D9D9D9",dash:"#2C3E50",groupBackground:"#ECF0F1",groupTitleBackground:"#2C3E50",gridBackground:"#D9D9D9",gridCellBorderColor:"#868686",gridBlockColor:"#868686",reverse:"#868686",contentIconBackground:"#868686",contentLine:"#D9D9D9",widgetBackground:"#ECF0F1",widgetBorder:"#D9D9D9",widgetIconBackground:"#868686",widgetIconBorder:"#868686",widgetIconGradient:"#D9D9D9",widgetIconHighlight:"#43AFF1",imageBackground:"#3498DB",imageGradient:"#D9D9D9",chart:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"]},!0);var Lo=g.reverse,zo=g.transparent,Ao=g.rectSelectBackground,jo=g.dash,Fo=g.titleBackground,Wo=g.titleIconBackground,Ho=g.headerBackground,Go=g.headerIconBackground,Uo=g.headerSeparator,No=g.headerLine,Qo=g.contentIconBackground,Xo=g.contentLine,Yo=(g.widgetIconHighlight,g.widgetIconBorder),qo=(g.widgetIconGradient,g.imageBackground),Zo=g.imageGradient,Jo=g.highlight,$o=g.label,Ko=g.labelSelect;if(j&&!t.noAlert){var ta=new Date,ea=j.split("-"),ia=new Date(ta.getFullYear(),ta.getMonth(),ta.getDate()),j=new Date(A(ea[0],10),A(ea[1],10)-1,A(ea[2],10)),na=ia.getTime(),ra=j.getTime(),oa=n+"_try",aa=t.localStorage,sa=t.alert;if(aa&&sa)if(ra>na&&1728e6>ra-na){var la=(ra-na)/864e5;aa&&aa[oa]!=la&&(aa[oa]=la,sa("HT for Web free trial license will expire in "+la+" days, please apply for a new license!"))}else na>=ra&&sa("Your free trial of HT for Web has expired!"),aa&&delete aa[oa]}var ca={ms_ac:function(t,e){for(var i=e.ms_ac,n=0;n<i.length;n++)Zn(t,i[n])},ms_listener:function(t){t.addListeners=function(){for(var t=this,e=0;e<vi.length;e++)t["handle_"+vi[e]]&&Yn(vi[e],t.getView(),t)},t.removeListeners=function(){for(var t=this,e=0;e<vi.length;e++)t["handle_"+vi[e]]&&qn(vi[e],t.getView(),t)}},ms_fire:function(t){t.mp=function(t,e,i){this.addPropertyChangeListener(t,e,i)},t.ump=function(t,e){this.removePropertyChangeListener(t,e)},t.fp=function(t,e,i,n){return this.firePropertyChange(t,e,i,n)},t.addPropertyChangeListener=function(t,e,i){var n=this;n._62I||(n._62I=new pl),n._62I.add(t,e,i)},t.removePropertyChangeListener=function(t,e){this._62I&&this._62I.remove(t,e)},t.firePropertyChange=function(t,e,i,n){if(n){if(n(e,i))return!1}else if(e===i)return!1;var r=this,o={property:t,oldValue:e,newValue:i,source:r,data:r};return r._62I&&r._62I.fire(o),r.onPropertyChanged&&r.onPropertyChanged(o),!0}},ms_attr:function(t){t.a=function(t,e){var i=this;if(2===arguments.length)i.setAttr(t,e);else{if(!_n(t))return i.getAttr(t);for(var n in t)i.setAttr(n,t[n])}return i},t.getAttr=function(t){return this._attrObject?this._attrObject[t]:i},t.setAttr=function(t,e){var n=this;n._attrObject||(n._attrObject={});var r=n._attrObject[t];e===i?delete n._attrObject[t]:n._attrObject[t]=e,n.fp&&n.fp("a:"+t,r,e)&&n.onAttrChanged&&n.onAttrChanged(t,r,e)},t.getSerializableAttrs=function(){var t,e={};for(t in this._attrObject)e[t]=1;return e}},ms_bnb:function(t){t.getBodyColor=function(t){return t.s("body.color")},t.getBorderColor=function(t){return t.s("border.color")}},_51o:function(t){t.mi=function(t,e,i){this.addInteractorListener(t,e,i)},t.umi=function(t,e){this.removeInteractorListener(t,e)},t.fi=function(t){this.fireInteractorEvent(t)},t.addInteractorListener=function(t,e,i){var n=this;n._63I||(n._63I=new pl),n._63I.add(t,e,i)},t.removeInteractorListener=function(t,e){this._63I.remove(t,e)},t.fireInteractorEvent=function(t){this._63I&&this._63I.fire(t)},t.setInteractors=function(t){var e=this,i=e._interactors;i&&i.each(function(t){t.tearDown()}),mn(t)&&(t=new gl(t)),e._interactors=t,t&&t.each(function(t){t.setUp()}),e.fp("interactors",i,t),e.invalidateSelection()},t.getInteractors=function(){return this._interactors}},_49o:function(t){t._44O=c,t._45O=c,t.addTopPainter=function(t){var e=this;e._44O||(e._44O=new gl),e._44O.contains(t)||(e._44O.add(t),e.redraw&&e.redraw())},t.removeTopPainter=function(t){var e=this;e._44O&&(e._44O.remove(t),e.redraw&&e.redraw())},t.addBottomPainter=function(t){var e=this;e._45O||(e._45O=new gl),e._45O.contains(t)||(e._45O.add(t),e.redraw&&e.redraw())},t.removeBottomPainter=function(t){var e=this;e._45O&&(e._45O.remove(t),e.redraw&&e.redraw())},t._93db=function(t,e){var i=this;i._45O&&i._45O.each(function(n){n.draw?n.draw(t,e):n.call(i,t,e)})},t._92db=function(t,e){var i=this;i._44O&&i._44O.each(function(n){n.draw?n.draw(t,e):n.call(i,t,e)})}},ms_sm:function(t){t.sm=function(){return this.getSelectionModel()},t.setSelectableFunc=function(t){this.sm().setFilterFunc(t)},t.getSelectableFunc=function(){return this.sm().getFilterFunc()},t.getSelectionModel=function(){var t=this;return t._selectionModel?t._selectionModel:t.dm().sm()},t.isSelectionModelShared=function(){return!this._selectionModel},t.setSelectionModelShared=function(t){var e=this,i=!e._selectionModel,n=e.handleSelectionChange,r=e.dm();i!==t&&(e.invalidateSelection&&e.invalidateSelection(),t?(r.sm().ms(n,e),e._selectionModel.ums(n,e),e._selectionModel.dispose(),e._selectionModel=c):(r.sm().ums(n,e),e._selectionModel=new ml(r),e._selectionModel.ms(n,e)),e.onSelectionModelSharedChanged(),e.fp("selectionModelShared",i,t))},t.onSelectionModelSharedChanged=function(){var t=this;t.redraw(),t.invalidateSelection&&t.invalidateSelection()},t.removeSelection=function(){var t=this.dm(),e=t.getHistoryManager();e&&e.beginInteraction(),this.sm().toSelection().each(t.remove,t),e&&e.endInteraction()},t.selectAll=function(){var t=this;t.sm().ss(t.dm().toDatas(function(e){return t.isVisible(e)&&t.isSelectable(e)}))},t.isSelected=function(t){return this.sm().co(t)},t.isSelectedById=function(t){var e=this.dm().getDataById(t);return e?this.isSelected(e):!1},t.isSelectable=function(t){return this.sm().isSelectable(t)}},ms_tx:function(t){t._64I=0,t._65O=0,t.isScrollable=function(){return this.getWidth()<this._64I},t._40o=function(){return this.isScrollable()},t.getLogicalPoint=function(t){return _s(t,this._canvas||this._view,this.tx(),this.ty?this.ty():0)},t.tx=function(t){return t===i?this.getTranslateX():(this.setTranslateX(t),void 0)},t.getTranslateX=function(){return this._65O},t.setTranslateX=function(t){var e=this,i=e.getWidth()-e._64I;i>t&&(t=i),t>0&&(t=0),t=_(t);var n=e._65O;e._65O=t,e.fp(ke,n,t)}},ms_ty:function(t){t._23Q=0,t._66O=0,t._41o=function(){return this.getHeight()<this._23Q},t.getLogicalPoint=function(t){return _s(t,this._canvas||this._view,this.tx?this.tx():0,this.ty())},t.ty=function(t){return t===i?this.getTranslateY():(this.setTranslateY(t),void 0)},t.getTranslateY=function(){return this._66O},t.setTranslateY=function(t){var e=this,i=e.getHeight()-e._23Q;i>t&&(t=i),t>0&&(t=0),t=_(t);var n=e._66O;e._66O=t,e.fp(Ee,n,t)}},ms_txy:function(t){t._65O=0,t._66O=0,t.tx=function(t){return t===i?this.getTranslateX():(this.setTranslateX(t),void 0)},t.ty=function(t){return t===i?this.getTranslateY():(this.setTranslateY(t),void 0)},t.onTranslateEnded=function(){},t.setTranslate=function(t,e,i){var n=this;if(i=Dn(i)){n._65I&&n._65I.stop(!0);var r=n.tx(),o=n.ty();i.action=function(i){n.setTranslate(r+(t-r)*i,o+(e-o)*i)},i._37o=function(){delete n._66I,delete n._65I,n.onTranslateEnded()},n._66I=1,n._65I=Za(i)}else n.tx(t),n.ty(e)},t.getTranslateX=function(){return this._65O},t.setTranslateX=function(t){var e=this;t=e.adjustTranslateX(t);var i=e._65O;e._65O=t,e.fp(ke,i,t)},t.getTranslateY=function(){return this._66O},t.setTranslateY=function(t){var e=this;t=e.adjustTranslateY(t);var i=e._66O;e._66O=t,e.fp(Ee,i,t)},t.adjustTranslateX=function(t){return _(t)},t.adjustTranslateY=function(t){return _(t)},t.translate=function(t,e,i){this.setTranslate(this.tx()+t,this.ty()+e,i)},t.getLogicalPoint=function(t){var e=this;return _s(t,this._canvas||e._view,e.tx(),e.ty())}},ms_dm:function(t){t.dm=function(t){return t?(this.setDataModel(t),void 0):this.getDataModel()},t.getDataModel=function(){return this._dataModel}},ms_lp:function(t){t.lp=function(t){return this.getLogicalPoint(t)}},ms_v:function(e){e._disabled=!1,e.setDisabled=function(t,e){var i=this,n=i._disabled;n!==t&&(n&&(ms(i._63O),delete i._63O),t&&(or(i._view,i._63O=ur(e)),i.iv()),i._disabled=t,i.fp("disabled",n,t))},e.isDisabled=function(){return this._disabled},e.getDisabledDiv=function(){return this._63O},e.getView=function(){return this._view},e.addToDOM=function(){var e=this,i=e.getView(),n=i.style;l.body.appendChild(i),n.left="0",n.right="0",n.top="0",n.bottom="0",t.addEventListener("resize",function(){e.iv()},!1),e.iv()},e.getWidth=function(){return this._view.clientWidth},e.getHeight=function(){return this._view.clientHeight},e.setWidth=function(t){var e=this;e._view.style.width=t+vt,e.iv(),e.fp&&e.fp(Tt,c,t)},e.setHeight=function(t){var e=this;e._view.style.height=t+vt,e.iv(),e.fp&&e.fp(Mt,c,t)},e.setFocus=function(t){var e=this,i=e._currentEditor;return t&&i&&(i.getView&&(i=i.getView()),i.contains(t.target))?!1:(_r(e._view),e.endEditing&&e.endEditing(),e.fireViewEvent("focus"),!0)},e.iv=function(t){this.invalidate(t)},e.invalidate=function(t){var e=this;e._68I||(e._68I=1,Na(e.validate,e,c,t),e.onInvalidated&&e.onInvalidated(),e.fireViewEvent("invalidate"))},e.validate=function(){var t=this,e=t._view;if(t._68I&&(delete t._68I,e.parentNode))if(0===e.offsetWidth&&0===e.offsetHeight&&t._67I!==c)t._67I===i&&(t._67I=d.reinvalidateCount),t._67I>0?t._67I--:t._67I=c,t.iv();else{t.fireViewEvent("beginValidate"),t.validateImpl(),t.onValidated&&t.onValidated(),t.fireViewEvent("validate");var n=t._63O;n&&(e.lastChild!==n&&(ms(n),or(e,n)),mr(n,0,0,t.getWidth(),t.getHeight())),Ji(t),el(t)}},e.layout=function(t,e,i,n){1===arguments.length?mr(this,t):mr(this,t,e,i,n)},e.addViewListener=function(t,e,i){var n=this;n._67O||(n._67O=new pl),n._67O.add(t,e,i)},e.removeViewListener=function(t,e){this._67O.remove(t,e)},e.fireViewEvent=function(t){var e=this;e._67O&&(gn(t)&&(t={kind:t}),e._67O.fire(t)),d.viewListener&&d.viewListener(e,t)}},ms_tip:function(t){t.setToolTipEnabled=function(t){var e=this;t?$||e._13o||(e.enableToolTip(),e.fp("toolTipEnabled",!1,!0)):e._13o&&(e.disableToolTip(),e.fp("toolTipEnabled",!0,!1))},t.isToolTipEnabled=function(){return!!this._13o},t.enableToolTip=function(){var t=this;$||t._13o||(t._13o=function(e){var i=t.getToolTip(e);i!=c?d.toolTipContinual&&d.isToolTipShowing()?pa(e,i):(_a(),yi={timeout:H(wi,ua),e:e,info:i}):_a()},t.getView().addEventListener(ai,t._13o,!1),t.getView().addEventListener("mouseleave",d.hideToolTip,!1))},t.disableToolTip=function(){var t=this;t._13o&&(t.getView().removeEventListener(ai,t._13o,!1),t.getView().removeEventListener("mouseleave",d.hideToolTip,!1),delete t._13o)},t.getToolTip=function(t){var e=this;if(e.getDataAt){var i=e.getDataAt(t);return i?i.getToolTip():c}return e.getValue?e.getValue():void 0}},_52o:function(t){t._zoom=1,t._29I=Xi,t.zoomIn=function(t,e){this.setZoom(this._zoom*Va,t,e)},t.zoomOut=function(t,e){this.setZoom(this._zoom/Va,t,e)},t.zoomReset=function(t,e){this.setZoom(1,t,e)},t.scrollZoomIn=function(t){this.setZoom(this._zoom*Ra,c,t)},t.scrollZoomOut=function(t){this.setZoom(this._zoom/Ra,c,t)},t.pinchZoomIn=function(t){this.setZoom(this._zoom*Ba,c,t)},t.pinchZoomOut=function(t){this.setZoom(this._zoom/Ba,c,t)},t.adjustZoom=function(t){return za>t?za:t>La?La:t},t.getZoom=function(){return this._zoom},t.setZoom=function(t,e,i){var n=this;if(e=Dn(e)){n._14o&&n._14o.stop(!0);var r=n._zoom;e.action=function(e){n._96O(r+(t-r)*e,i)},e._37o=function(){delete n._zooming,delete n._14o,n.onZoomEnded()},n._zooming=1,n._14o=Za(e)}else n._96O(t,i)},t._96O=function(t,e){var i=this;if(t=i.adjustZoom(t),t!==i._zoom){i.validate();var n=i._29I,r=i._zoom;0!==n.width&&0!==n.height&&(e=e?e:{x:n.x+n.width/2,y:n.y+n.height/2},i.tx((e.x-n.x)*r-e.x*t),i.ty((e.y-n.y)*r-e.y*t)),i._zoom=t,i.fp("zoom",r,t)}}}};Pn(d,{numberDigits:5,baseZIndex:i,isTouchable:$,devicePixelRatio:t.devicePixelRatio?t.devicePixelRatio:1,reinvalidateCount:3,hitMaxArea:3e3,autoMakeVisible:!0,autoHideScrollBar:!0,disabledOpacity:.4,disabledBackground:g.disabledBackground,toolTipDelay:800,toolTipContinual:!1,getDragger:function(){return Cr},lineCap:"butt",lineJoin:"round",imageGradient:"linear.northeast",dashPattern:[16,16],animDuration:200,animEasing:function(t){return t*t},labelColor:$o,labelSelectColor:Ko,labelFont:($?"15":"12")+"px arial, sans-serif",widgetIndent:$?30:20,widgetRowHeight:$?30:20,widgetHeaderHeight:$?32:22,widgetTitleHeight:$?34:24,scrollBarColor:zo,scrollBarSize:7,scrollBarTimeout:1e3,scrollBarMinLength:20,scrollBarInteractiveSize:$?32:16,zoomIncrement:1.3,scrollZoomIncrement:1.05,pinchZoomIncrement:1.08,zoomMax:20,zoomMin:.01,segmentResolution:12,shapeResolution:24,shapeSide:24,intersectionLineRect:Fn,intersectionLineLine:Wn,isEnter:Ur,isEsc:Nr,isDelete:kr,isSpace:Gr,isLeft:jr,isUp:Fr,isRight:Wr,isDown:Hr,getTarget:wr,isString:gn,isNumber:vn,isBoolean:pn,isArray:mn,isSelectAll:Pr,isFunction:yn,getPropertyValue:Hn,setPropertyValue:Gn,addMethod:Pn,getVersion:function(){return"6.0.5"},appendTimeStamp:function(t){return t+=t.indexOf("?")>=0?"&__ht__="+tn():"?"+tn()},setCompType:function(t,e){yn(e)||_n(e)?Ri[t]=e:il(t)},getCompType:function(t){return Ri[t]},getCompTypeMap:function(){return Ri},drawCompType:function(t,e,i,n,r,o){t(e,i,n,r,o)},numberListener:function(){var t={46:1,8:1,9:1,27:1,13:1,109:1,110:1,189:1,190:1};return function(e){var i=e.keyCode;t[i]||65===i&&d.isCtrlDown(e)||86===i&&d.isCtrlDown(e)||67===i&&d.isCtrlDown(e)||i>=35&&39>=i||(e.shiftKey||48>i||i>57)&&(96>i||i>105)&&e.preventDefault()}}(),ignoreKeyCodes:[122,123],preventDefault:function(t){var e=t.target.tagName;("DIV"===e||"CANVAS"===e)&&!(d.ignoreKeyCodes.indexOf(t.keyCode)>=0)&&("keydown"!==t.type||jr(t)||Wr(t)||Fr(t)||Hr(t)||kr(t)||65===t.keyCode&&(t.metaKey||t.ctrlKey))&&(t.preventDefault(),t.preventManipulation&&t.preventManipulation())},getWindowInfo:function(){var e=l.documentElement,i=e&&(e.scrollLeft||e.scrollTop)?e:l.body;return{target:i,left:i.scrollLeft,top:i.scrollTop,width:t.innerWidth||i.clientWidth,height:t.innerHeight||i.clientHeight}},isDragging:function(){return!!Cr},isLeftButton:function(t){return $?!0:0===t.button},isInput:function(t){if(!t)return!1;var e=t.tagName;return"INPUT"===e||"TEXTAREA"===e||"SELECT"===e},getTouchCount:function(t){return $?t.touches.length:1},isDoubleClick:function(){var t={};return Oi=new Date,Ti=Oi.getTime(),function(e){var n=(new Date).getTime(),r=e.type,o=r+"_isDoubleClick",a=t[r];if(a||(a=t[r]={details:0,timeout:null,lastPoint:null,lastTime:n}),e[o]===i){var s=as(e);e[o]=a.lastPoint&&ls(a.lastPoint,s)<20&&n-a.lastTime<500,a.lastTime=n,a.lastPoint=s,a.details++,a.timeout&&(G(a.timeout),a.timeout=null),a.timeout=H(function(){this.details=0,this.timeout=null,this.lastPoint=null}.bind(a),500)}return!!e[o]&&2===a.details}}(),isShiftDown:function(t){return t?t.shiftKey:Vi["16"]},isCtrlDown:function(t){return t?J?t.metaKey:t.ctrlKey:J?Vi["91"]:Vi["17"]},getClientPoint:function(t){return $&&(t=br(t)),{x:t.clientX,y:t.clientY}},isMouseEvent:function(t){return t instanceof MouseEvent||0===t.type.indexOf("mouse")},getTargetElement:function(t){if(d.isMouseEvent(t)||!l.elementFromPoint)return t.target;var e=ss(t);return l.elementFromPoint(e.x,e.y)},getPagePoint:function(t){return $&&(t=br(t)),{x:t.pageX,y:t.pageY}},createObject:function(t,e){var i=new t;for(var n in e){var r=fn(n),o=e[n];i[r]?(i[r](o),"setToolTip"===r&&i.enableToolTip&&i.enableToolTip()):i[n]=o}return i},setImage:function(t,e,i,n){var r=arguments.length;4===r?$i(t,n,e,i):2===r?gn(e)?$i(t,e):Di[t]=e:1===r&&$i(t,t)},getImage:function(t,e){var n;if(t==c)return c;if(_n(t)?n=t:(n=Di[t],t&&n===i&&(qi&&qi[t]||$i(t,t))),e&&n&&n.tagName){n.colors||(n.colors={});var r=n.colors[e];return r||(r=Kr(n,$r(e),n.width,n.height),n.colors[e]=r),r}return n},getId:function(){var t=1;return function(){return++t}}(),callLater:function(e,i,n,r){var o=function(){e.apply(i,n)};return r?H(o,r):t.requestAnimationFrame(o)},asyncEach:function(t,e,i){"function"!=typeof i&&(i=Function.prototype);var n=new Array(t.length),r=0,o=!1;t.forEach(function(a,s){e(a,function(e,a){return o?void 0:e?(o=!0,i(null)):(n[s]=a,r++,r===t.length?i(n):void 0)})})},xhrLoad:function(t,e,i){var n=!1;mn(t)||(n=!0,t=[t]),t.length;var r=i&&i.sync;Qa(t,function(t,e){var i=new XMLHttpRequest;i.overrideMimeType("text/plain"),d.convertURL&&(t=d.convertURL(t)),t.data?e(null,t.data):(i.open("GET",encodeURI(t),!r),i.onload=function(t){200===this.status||0===this.status?e(null,t.target.response):e(!0)},i.onerror=function(){e(!0)},i.send(null))},function(t){"function"==typeof e&&e(n&&t?t[0]:t)})},clone:function(t){if(!t)return c;if(mn(t))return t.slice(0);if(bn(t))return new gl(t);if(_n(t)){var e,i={};for(e in t)i[e]=t[e];return i}return t},handleCompTypeLoaded:function(){},handleImageLoaded:function(){},handleUnfoundImage:function(){},sortFunc:function(t,e){if(t===e)return 0;if(t==c&&e!=c)return 1;if(t!=c&&e==c)return-1;if(t==c&&e==c)return 0;var n,r=typeof t,o=typeof e;return r===Ze&&o===Ze?n=t.localeCompare(e):r===ti&&o===ti&&(n=t-e),n===i&&(n=(""+t).localeCompare(""+e)),n>0?1:0>n?-1:0},getClassMap:function(){return Mi},getClass:function(e){if(gn(e)){var i,n=Mi[e];if(!n){i=e.split("."),n=t;for(var r=0;r<i.length;r++)n=n[i[r]];Mi[e]=n}return n}return e},def:function(t,e,i){var n,r,o,a=function(){};if(a.prototype=e.prototype,n=new a,gn(t)){if(Mi[t])throw"'"+t+"' already defined";o=qa(t),n.getClassName=function(){return t}}else o=t;if(n.constructor=o,n.getClass=function(){return o},n.getSuperClass=function(){return e},i)for(r in i)ca[r]&&ca.hasOwnProperty(r)?ca[r](n,i):Vo(n,i,r);o.prototype=n,o.superClass=e.prototype},startAnim:function(){var t=function(t){t.duration&&(t.startTime=tn()),t.timeId=Na(t.tick,c,c,t.interval)};return function(e){return e=Ya(e),e.easing=e.easing||d.animEasing,e.duration||e.frames||(e.duration=d.animDuration),e.t=0,e.duration?e.interval=0:(e.frame=0,e.interval=e.interval||10),e.tick=function(){if(e.duration){var t=(tn()-e.startTime)/e.duration;t>1&&(t=1),e.t=t,e.action(e.easing(t),t),1===t?e.stop():e._isPaused||(e.timeId=Na(e.tick))}else e.frame++,t=e.t=e.frame/e.frames,e.action(e.easing(t),t),e.frame<e.frames?e._isPaused||(e.timeId=Na(e.tick,c,c,e.interval)):e.stop()},e.resume=function(){e._isPaused&&(delete e._isPaused,e.duration?e.t<1&&(e.startTime=tn()-e.duration*e.t,e.timeId=Na(e.tick)):e.frame<e.frames&&(e.timeId=Na(e.tick,c,c,e.interval)))},e.pause=function(){e._isPaused=!0},e.stop=function(t){e.isRunning()&&(e.duration?e.t<1&&t&&(e.t=1,e.action(e.easing(1))):e.frame<e.frames&&t&&(e.frame=e.frames,e.action(e.easing(1))),e._37o&&e._37o(),e.finishFunc&&e.finishFunc(),en(e.timeId,!e.duration),delete e.timeId)},e.isRunning=function(){return e.timeId!=c},e.delay?Na(t,c,[e],e.delay):t(e),e}}(),getTextSize:function(){var t={},e=l?er().getContext("2d"):c;return function(i,n){e.font=i?i:Ca;var r=t[e.font];return r||(r=2*e.measureText("e").width+4,t[e.font]=r),{width:e.measureText(n).width+4,height:r}}}(),drawText:function(t,e,i,n,r,o,a,s,l,h){if(e!=c){var u=ts(i,e),d={};d.y=h&&h!==ht?h===at?o+u.height/2:o+s-u.height/2:o+s/2,d.x=l&&l!==rt?l===ot?r+a-u.width/2:r+a/2:r+u.width/2,lr(t,e,d,i,n)}},getDistance:function(t,e){var n=t.length;return e?3===n?b(W(t[0]-e[0])+W(t[1]-e[1])+W(t[2]-e[2])):2===n?b(W(t[0]-e[0])+W(t[1]-e[1])):t.z===i?b(W(e.x-t.x)+W(e.y-t.y)):b(W(e.x-t.x)+W(e.y-t.y)+W(e.z-t.z)):3===n?b(W(t[0])+W(t[1])+W(t[2])):2===n?b(W(t[0])+W(t[1])):void 0},brighter:function(t,e){return 0>e&&(e=-e),co(t,e?e:40)},darker:function(t,e){return e>0&&(e=-e),co(t,e?e:-40)},unionPoint:function(t,e){if(!t)return c;if(2===arguments.length)return t&&e?{x:x(t.x,e.x),y:x(t.y,e.y),width:C(t.x-e.x),height:C(t.y-e.y)}:c;var n=t;if(n._as&&(n=n._as),n.length===i)return c;var r=n.length;if(0>=r)return c;for(var o=1,a=n[0],s={x:a.x,y:a.y,width:0,height:0};r>o;o++){a=n[o];var l=x(s.x,a.x),h=w(s.x+s.width,a.x),u=x(s.y,a.y),d=w(s.y+s.height,a.y);s.x=l,s.y=u,s.width=h-l,s.height=d-u}return s},unionRect:function(t,e){if(t&&!e)return Ya(t);if(!t&&e)return Ya(e);if(t&&e){var i={x:x(t.x,e.x),y:x(t.y,e.y)};return i.width=w(t.x+t.width,e.x+e.width)-i.x,i.height=w(t.y+t.height,e.y+e.height)-i.y,i}return c},containsPoint:function(t,e){return!(!t||e.x<t.x||e.y<t.y||e.x>t.x+t.width||e.y>t.y+t.height)},containsRect:function(t,e){if(!t||!e)return!1;var i=e.x,n=e.y,r=e.width,o=e.height,a=t.width,s=t.height;if(0>(a|s|r|o))return!1;var l=t.x,c=t.y;if(l>i||c>n)return!1;if(a+=l,r+=i,i>=r){if(a>=l||r>a)return!1}else if(a>=l&&r>a)return!1;if(s+=c,o+=n,n>=o){if(s>=c||o>s)return!1}else if(s>=c&&o>s)return!1;return!0},intersectsRect:function(t,e){if(!t||!e)return!1;var i=e.width,n=e.height,r=t.width,o=t.height;if(0>=r||0>=o||0>=i||0>=n)return!1;var a=e.x,s=e.y,l=t.x,c=t.y;return r+=l,o+=c,i+=a,n+=s,r>a&&o>s&&i>l&&n>c},intersection:function(t,e){if(!t||!e)return c;var i=e.x,n=e.y,r=t.x,o=t.y,a=i,s=n,l=r,h=o;return a+=e.width,s+=e.height,l+=t.width,h+=t.height,r>i&&(i=r),o>n&&(n=o),a>l&&(a=l),s>h&&(s=h),a-=i,s-=n,0>=a||0>=s?c:{x:i,y:n,width:a,height:s}},grow:function(t,e){t.x-=e,t.y-=e,t.width=t.width+2*e,t.height=t.height+2*e},getLogicalPoint:function(t,e,i,n,r,o){var a=e.getBoundingClientRect();return t=$?br(t):t,{x:(t.clientX-a.left+e.scrollLeft-(i||0))/(r||1),y:(t.clientY-a.top+e.scrollTop-(n||0))/(o||1)}},removeHTML:function(){var t;return function(e){return e&&e.parentNode?t===e?!0:(t=e,e.parentNode.removeChild(e),t=c,!0):!1}}(),getToolTipDiv:function(){if(!pi){pi=tr(),_i=tr();var t=pi.style;d.baseZIndex!=c&&(t.zIndex=A(d.baseZIndex)+3+""),t.whiteSpace="nowrap",t.color=d.toolTipLabelColor,t.background=d.toolTipBackground,t.font=d.toolTipLabelFont,t.padding="5px",t.boxShadow="0px 0px 3px "+d.toolTipShadowColor}return pi},isToolTipShowing:function(){return pi&&pi.parentNode?!0:_i&&_i.parentNode?!0:!1},hideToolTip:function(){ms(pi),ms(_i),bi()},showToolTip:function(t,e){if(!t||e==c)return _a(),void 0;d.getToolTipDiv();var i,n;if(e.html?(e=e.html,i=_i,ms(pi)):(i=pi,ms(_i)),n=i.style,i.innerHTML=e,i.parentNode||or(l.body,i),t.target){t=ss(t);var r=vs(),o=t.x,a=t.y,s=$?60:12;if($){var h=i.getBoundingClientRect();n.left=o-h.width/2+vt,n.top=a-h.height-s<r.top?a+s+vt:a-h.height-s+vt}else{n.left=o+s+vt,n.top=a+s+vt;var h=i.getBoundingClientRect();h.left+h.width>r.width&&(n.left=o-s-h.width+vt),h.top+h.height>r.height&&(n.top=a-s-h.height+vt),h.left<0&&(n.left=o+s+vt),h.top<0&&(n.top=a+s+vt)}}else n.left=t.x+vt,n.top=t.y+vt;bi()},startDragging:function(e,i){e!==Cr&&(Cr?$?Cr.handleWindowTouchEnd(i):Cr.handleWindowMouseUp(i):$?(t.addEventListener(hi,Ir,!1),t.addEventListener(ui,Sr,!1)):(t.addEventListener(ai,Or,!1),t.addEventListener(si,Tr,!1)),Cr=e)},getImageMap:function(){return Di},toBoundaries:function(t,e,i,n){var r=[];return so(t,e,i,n).forEach(function(t){var e=[];t.forEach(function(t){e.push(t.x,t.y)}),r.push(e)}),r},getCurrentKeyCodeMap:function(){return Vi},drawCenterImage:function(t,e,i,n,r,o,a){var s=hl(e,r,o),l=ul(e,r,o);fl(t,e,_(i-s/2),_(n-l/2),s,l,r,o,a)},drawStretchImage:function(t,e,i,n,r,o,a,s,l,c,h){var u,d=hl(e,s,l,o),f=ul(e,s,l,a);if("uniform"===i?(u=x(o/d,a/f),d*=u,f*=u,n+=_((o-d)/2),r+=_((a-f)/2),o=d,a=f):"centerUniform"===i&&((d>o||f>a)&&(u=x(o/d,a/f),d*=u,f*=u),n+=_((o-d)/2),r+=_((a-f)/2),o=d,a=f),"center"===i){var g=h!==!1&&(d>o||f>a);g&&(t.save(),t.beginPath(),t.rect(n,r,o,a),t.clip()),fl(t,e,n+o/2-d/2,r+a/2-f/2,d,f,s,l,c),g&&t.restore()}else fl(t,e,n,r,o,a,s,l,c)},toCanvas:function(t,e,i,n,r,o,a,s){t=Wa(t,a),e=e||hl(t,r),i=i||ul(t,r);var l=er(),c=dr(l);return s?(rr(l,e,i,s),c.scale(s,s)):rr(l,e,i,1),Ga(c,t,n,0,0,e,i,r,o,a),c.restore(),l},createElement:function(t,e,i,n){var r=l.createElement(t);return ir(r,e||g.widgetBorder,2),r.style.font=i?i:Ca,n!=c&&(r.value=n),d.onElementCreated&&d.onElementCreated(r),r},containedInView:function(t,e){var i=yr(e).getBoundingClientRect();return us({x:i.left,y:i.top,width:i.width,height:i.height},as(t))},isIsolating:function(){return Si},setIsolating:function(t){Si=t},getMSMap:function(){return ca},stringify:function(t,e){var i=Date.prototype.toJSON;Date.prototype.toJSON=function(){return"__ht__date"+this.getTime()};var n=JSON.stringify(t,function(t,e){return"function"==typeof e?"__ht__"+(e.__ht__||e.toString()):vn(e)?Tn(e):e},e==c?2:e);return Date.prototype.toJSON=i,n},parse:function(t){return gn(t)?JSON.parse(t,function(t,e){if(gn(e)){if("__ht__function"==e.substr(0,14)){var i=e.indexOf("{")+1,n=e.lastIndexOf("}"),r=e.indexOf("(")+1,o=e.indexOf(")");if(i&&n&&r&&o){var a=new Function(e.substring(r,o),e.substring(i,n));return a.__ht__=e.substr(6),a}}if("__ht__date"==e.substr(0,10))return new Date(A(e.substr(10)))}return e}):t},loadJS:function(t,e){e&&t.push(e);var i=t.shift();if(mn(i))t=i.contact(t),d.loadJS(t);else if(yn(i))i(),d.loadJS(t);else if(gn(i)){var n=l.createElement("script");n.onload=function(){d.loadJS(t)},n.setAttribute("src",i),l.getElementsByTagName("head")[0].appendChild(n)}else t.length&&d.loadJS(t)},toColorData:Jr,setCanvas:rr,createDiv:tr,createDisabledDiv:ur,createView:Kn,createCanvas:er,appendChild:or,initContext:dr,checkLoadingImage:Ji,translateAndScale:fr,layout:mr,getPosition:Bo,drawPoints:ao,drawRoundRect:po,drawBorder:_o,setFocus:_r,getter:dn,setter:fn,isEmptyObject:Rn},!0),Pn(v,{autoAdjustIndex:1,hierarchicalRendering:1,adjustChildrenToTop:1,autoHideScrollBar:1,autoUpdate:1,firstPersonMode:1,ortho:1,strict:1,stickToRight:1,instant:1,closePath:1,hierarchical:1,doubleClickToToggle:1,continuousLayout:!0},!0);var ha=d.disabledOpacity,ua=d.toolTipDelay,da=d.devicePixelRatio,fa=d.autoMakeVisible,ga=d.autoHideScrollBar,va=d.imageGradient,pa=d.showToolTip,_a=d.hideToolTip,ya=d.dashPattern,ma=d.lineCap,ba=d.lineJoin,wa=d.labelColor,xa=d.labelSelectColor,Ca=d.labelFont,Ia=d.widgetIndent,Sa=d.widgetRowHeight,Oa=d.widgetHeaderHeight,Ta=d.widgetTitleHeight,Ma=d.scrollBarColor,Da=d.scrollBarSize,Pa=d.scrollBarTimeout,ka=d.scrollBarMinLength,Ea=d.scrollBarInteractiveSize,Va=d.zoomIncrement,Ra=d.scrollZoomIncrement,Ba=d.pinchZoomIncrement,La=d.zoomMax,za=d.zoomMin,Aa=d.createObject,ja=d.preventDefault,Fa=d.setImage,Wa=d.getImage,Ha=d.drawCenterImage,Ga=d.drawStretchImage,Ua=d.getId,Na=d.callLater,Qa=d.asyncEach,Xa=(d.xhrLoad,d.sortFunc),Ya=d.clone,qa=d.getClass,Za=d.startAnim,Ja=d.brighter,$a=d.darker,Ka=d.drawText,ts=d.getTextSize,es=d.isLeftButton,is=d.getTouchCount,ns=d.isDoubleClick,rs=d.isShiftDown,os=d.isCtrlDown,as=d.getClientPoint,ss=d.getPagePoint,ls=d.getDistance,cs=d.unionPoint,hs=d.unionRect,us=d.containsPoint,ds=d.containsRect,fs=d.intersectsRect,gs=d.intersection,vs=d.getWindowInfo,ps=d.grow,_s=d.getLogicalPoint,ys=d.startDragging,ms=d.removeHTML,bs=d.createElement,ws=d.segmentResolution,xs=d.shapeResolution,Cs=d.shapeSide,Is=d.def,Ss=function(t,e,i){Is(n+"."+t,e,i)},Os=function(t,e){t.childNodes.forEach(function(t){e(t),Os(t,e)})};Pn(d,{toolTipLabelColor:wa,toolTipLabelFont:Ca,toolTipBackground:g.toolTipBackground,toolTipShadowColor:zo,setDevicePixelRatio:function(e){da=d.devicePixelRatio="number"==typeof e?e:t.devicePixelRatio,Os(l.body,function(t){var e=t._ht;e&&e._canvas&&(rr(e._canvas,e.getWidth(),e.getHeight()),e.redraw?e.redraw():e.iv())})}},!0);var Ts=1e-6,Ms="undefined"!=typeof Uint16Array?Uint16Array:Array,Ds="undefined"!=typeof Float32Array?Float32Array:Array,Ps=function(t,e,i){var n=[t[0]-e[0],t[1]-e[1],t[2]-e[2]];if(i){var r=ls(n);r>0&&(n[0]/=r,n[1]/=r,n[2]/=r)}return n},ks=function(t){return[-t[0],-t[1],-t[2]]},Es=function(t,e){return 3===t.length?t[0]*e[0]+t[1]*e[1]+t[2]*e[2]:t[0]*e[0]+t[1]*e[1]},Vs=function(){var t=new Ds(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Rs=Vs(),Bs=function(t){var e=new Ds(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},Ls=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},zs=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},As=function(t,e){var i=t[0],n=t[1],r=t[2];return t[0]=e[0]*i+e[4]*n+e[8]*r+e[12],t[1]=e[1]*i+e[5]*n+e[9]*r+e[13],t[2]=e[2]*i+e[6]*n+e[10]*r+e[14],t},js=function(t,e){var i=t[0],n=t[1],r=t[2],o=t[3];return t[0]=e[0]*i+e[4]*n+e[8]*r+e[12]*o,t[1]=e[1]*i+e[5]*n+e[9]*r+e[13]*o,t[2]=e[2]*i+e[6]*n+e[10]*r+e[14]*o,
t[3]=e[3]*i+e[7]*n+e[11]*r+e[15]*o,t},Fs=function(){var t,e,i,n,r=kn(Rr[1]+Rr[7]),o=kn(Rr[0]+Rr[3]-Rr[10]),a=kn(Rr[8]+2),l=function(){return e=i.charAt(t),t+=1,e},c=function(){var t="";if(e===a)for(;l();){if(e===a)return l(),t;t+=e}else l()},h=function(){for(;e&&" ">=e;)l()},u=function(){var t,i={};if(e===r){if(l(),h(),e===o)return l(),i;for(;e;){if(t=c(),h(),l(),i[t]=n(),h(),e===o)return l(),i;l(),h()}}};return n=function(){switch(h(),e){case r:return u();default:return c()}},function(r){if(s={},r){var o;if(i=r,t=0,e=" ",o=n(),h(),!e)return o}}}(),Ws=function(t,e){if(e){var i=O(e),n=I(e),r=t[4],o=t[5],a=t[6],s=t[7],l=t[8],c=t[9],h=t[10],u=t[11];t[4]=r*n+l*i,t[5]=o*n+c*i,t[6]=a*n+h*i,t[7]=s*n+u*i,t[8]=l*n-r*i,t[9]=c*n-o*i,t[10]=h*n-a*i,t[11]=u*n-s*i}},Hs=function(t,e){if(e){var i=O(e),n=I(e),r=t[0],o=t[1],a=t[2],s=t[3],l=t[8],c=t[9],h=t[10],u=t[11];t[0]=r*n-l*i,t[1]=o*n-c*i,t[2]=a*n-h*i,t[3]=s*n-u*i,t[8]=r*i+l*n,t[9]=o*i+c*n,t[10]=a*i+h*n,t[11]=s*i+u*n}},Gs=function(t,e){if(e){var i=O(e),n=I(e),r=t[0],o=t[1],a=t[2],s=t[3],l=t[4],c=t[5],h=t[6],u=t[7];t[0]=r*n+l*i,t[1]=o*n+c*i,t[2]=a*n+h*i,t[3]=s*n+u*i,t[4]=l*n-r*i,t[5]=c*n-o*i,t[6]=h*n-a*i,t[7]=u*n-s*i}},Us=function(t,e,i){return Ns(c,i===!1?c:t.s3(),t.r3(),t.getRotationMode(),t.p3(),c,e)},Ns=function(t,e,i,n,r,o,a){return o||(o=Vs()),r&&Cu(o,r),Xc(o,i,n),a&&Su(o,o,a),e&&Iu(o,e),t&&Su(o,o,t),o},Qs=function(t,e,i){e=A(e),i=A(i);var n=this;n.g=t,n._84O=e,n._85O=i,n._70I=!0,n.F=0,n._83O=e+i,n.pen={x:0,y:0}},Xs="lineDashOffset",Ys="setLineDash",qs=function(t){for(var e in t)1===e.length&&(Xs=t[e]);return e?1:0},Zs=function(t,e,i){return Bn(e)?t:t[Ys]?(t[Ys](e),i&&(t.lineDashOffset=i),t):new Qs(t,e[0],e.length>1?e[1]:e[0])},Js=function(t,e){!Bn(e)&&t[Ys]&&(t[Ys](ji),t.lineDashOffset=0)};if(Is(Qs,e,{_69I:6,moveTo:function(t,e){var i=this,n=i.pen;n.x=t,n.y=e,i.g.moveTo(t,e),i.start||(i.start={x:t,y:e})},lineTo:function(t,e){var i=this,n=i.pen,r=t-n.x,o=e-n.y,a=R(o,r),s=I(a),l=O(a),c=i._23O(n.x,n.y,t,e),h=i._85O,u=i._84O,d=i._83O;if(i.F){if(i.F>c)return i._70I?i._72I(t,e):i.moveTo(t,e),i.F-=c,void 0;if(i._70I?i._72I(n.x+s*i.F,n.y+l*i.F):i.moveTo(n.x+s*i.F,n.y+l*i.F),c-=i.F,i.F=0,i._70I=!i._70I,!c)return}var f=y(c/d);if(f){for(var g=s*u,v=l*u,p=s*h,_=l*h,m=0;f>m;m++)i._70I?(i._72I(n.x+g,n.y+v),i.moveTo(n.x+p,n.y+_)):(i.moveTo(n.x+p,n.y+_),i._72I(n.x+g,n.y+v));c-=d*f}i._70I?c>u?(i._72I(n.x+s*u,n.y+l*u),i.moveTo(t,e),i.F=h-(c-u),i._70I=!1):(i._72I(t,e),c===u?(i.F=0,i._70I=!i._70I):(i.F=u-c,i.moveTo(t,e))):c>h?(i.moveTo(n.x+s*h,n.y+l*h),i._72I(t,e),i.F=u-(c-h),i._70I=!0):(i.moveTo(t,e),c===h?(i.F=0,i._70I=!i._70I):i.F=h-c)},quadraticCurveTo:function(t,e,i,n){var r,o=this,a=o.pen,s=a.x,l=a.y,c=o._22O(s,l,t,e,i,n),h=0,u=0,d=o._85O,f=o._84O;if(o.F){if(o.F>c)return o._70I?o._71I(t,e,i,n):o.moveTo(i,n),o.F-=c,void 0;if(h=o.F/c,r=o._20O(s,l,t,e,i,n,h),o._70I?o._71I(r[2],r[3],r[4],r[5]):o.moveTo(r[4],r[5]),o.F=0,o._70I=!o._70I,!c)return}var g=c-c*h,v=y(g/o._83O),p=f/c,_=d/c;if(v)for(var m=0;v>m;m++)o._70I?(u=h+p,r=o._21O(s,l,t,e,i,n,h,u),o._71I(r[2],r[3],r[4],r[5]),h=u,u=h+_,r=o._21O(s,l,t,e,i,n,h,u),o.moveTo(r[4],r[5])):(u=h+_,r=o._21O(s,l,t,e,i,n,h,u),o.moveTo(r[4],r[5]),h=u,u=h+p,r=o._21O(s,l,t,e,i,n,h,u),o._71I(r[2],r[3],r[4],r[5])),h=u;g=c-c*h,o._70I?g>f?(u=h+p,r=o._21O(s,l,t,e,i,n,h,u),o._71I(r[2],r[3],r[4],r[5]),o.moveTo(i,n),o.F=d-(g-f),o._70I=!1):(r=o._19O(s,l,t,e,i,n,h),o._71I(r[2],r[3],r[4],r[5]),c===f?(o.F=0,o._70I=!o._70I):(o.F=f-g,o.moveTo(i,n))):g>d?(u=h+_,r=o._21O(s,l,t,e,i,n,h,u),o.moveTo(r[4],r[5]),r=o._19O(s,l,t,e,i,n,u),o._71I(r[2],r[3],r[4],r[5]),o.F=f-(g-d),o._70I=!0):(o.moveTo(i,n),g===d?(o.F=0,o._70I=!o._70I):o.F=d-g)},bezierCurveTo:function(){var t=arguments;this.pen={x:t[4],y:t[5]},this.g.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5])},arc:function(t,e,i,n,r,o){o||(n=-n,r=-r),vo(this,t,e,n,r-n,i,i,!1)},rect:function(t,e,i,n){var r=this;r.pen={x:t,y:e},r.moveTo(t,e),r.lineTo(t,e+n),r.lineTo(t+i,e+n),r.lineTo(t+i,e),r.lineTo(t,e)},beginPath:function(){this.g.beginPath()},closePath:function(){this.lineTo(this.start.x,this.start.y)},_23O:function(t,e,i,n){var r=i-t,o=n-e;return b(r*r+o*o)},_22O:function(t,e,i,n,r,o,a){for(var s,l,c,h,u,d,f,g=0,v=t,p=e,_=a>0?a:this._69I,y=1;_>=y;y++)c=y/_,h=1-c,u=h*h,d=2*c*h,f=c*c,s=u*t+d*i+f*r,l=u*e+d*n+f*o,g+=this._23O(v,p,s,l),v=s,p=l;return g},_21O:function(t,e,i,n,r,o,a,s){var l=this;if(0===a)return l._20O(t,e,i,n,r,o,s);if(1===s)return l._19O(t,e,i,n,r,o,a);var c=l._20O(t,e,i,n,r,o,s);return c.push(a/s),l._19O.apply(l,c)},_20O:function(t,e,i,n,r,o,a){if(1!==a){var s=i+(r-i)*a,l=n+(o-n)*a;i=t+(i-t)*a,n=e+(n-e)*a,r=i+(s-i)*a,o=n+(l-n)*a}return[t,e,i,n,r,o]},_19O:function(t,e,i,n,r,o,a){if(1!==a){var s=t+(i-t)*a,l=e+(n-e)*a;i+=(r-i)*a,n+=(o-n)*a,t=s+(i-s)*a,e=l+(n-l)*a}return[t,e,i,n,r,o]},_72I:function(t,e){var i=this.pen;(t!==i.x||e!==i.y)&&(i.x=t,i.y=e,this.g.lineTo(t,e))},_71I:function(t,e,i,n){var r=this.pen;(t!==i||e!==n||i!==r.x||n!==r.y)&&(r.x=i,r.y=n,this.g.quadraticCurveTo(t,e,i,n))}}),L&&U){var $s=U.toString();z=$s.indexOf(ee.substr(0,2))>0&&$s.indexOf(at+at.substr(1,1))>1?!0:!1}var Ks=c,tl=c,el=function(t){Ks&&!t._72O&&(tl||(tl={}),tl[t._72O=Ua()]=t)},il=function(t,e){if(e||(e=t),e&&(Ks||(Ks={}),!Ks[t])){var i=new XMLHttpRequest;if(Ks[e]={request:i,url:e},i.overrideMimeType("text/plain"),d.convertURL&&(e=d.convertURL(e)),e.data){var n=d.parse(e.data);nl(t,n),d.handleCompTypeLoaded(t,n)}else i.open("GET",encodeURI(e),!0),i.onload=function(e){if(200===this.status||0===this.status){var i=d.parse(e.target.response);nl(t,i),d.handleCompTypeLoaded(t,i)}else nl(t,c)},i.onerror=function(){nl(t,c)},i.send(null)}},nl=function(t,e){if(Ri[t]=e,delete Ks[t],Rn(Ks)&&(Ks=c,tl)){for(var n in tl){var r=tl[n];r.invalidateAll&&r.invalidateAll(i,"compTypeLoaded",t),r.redraw&&r.redraw(),r.iv(),delete r._72O}tl=c}if(e&&tl)for(var n in tl){var r=tl[n];r.invalidateAll&&r.invalidateAll(i,"compTypeLoading",t),r.redraw&&r.redraw(),r.iv()}},rl=g.chart,ol=d.compStack=[],al=/^style@/,sl=/^attr@/,ll=/^field@/,cl={x:.5,y:.5},hl=function(t,e,i,n){if(!t)return 0;if(t.fitSize&&n)return n;var r=dl(t.width,e,i);return null==r?20:r},ul=function(t,e,i,n){if(!t)return 0;if(t.fitSize&&n)return n;var r=dl(t.height,e,i);return null==r?20:r},dl=function(t,e,n){if(!t||!t.func)return t;var r,o=t.func,a=t.value;return r=yn(o)?n&&n.vectorDataBindingDisabled&&!t.isSafeFunc?a:o(e,n):e instanceof _l?sl.test(o)?e.a(o.slice(5)):al.test(o)?e.s(o.slice(6)):ll.test(o)?e[o.slice(6)]:e[o]?e[o](n):a:a,a!==i&&r==c?a:r},fl=d.drawImage=function(){var t,e,n,r,o,a=function(t,e){t.getValue&&t.getValue.compType===e||(t.getValue=function(n){var r=s(t,n);if(r===i&&e.properties){var o=e.properties[n];o&&(r=o.defaultValue)}return r},t.getValue.compType=e)},s=function(t,i,r){var o=t[i];return o&&o.func?(o=dl(o,e,n),r&&(o=r(o))):r&&(o=t[i]=r(o)),o},l=function(t,e){var i=s(t,e);if(o&&i){var n=$r(o);return i=Jr(i),"rgba("+y(i[0]*n[0])+","+y(i[1]*n[1])+","+y(i[2]*n[2])+","+i[3]+")"}return i},h=function(t){if(mn(t)){for(var e=new gl,i=t.length,n=0;i>n;n+=2)e.add({x:t[n],y:t[n+1]});t=e}return t},u=function(t){var e=s(t,"anchorX"),n=s(t,"anchorY");if(e!==i||n!==i)return{x:e===i?cl.x:e,y:n===i?cl.y:n};var r=s(t,"type"),o=s(t,"name");if("image"!==r||!o)return cl;var a=Wa(o);return a&&a.anchorX&&a.anchorY?{x:a.anchorX,y:a.anchorY}:cl},f=function(t,e){var i=s(t,mt),n=u(t);if(mn(i)){var r=i.length,o=s(t,"relative"),a=e.width,l=e.height;if(4===r)i={x:i[0],y:i[1],width:i[2],height:i[3]},o?(i.x*=a,i.y*=l,i.width*=a,i.height*=l):e.fitSize&&(i.x*=e.widthScale,i.width*=e.widthScale,i.y*=e.heightScale,i.height*=e.heightScale);else if(3===r){var c=i[0];i={width:i[1],height:i[2]},o?(i.width*=a,i.height*=l):e.fitSize&&(i.width*=e.widthScale,i.height*=e.heightScale),"object"==typeof c?c.length&&(c={x:c[0],y:c[1]}):c=Bo(c,e,i),i.x=c.x-i.width*n.x,i.y=c.y-i.height*n.y}var h=s(t,"offsetX");h&&(e.fitSize&&(h*=e.widthScale),i.x+=h),h=s(t,"offsetY"),h&&(e.fitSize&&(h*=e.heightScale),i.y+=h)}return i},g=function(t){return mn(t)?new gl(t):t},v=function(e,n,r,o,a,s){o===i&&(o=1),a===i&&(a=1);var l=Ln(n,e);if(l&&!r&&1===o&&1===a)return!1;s=s||cl;var c=e.x+e.width*s.x,h=e.y+e.height*s.y,u=n.x+n.width*s.x,d=n.y+n.height*s.y;return t.save(),gr(t,c,h),vr(t,r),pr(t,o*(e.width/n.width),a*(e.height/n.height)),gr(t,-u,-d),!0},p=function(){t.restore()},_=function(e,i,n){var o=s(e,"path"),a=s(e,$t),h=s(e,"scaleX"),d=s(e,"scaleY"),f=u(e),g=c,_=no(null,o);if(n||(n=e.unionRect,n||(n=cs(_),e.path.func||(e.unionRect=n)),g=n),n){g||(g=e.unionRect,g||(g=cs(_),e.path.func||(e.unionRect=g)));var y=v(n,g,a,h,d,f),m=s(e,"borderPattern"),b=Zs(t,m),w=l(e,"background"),x=l(e,"borderColor"),C=s(e,"borderWidth"),I=s(e,"gradient"),S=l(e,"gradientColor"),O=s(e,"border3d"),T=s(e,"border3dColor"),M=s(e,"border3dAccuracy"),D=t.lineJoin,P=t.lineCap;if(t.lineJoin=s(e,"borderJoin")||ba,t.lineCap=s(e,"borderCap")||ma,w?(fo(t,w,I,S,g),no(t,o),t.fill(),b!==t&&no(t,o)):no(t,o),C&&x){var k=s(e,"borderWidthAbsolute");k&&(t.save(),t.setTransform(1,0,0,1,0,0)),t.lineWidth=C,t.strokeStyle=x,t.stroke(),k&&t.restore(),O&&lo(t,x,T,C,r,M)}if(Js(t,m),s(e,"dash")){var E=s(e,"dashWidth")||C;if(E>0){m=s(e,"dashPattern")||ya;var b=Zs(t,m,s(e,"dashOffset")),V=s(e,"dashColor")||jo;b!==t&&no(t,o),t.strokeStyle=V,t.lineWidth=E,t.stroke(),s(e,"dash3d")&&lo(t,V,s(e,"dash3dColor"),E,r,s(e,"dash3dAccuracy")),Js(t,m)}}i===mt&&yo(t,w,s(e,"depth"),g),t.lineJoin=D,t.lineCap=P,y&&p()}},m=function(e,i,n,a){var d=s(e,Bt,h),f=s(e,$t),_=u(e);if(d&&a.fitSize){var y=Math.abs(Math.cos(f))<.001,m=new gl,b=cs(d),w=a.widthScale,x=a.heightScale,C=b.x+_.x*b.width,I=b.y+_.y*b.height,S=C*w,O=I*x;d.each(function(t){var e=t.x-C,i=t.y-I;m.add({x:S+e*(y?x:w),y:O+i*(y?w:x)})}),d=m,e.unionRect=null}var T=s(e,"scaleX"),M=s(e,"scaleY"),D=i===xt,P=c;if(!n&&D&&(n=e.unionRect,n||(n=cs(d),e.points.func||(e.unionRect=n)),P=n),n){D?P||(P=e.unionRect,P||(P=cs(d),e.points.func||(e.unionRect=P))):P=n;var k,E,V,R,B=v(n,P,f,T,M,_),L=s(e,"borderPattern"),z=Zs(t,L),A=l(e,"background"),j=Wa(s(e,"repeatImage"),o),F=s(e,"gradientPack"),W=l(e,"borderColor"),H=s(e,"borderWidth"),G=s(e,"segments",g),U=s(e,"gradient"),N=l(e,"gradientColor"),Q=s(e,"border3d"),X=s(e,"border3dColor"),Y=s(e,"border3dAccuracy"),q=s(e,"closePath"),Z=s(e,"fillRule")||"nonzero",J=t.lineJoin,$=t.lineCap;if(t.lineJoin=s(e,"borderJoin")||ba,t.lineCap=s(e,"borderCap")||ma,D?A||j||F?(ao(t,d,G,q),F?ro(t,F):j?go(t,j):fo(t,A,U,N,P),t.fill(Z),F&&t.restore(),z!==t&&ao(z,d,G,q)):ao(z,d,G,q):("roundRect"===i?k=s(e,"cornerRadius"):"polygon"===i?k=s(e,"polygonSide"):"arc"===i&&(k=s(e,"arcFrom"),E=s(e,"arcTo"),V=s(e,"arcClose"),R=s(e,"arcOval")),A||j||F?(uo(t,i,P,k,E,V,R),F?ro(t,F):j?go(t,j):fo(t,A,U,N,P),t.fill(Z),F&&t.restore(),t!==z&&uo(z,i,P,k,E,V,R)):uo(z,i,P,k,E,V,R)),H&&W){var K=s(e,"borderWidthAbsolute");K&&(t.save(),t.setTransform(1,0,0,1,0,0)),t.lineWidth=H,t.strokeStyle=W,t.stroke(),K&&t.restore(),Q&&lo(t,W,X,H,r,Y)}if(Js(t,L),s(e,"dash")){var tt=s(e,"dashWidth")||H;if(tt>0){L=s(e,"dashPattern")||ya;var z=Zs(t,L,s(e,"dashOffset")),et=s(e,"dashColor")||jo;z!==t&&(D?ao(z,d,G,q):uo(z,i,P,k,E,V,R)),t.strokeStyle=et,t.lineWidth=tt,t.stroke(),s(e,"dash3d")&&lo(t,et,s(e,"dash3dColor"),tt,r,s(e,"dash3dAccuracy")),Js(t,L)}}i===mt&&yo(t,A,s(e,"depth"),P),t.lineJoin=J,t.lineCap=$,B&&p()}},b=function(i,r){var a=o,l=o||s(i,$e),c=Wa(s(i,"name"),l);c&&(Ga(t,c,s(i,"stretch"),r.x,r.y,r.width,r.height,e,n,l),o=a)},C=function(e,i){var n=s(e,"text");n!=c&&Ka(t,n,s(e,"font"),l(e,$e),i.x,i.y,i.width,i.height,s(e,"align"),s(e,"vAlign"))},S=function(e,i){_o(t,l(e,$e),i.x,i.y,i.width,i.height,s(e,"width"))},T=function(i,n){var r=s(i,Lt),o=0;if(r&&(r.forEach(function(t){o+=t}),o>0)){for(var a=s(i,"colors")||rl,l=s(i,"startAngle")||0,h=s(i,"hollow"),u=s(i,jt),d=s(i,Ut),f=s(i,Nt),g=u?new gl:c,v=n.x,p=n.y,_=n.width,y=n.height,m=v+_/2,b=p+y/2,w=x(_,y)/2,C=0,S=0;S<r.length;S++){var T=r[S],M=P*T/o,D=l+M;if(t.fillStyle=a[C++],C===a.length&&(C=0),t.beginPath(),h){var k=m+I(l)*w/2,E=b+O(l)*w/2,V=m+I(D)*w,R=b+O(D)*w;t.moveTo(k,E),t.arc(m,b,w/2,l,D,!1),t.lineTo(V,R),t.arc(m,b,w,D,l,!0)}else t.moveTo(m,b),t.arc(m,b,w,D,l,!0);g&&(M=(l+D)/2,g.add({text:yn(u)?u(T,S,o,e):T,x:m+.75*I(M)*w,y:b+.75*O(M)*w})),t.closePath(),t.fill(),l=D}g&&g.each(function(e){Ka(t,e.text,d,f,e.x,e.y,0,0,lt)})}},M=function(i,n){var r=s(i,zt);if(r&&r.length>0){var o=r.length,a=s(i,jt),l=s(i,Ut),h=s(i,Nt),u=a?new gl:c,d=s(i,"minValue")||0,f=s(i,"maxValue");if(f==c&&(f=0,r.forEach(function(t){t.values.forEach(function(t){f=w(f,t)})})),d===f)return;for(var g=n.height/(f-d),v=n.y+f*g,p=s(r[0],Lt).length,_=n.width/(3*p+1),y=2*_/o,m=0,b=0;o>b;b++)for(var x=r[b],C=s(x,$e),I=s(x,"colors"),S=s(x,Lt),O=0;p>O;O++){I?t.fillStyle=I[O]:C?t.fillStyle=C:(t.fillStyle=rl[m++],m===rl.length&&(m=0));var T=S[O],M=T*g,D=n.x+(1+3*O)*_+b*y;if(ho(t,D,v-M,y,M),u){var P=yn(a)?a(T,O,x,e):T,k=ts(l,P).height;u.add({x:D,y:v-M-k,width:y,height:k,text:P})}}u&&u.each(function(e){Ka(t,e.text,l,h,e.x,e.y,e.width,e.height,lt)})}},D=function(i,n){var r=s(i,zt);if(r&&r.length>0){var o=r.length,a=s(r[0],Lt).length,l=n.width/(3*a+1),h=0,u=s(i,"maxValue"),d=s(i,jt),f=s(i,Ut),g=s(i,Nt),v=d?new gl:c;if(u==c){u=0;for(var p=0;a>p;p++){for(var _=0,y=0;o>y;y++)_+=s(r[y],Lt)[p];u=w(u,_)}}if(u>0){for(var p=0;a>p;p++)for(var m=n.y+n.height,y=0;o>y;y++){var b=r[y],x=s(b,$e),C=s(b,Lt)[p],I=C/u*n.height;x?t.fillStyle=x:(t.fillStyle=rl[h++],h===rl.length&&(h=0)),m-=I;var S={x:n.x+(1+3*p)*l,y:m,width:2*l,height:I};ho(t,S.x,S.y,S.width,S.height),v&&(S.text=yn(d)?d(C,p,b,e):C,v.add(S))}v&&v.each(function(e){Ka(t,e.text,f,g,e.x,e.y,e.width,e.height,lt)})}}},k=function(i,n){var r=s(i,zt);if(r&&r.length>0){for(var o=r.length,a=s(r[0],Lt).length,l=n.width/(3*a+1),h=0,u=s(i,jt),d=s(i,Ut),f=s(i,Nt),g=u?new gl:c,v=0;a>v;v++){for(var p=0,_=0;o>_;_++)p+=s(r[_],Lt)[v];if(p>0){var y=n.y+n.height;for(_=0;o>_;_++){var m=r[_],b=s(m,$e),w=s(m,Lt)[v],x=w/p*n.height;b?t.fillStyle=b:(t.fillStyle=rl[h++],h===rl.length&&(h=0)),y-=x;var C={x:n.x+(1+3*v)*l,y:y,width:2*l,height:x};ho(t,C.x,C.y,C.width,C.height),g&&(C.text=yn(u)?u(w,v,m,e):w,g.add(C))}}}g&&g.each(function(e){Ka(t,e.text,d,f,e.x,e.y,e.width,e.height,lt)})}},E=function(i,n){var o=s(i,zt);if(o&&o.length>0){var a=o.length,l=s(i,"minValue")||0,h=s(i,"maxValue");if(h==c&&(h=0,o.forEach(function(t){t.values.forEach(function(t){h=w(h,t)})})),l===h)return;for(var u=n.height/(h-l),d=n.y+h*u,f=s(o[0],Lt).length,g=n.width/(3*f+1),v=0,p=s(i,"lineWidth")||2,_=s(i,"line3d"),y=s(i,"linePoint"),m=s(i,jt),b=s(i,Ut),x=s(i,Nt),C=0;a>C;C++){var I=o[C],S=s(I,$e),O=s(I,Lt);S?t.strokeStyle=S:(S=t.strokeStyle=rl[v++],v===rl.length&&(v=0)),t.beginPath();for(var T=0;f>T;T++){var M=n.x+(2+3*T)*g,D=d-O[T]*u;0===T?t.moveTo(M,D):t.lineTo(M,D)}if(t.lineWidth=p,t.stroke(),_&&lo(t,S,c,p,r),y||m){var k,E=p/2+2;for(T=0;f>T;T++){var V=O[T];if(M=n.x+(2+3*T)*g,D=d-V*u,yn(y)?y(t,M,D,S,T,I,e):y&&(t.fillStyle=S,t.beginPath(),t.arc(M,D,E,0,P,!0),t.fill()),yn(m)?k=m(V,T,I,e):m&&(k=V),k){var R=ts(b,k).height,B=t.shadowBlur;if(B){var L=t.shadowOffsetX,z=t.shadowOffsetY,A=t.shadowColor;t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.shadowColor=c}Ka(t,k,b,x,M,D-R-E+2,0,R,lt),B&&(t.shadowOffsetX=L,t.shadowOffsetY=z,t.shadowBlur=B,t.shadowColor=A)}}}}}},V={border:S,image:b,text:C,pieChart:T,columnChart:M,stackedColumnChart:D,percentageColumnChart:k,lineChart:E};return function(l,y,b,w,x,C,I,S,O){if(y&&x&&C){t=l,e=I,n=S,r=n?n._zoom?n._zoom:1:1,o=O;var T=x,M=C;if(cc()){var D,P;0===t[Re]?cc[0]&&(D=!0):D=!0,t.texureImage2D?cc[1]&&(P=!0):P=!0,D&&P&&(T=b,M=w)}if(y.tagName)return t.drawImage(y,T,M,x,C),void 0;if(s(y,"visible")!==!1){o||(o=dl(y.color,e,n));var k=hl(y,e,n,x),E=ul(y,e,n,C),R={x:0,y:0,width:k,height:E,fitSize:s(y,"fitSize")},B=s(y,"clip"),L=s(y,"opacity");R.fitSize&&(R.widthScale=k/dl(y.width,e,n),R.heightScale=E/dl(y.height,e,n)),t.save(),gr(t,T,M),(k!==x||E!==C)&&t.scale(x/k,C/E),B&&(yn(B)?B(t,k,E,e,n,y):(t.beginPath(),t.rect(0,0,k,E),t.clip())),L!=c&&(t.globalAlpha*=L),s(y,"comps").forEach(function(o){if(s(o,ie)!==!1){ol.splice(0,0,o);var l=s(o,"opacity"),y=s(o,"shadow"),b=s(o,"type"),w=f(o,R);if(l!=c){var x=t.globalAlpha;t.globalAlpha*=l}if(y){var C=t.shadowOffsetX,I=t.shadowOffsetY,S=t.shadowBlur,O=t.shadowColor,T=s(o,"shadowOffsetX"),M=s(o,"shadowOffsetY"),D=s(o,"shadowBlur"),P=s(o,"shadowColor");t.shadowOffsetX=(T==c?3:T)*r,t.shadowOffsetY=(M==c?3:M)*r,t.shadowBlur=(D==c?6:D)*r,t.shadowColor=P||zo}if("save"===b)t.save();else if("endClip"===b||"restore"===b)t.restore();else if("clip"===b)t.save(),ao(t,s(o,"points",h),s(o,"segments",g),!0),t.clip();else if(Co[b]||b===xt)m(o,b,w,R);else if("SVGPath"===b)_(o,b,w);else{w=w||{x:0,y:0,width:R.width,height:R.height};var k=s(o,$t),E=s(o,"scaleX"),B=s(o,"scaleY"),L=u(o),z=v(w,w,k,E,B,L);if(yn(b))a(o,b),d.drawCompType(b,t,w,o,e,n);else if(d.getCompType(b)){var A=d.getCompType(b),j=A.func||A;a(o,A),d.drawCompType(j,t,w,o,e,n)}else V[b]?V[b](o,w):d.getCompType(b)===i&&zi.test(b)&&il(b);z&&p()}y&&(t.shadowOffsetX=C,t.shadowOffsetY=I,t.shadowBlur=S,t.shadowColor=O),l!=c&&(t.globalAlpha=x),ol.splice(0,1)}}),t.restore()}}}}();d.getCurrentComp=function(){return ol[0]},d.getParentComp=function(){return ol[1]},d.getInternal=function(){return{isEnter:Ur,isEsc:Nr,isSpace:Gr,isLeft:jr,isUp:Fr,isRight:Wr,isDown:Hr,addMethod:Pn,superCall:Vn,toPointsArray:so,translateAndScale:fr,appendArray:Mn,createWorldMatrix:Ns,vec3TransformMat4:As,setCanvas:rr,createDiv:tr,createView:Kn,createCanvas:er,createImage:nn,initContext:dr,layout:mr,fillRect:ho,Mat:Io,drawBorder:_o,isString:gn,setBorder:ir,getPropertyValue:Hn,setPropertyValue:Gn,drawVerticalLine:Un,draw3DRect:yo,getPinchDist:Oo,isSameRect:Ln,getPosition:Bo,intersectionLineRect:Fn,getNodeRect:bl,getEdgeAgentPosition:Fl,getImageWidth:hl,getImageHeight:ul,initItemElement:$n,drawPoints:ao,createG2:Zs,closePopup:xr,isH:sn,createAnim:Dn,createNormalMatrix:od,createNormals:Ru,toFloatArray:bf,glMV:ad,batchShape:Ad,createNodeMatrix:Us,getFaceInfo:dd,transformAppend:uu,drawFaceInfo:fd,to3dPointsArray:Cf,setGLDebugMode:function(t){iu=t},cube:function(){return{vs:Xd,is:Yd,uv:qd}},ui:function(){return{DataUI:rh,NodeUI:oh,EdgeUI:ah,GroupUI:lh,ShapeUI:hh,GridUI:dh,Data3dUI:Nf,Node3dUI:Qf,Shape3dUI:Yf}},getInternalVersion:function(){return"U2FsdGVkX19g7LlqY+EdIt38EaEx5GvHx7Z5GH8Gd6c="},getDragger:function(){return Cr},addMSMap:function(t){Pn(ca,t)},k:r}},function(t){function e(t,e){t!=c&&(e==c&&Ze!=typeof t?this._54O(t,256):this._54O(t,e))}function i(){return new e(c)}function o(t,e,i,n,r,o){for(;--o>=0;){var a=e*this[t++]+i[n]+r;r=y(a/67108864),i[n++]=67108863&a}return r}function s(t,e,i,n,r,o){for(var a=32767&e,s=e>>15;--o>=0;){var l=32767&this[t],c=this[t++]>>15,h=s*l+c*a;l=a*l+((32767&h)<<15)+i[n]+(1073741823&r),r=(l>>>30)+(h>>>15)+s*c+(r>>>30),i[n++]=1073741823&l}return r}function l(t,e,i,n,r,o){for(var a=16383&e,s=e>>14;--o>=0;){var l=16383&this[t],c=this[t++]>>14,h=s*l+c*a;l=a*l+((16383&h)<<14)+i[n]+r,r=(l>>28)+(h>>14)+s*c,i[n++]=268435455&l}return r}function h(t){return Dt.charAt(t)}function u(t,e){var i=Pt[t.charCodeAt(e)];return i==c?-1:i}function d(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function f(t){this.t=1,this.s=0>t?-1:0,t>0?this[0]=t:-1>t?this[0]=t+this.DV:this.t=0}function g(t){var e=i();return e._58O(t),e}function v(t,i){var n,r=this;if(16==i)n=4;else if(8==i)n=3;else if(256==i)n=8;else if(2==i)n=1;else if(32==i)n=5;else{if(4!=i)return r.fromRadix(t,i),void 0;n=2}r.t=0,r.s=0;for(var o=t.length,a=!1,s=0;--o>=0;){var l=8==n?255&t[o]:u(t,o);0>l?"-"==t.charAt(o)&&(a=!0):(a=!1,0==s?r[r.t++]=l:s+n>r.DB?(r[r.t-1]|=(l&(1<<r.DB-s)-1)<<s,r[r.t++]=l>>r.DB-s):r[r.t-1]|=l<<s,s+=n,s>=r.DB&&(s-=r.DB))}8==n&&0!=(128&t[0])&&(r.s=-1,s>0&&(r[r.t-1]|=(1<<r.DB-s)-1<<s)),r._57O(),a&&e.ZERO._78O(r,r)}function p(){for(var t=this,e=t.s&t.DM;t.t>0&&t[t.t-1]==e;)--t.t}function _(t){var e=this;if(e.s<0)return"-"+e._85O()[bt](t);var i;if(16==t)i=4;else if(8==t)i=3;else if(2==t)i=1;else if(32==t)i=5;else{if(4!=t)return e.toRadix(t);i=2}var n,r=(1<<i)-1,o=!1,a="",s=e.t,l=e.DB-s*e.DB%i;if(s-- >0)for(l<e.DB&&(n=e[s]>>l)>0&&(o=!0,a=h(n));s>=0;)i>l?(n=(e[s]&(1<<l)-1)<<i-l,n|=e[--s]>>(l+=e.DB-i)):(n=e[s]>>(l-=i)&r,0>=l&&(l+=e.DB,--s)),n>0&&(o=!0),o&&(a+=h(n));return o?a:"0"}function C(){var t=i();return e.ZERO._78O(this,t),t}function S(){return this.s<0?this._85O():this}function M(t){var e=this,i=e.s-t.s;if(0!=i)return i;var n=e.t;if(i=n-t.t,0!=i)return e.s<0?-i:i;for(;--n>=0;)if(0!=(i=e[n]-t[n]))return i;return 0}function D(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function k(){var t=this;return t.t<=0?0:t.DB*(t.t-1)+D(t[t.t-1]^t.s&t.DM)}function E(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s}function V(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=w(this.t-t,0),e.s=this.s}function R(t,e){var i,n=this,r=t%n.DB,o=n.DB-r,a=(1<<o)-1,s=y(t/n.DB),l=n.s<<r&n.DM;for(i=n.t-1;i>=0;--i)e[i+s+1]=n[i]>>o|l,l=(n[i]&a)<<r;for(i=s-1;i>=0;--i)e[i]=0;e[s]=l,e.t=n.t+s+1,e.s=n.s,e._57O()}function L(t,e){var i=this;e.s=i.s;var n=y(t/i.DB);if(n>=i.t)return e.t=0,void 0;var r=t%i.DB,o=i.DB-r,a=(1<<r)-1;e[0]=i[n]>>r;for(var s=n+1;s<i.t;++s)e[s-n-1]|=(i[s]&a)<<o,e[s-n]=i[s]>>r;r>0&&(e[i.t-n-1]|=(i.s&a)<<o),e.t=i.t-n,e._57O()}function z(t,e){for(var i=this,n=0,r=0,o=x(t.t,i.t);o>n;)r+=i[n]-t[n],e[n++]=r&i.DM,r>>=i.DB;if(t.t<i.t){for(r-=t.s;n<i.t;)r+=i[n],e[n++]=r&i.DM,r>>=i.DB;r+=i.s}else{for(r+=i.s;n<t.t;)r-=t[n],e[n++]=r&i.DM,r>>=i.DB;r-=t.s}e.s=0>r?-1:0,-1>r?e[n++]=i.DV+r:r>0&&(e[n++]=r),e.t=n,e._57O()}function j(t,i){var n=this.abs(),r=t.abs(),o=n.t;for(i.t=o+r.t;--o>=0;)i[o]=0;for(o=0;o<r.t;++o)i[o+n.t]=n.am(0,r[o],i,o,0,n.t);i.s=0,i._57O(),this.s!=t.s&&e.ZERO._78O(i,i)}function F(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){var n=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,n,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t._57O()}function W(t,n,r){var o=t.abs(),a=this;if(!(o.t<=0)){var s=a.abs();if(s.t<o.t)return n!=c&&n._58O(0),r!=c&&a._77O(r),void 0;r==c&&(r=i());var l=i(),h=a.s,u=t.s,d=a.DB-D(o[o.t-1]);d>0?(o._44O(d,l),s._44O(d,r)):(o._77O(l),s._77O(r));var f=l.t,g=l[f-1];if(0!=g){var v=g*(1<<a.F1)+(f>1?l[f-2]>>a.F2:0),p=a.FV/v,_=(1<<a.F1)/v,m=1<<a.F2,b=r.t,w=b-f,x=n==c?i():n;for(l._59O(w,x),r._52O(x)>=0&&(r[r.t++]=1,r._78O(x,r)),e.ONE._59O(f,x),x._78O(l,l);l.t<f;)l[l.t++]=0;for(;--w>=0;){var C=r[--b]==g?a.DM:y(r[b]*p+(r[b-1]+m)*_);if((r[b]+=l.am(0,C,r,w,0,f))<C)for(l._59O(w,x),r._78O(x,r);r[b]<--C;)r._78O(x,r)}n!=c&&(r._45O(f,n),h!=u&&e.ZERO._78O(n,n)),r.t=f,r._57O(),d>0&&r._46O(d,r),0>h&&e.ZERO._78O(r,r)}}}function H(t){var n=i();return this.abs()._49O(t,c,n),this.s<0&&n._52O(e.ZERO)>0&&t._78O(n,n),n}function G(t){this.m=t}function U(t){return t.s<0||t._52O(this.m)>=0?t.mod(this.m):t}function N(t){return t}function Q(t){t._49O(this.m,c,t)}function X(t,e,i){t._47O(e,i),this._74O(i)}function Y(t,e){t._48O(e),this._74O(e)}function q(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=15&e*(2-(15&t)*e),e=255&e*(2-(255&t)*e),e=65535&e*(2-(65535&(65535&t)*e)),e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Z(t){var e=this;e.m=t,e.mp=t._50O(),e.mpl=32767&e.mp,e.mph=e.mp>>15,e.um=(1<<t.DB-15)-1,e.mt2=2*t.t}function J(t){var n=i();return t.abs()._59O(this.m.t,n),n._49O(this.m,c,n),t.s<0&&n._52O(e.ZERO)>0&&this.m._78O(n,n),n}function $(t){var e=i();return t._77O(e),this._74O(e),e}function K(t){for(var e=this;t.t<=e.mt2;)t[t.t++]=0;for(var i=0;i<e.m.t;++i){var n=32767&t[i],r=n*e.mpl+((n*e.mph+(t[i]>>15)*e.mpl&e.um)<<15)&t.DM;for(n=i+e.m.t,t[n]+=e.m.am(0,r,t,i,0,e.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t._57O(),t._45O(e.m.t,t),t._52O(e.m)>=0&&t._78O(e.m,t)}function tt(t,e){t._48O(e),this._74O(e)}function et(t,e,i){t._47O(e,i),this._74O(i)}function it(){return 0==(this.t>0?1&this[0]:this.s)}function nt(t,n){if(t>4294967295||1>t)return e.ONE;var r=i(),o=i(),a=n._73O(this),s=D(t)-1;for(a._77O(r);--s>=0;)if(n._76O(r,o),(t&1<<s)>0)n._75O(o,a,r);else{var l=r;r=o,o=l}return n.revert(r)}function rt(t,e){var i;return i=256>t||e._51O()?new G(e):new Z(e),this.exp(t,i)}function ot(){var t=this;if(t.s<0){if(1==t.t)return t[0]-t.DV;if(0==t.t)return-1}else{if(1==t.t)return t[0];if(0==t.t)return 0}return(t[1]&(1<<32-t.DB)-1)<<t.DB|t[0]}function at(t,i){return new e(t,i)}function st(){var t=this;t.n=c,t.e=0,t.d=c,t.p=c,t.q=c,t.dmp1=c,t.dmq1=c,t._10A=c}function lt(t){return t._53O(this.e,this.n)}function ct(t){var e,i,n,r="",o=0;for(e=0;e<t.length&&t.charAt(e)!=zt;++e)n=Lt.indexOf(t.charAt(e)),0>n||(0==o?(r+=h(n>>2),i=3&n,o=1):1==o?(r+=h(i<<2|n>>4),i=15&n,o=2):2==o?(r+=h(i),r+=h(n>>2),i=3&n,o=3):(r+=h(i<<2|n>>4),r+=h(15&n),o=0));return 1==o&&(r+=h(i<<2)),r}function ht(t){var e=t.split(""),i=ct(t);return e.forEach(function(t){var e=t.length;e>0&&i&&(xi+=A(t))}),i}function ut(t,e){var i=Ut._4O.Util._56O(t,"ss"),n={},r=0;return n.v=i==e,n.t=1,n.s=0>r?-1:0,Ci=n.v,r>0?n[0]=r:-1>r?n[0]=r+n.DV:n.t=0,[i,n]}function ft(t){var e=38,i=t.substring(0,e);if(i&&30==i.indexOf("05000420")){var n=["ss",t.substring(e)];return n}return[]}function pt(t,e){e=e.replace(Ht,""),e=e.replace(/[ \n]+/g,"");var i=at(e,16);if(i._55O()>this.n._55O())return 0;var n=this._37O(i),r=n[bt](16).replace(/^1f+00/,""),o=ft(r);if(0==o.length)return!1;for(var a,s,l,c=.5,h=Cs,u=[0,.5,.75,.875,.9375],d=[],f=[],g=[],v=P/h,p=o[1],_=ut(t,p)[0],y=0,m=0;y<u.length;y++){var b=0===y%2?0:.5;for(a=0;h>=a;a++)s=(a+b)*v,l=1-u[y],d.push(I(s)*c*l,-c+2*u[y]*c,-O(s)*c*l),f.push((a+b)/h,l)}for(y=0;y<u.length-1;y++){var w=y*(h+1),x=(y+1)*(h+1);for(a=0;h>a;a++)g.push(w+a,x+a+1,x+a,w+a,w+a+1,x+a+1)}return g.forEach(function(t){m+=t}),p==_&&m>10}var _t,yt=0xdeadbeefcafe,mt=15715070==(16777215&yt),bt="toString",wt="",xt="nat",Ct=function(){};a=t["D"+11182[bt](T(2,5))];var It=e.prototype;re+=dt.substr(0,1);var St=t.navigator?t.navigator.appName:"";mt&&"Microsoft Internet Explorer"==St?(It.am=s,_t=30):mt&&"Netscape"!=St?(It.am=o,_t=26):(It.am=l,_t=28),It.DB=_t,It.DM=(1<<_t)-1,It.DV=1<<_t;var Ot=52;It.FV=T(2,Ot),It.F1=Ot-_t,It.F2=2*_t-Ot;var Tt,Mt,Dt="0123456789abcdefghijklmnopqrstuvwxyz",Pt=[],kt=function(t){return String.fromCharCode(t)};for(Tt="0".charCodeAt(0),Mt=0;9>=Mt;++Mt)Pt[Tt++]=Mt;for(Tt="a".charCodeAt(0),Mt=10;36>Mt;++Mt)Pt[Tt++]=Mt;for(Tt="A".charCodeAt(0),Mt=10;36>Mt;++Mt)Pt[Tt++]=Mt;var Et=G.prototype;Et._73O=U,Et.revert=N,Et._74O=Q,Et._75O=X,Et._76O=Y;var Vt=Z.prototype;Vt._73O=J,Vt.revert=$,Vt._74O=K,Vt._75O=et,Vt._76O=tt,It._77O=d,It._58O=f,It._54O=v,It._57O=p,It._59O=E,It._45O=V,It._44O=R,It._46O=L,It._78O=z,It._47O=j,It._48O=F,It._49O=W,It._50O=q,It._51O=it,It.exp=nt,It.toString=_,It._85O=C,It.abs=S,It._52O=M,It._55O=k,It.mod=H,It._53O=rt,e.ZERO=g(0),e.ONE=g(1),It._86O=ot;var Rt=function(t,e){var i=this;i.isPublic=!0,typeof t!==Ze?(i.n=t,i.e=e):t!=c&&e!=c&&t.length>0&&e.length>0&&(i.n=at(t,16),i.e=A(e,16))};qr=function(){var t,e,i=ht(Ft),n=i.substr(0,4),o=i.substr(4,2),s=i.substr(6,2),l=1,c=!l,h=r,u=[],d=ii.charAt(7);if(a&&(a[bt]().indexOf(xt)<0||a[re][bt]().indexOf(xt)<0||!i?t=Fs(oo[d]):(i=new a(n-0,o-l,s-0),e=i.setHours(9),a[re]()>e?t=Fs(oo[d]):c=!0)),i&&t&&h){for(var f in t)u.push(f);var g,v=t[u[0]],p=t[u[1]],_=t[u[2]],y=t[u[4]],m=t[u[5]],b=t[u[6]],w=Kt._27O(h);w&&b&&(g=v+p+_+y+""+m,g&&w._31O(g,b)&&(c=!0))}return c||(uo=Bn),d};var Bt=st.prototype;Bt._37O=lt,Bt._38O=Rt;var Lt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zt="=",At=25,jt=10,Ft="IBgBAQ==",Wt=Wt||function(t,e){var i={},n=i._7A={},r=n._6A=function(){function t(){}return{_80O:function(e){t.prototype=this;var i=new t;return e&&i._5A(e),i.hasOwnProperty("_82O")||(i._82O=function(){i.$super._82O.apply(this,arguments)}),i._82O.prototype=i,i.$super=this,i},_3A:function(){var t=this._80O();return t._82O.apply(t,arguments),t},_82O:function(){},_5A:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty(bt)&&(this.toString=t.toString)},_88O:function(){return this._82O.prototype._80O(this)}}}(),o=n._39O=r._80O({_82O:function(t,i){t=this._84O=t||[],this._65O=i!=e?i:4*t.length},toString:function(t){return(t||s).stringify(this)},_89O:function(t){var e=this._84O,i=t._84O,n=this._65O,r=t._65O;if(this._57O(),n%4)for(var o=0;r>o;o++){var a=255&i[o>>>2]>>>24-8*(o%4);e[n+o>>>2]|=a<<24-8*((n+o)%4)}else if(i.length>65535)for(var o=0;r>o;o+=4)e[n+o>>>2]=i[o>>>2];else e.push.apply(e,i);return this._65O+=r,this},_57O:function(){var t=this._84O,e=this._65O;t[e>>>2]&=4294967295<<32-8*(e%4),t.length=m(e/4)},_88O:function(){var t=r._88O.call(this);return t._84O=this._84O.slice(0),t},_87O:function(t){for(var e=[],i=0;t>i;i+=4)e.push(0|4294967296*B);return new o._82O(e,t)}}),a=i._2A={},s=a._69O={stringify:function(t){var e,i=t._84O,n=t._65O,r=[];for(e=0;n>e;e++){var o=255&i[e>>>2]>>>24-8*(e%4);r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},_68O:function(t){for(var e=t.length,i=[],n=0;e>n;n+=2)i[n>>>3]|=A(t.substr(n,2),16)<<24-4*(n%8);return new o._82O(i,e/2)}},l=a._8A={stringify:function(t){var e,i=t._84O,n=t._65O,r=[];for(e=0;n>e;e++){var o=255&i[e>>>2]>>>24-8*(e%4);r.push(kt(o))}return r.join("")},_68O:function(t){var e,i=t.length,n=[];for(e=0;i>e;e++)n[e>>>2]|=(255&t.charCodeAt(e))<<24-8*(e%4);return new o._82O(n,i)}},c=a._9A={stringify:function(t){try{return decodeURIComponent(escape(l.stringify(t)))}catch(t){throw new Error("")}},_68O:function(t){return l._68O(unescape(encodeURIComponent(t)))}},h=n._32O=r._80O({_1A:function(){this._83O=new o._82O,this._23O=0},_33O:function(t){typeof t==Ze&&(t=c._68O(t)),this._83O._89O(t),this._23O+=t._65O},_25O:function(t){var e=this._83O,i=e._84O,n=e._65O,r=this._79O,a=4*r,s=n/a;s=t?m(s):w((0|s)-this._22O,0);var l=s*r,c=x(4*l,n);if(l){for(var h=0;l>h;h+=r)this._20O(i,h);var u=i.splice(0,l);e._65O-=c}return new o._82O(u,c)},_88O:function(){var t=r._88O.call(this);return t._83O=this._83O._88O(),t},_22O:0});n._66O=h._80O({cfg:r._80O(),_82O:function(t){this.cfg=this.cfg._80O(t),this._1A()},_1A:function(){h._1A.call(this),this._34O()},_81O:function(t){return this._33O(t),this._25O(),this},_72O:function(t){t&&this._33O(t);var e=this._21O();return e},_79O:16,_26O:function(t){return function(e,i){return new t._82O(i)._72O(e)}},_19O:function(t){return function(e,i){return new u._71O._82O(t,i)._72O(e)}}});var u=i._67O={};return i}();!function(){var t=Wt,e=t._7A,i=e._39O,n=e._66O,r=t._67O,o=[],a=[];!function(){function t(t){for(var e=b(t),i=2;e>=i;i++)if(!(t%i))return!1;return!0}function e(t){return 0|4294967296*(t-(0|t))}for(var i=2,n=0;64>n;)t(i)&&(8>n&&(o[n]=e(T(i,.5))),a[n]=e(T(i,1/3)),n++),i++}();var s=[],l=r._41O=n._80O({_34O:function(){this._64O=new i._82O(o.slice(0))},_20O:function(t,e){for(var i=this._64O._84O,n=i[0],r=i[1],o=i[2],l=i[3],c=i[4],h=i[5],u=i[6],d=i[7],f=0;64>f;f++){if(16>f)s[f]=0|t[e+f];else{var g=s[f-15],v=(g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3,p=s[f-2],_=(p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10;s[f]=v+s[f-7]+_+s[f-16]}var y=c&h^~c&u,m=n&r^n&o^r&o,b=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),w=(c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25),x=d+w+y+a[f]+s[f],C=b+m;d=u,u=h,h=c,c=0|l+x,l=o,o=r,r=n,n=0|x+C}i[0]=0|i[0]+n,i[1]=0|i[1]+r,i[2]=0|i[2]+o,i[3]=0|i[3]+l,i[4]=0|i[4]+c,i[5]=0|i[5]+h,i[6]=0|i[6]+u,i[7]=0|i[7]+d},_21O:function(){var t=this._83O,e=t._84O,i=8*this._23O,n=8*t._65O;return e[n>>>5]|=128<<24-n%32,e[(n+64>>>9<<4)+14]=y(i/4294967296),e[(n+64>>>9<<4)+15]=i,t._65O=4*e.length,this._25O(),this._64O},_88O:function(){var t=n._88O.call(this);return t._64O=this._64O._88O(),t}});t._41O=n._26O(l),t._42O=n._19O(l)}();var Ht=new RegExp("");Ht.compile("[^0-9a-f]","gi"),st._28O=-1,st._29O=-2,Bt._31O=pt,Bt._63O=pt,st._43O=-2;var Gt=new function(){var t=this;t._5O=function(t,e){if("8"!=t.substring(e+2,e+3))return 1;var i=A(t.substring(e+3,e+4));return 0==i?-1:i>0&&10>i?i+1:-2},t._13O=function(e,i){var n=t._5O(e,i);return 1>n?"":e.substring(i+2,i+2+2*n)},t._12O=function(i,n){var r=t._13O(i,n);if(""==r)return-1;var o;return o=A(r.substring(0,1))<8?new e(r,16):new e(r.substring(2),16),
o._86O()},t._6O=function(e,i){var n=t._5O(e,i);return 0>n?n:i+2*(n+1)},t._11O=function(e,i){var n=t._6O(e,i),r=t._12O(e,i);return e.substring(n,n+2*r)},t._10O=function(e,i){var n=t._6O(e,i),r=t._12O(e,i);return n+2*r},t._7O=function(e,i){var n=[],r=t._6O(e,i);n.push(r);for(var o=t._12O(e,i),a=r,s=0;;){var l=t._10O(e,a);if(l==c||l-r>=2*o)break;if(s>=200)break;n.push(l),a=l,s++}return n}};if(Gt._90O=kt(jt+24),Gt._91O=n+kt(jt*jt+8),Ut==c||!Ut)var Ut={};Ut._4O!=c&&Ut._4O||(Ut._4O={});var Nt=Ut._4O;Ut._4O.Util=new function(){var t=this;t._56O=function(t){var e=new Ut._4O._3O;return e._30O(t)},t._4A=function(t){var e=new Ut._4O._3O;return e._36O(t)},t._11A=function(t){var e=new Nt._3O;return e._30O(t)}},Ut._4O._3O=function(){var t=this;t._8O=function(e,i){if("ss"==e&&"cj"==i){try{t.md=Wt._67O._41O._3A()}catch(t){Ct(wt)}t._24O=function(e){t.md._81O(e)},t._35O=function(e){var i=Wt._2A._69O._68O(e);t.md._81O(i)},t._60O=function(){var e=t.md._72O();return e[bt](Wt._2A._69O)},t._30O=function(e){return t._24O(e),t._60O()},t._36O=function(e){return t._35O(e),t._60O()}}},t._24O=function(){Ct(wt)},t._35O=function(){Ct(wt)},t._60O=function(){Ct(wt)},t._30O=function(){Ct(wt)},t._36O=function(){Ct(wt)},t._8O("ss","cj")},Ii=function(t){var e=Qn[Ge[7]],i=1,n=!1;if(Xr.a!=Qn[ti])return Xr.a;if(Xr.forEach(function(t){i*=t}),t>i){if(e){e=e.split(Gt._90O);var r=e[3],o=e[7],a=e[11],s=e[19],l=e[23],c=e[27],h=r+o+a+s+l;n=Yi()(h,c)}n||(rh.prototype._42=wi)}else n=!0;return Xr.a=n,n},At=String.fromCharCode(At+20);var Qt=function(t){return t=t.replace(Ht,wt),t=t.replace(/[ \n]+/g,wt)},Xt="30",Yt="06",qt="02",Zt="03",Jt=at,$t=/^1f+00/,Kt=function(){var t;return t={_18O:function(t){var e=t,i=e.replace(/\s+/g,""),n=ct(i);return n},_14O:function(t){var e=this._18O(t),i=this._15O(e);return i},_15O:function(t){var e=this._17O(t);if("2a864886f70d010101"==e._61O){var i=this._16O(e.key),n=new st;return n._38O(i.n,i.e),n}Ct(wt)},_16O:function(t){var e={};t.substr(0,2)!=Xt&&Ct(wt);var i=Gt._7O(t,0);return 2!=i.length&&Ct(wt),t.substr(i[0],2)!=qt&&Ct(wt),e.n=Gt._11O(t,i[0]),t.substr(i[1],2)!=qt&&Ct(wt),e.e=Gt._11O(t,i[1]),e},_17O:function(t){var e={};e._40O=c;var i=Gt._7O(t,0);2!=i.length&&Ct(wt);var n=i[0];t.substr(n,2)!=Xt&&Ct(wt);var r=Gt._7O(t,n);return 2!=r.length&&Ct(wt),t.substr(r[0],2)!=Yt&&Ct(wt),e._61O=Gt._11O(t,r[0]),t.substr(r[1],2)==Yt?e._40O=Gt._11O(t,r[1]):t.substr(r[1],2)==Xt&&(e._40O={},e._40O.p=Gt._70O(t,r[1],[0],qt),e._40O.q=Gt._70O(t,r[1],[1],qt),e._40O.g=Gt._70O(t,r[1],[2],qt)),t.substr(i[1],2)!=Zt&&Ct(wt),e.key=Gt._11O(t,i[1]).substr(2),e}},t._17O?t:c}(),te=Kt._27O=function(t){return Kt._14O(t)};Yi=function(){return function(t,e){e=Qt(e);var i=Jt(e,T(2,4)),n=this;if(!n||!n.n||i._55O()>n.n._55O())return 0;var r=n._37O(i),o=r[bt](T(2,4)).replace($t,""),a=ft(o);if(0==a.length)return!1;var s=a[0],l=a[1],c=function(t){return Ut._4O.Util._56O(t,s)},h=c(t);return l==h}.bind(te(r))};var ee,ie;return function(){var t=be.length-me.length;if(t>0)for(var e=0;t>e;e++)ee=Nt.Util,ie=Qt}(),Ai=function(t,e){e=ie(e);var i=te(Xs),n=vt.length,r=2*n,o=Jt(e,T(n,r)),a=i,s=!0;if(a){var l=a[gt[0]];l&&o._55O()<=l._55O()&&(s=!1)}if(s)return 0;var c=a._37O(o),h=c[bt](T(n,r)).replace($t,""),u=ft(h);if(0==u.length)return!1;var d=u[0],f=u[1],g=ee._11A(t,d);return f==g},Kt}(t,e);var gl=h.List=function(){this._as=[];var t,e,i=arguments.length;if(1===i){var n=arguments[0];if(bn(n)&&(n=n._as),mn(n))for(e=n.length,t=0;e>t;t++)this._as.push(n[t]);else n!=c&&this._as.push(n)}else if(i>1)for(t=0;i>t;t++)this._as.push(arguments[t])};Ss("List",e,{size:function(){return this._as.length},isEmpty:function(){return 0===this._as.length},add:function(t,e){return e===i?this._as.push(t):this._as.splice(e,0,t)},addAll:function(t){bn(t)&&(t=t._as),mn(t)?Mn(this._as,t):this._as.push(t)},get:function(t){return this._as[t]},slice:function(t,e){return new gl(this._as.slice(t,e))},remove:function(t){var e=this._as.indexOf(t);return e>=0&&e<this._as.length&&this.removeAt(e),e},removeAt:function(t){return this._as.splice(t,1)[0]},set:function(t,e){return this._as[t]=e},clear:function(){return this._as.splice(0,this._as.length)},contains:function(t){return this._as.indexOf(t)>=0},indexOf:function(t){return this._as.indexOf(t)},each:function(t,e){for(var i=0,n=this._as.length;n>i;i++){var r=this._as[i];e?t.call(e,r):t(r)}},reverseEach:function(t,e){for(var i=this._as.length-1;i>=0;i--){var n=this._as[i];e?t.call(e,n):t(n)}},toArray:function(t,e){if(t){for(var i,n=[],r=0,o=this._as.length;o>r;r++)i=this._as[r],e?t.call(e,i)&&n.push(i):t(i)&&n.push(i);return n}return this._as.concat()},toList:function(t,e){if(t){for(var i,n=new gl,r=0,o=this._as.length;o>r;r++)i=this._as[r],e?t.call(e,i)&&n.add(i):t(i)&&n.add(i);return n}return new gl(this)},reverse:function(){this._as.reverse()},sort:function(t){return this._as.sort(t?t:Xa),this},toString:function(){return this._as.toString()}});var vl=new gl;Pn(vl,{size:function(){return 0},indexOf:function(){return-1},contains:function(){return!1},isEmpty:function(){return!0},sort:Gi,each:Gi,reverseEach:Gi,toArray:function(){return[]},toList:function(){return new gl},add:Ui,addAll:Ui,set:Ui,remove:Ui,removeAt:Ui,clear:Ui});var pl=h.Notifier=function(){};Ss("Notifier",e,{contains:function(t,e){if(this._ls)for(var i,n=0,r=this._ls.size();r>n;n++)if(i=this._ls.get(n),t===i.l&&e===i.s)return!0;return!1},add:function(t,e,i){var n=this,r={l:t,s:e,a:i};n._ls||(n._ls=new gl),n._f?(n._as||(n._as=new gl),n._as.add(r)):r.a?n._ls.add(r,0):n._ls.add(r)},remove:function(t,e){var i=this;i._ls&&(i._f?(i._rs||(i._rs=new gl),i._rs.add({l:t,s:e})):i._remove(t,e))},_remove:function(t,e){for(var i,n=this._ls,r=0,o=n.size();o>r;r++)if(i=n.get(r),i.l===t&&i.s===e)return n.removeAt(r),void 0},fire:function(t){var e=this,i=e._ls;if(e._b=1e4,i){e._f=1;for(var n,r=0,o=i.size();o>r;r++)n=i.get(r),n.s?n.l.call(n.s,t):n.l(t);if(delete e._f,e._rs){for(o=e._rs.size(),r=0;o>r;r++)n=e._rs.get(r),e._remove(n.l,n.s);delete e._rs}if(e._as){for(o=e._as.size(),r=0;o>r;r++)n=e._as.get(r),n.a?i.add(n,0):i.add(n);delete e._as}}}});var _l=h.Data=function(){this._id=Ua()};Ss("Data",e,{ms_ac:["tag","name","displayName","icon","toolTip","attrObject","layer","adjustChildrenToTop","dataBindings"],ms_dm:1,ms_attr:1,_icon:c,_parent:c,_children:vl,_childMap:c,_styleMap:c,_layer:0,_adjustChildrenToTop:!1,getUIClass:function(){return c},_22Q:function(){return c},s:function(t,e){var i=this;if(2===arguments.length)i.setStyle(t,e);else{if(!_n(t))return i.getStyle(t);for(var n in t)i.setStyle(n,t[n])}return i},fp:function(t,e,i){return this.firePropertyChange(t,e,i)},firePropertyChange:function(t,e,i){if(e===i)return!1;var n=this,r={property:t,oldValue:e,newValue:i,data:n};return n._dataModel&&n._dataModel.handleDataPropertyChange(r),n.onPropertyChanged(r),!0},onPropertyChanged:function(t){var e=this,i=e._parent,n=t.property;if(In(i)){var r=e.s(Dt),o="s:ingroup"===n;(r&&Sl[n]||n===o)&&i._81I(),(r||o)&&i.fp("childChange",!0,!1)}Sn(i)&&Sl[n]&&i.updateFromChildren()},_21I:function(t){var e=this;if(t&&e._dataModel)throw"Remove data from dataModel before adding";e._dataModel=t},removeFromDataModel:function(){this._dataModel?this._dataModel.remove(this):this.setParent(null)},clearChildrenFromDataModel:function(){for(var t=0,e=this._children.toArray(),i=e.length;i>t;t++)e[t].removeFromDataModel()},getId:function(){return this._id},setId:function(t){this._id=t},getChildren:function(){return this._children},size:function(){return this._children.size()},toChildren:function(t,e){return this._children.toList(t,e)},eachChild:function(t,e){this._children.each(t,e)},addChild:function(t,e){var n=this;t!==n&&(n._children===vl&&(n._children=new gl,n._childMap={}),e===i&&(e=n._children.size()),n._childMap[t._id]||n.isDescendantOf(t)||(t._parent&&t._parent.removeChild(t),(0>e||e>n._children.size())&&(e=n._children.size()),n._children.add(t,e),n._childMap[t._id]=t,t.setParent(n),n.onChildAdded(t,e),n.fp(Pe,c,t)))},onChildAdded:function(){},removeChild:function(t){var e=this;if(e._childMap&&e._childMap[t._id]){var i=e._children.remove(t);delete e._childMap[t._id],e.fp(Pe,t,c),t.setParent(c),e.onChildRemoved(t,i)}},onChildRemoved:function(){},getChildAt:function(t){return this._children.get(t)},clearChildren:function(){var t=this;if(!t._children.isEmpty())for(var e=0,i=t._children.toArray(),n=i.length;n>e;e++)t.removeChild(i[e])},getParent:function(){return this._parent},setParent:function(t){var e=this;if(!(e._73I||e._parent===t||e===t||t&&t.isDescendantOf(e))){var i=e._parent;e._parent=t,e._73I=1,i&&i.removeChild(e),t&&t.addChild(e),delete e._73I,e.fp("parent",i,t),e.onParentChanged(i,t)}},onParentChanged:function(){},hasChildren:function(){return this._children.size()>0},isEmpty:function(){return this._children.isEmpty()},isRelatedTo:function(t){return t?this.isDescendantOf(t)||t.isDescendantOf(this):!1},isParentOf:function(t){return t&&this._childMap?!!this._childMap[t._id]:!1},isDescendantOf:function(t){if(!t||t.isEmpty())return!1;for(var e=this._parent;e;){if(t===e)return!0;e=e._parent}return!1},getStyleMap:function(){return this._styleMap},getStyle:function(t,e){e===i&&(e=1);var n=this._styleMap?this._styleMap[t]:i;return n===i&&e?f[t]:n},setStyle:function(t,e){var n=this;n._styleMap||(n._styleMap={});var r=n._styleMap[t];e===i?delete n._styleMap[t]:n._styleMap[t]=e,n.fp("s:"+t,r,e)&&n.onStyleChanged(t,r,e)},onStyleChanged:function(){},iv:function(){this.invalidate()},invalidate:function(){this.fp("*",!1,!0)},toString:function(){var t=this;return t._displayName||t._name||t._tag||t._id},toLabel:function(){return this._displayName||this._name},addStyleIcon:function(t,e){var i=this,n=i.s(Gt);n||i.s(Gt,n={}),e?n[t]=e:delete n[t],i.fp(Gt,c,n)},removeStyleIcon:function(t){var e=this.s(Gt);if(e){var i=e[t];delete e[t],this.fp(Gt,c,e)}return i},getSerializableProperties:function(){return{name:1,displayName:1,icon:1,toolTip:1,parent:1,layer:1,tag:1,adjustChildrenToTop:1,dataBindings:1}},getSerializableStyles:function(){var t,e={};for(t in this._styleMap)e[t]=1;return e}});var yl=h.DataModel=function(){var e=this;e._datas=new gl,e._dataMap={},e._roots=new gl,e._rootMap={},e._78O={},e._36I=new pl,e._35I=new pl,e._selectionModel=new ml(e);var i=e._29Q=[],n=e._scheduleCallback=function(){for(var r=Date.now(),o=0;o<i.length;o++){var a=i[o];a.enabled&&r-a.lastTime>a.interval&&(e.each(function(t){a.action(t)}),a.lastTime=r)}i.length&&(e._30Q=t.requestAnimationFrame(n))}};Ss("DataModel",e,{ms_fire:1,ms_attr:1,ms_ac:["name","autoAdjustIndex","hierarchicalRendering","background","init"],_name:i,_autoAdjustIndex:!0,_hierarchicalRendering:!1,_background:i,_init:i,sm:function(){return this.getSelectionModel()},mm:function(t,e,i){this.addDataModelChangeListener(t,e,i)},umm:function(t,e){this.removeDataModelChangeListener(t,e)},md:function(t,e,i){this.addDataPropertyChangeListener(t,e,i)},umd:function(t,e){this.removeDataPropertyChangeListener(t,e)},mh:function(t,e,i){this.addHierarchyChangeListener(t,e,i)},umh:function(t,e){this.removeHierarchyChangeListener(t,e)},getHistoryManager:function(){return this._historyManager},getAttrObject:function(){return this._attrObject},setAttrObject:function(t){return this._attrObject=t},getSelectionModel:function(){return this._selectionModel},size:function(){return this._datas.size()},isEmpty:function(){return this._datas.isEmpty()},getRoots:function(){return this._roots},getDatas:function(){return this._datas},getDataById:function(t){return this._dataMap[t]},removeDataById:function(t){this.remove(this.getDataById(t))},toDatas:function(t,e){return this._datas.toList(t,e)},each:function(t,e){this._datas.each(t,e)},getDataByTag:function(t){return this._78O[t]},removeDataByTag:function(t){this.remove(this.getDataByTag(t))},add:function(t,e){var i=this,n=t._id,r=t._tag,o=i._roots;if(i._dataMap[n])throw"'"+n+"' already exists";r!=c&&(i._78O[r]=t),i._dataMap[n]=t,i._datas.add(t),t._parent||(i._rootMap[n]=t,e>=0?o.add(t,e):o.add(t)),t._21I(i),i.onAdded(t),i._36I.fire({kind:"add",data:t})},onAdded:function(){},remove:function(t,e){if(t){var i=this,n=t._id,r=e&&e.keepChildren,o=t.getTag(),a=i.getHistoryManager();r&&(i._removingData||(i._removingData=t)),t._dataModel===i&&(a&&a.beginInteraction(),i.prepareRemove(t),t.toChildren().each(function(t){i.remove(t,e)},i),r?i._removingData==t&&(t._parent&&t._parent.removeChild(t),delete i._removingData):t._parent&&t._parent.removeChild(t),i._datas.remove(t),delete i._dataMap[n],o!=c&&delete i._78O[o],i._rootMap[n]&&(delete i._rootMap[n],i._roots.remove(t)),t._21I(c),i.onRemoved(t),i._36I.fire({kind:St,data:t}),a&&a.endInteraction())}},onRemoved:function(){},prepareRemove:function(){},clear:function(){var t=this;t._datas.size()>0&&(t._datas.each(function(t){t._21I(c)}),t._datas.clear(),t._dataMap={},t._roots.clear(),t._rootMap={},t._78O={},t._36I.fire({kind:Ot}))},contains:function(t){return t&&t._dataModel===this},handleDataPropertyChange:function(t){var e=this,i=t.data,n=t.property;if("parent"===n){var r=i._id,o=e._rootMap,a=e._roots;i._parent?o[r]&&(delete o[r],a.remove(i)):o[r]||(o[r]=i,a.add(i))}else if("tag"===n){var s=t.oldValue,l=t.newValue,h=e._78O;s!=c&&delete h[s],l!=c&&(h[l]=i)}this.onDataPropertyChanged(i,t),this._35I.fire(t)},onDataPropertyChanged:function(){},addDataModelChangeListener:function(t,e,i){this._36I.add(t,e,i)},removeDataModelChangeListener:function(t,e){this._36I.remove(t,e)},addDataPropertyChangeListener:function(t,e,i){this._35I.add(t,e,i)},removeDataPropertyChangeListener:function(t,e){this._35I.remove(t,e)},_38I:function(t,e,i){this._37I&&this._37I.fire({data:t,oldIndex:e,newIndex:i})},addHierarchyChangeListener:function(t,e,i){this._37I||(this._37I=new pl),this._37I.add(t,e,i)},removeHierarchyChangeListener:function(t,e){this._37I.remove(t,e)},getSiblings:function(t){var e=t._parent;return e?e._children:this._roots},eachByHierarchical:function(t,e,i){if(e)return this._eachByHierarchical(t,e,i);for(var n=0,r=this._roots,o=r.size();o>n;n++)if(this._eachByHierarchical(t,r.get(n),i)===!1)return!1;return!0},_eachByHierarchical:function(t,e,i){if(i){if(t.call(i,e)===!1)return!1}else if(t(e)===!1)return!1;for(var n=e.size(),r=0;n>r;r++)if(this._eachByHierarchical(t,e.getChildAt(r),i)===!1)return!1;return!0},reverseEachByHierarchical:function(t,e,i){if(e)return this._reverseEachByHierarchical(t,e,i);for(var n=this._roots,r=n.size(),o=r-1;o>=0;o--)if(this._reverseEachByHierarchical(t,n.get(o),i)===!1)return!1;return!0},_reverseEachByHierarchical:function(t,e,i){for(var n=e.size(),r=n-1;r>=0;r--)if(this._reverseEachByHierarchical(t,e.getChildAt(r),i)===!1)return!1;if(i){if(t.call(i,e)===!1)return!1}else if(t(e)===!1)return!1;return!0},eachByDepthFirst:function(t,e,i){if(e)return this._11I(t,e,i);for(var n=0,r=this._roots,o=r.size();o>n;n++)if(this._11I(t,r.get(n),i)===!1)return!1;return!0},_11I:function(t,e,i){for(var n=e.size(),r=0;n>r;r++)if(this._11I(t,e.getChildAt(r),i)===!1)return!1;if(i){if(t.call(i,e)===!1)return!1}else if(t(e)===!1)return!1;return!0},eachByBreadthFirst:function(t,e,i){var n=new gl;for(e?n.add(e):this._roots.each(n.add,n);n.size()>0;)if(e=n.removeAt(0),e.eachChild(n.add,n),i){if(t.call(i,e)===!1)return!1}else if(t(e)===!1)return!1;return!0},moveTo:function(t,e){var i=this.getSiblings(t),n=i.indexOf(t);n===e||0>n||e>=0&&e<=i.size()&&(i.remove(t),e>i.size()&&e--,i.add(t,e),this._38I(t,n,e))},moveUp:function(t){this.moveTo(t,this.getSiblings(t).indexOf(t)-1)},moveDown:function(t){this.moveTo(t,this.getSiblings(t).indexOf(t)+1)},moveToTop:function(t){this.moveTo(t,0)},moveToBottom:function(t){this.moveTo(t,this.getSiblings(t).size())},moveSelectionUp:function(t){t||(t=this.sm());var e=new gl;Do(t,e,this._roots),e.each(this.moveUp,this)},moveSelectionDown:function(t){t||(t=this.sm());var e=new gl;Po(t,e,this._roots),e.each(this.moveDown,this)},moveSelectionToTop:function(t){t||(t=this.sm());var e=new gl;Mo(t,e,this._roots),e.each(this.moveToTop,this)},moveSelectionToBottom:function(t){t||(t=this.sm());var e=new gl;To(t,e,this._roots),e.each(this.moveToBottom,this)},moveToIndex:function(t,e,i){var n=this.getDatas();null==i&&(i=n.indexOf(t)),i===e||0>i||e>=0&&e<=n.size()&&(n.remove(t),e>n.size()&&e--,n.add(t,e),this._76I(t,i,e))},bringForward:function(t){this.moveToIndex(t,this.getDatas().indexOf(t)+1)},bringToFront:function(t){this.moveToIndex(t,this.size())},sendBackward:function(t){this.moveToIndex(t,this.getDatas().indexOf(t)-1)},sendToBack:function(t){this.moveToIndex(t,0)},bringSelectionForward:function(t){t||(t=this.sm());for(var e=new gl,i=this.getDatas(),n=!1,r=0;r<i.size();r++){var o=i.get(i.size()-1-r);t.contains(o)?n&&e.add(o):n=!0}e.each(this.bringForward,this)},bringSelectionToFront:function(t){t||(t=this.sm());for(var e=new gl,i=this.getDatas(),n=0;n<i.size();n++){var r=i.get(n);t.contains(r)&&e.add(r)}e.each(this.bringToFront,this)},sendSelectionBackward:function(t){t||(t=this.sm());for(var e=new gl,i=this.getDatas(),n=!1,r=0;r<i.size();r++){var o=i.get(r);t.contains(o)?n&&e.add(o):n=!0}e.each(this.sendBackward,this)},sendSelectionToBack:function(t){t||(t=this.sm());for(var e=new gl,i=this.getDatas(),n=0;n<i.size();n++){var r=i.get(i.size()-1-n);t.contains(r)&&e.add(r)}e.each(this.sendToBack,this)},addScheduleTask:function(e){var i=this;i.removeScheduleTask(e),e.enabled==c&&(e.enabled=!0),e.interval==c&&(e.interval=10),e.action==c&&(e.action=Gi),e.lastTime=Date.now(),i._29Q.push(e),i._30Q==c&&(i._30Q=t.requestAnimationFrame(i._scheduleCallback))},removeScheduleTask:function(e){var i=this,n=i._29Q,r=n.indexOf(e);r>=0&&n.splice(r,1),n.length||i._30Q==c||(t.cancelAnimationFrame(i._30Q),delete i._30Q)}});var ml=h.SelectionModel=function(t){var e=this;e._68O=et,e._map={},e._73O=new gl,e._74I=new pl,e._21I(t)};Ss("SelectionModel",e,{ms_fire:1,ms_dm:1,ms:function(t,e,i){this.addSelectionChangeListener(t,e,i)},ums:function(t,e){this.removeSelectionChangeListener(t,e)},fd:function(){return this.getFirstData()},ld:function(){return this.getLastData()},sg:function(){return this._68O===tt},co:function(t){return this._map[t._id]!=c},ss:function(t){this.setSelection(t)},as:function(t){this.appendSelection(t)},rs:function(t){this.removeSelection(t)},cs:function(){this.clearSelection()},sa:function(){this.selectAll()},getSelectionMode:function(){return this._68O},setSelectionMode:function(t){var e=this;if(e._68O!==t&&(t===gt||t===tt||t===et)){e.cs();var i=e._68O;e._68O=t,e.fp("selectionMode",i,t)}},_21I:function(t){var e=this,i=e._dataModel;i!==t&&(i&&(e.cs(),i.umm(e.handleDataModelChange,e)),e._dataModel=t,t.mm(e.handleDataModelChange,e,!0),e.fp(Ve,i,t))},dispose:function(){var t=this;t.cs(),t._dataModel.umm(t.handleDataModelChange,t)},handleDataModelChange:function(t){var e=this;if(t.kind===St){var i=t.data;e.co(i)&&(e._73O.remove(i),delete e._map[i._id],e._75I(St,new gl(i)))}else t.kind===Ot&&e.cs()},getFilterFunc:function(){return this._filterFunc},setFilterFunc:function(t){var e=this;if(e._filterFunc!==t){e.cs();var i=e._filterFunc;e._filterFunc=t,e.fp("filterFunc",i,e._filterFunc)}},_75I:function(t,e,i,n){i&&(this._73O.each(function(t){n[t._id]?i.remove(t):i.add(t)}),e=i.toList()),this._74I.fire({kind:t,datas:new gl(e)})},addSelectionChangeListener:function(t,e,i){this._74I.add(t,e,i)},removeSelectionChangeListener:function(t,e){this._74I.remove(t,e)},_97O:function(t,e){for(var i,n=this,r=0,o=new gl(t);r<o.size();r++)i=o.get(r),(n._filterFunc&&!n._filterFunc(i)||e&&n.co(i)||!e&&!n.co(i)||!n._dataModel.contains(i))&&(o.removeAt(r),r--);return o},appendSelection:function(t){var e=this;if(e._68O!==gt){var i,n,r=e._73O,o=e._97O(t,!0);o.isEmpty()||(e.sg()&&(i=new gl(r),n=e._map,r.clear(),e._map={},o=new gl(o.get(o.size()-1))),o.each(function(t){r.add(t),e._map[t._id]=t}),e._75I("append",o,i,n))}},removeSelection:function(t){var e=this,i=e._97O(t),n=0,r=i.size();if(0!==r){for(;r>n;n++){var o=i.get(n);e._73O.remove(o),delete e._map[o._id]}e._75I(St,i)}},toSelection:function(t,e){return this._73O.toList(t,e)},getSelection:function(){return this._73O},each:function(t,e){this._73O.each(t,e)},setSelection:function(t){var e=this,i=e._73O;if(e._68O!==gt&&!(i.isEmpty()&&!t||1===i.size()&&e.ld()===t)){var n=new gl(i),r=e._map;i.clear(),e._map={};var o=e._97O(t,!0);e.sg()&&o.size()>1&&(o=new gl(o.get(o.size()-1))),o.each(function(t){i.add(t),e._map[t._id]=t}),e._75I("set",c,n,r)}},clearSelection:function(){var t=this,e=t._73O;if(e.size()>0){var i=e.toList();e.clear(),t._map={},t._75I(Ot,i)}},selectAll:function(){var t=this;if(t._68O!==gt){var e,i,n=t._dataModel.toDatas();if(t._filterFunc)for(e=0;e<n.size();e++)i=n.get(e),t._filterFunc(i)||(n.removeAt(e),e--);var r=t._73O,o=new gl(r),a=t._map;r.clear(),t._map={},t.sg()&&n.size()>1&&(n=new gl(n.get(n.size()-1)));var s=n.size();for(e=0;s>e;e++)i=n.get(e),r.add(i),t._map[i._id]=i;t._75I("all",c,o,a)}},size:function(){return this._73O.size()},isEmpty:function(){return this._73O.isEmpty()},contains:function(t){return this._map[t._id]!=c},getLastData:function(){var t=this._73O;return t.size()>0?t.get(t.size()-1):c},getFirstData:function(){var t=this._73O;return t.size()>0?t.get(0):c},isSelectable:function(t){var e=this;return t&&e._68O!==gt?e._filterFunc?e._filterFunc(t):!0:!1},getTopSelection:function(){var t=this,e=new gl;return t._73O.each(function(i){for(var n=i.getParent();n;){if(t.contains(n)){i=c;break}n=n.parent}i&&e.add(i)}),e}});var bl=function(){return un(0),function(t,e){var i;if(In(e)&&e.isExpanded()){var n=t.getDataUI(e);n&&n._88I&&(i=n._88I.rect)}return i?i:e.getRect()}}();Pn(d,{edgeGroupAgentFunc:c,graphViewAutoScrollZone:16,graphViewResettable:!1,graphViewPannable:!0,graphViewRectSelectable:!0,graphViewScrollBarVisible:!0,graphViewRectSelectBorderColor:g.rectSelectBorder,graphViewRectSelectBackground:Ao,graphViewEditPointSize:$?17:7,graphViewEditPointBorderColor:g.editPointBorder,graphViewEditPointBackground:g.editPointBackground,setEdgeType:function(t,e,i){Bi[t]=e,Li[t]=i},getEdgeType:function(t){return Bi[t]},getEdgeTypeMap:function(){return Bi},getNodeRect:bl},!0),Pn(f,{"2d.selectable":!0,"2d.visible":!0,"2d.movable":!0,"2d.editable":!0,"2d.move.mode":i,"image.stretch":"fill",icons:i,ingroup:!0,"body.color":i,opacity:i,pixelPerfect:!0,"select.color":Jo,"select.width":1,"select.padding":2,"select.type":mt,shadow:!1,"shadow.blur":6,"shadow.offset.x":3,"shadow.offset.y":3,"border.color":i,"border.width":2,"border.padding":2,"border.type":mt,label:i,"label.font":i,"label.color":wa,"label.background":i,"label.position":31,"label.position.fixed":!1,"label.offset.x":0,"label.offset.y":2,"label.rotation":i,"label.max":i,"label.opacity":i,"label.scale":1,"label.align":i,"label.selectable":!0,label2:i,"label2.font":i,"label2.color":wa,"label2.background":i,"label2.position":34,"label2.position.fixed":!1,"label2.offset.x":0,"label2.offset.y":-2,"label2.rotation":i,"label2.max":i,"label2.opacity":i,"label2.scale":1,"label2.align":i,"label2.selectable":!0,note:i,"note.expanded":!0,"note.font":i,"note.color":xa,"note.background":Jo,"note.position":8,"note.offset.x":-3,"note.offset.y":3,"note.max":i,"note.toggleable":!0,"note.border.width":1,"note.border.color":i,"note.opacity":i,"note.scale":1,"note.align":i,note2:i,"note2.expanded":!0,"note2.font":i,"note2.color":xa,"note2.background":Jo,"note2.position":3,"note2.offset.x":3,"note2.offset.y":-3,"note2.max":i,"note2.toggleable":!0,"note2.border.width":1,"note2.border.color":i,"note2.opacity":i,"note2.scale":1,"note2.align":i,"group.type":i,"group.image":i,"group.image.stretch":"fill","group.repeat.image":i,"group.padding":8,"group.padding.left":0,"group.padding.right":0,"group.padding.top":0,"group.padding.bottom":0,"group.position":17,"group.toggleable":!0,"group.title.font":i,"group.title.color":xa,"group.title.background":g.groupTitleBackground,"group.title.align":rt,"group.background":g.groupBackground,"group.depth":1,"group.border.width":1,"group.border.pattern":i,"group.border.color":qo,"group.border.cap":ma,"group.border.join":ba,"group.gradient":c,"group.gradient.color":"#FFF",shape:i,"shape.background":qo,"shape.repeat.image":i,"shape.border.width":0,"shape.border.width.absolute":!1,"shape.border.color":qo,"shape.border.3d":!1,"shape.border.3d.color":i,"shape.border.3d.accuracy":i,"shape.border.cap":ma,"shape.border.join":ba,"shape.border.pattern":i,"shape.gradient":c,"shape.gradient.color":"#FFF","shape.depth":0,"shape.dash":!1,"shape.dash.pattern":ya,"shape.dash.offset":0,"shape.dash.color":jo,"shape.dash.width":i,"shape.dash.3d":!1,"shape.dash.3d.color":i,"shape.dash.3d.accuracy":i,"shape.polygon.side":6,"shape.arc.from":D,"shape.arc.to":P,"shape.arc.close":!0,"shape.arc.oval":!1,"shape.corner.radius":i,"edge.type":i,"edge.points":i,"edge.segments":i,"edge.color":qo,"edge.width":2,"edge.width.absolute":!1,"edge.offset":20,"edge.group":0,"edge.expanded":!0,"edge.gap":12,"edge.toggleable":!0,"edge.center":!1,"edge.3d":!1,"edge.3d.color":i,"edge.3d.accuracy":i,"edge.cap":ma,"edge.join":ba,"edge.source.position":17,"edge.source.anchor.x":i,"edge.source.anchor.y":i,"edge.source.offset.x":0,"edge.source.offset.y":0,"edge.target.position":17,"edge.target.anchor.x":i,"edge.target.anchor.y":i,"edge.target.offset.x":0,"edge.target.offset.y":0,"edge.pattern":i,"edge.dash":!1,"edge.dash.pattern":ya,"edge.dash.offset":0,"edge.dash.color":jo,"edge.dash.width":i,"edge.dash.3d":!1,"edge.dash.3d.color":i,"edge.dash.3d.accuracy":i,"edge.independent":!1,"attach.row.index":0,"attach.column.index":0,"attach.row.span":1,"attach.column.span":1,"attach.padding":0,"attach.padding.left":0,"attach.padding.right":0,"attach.padding.top":0,"attach.padding.bottom":0,"attach.index":-1,"attach.offset":0,"attach.offset.relative":!1,"attach.offset.opposite":!1,"attach.thickness":i,"attach.gap":0,"attach.gap.relative":!1,"grid.row.count":1,"grid.column.count":1,"grid.row.percents":i,"grid.column.percents":i,"grid.border":1,"grid.border.left":0,"grid.border.right":0,"grid.border.top":0,"grid.border.bottom":0,"grid.gap":1,"grid.background":g.gridBackground,"grid.depth":1,"grid.cell.depth":-1,"grid.cell.border.color":g.gridCellBorderColor,"grid.block":i,"grid.block.padding":3,"grid.block.width":1,"grid.block.color":g.gridBlockColor,text:"","text.align":"left","text.vAlign":"middle","text.color":wa,"text.font":Ca,"text.shadow":!1,"text.shadow.color":zo,"text.shadow.blur":6,"text.shadow.offset.x":3,"text.shadow.offset.y":3},!0),Pn(yl,{_76I:function(t,e,i){this._39I&&this._39I.fire({data:t,oldIndex:e,newIndex:i})},addIndexChangeListener:function(t,e,i){var n=this;n._39I||(n._39I=new pl),n._39I.add(t,e,i)},removeIndexChangeListener:function(t,e){this._39I.remove(t,e)},prepareRemove:function(t){Cn(t)&&(t.setSource(c),t.setTarget(c)),t._70O&&t._70O.toList().each(this.remove,this),t._69O&&t._69O.toList().each(function(t){t.setHost(c)}),t._host&&t.setHost(c)},onAdded:function(t){this.isAutoAdjustIndex()&&this.adjustIndex(t)},onDataPropertyChanged:function(t,e){Il[e.property]&&this.isAutoAdjustIndex()&&this.adjustIndex(t)},isAdjustable:function(t){return xn(t)||Cn(t)},isAdjustedToBottom:function(t){return In(t)?t.isExpanded()&&Bl(t):!1},adjustIndex:function(t){var e=this;this.isHierarchicalRendering()||(e.isAdjustedToBottom(t)?(e.sendToBottom(t),t.eachChild(e.adjustIndex,e)):e.sendToTop(t))},sendToTop:function(t){var e=this;if(e.contains(t)&&e.isAdjustable(t)){var i=e._datas;if(t!==i.get(e.size()-1)){var n=i.indexOf(t);i.removeAt(n),i.add(t),e._76I(t,n,e.size()-1)}if(Cn(t)){var r=t._40I;r&&!e.isAdjustedToBottom(r)&&e.sendToTop(r),r=t._41I,r&&!e.isAdjustedToBottom(r)&&e.sendToTop(r)}t._69O&&t._69O.each(function(i){i.isRelatedTo(t)||xn(t)&&i.isLoopedHostOn(t)||e.sendToTop(i)}),t.ISubGraph||(!In(t)||t.isExpanded())&&t._adjustChildrenToTop&&t.eachChild(function(t){Cn(t)||e.sendToTop(t)})}},sendToBottom:function(t,e){var i=this;if(t!==e&&i.contains(t)&&i.isAdjustable(t)&&(!e||i.contains(e))){var n=i._datas,r=n.remove(t),o=e?i._datas.indexOf(e):0;if(n.add(t,o),r!==o){i._76I(t,r,o);var a=t._parent;!a||a.ISubGraph||Cn(a)||i.sendToBottom(t._parent,t)}}}}),Pn(ca,{ms_edit:function(t){t._46O=function(t){var e=this,i=e.gv.dm(),n=i.getHistoryManager(),r=e._index,o=e._89I,a=e._node,s=e._shape,l=e._edge,c=e._77I;a&&o?(this.fi({kind:"endEditRect",event:t,data:a,direction:o}),n&&n.endInteraction()):s&&r>=0?(e.fi({kind:"endEditPoint",event:t,data:s,index:r}),n&&n.endInteraction()):l&&r>=0?(e.fi({kind:"endEditPoint",event:t,data:l,index:r}),n&&n.endInteraction()):c&&(e.fi({kind:"endEditRotation",event:t,data:c}),n&&n.endInteraction())},t._78I=function(t){var e=this;e.autoScroll(t);var i=e.gv.lp(t),n=e._index,r=e._89I,o=e._node,a=e._shape,s=e._edge,l=e._77I;if(o&&r)e._80O(i),e.fi({kind:"betweenEditRect",event:t,data:o,direction:r});else if(a&&n>=0)i.e=a.getPoints().get(n).e,a.setPoint(n,i),e.fi({kind:"betweenEditPoint",event:t,data:a,index:n});else if(s&&n>=0){var h=s.s(Zt);i.e=h.get(n).e,h.set(n,i),s.fp(Zt,c,h),e.fi({kind:"betweenEditPoint",event:t,data:s,index:n})}else if(l){var u=l.p(),d=l.getScale(),f=E+R(i.y-u.y,i.x-u.x);d.y<0&&(f+=D),C(f)<.04&&(f=0),l.setRotation(f),e.fi({kind:"betweenEditRotation",event:t,data:l})}},t._80O=function(t){var e=this,i=e._node,n=e._rect,r=n.x,o=n.y,a=n.width,s=n.height,l=e._89I,c=e._anchor,h=e._matrix,t=h.tfi(t);"northwest"===l?n=cs(t,{x:r+a,y:o+s}):l===ft?n=cs({x:r,y:t.y},{x:r+a,y:o+s}):"northeast"===l?n=cs({x:r,y:t.y},{x:t.x,y:o+s}):l===dt?n=cs({x:t.x,y:o},{x:r+a,y:o+s}):l===ut?n=cs({x:r,y:o},{x:t.x,y:o+s}):"southwest"===l?n=cs({x:t.x,y:o},{x:r+a,y:t.y}):"south"===l?n=cs({x:r,y:o},{x:r+a,y:t.y}):"southeast"===l&&(n=cs({x:r,y:o},t)),i.setPosition(h.tf(n.x+n.width*c.x,n.y+n.height*c.y)),i.setWidth(n.width),i.setHeight(n.height)},t._80I=function(t,e,i,n){var r=this,o=r.gv._zoom,a=(r.gv.getEditPointSize()+2)/o;return us({x:e-a/2,y:i-a/2,width:a,height:a},t)?(r._89I!==n&&(r._89I=n),!0):!1},t._79I=function(t,e,i){var n=this,r=n.gv,o=e?r.getDataUI(e):c,a=o?o._55O:c;if(a){var s,l,h,u,d=r._zoom,f=(r.getEditPointSize()+2)/d,g=r.lp(t);if(xn(e)){if(a._56O&&xn(e)&&(l=a._98o,us({x:l.x-f/2,y:l.y-f/2,width:f,height:f},g)))return n._77I=e,i&&n.fi({kind:"beginEditRotation",event:t,data:e}),n.setCursor("crosshair"),!0;if(a._43O&&e instanceof Kc)for(h=e.getPoints(),s=h.size()-1;s>=0;s--)if(l=h.get(s),us({x:l.x-f/2,y:l.y-f/2,width:f,height:f},g))return n._index=s,n._shape=e,i&&n.fi({kind:"beginEditPoint",event:t,data:e,index:s}),n.setCursor("crosshair"),!0;if(a._42O)for(var v=e.getEditControlPoints(),p=["northwest",-1,-1,dt,-1,0,"southwest",-1,1,"south",0,1,"southeast",1,1,ut,1,0,"northeast",1,-1,ft,0,-1],s=0,u=v.length;u>s;s++){var _=p[3*s],y=v[s];if(n._80I(g,y.x,y.y,_)){n._node=e;var m=e.getWidth(),b=e.getHeight(),w=e.getAnchor();n._rect={x:-m*w.x,y:-b*w.y,width:m,height:b},n._anchor=w,n._matrix=e.getMatrix();var x=e.getRotation(),C=I(x),S=O(x),T=p[3*s+1]*An(e.getScale().x),M=p[3*s+2]*An(e.getScale().y),D=Math.atan2(-S*T-C*M,C*T-S*M),P=(Math.round(D/(Math.PI/4))+8)%8,k=[ei,"nesw-resize",ii,"nwse-resize",ei,"nesw-resize",ii,"nwse-resize"][P];return n.setCursor(k),i&&n.fi({kind:"beginEditRect",event:t,data:e,direction:n._89I}),!0}}}if(a._43O&&Cn(e)&&e.s(Jt)===Bt&&(h=e.s(Zt)))for(s=h.size()-1;s>=0;s--)if(l=h.get(s),us({x:l.x-f/2,y:l.y-f/2,width:f,height:f},g))return n._index=s,n._edge=e,i&&n.fi({kind:"beginEditPoint",event:t,data:e,index:s}),n.setCursor("crosshair"),!0}return!1}},ms_gv:function(t){t._currentSubGraph=c,t.upSubGraph=function(){this.setCurrentSubGraph(Vl(this._currentSubGraph))},t.isVisible=function(t){var e=this;if(Vl(t)!==e._currentSubGraph)return!1;if(Cn(t)){var i=t._40I,n=t._41I;if(!i||!n)return!1;if(!(t.s("edge.independent")||e.isVisible(i)&&e.isVisible(n)))return!1;if(t.isEdgeGroupHidden())return!1}else for(var r=t._parent;r&&!r.ISubGraph;){if(In(r)&&(!r.isExpanded()||!e.isVisible(r)))return!1;r=r._parent}if(t._parent instanceof Zc&&!e.isVisible(t._parent))return!1;if(e instanceof Tf){if(!t.s("3d.visible"))return!1}else if(!t.s("2d.visible"))return!1;return e._visibleFunc?e._visibleFunc(t):!0},t.handleSelectionChange=function(t){var e=this;t.datas.each(function(t){
e.invalidateData(t);var i=t._parent;In(i)&&xn(t)&&t.s(Dt)&&(e.invalidateData(i),i._49I&&i._49I.each(function(t){e.invalidateData(t)}))}),e.onSelectionChanged(t)},t.onSelectionChanged=function(t){var e=this,i=e.sm();if(1===i.size()&&("set"===t.kind||"append"===t.kind)){var n=i.ld();e.isAutoMakeVisible()&&e.makeVisible(n),e.adjustIndex&&e._dataModel.isAutoAdjustIndex()&&e.adjustIndex(n)}},t.makeVisible=function(t){if(t){var e=this,i=e.getDataUI?e.getDataUI(t):e.getData3dUI(t);if(i){var n=t,r=Vl(t);for(r!==e._currentSubGraph&&e.setCurrentSubGraph(r);(n=n._parent)&&n!==r;)In(n)&&n.setExpanded(!0);e._23I=t,e.iv()}}},t.getLabel=function(t){var e=t.getStyle(jt);return e===i?t.getName():e},t.getLabelBackground=function(t){return t.getStyle("label.background")},t.getLabelColor=function(t){return t.getStyle("label.color")},t.getLabel2=function(t){return t.getStyle("label2")},t.getLabel2Background=function(t){return t.getStyle("label2.background")},t.getLabel2Color=function(t){return t.getStyle("label2.color")},t.getNote=function(t){return t.getStyle(Wt)},t.getNoteBackground=function(t){return t.getStyle("note.background")},t.getNote2=function(t){return t.getStyle(Ht)},t.getNote2Background=function(t){return t.getStyle("note2.background")},t.handleClick=function(t,e,i){var n=this;e?(n.fi({kind:"clickData",event:t,data:e,part:i}),n.onDataClicked(e,t)):(n.fi({kind:"clickBackground",event:t}),n.onBackgroundClicked(t))},t.handleDoubleClick=function(t,e,i){var n=this;es(t)&&(e?(n.fi({kind:"doubleClickData",event:t,data:e,part:i}),n.onDataDoubleClicked(e,t,i),n.checkDoubleClickOnNote(t,e,i)||n.checkDoubleClickOnRotation&&n.checkDoubleClickOnRotation(t,e,i)||(Cn(e)?n.onEdgeDoubleClicked(e,t,i):e.ISubGraph?n.onSubGraphDoubleClicked(e,t,i):In(e)?n.onGroupDoubleClicked(e,t,i):e.IDoorWindow?n.onDoorWindowDoubleClicked(e,t,i):e.ICSGBox&&n.onCSGBoxDoubleClicked(e,t,i))):(n.fi({kind:"doubleClickBackground",event:t}),n.onBackgroundDoubleClicked(t)))},t.onSubGraphDoubleClicked=function(t){this.setCurrentSubGraph(t)},t.onEdgeDoubleClicked=function(t,e){t.ISubGraph&&!os(e)?this.setCurrentSubGraph(t):t.s("edge.toggleable")&&t.toggle()},t.onGroupDoubleClicked=function(t){t.s("group.toggleable")&&t.toggle()},t.onDoorWindowDoubleClicked=function(t){t.s("dw.toggleable")&&t.toggle(!0)},t.onCSGBoxDoubleClicked=function(t,e){var i=this;if(i instanceof Tf){var n=i.getHitFaceInfo(e);n&&n.face&&t.s(n.face+".toggleable")&&t.toggleFace(n.face,!0)}},t.onBackgroundClicked=function(){},t.onBackgroundDoubleClicked=function(){this.upSubGraph()},t.onDataClicked=function(){},t.onDataDoubleClicked=function(){},t.onAutoLayoutEnded=function(){},t.onMoveEnded=function(){},t.onPanEnded=function(){},t.onPinchEnded=function(){},t.onRectSelectEnded=function(){},t.onZoomEnded=function(){}},ms_icons:function(t){t.getRotation=function(t){return t==c?0:t},t._15O=function(){var t=this,e=t.s(Gt);if(e){var i=t,n=t.data||t._data,r=t._38o={icons:e,rects:{}};for(var o in e){var a=e[o],s=dl(a.shape3d,n,i);if(!(dl(a.visible,n,i)===!1||dl(a.for3d,n,i)&&!t.I3d||s&&!t.I3d)){var l=s?[s]:dl(a.names,n,i),h=l?l.length:0,u=dl(a.position,n,i)||3,d=dl(a.offsetX,n,i)||0,f=dl(a.offsetY,n,i)||0,g=dl(a.direction,n,i)||ut,v=dl(a.gap,n,i),p=v!=c?v:1,_=dl(a.rotation,n,i),y=dl(a.keepOrien,n,i),m=dl(a.rotationFixed,n,i)?_:t.getRotation(_,y,u),b=c,w=r.rects[o]=new Array(h);w.rotation=m;for(var x=0;h>x;x++){var C,I,S,O,T=l[x];if(s)S=0,O=0;else{var M=Wa(T);S=dl(a.width,n,i),O=dl(a.height,n,i),S==c&&(S=hl(M,n)),O==c&&(O=ul(M,n))}if(b?g===ut?d+=S/2:g===dt?d-=S/2:g===ft?f-=O/2:f+=O/2:b={width:S,height:O},t.I3d){var D=-S/2,P=-O/2;I={width:S,height:O,mat:t._16O(dl(a.autorotate,n,i),u,b,dl(a.face,n,i)||it,dl(a.t3,n,i),dl(a.r3,n,i),dl(a.rotationMode,n,i),d,f),vs:new Ds([D,-P,0,D,-P-O,0,D+S,-P-O,0,D+S,-P,0])}}else C=t.getPosition(u,d,f,b,dl(a.positionFixed,n,i)),I={x:C.x-S/2,y:C.y-O/2,width:S,height:O},t._68o(I,m);w[x]=I,g===ut?d+=S/2+p:g===dt?d-=S/2+p:g===ft?f-=O/2+p:f+=O/2+p}}}}}}});var wl={1:1,2:1,6:1,9:1,10:1,14:1,15:1,16:1,21:1,22:1,26:1,29:1,30:1,34:1,36:1,38:1,40:1,42:1,45:1,50:1,52:1,54:1},xl={3:1,7:1,11:1,17:1,23:1,27:1,31:1,44:1,46:1,47:1,49:1},Cl={translateX:1,translateY:1,zoom:1,scrollBarVisible:1},Il={sourceAgent:1,targetAgent:1,expanded:1,parent:1,host:1},Sl={position:1,width:1,height:1,expanded:1,rotation:1,anchor:1,scale:1,"s:edge.points":1},Ol={"edge.type":1,"edge.group":1},Tl={rotation:1,rotationX:1,rotationZ:1},Ml={position:1,width:1,height:1,anchor:1,scale:1,"s:grid.row.count":1,"s:grid.column.count":1,"s:grid.row.percents":1,"s:grid.column.percents":1,"s:grid.border":1,"s:grid.border.left":1,"s:grid.border.right":1,"s:grid.border.top":1,"s:grid.border.bottom":1,"s:grid.gap":1},Dl={"attach.row.index":1,"attach.column.index":1,"attach.row.span":1,"attach.column.span":1,"attach.padding":1,"attach.padding.left":1,"attach.padding.right":1,"attach.padding.top":1,"attach.padding.bottom":1,"attach.index":1,"attach.offset":1,"attach.offset.relative":1,"attach.offset.opposite":1,"attach.gap":1,"attach.gap.relative":1,"attach.thickness":1},Pl={shape:1,thickness:1,position:1,anchor:1,scale:1},kl=function(t,e){if(!t||!In(e)||e.isEmpty())return!1;for(t=t._parent;In(t);){if(t===e)return!0;t=t._parent}return!1},El=function(t,e){if(!t||!Sn(e)||e.isEmpty())return!1;for(t=t._parent;Sn(t);){if(t===e)return!0;t=t._parent}return!1},Vl=function(t){if(!t)return c;if(Cn(t)){var e=t._40I,i=t._41I;if(!e||!i)return c;var n=Vl(e),r=Vl(i);return n===r?n:c}for(var o=t._parent;Cn(o)&&!o.ISubGraph;)o=o._parent;return o?o.ISubGraph?o:Vl(o):c},Rl=function(t,e,i,n){var r=e.getStyle(i)*n;r&&ps(t,r),r=e.getStyle(i+".left")*n,r&&(t.x-=r,t.width+=r),r=e.getStyle(i+".right")*n,r&&(t.width+=r),r=e.getStyle(i+".top")*n,r&&(t.y-=r,t.height+=r),r=e.getStyle(i+".bottom")*n,r&&(t.height+=r),t.width<0&&(t.width=-t.width,t.x-=t.width),t.height<0&&(t.height=-t.height,t.y-=t.height)},Bl=function(t){for(var e,i=0,n=t.size();n>i;i++)if(e=t.getChildAt(i),xn(e)&&Bl(e))return!0;return t.hasAgentEdges()},Ll=function(t){if(!t)return c;for(var e=t._parent;In(e);){if(!In(e._parent))return e.isExpanded()?t:e;e.isExpanded()||(t=e),e=e._parent}return t},zl=function(t,e){if(!t||!e)return c;var i,n,r,o=Vl(t),a=Vl(e);if(o!==a){for(;a&&o!==a;)a=Vl(a);if(o===a)return t;i=new gl,i.add(t,0);for(var s=t._parent;xn(s)&&!e.isDescendantOf(s);)i.add(s,0),s=s._parent;for(r=i.size(),n=0;r>n;n++){var l=i.get(n);if(In(l)&&!l.isExpanded())return l;if(l.ISubGraph)return l}return t}return t},Al=function(t){if(t.isLooped())return t._source;var e=Ll(t._source),i=Ll(t._target);return e===i?t._source:zl(e,i)},jl=function(t){if(t.isLooped())return t._target;var e=Ll(t._source),i=Ll(t._target);return e===i?t._target:zl(i,e)},Fl=function(t,e,n,r,o,a,s){if(!e)return c;var l;if(a!==i||s!==i){a=a===i?.5:a,s=s===i?.5:s;var h=e.getRotation()||0;if(h){var u=e.getPosition(),d=e.getWidth(),f=e.getHeight(),g=e.getAnchor(),v=e.getScale(),p=new Io(h,u.x,u.y,v.x,v.y);n=p.tf((a-g.x)*d,(s-g.y)*f)}else l=bl(t,e),n={x:l.x+a*l.width,y:l.y+s*l.height}}else n=Bo(n,bl(t,e));return n.x+=r,n.y+=o,n},Wl=function(t,e){if(!t||!e)return c;var i,n,r,o,a,s;if(t===e){if(o=t.getLoopedEdges(),!o)return c;o=new gl(o)}else{if(a=t.getAgentEdges(),s=e.getAgentEdges(),!a||!s)return c;for(n=a.size(),i=0;n>i;i++)r=a.get(i),s.contains(r)&&(o||(o=new gl),o.add(r))}if(o)for(i=0;i<o.size();i++)r=o.get(i),r.getStyle(Jt)===Bt&&(r._22I(c),o.removeAt(i),i--);return o},Hl=function(t,e){var i=Wl(t,e);if(i&&!i.isEmpty()){if(1===i.size())return i.get(0)._22I(c),void 0;var n=new gl,r=new gl;i.each(function(t){var e=t.s("edge.group");n.contains(e)||n.add(e)}),n.sort(),n.each(function(t){r.add(new h.EdgeGroup(i.toList(function(e){return t===e.s("edge.group")}),r))}),r.each(function(t){t.each(function(e){e._22I(t)})})}},Gl=function(t,e){if(e){var i=e.rect,n=e.color,r=e.rotation,o=e.labelWidth,a=e.background,s=e.opacity,l=e.scale,h=l!=c&&1!==l;if(s!=c){var u=t.globalAlpha;t.globalAlpha*=s}if(r||h){t.save();var d=i.x+i.width/2,f=i.y+i.height/2;gr(t,d,f),r&&vr(t,r),h&&t.scale(l,l),gr(t,-d,-f)}if(a&&ho(t,i.x,i.y,i.width,i.height,a),o){var g=i.width,v=t.createLinearGradient(i.x,i.y,i.x+g,i.y);v.addColorStop(0,n),v.addColorStop(.9,n),v.addColorStop(1,Qe),n=v,i.width=o}sr(t,e.ss,i,e.font,n,e.align),o&&(i.width=g),(r||h)&&t.restore(),s!=c&&(t.globalAlpha=u)}},Ul=function(t,e){if(e){var i=e.rect,n=i.x,r=i.y,o=i.width,a=i.height,s=e.background,l=e.backgroundImage,h=e.borderWidth,u=e.borderColor,d=e.labelWidth,f=e.opacity,g=e.scale,v=g!=c&&1!==g;if(f!=c){var p=t.globalAlpha;t.globalAlpha*=f}if(v){t.save();var _=i.x+i.width/2,y=i.y+i.height/2;gr(t,_,y),t.scale(g,g),gr(t,-_,-y)}if(e.expanded){var m=x(8,o/4),b=r+a-8;if(t.fillStyle=s,t.beginPath(),t.moveTo(n,r),t.lineTo(n,b),t.lineTo(n+o/2,b),t.lineTo(n+o/2,r+a),t.lineTo(n+o/2+m,b),t.lineTo(n+o,b),t.lineTo(n+o,r),t.closePath(),t.fill(),h&&(t.lineWidth=h,t.lineJoin="round",t.lineCap="round",u?(t.strokeStyle=u,t.stroke()):(t.strokeStyle=$a(s),t.beginPath(),t.moveTo(n+o,r),t.lineTo(n+o,b),t.lineTo(n+o/2+m,b),t.lineTo(n+o/2,r+a),t.stroke(),t.strokeStyle=Ja(s),t.beginPath(),t.moveTo(n+o,r),t.lineTo(n,r),t.lineTo(n,b),t.lineTo(n+o/2,b),t.lineTo(n+o/2,r+a),t.stroke())),l)Ga(t,Wa(l),Ne,i.x,i.y,i.width,i.height-8,e.data,e.view);else{if(i.height-=8,s=e.color,d){var w=o,C=t.createLinearGradient(n,r,n+w,r);C.addColorStop(0,s),C.addColorStop(.9,s),C.addColorStop(1,Qe),s=C,i.width=d}sr(t,e.ss,i,e.font,s,e.align),d&&(i.width=w),i.height+=8}}else if(e.icon)fl(t,Wa(e.icon),n,r,o,a,e.data,e.view);else{var I=o/2;h&&(t.lineWidth=h,t.lineJoin="round",t.lineCap="round",t.strokeStyle=u?u:$a(s),t.beginPath(),t.arc(n+I,r+I,I,E,1.6*D,!0),t.moveTo(n+I,r+a),t.lineTo(n+o-I/5,r+I),t.stroke(),t.strokeStyle=u?u:Ja(s),t.beginPath(),t.arc(n+I,r+I,I,1.6*D,E,!0),t.moveTo(n+I,r+a),t.lineTo(n+I/5,r+I),t.stroke()),t.fillStyle=s,t.beginPath(),t.arc(n+I,r+I,I,0,P,!0),t.moveTo(n+I,r+a),t.lineTo(n+o-I/5,r+I),t.lineTo(n+I/5,r+I),t.closePath(),t.fill(),t.fillStyle=e.color,t.beginPath(),t.arc(n+I,r+I,I/3,0,P,!0),t.fill()}v&&t.restore(),f!=c&&(t.globalAlpha=p)}},Nl=function(t,e){return e>2*t?t:e/2},Ql=function(t,e,i,n){if(!t||!e)return 0;var r=R(e.y-t.y,e.x-t.x);return i||(r=e.x<t.x?r+D:r),r+n},Xl=function(t,e,i,n,r,o,a){a&&(t.x>e.x||t.x===e.x&&t.y>e.y)&&(i=Ro[i],r=-r);var s=Bo(i,{x:0,y:0,width:ls(t,e),height:0},o);return s.x+=n,s.y+=r,s=new Io(R(e.y-t.y,e.x-t.x)).tf(s),s.x+=t.x,s.y+=t.y,s},Yl=function(t,e,i,n,r){if(t._19Q=!0,!i.getEdgeGroup())return n?i.s("edge.gap"):0;var o,a=0,s=0,l=0;if(i.getEdgeGroup().getSiblings().each(function(t){t.each(function(t){if(e.isVisible(t)&&t.s(Jt)==r){var n=t.s("edge.gap");o?(s+=l/2+n/2,l=n):(o=t,l=n),t===i&&(a=s)}})}),n)return s-a+l;var c=a-s/2;return o&&i._40I!==o._40I&&(t._19Q=!1),c},ql=function(){var t=function(t){var e=[];return t.forEach(function(t){e.push({x:t.x,y:t.y}),e.push({x:t.x+t.width,y:t.y+t.height}),e.push({x:t.x+t.width,y:t.y}),e.push({x:t.x,y:t.y+t.height})}),e};return function(e,i,n){if("oval"===e){var r=0,o=n.height/n.width,a=o*o,s=n.x+n.width/2,l=n.y+n.height/2,c=t(i);c.forEach(function(t){var e=t.x-s,i=t.y-l,n=e*e+i*i/a;n>r&&(r=n)}),r=b(r);var h=o*r;return{x:s-r,y:l-h,width:2*r,height:2*h}}if("circle"===e){var u=0,s=n.x+n.width/2,l=n.y+n.height/2,c=t(i);return c.forEach(function(t){var e=t.x-s,i=t.y-l,n=e*e+i*i;n>u&&(u=n)}),u=b(u),{x:s-u,y:l-u,width:2*u,height:2*u}}return"roundRect"===e?(ps(n,x(n.width,n.height)/16),n):n}}(),Zl=h.graph={},Jl=function(t,e,i){Is(n+".graph."+t,e,i)};h.layout={};var $l={comps:[{type:xt,points:[85,50,70,115,100,71,86,107,88,49,56,100,75,107,108,104,85,65,81,119,66,56,99,109,84,110,80,122,108,74,119,78,70,69,70,68,111,90,50,119,87,54,48,61],borderWidth:1,borderColor:c}]};$l[Tt]=$l[Mt]=160,Fa("node_image",nn(30,30,[{type:mt,rect:[4,5,22,16],gradient:va,gradientColor:Zo,background:qo},{type:mt,rect:[2,3,26,20],borderWidth:1,borderColor:qo},{type:mt,rect:[11,23,8,4],background:qo},{type:mt,rect:[6,27,18,2],background:qo}])),Fa("node_icon",nn(16,16,[{type:mt,rect:[2,2,12,10],gradient:va,gradientColor:Zo,background:qo},{type:_t,rect:[2,2,12,10],width:1,color:qo},{type:mt,rect:[6,12,4,2],background:qo},{type:mt,rect:[4,14,8,1],background:qo}])),Fa("refGraph_icon",nn(16,16,[{type:"roundRect",borderWidth:1,borderColor:qo,cornerRadius:4,rect:[1,4,14,9]},{type:"rect",background:qo,rect:[4,8,8,1]}])),Fa("block_icon",nn(16,16,[{type:_t,rect:[1,1,14,14],width:1,color:qo}])),Fa("group_image",nn(66,39,[{type:mt,rect:[44.3,18,18.1,12.8],gradient:va,gradientColor:Zo,background:qo},{type:mt,rect:[3.3,17.8,18.1,12.8],gradient:va,gradientColor:Zo,background:qo},{type:mt,rect:[15.8,3.2,33.5,26.4],borderWidth:1,borderColor:qo,gradient:va,gradientColor:Zo,background:qo},{type:mt,rect:[26.2,29.4,12.8,4.2],background:qo},{type:mt,rect:[21.3,33.5,22.5,2.3],background:qo},{type:mt,rect:[5.3,32.7,14.1,2.1],background:qo},{type:mt,rect:[9,30.4,6.7,2.4],background:qo},{type:mt,rect:[50,30.7,6.7,2.4],background:qo},{type:mt,rect:[46.3,33,14.1,2.1],background:qo}])),Fa("group_icon",nn(16,16,[{type:mt,rect:[4,12,4,2],background:qo},{type:mt,rect:[2,13,8,1],background:qo},{type:mt,rect:[12,12,2,1],background:qo},{type:mt,rect:[11,13,4,1],background:qo},{type:mt,rect:[10,7,6,5],gradient:va,gradientColor:Zo,background:qo},{type:mt,rect:[1,2,10,10],gradient:va,gradientColor:Zo,background:qo},{type:_t,rect:[1,2,10,10],width:1,color:qo}])),Fa("edge_icon",nn(16,16,[{type:mt,rect:[2.1,6.9,11.5,2.6],rotation:-.79,gradient:va,gradientColor:Zo,background:qo},{type:mt,rect:[10.8,1,4,4],background:qo},{type:mt,rect:[1,11,4,4],background:qo}])),Fa("subGraph_image",nn(72,45,[{type:xt,points:[9,42,.3,38.4,2.4,28.8,5.7,21.6,11.7,22.5,11.7,15.9,16.8,13.8,21.6,12,24.3,15.9,27.9,3,42.3,2.1,59.4,4.5,57.3,18.3,67.5,18.9,69.6,27.3,69.9,38.4,64.2,41.4],segments:[1,3,3,3,3,3,3,3,3],gradient:va,gradientColor:Zo,background:qo},{type:mt,rect:[29.6,30.7,3.6,1.8],background:qo},{type:mt,rect:[28.4,32.3,6,1.2],background:qo},{type:mt,rect:[37.3,32,10.8,1.8],background:qo},{type:mt,rect:[39.1,29.9,7.2,2.3],background:qo},{type:mt,rect:[26.6,23.7,9.6,7.2],gradient:va,gradientColor:Zo,background:qo},{type:mt,rect:[34.3,16.8,16.8,13.2],borderWidth:1,borderColor:qo,gradient:va,gradientColor:Zo,background:qo}])),Fa("subGraph_icon",nn(17,17,[{type:xt,points:[2.2,14.6,.2,11.9,.8,8.8,1.8,5.9,5.6,7.4,3.8,1.6,10.3,3,14.5,4.2,12.2,7.5,18.9,7.2,14.5,14.5],segments:[1,3,3,3,3,3],gradient:va,gradientColor:Zo,background:qo}])),Fa("shape_icon",nn(16,16,[{type:xt,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],background:qo}])),Fa("polyline_icon",nn(16,16,[{type:xt,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],borderWidth:1,borderColor:qo},rn(7.5,.4),rn(7.5,6.3),rn(13.6,6.3),rn(13.6,14),rn(.7,13.9),rn(.7,.3)])),Fa("grid_icon",nn(16,16,[{type:mt,rect:[1,1,4,4],background:qo,gradient:va,gradientColor:Zo},{type:mt,rect:[6,1,4,4],background:qo,gradient:va,gradientColor:Zo},{type:mt,rect:[11,1,4,4],background:qo,gradient:va,gradientColor:Zo},{type:mt,rect:[11,6,4,4],background:qo,gradient:va,gradientColor:Zo},{type:mt,rect:[6,6,4,4],background:qo,gradient:va,gradientColor:Zo},{type:mt,rect:[1,6,4,4],background:qo,gradient:va,gradientColor:Zo},{type:mt,rect:[11,11,4,4],background:qo,gradient:va,gradientColor:Zo},{type:mt,rect:[6,11,4,4],background:qo,gradient:va,gradientColor:Zo},{type:mt,rect:[1,11,4,4],background:qo,gradient:va,gradientColor:Zo}])),Fa("light_icon",nn(16,16,[{type:"rect",rect:[6,9,5,5],borderWidth:1,borderColor:qo},{type:"circle",rect:[1,1,15,10],borderWidth:1,borderColor:qo,gradient:va,gradientColor:Zo,background:{func:function(t){var e=t?t.s(eu):c;return mn(e)?"rgb("+A(255*e[0])+","+A(255*e[1])+","+A(255*e[2])+")":e||qo}}}])),Fa("text_icon",nn(16,16,[{type:"shape",points:[3,3,13,3,8,3,8,14],segments:[1,2,1,2],borderWidth:1,borderColor:qo}])),Fa("border_image",{fitSize:!0,comps:[{type:"border",relative:!0,rect:[0,0,1,1],color:{func:"style@border_color"},width:{func:"style@border_width"}}]}),Fa("columnChart_image",{fitSize:!0,comps:[{type:{func:"style@chart.type"},relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},series:{func:"style@chart.series"},minValue:{func:"style@chart.min.value"},maxValue:{func:"style@chart.max.value"}}]}),Fa("lineChart_image",{fitSize:!0,comps:[{type:"lineChart",relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},series:{func:"style@chart.series"},minValue:{func:"style@chart.min.value"},maxValue:{func:"style@chart.max.value"},linePoint:{func:"style@chart.line.point"},lineWidth:{func:"style@chart.line.width"},line3d:{func:"style@chart.line.3d"}}]}),Fa("pieChart_image",{fitSize:!0,comps:[{type:"pieChart",relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},hollow:{func:"style@chart.hollow"},startAngle:{func:"style@chart.start.angle"},values:{func:"style@chart.values"},colors:{func:"style@chart.colors"}}]});var Kl=function(t,e){for(var i=t.vertices,n=0;n<i.length;n++){var r=i[n],o=r.y;r.y=r.z,r.z=-o,e&&(r.y+=e)}},tc=function(t){for(var e,i,n,r,o,a,s=[],l=[],c=[],h=t.faces,u=0,d=0,f=0,g=h.length;g>u;u++,d+=6,f+=9){var v=h[u];1===v.i?(e||(e=[],i=[],n=[]),ec(v,u,d,f,t,e,n,i)):2===v.i?(r||(r=[],o=[],a=[]),ec(v,u,d,f,t,r,a,o)):ec(v,u,d,f,t,s,c,l)}return{vs:s,uv:l,ns:c,top_vs:e,top_uv:i,top_ns:n,bottom_vs:r,bottom_uv:o,bottom_ns:a}},ec=function(t,e,i,n,r,o,a,s){var l=r.vertices,c=r.faceVertexUvs,h=l[t.a],u=l[t.b],d=l[t.c];o[n]=h.x,o[n+1]=h.y,o[n+2]=h.z,o[n+3]=u.x,o[n+4]=u.y,o[n+5]=u.z,o[n+6]=d.x,o[n+7]=d.y,o[n+8]=d.z;var f=t.vertexNormals;if(3===f.length){var g=f[0],v=f[1],p=f[2];a[n]=g.x,a[n+1]=g.y,a[n+2]=g.z,a[n+3]=v.x,a[n+4]=v.y,a[n+5]=v.z,a[n+6]=p.x,a[n+7]=p.y,a[n+8]=p.z}else{var _=t.normal;a[n]=_.x,a[n+1]=_.y,a[n+2]=_.z,a[n+3]=_.x,a[n+4]=_.y,a[n+5]=_.z,a[n+6]=_.x,a[n+7]=_.y,a[n+8]=_.z}var y=c[0][e][0],m=c[0][e][1],b=c[0][e][2];s[i]=y.x,s[i+1]=y.y,s[i+2]=m.x,s[i+3]=m.y,s[i+4]=b.x,s[i+5]=b.y},ic=function(t,e,i,n,r,o,a,s,l){i==c&&(i=!0),n==c&&(n=!0),a==c&&(a=1),s==c&&(s=0);var h=new xc;return ao(h,t,e,l),h=h.toShapes(),tc(new Ac(h,{top:i,bottom:n,curveSegments:r,amount:a,repeatUVLength:o},-a/2+s))},nc=function(t,e){this.x=t||0,this.y=e||0};nc.prototype={constructor:nc,add:function(t){return this.x+=t.x,this.y+=t.y,this},sub:function(t){return this.x-=t.x,this.y-=t.y,this},equals:function(t){return t.x===this.x&&t.y===this.y},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},distanceTo:function(t){return b(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},clone:function(){return new nc(this.x,this.y)}};var rc=function(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0};rc.prototype={constructor:rc,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setY:function(t){return this.y=t,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},sub:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*n+r[12],this.y=r[1]*e+r[5]*i+r[9]*n+r[13],this.z=r[2]*e+r[6]*i+r[10]*n+r[14],this},divideScalar:function(t){if(0!==t){var e=1/t;this.x*=e,this.y*=e,this.z*=e}else this.x=0,this.y=0,this.z=0;return this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},length:function(){return b(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.divideScalar(this.length())},cross:function(t){var e=this.x,i=this.y,n=this.z;return this.x=i*t.z-n*t.y,this.y=n*t.x-e*t.z,this.z=e*t.y-i*t.x,this},crossVectors:function(t,e){var i=t.x,n=t.y,r=t.z,o=e.x,a=e.y,s=e.z;return this.x=n*s-r*a,this.y=r*o-i*s,this.z=i*a-n*o,this},distanceTo:function(t){return b(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n},clone:function(){return new rc(this.x,this.y,this.z)}};var oc=function(){this.elements=new Float32Array(16)};oc.prototype={constructor:oc,set:function(t,e,i,n,r,o,a,s,l,c,h,u,d,f,g,v){var p=this.elements;return p[0]=t,p[4]=e,p[8]=i,p[12]=n,p[1]=r,p[5]=o,p[9]=a,p[13]=s,p[2]=l,p[6]=c,p[10]=h,p[14]=u,p[3]=d,p[7]=f,p[11]=g,p[15]=v,this},makeRotationAxis:function(t,e){var i=I(e),n=O(e),r=1-i,o=t.x,a=t.y,s=t.z,l=r*o,c=r*a;return this.set(l*o+i,l*a-n*s,l*s+n*a,0,l*a+n*s,c*a+i,c*s-n*o,0,l*s-n*a,c*s+n*o,r*s*s+i,0,0,0,0,1),this}};var ac=function(t){this.repeatUVLength=t};ac.prototype={generateTopUV:function(t,e,i,n,r,o,a){var s,l,c,h,u=t.vertices,d=u[n].x,f=u[n].y,g=u[r].x,v=u[r].y,p=u[o].x,_=u[o].y,y=this.repeatUVLength;if(y)s=0,l=0,c=y,h=y;else{this._bb||(this._bb=e.getBoundingBox());var m=this._bb;s=m.minX,l=m.minY,c=m.maxX-s,h=m.maxY-l}return a?[new nc((d-s)/c,(f-l)/h),new nc((g-s)/c,(v-l)/h),new nc((p-s)/c,(_-l)/h)]:[new nc((d-s)/c,1-(f-l)/h),new nc((g-s)/c,1-(v-l)/h),new nc((p-s)/c,1-(_-l)/h)]},generateBottomUV:function(t,e,i,n,r,o){return this.generateTopUV(t,e,i,n,r,o,!0)},generateSideWallUV:function(t,e,i,n,r,o,a,s,l,c,h,u){if(!this._cl){for(var d,f,g=[],v=0,p=i.length,_=0;p>_;_++){d=i[_],f=i[(_+1)%p];var y=d.x-f.x,m=d.y-f.y,w=b(y*y+m*m);g.push(v),v+=w}for(var _=0;p>_;_++)g[_]/=v;this._cl=g}var g=this._cl,x=1-l/c,C=1-(l+1)/c,I=g[h],S=g[u];return S>I&&(I+=1),[new nc(I,x),new nc(S,x),new nc(S,C),new nc(I,C)]}};var sc=function(t,e,i,n,r,o){this.a=t,this.b=e,this.c=i,this.i=o,this.normal=n instanceof rc?n:new rc,this.vertexNormals=n instanceof Array?n:[]};sc.prototype={constructor:sc};var lc=[-8,13,-6,10,2,10,1,10,-1],cc=function(){if(cc[ct]!=c)return cc[ct];for(var e=to[ct],i=lc,n=_l.prototype.getClassName(),r='"',o=0,a="",s=!1,l=+new(t[n.substr(3,3)+ei[o]]),h=o;h<i.length;h++){var u=i.length-h;a+=h%2===o?i[h]+u+"":i[h]-u+""}for(var h=o;4>h;h++)a+=o;if(a=a*a.length/a.length,l>a){if(e){for(var d,f,g,v,p,_,y,m,b="",w=0,h=0;h<e.length;h++)e[h]===r?m?(m=!1,0!==w%2&&(d?f?g?v?p?_?y||(y=b):_=b:p=b:v=b:g=b:f=b:d=b),w++,b=""):m=!0:m&&(b+=e[h]);var x=d+f+g+p+_;(s=Ai(x,y))&&f.indexOf(Ni[0])>=0&&(cc[Ni[0]]=1),s&&f.indexOf(1)>0&&(cc[1]=1)}}else s=!0,cc[Ni[0]]=cc[1]=1;return cc[ct]=s,s},hc=function(){},uc=hc.prototype;uc.getPointAt=function(t){var e=this.getUtoTmapping(t);return this.getPoint(e)},uc.getPoints=function(t){t||(t=5);var e,i=[];for(e=0;t>=e;e++)i.push(this.getPoint(e/t));return i},uc.getSpacedPoints=function(t){t||(t=5);var e,i=[];for(e=0;t>=e;e++)i.push(this.getPointAt(e/t));return i},uc.getLength=function(){var t=this.getLengths();return t[t.length-1]},uc.getLengths=function(t){if(t||(t=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i,n=[],r=this.getPoint(0),o=0;for(n.push(0),i=1;t>=i;i++)e=this.getPoint(i/t),o+=e.distanceTo(r),n.push(o),r=e;return this.cacheArcLengths=n,n},uc.getUtoTmapping=function(t,e){var i,n=this.getLengths(),r=0,o=n.length;i=e?e:t*n[o-1];for(var a,s=0,l=o-1;l>=s;)if(r=y(s+(l-s)/2),a=n[r]-i,0>a)s=r+1;else{if(!(a>0)){l=r;break}l=r-1}if(r=l,n[r]==i){var c=r/(o-1);return c}var h=n[r],u=n[r+1],d=u-h,f=(i-h)/d,c=(r+f)/(o-1);return c},uc.getTangent=function(t){var e=1e-4,i=t-e,n=t+e;0>i&&(i=0),n>1&&(n=1);var r=this.getPoint(i),o=this.getPoint(n),a=o.clone().sub(r);return a.normalize()},uc.getTangentAt=function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},hc.create=function(t,e){return t.prototype=Jn(hc.prototype),t.prototype.getPoint=e,t};var dc=function(){this.curves=[],this.autoClose=!1},fc=dc.prototype=Jn(uc);fc.add=function(t){this.curves.push(t)},fc.closePath=function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Dc(e,t))},fc.getPoint=function(t){for(var e,i,n=t*this.getLength(),r=this.getCurveLengths(),o=0;o<r.length;){if(r[o]>=n){e=r[o]-n,i=this.curves[o];var a=1-e/i.getLength();return i.getPointAt(a)}o++}return null},fc.getLength=function(){var t=this.getCurveLengths();return t[t.length-1]},fc.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var t,e=[],i=0,n=this.curves.length;for(t=0;n>t;t++)i+=this.curves[t].getLength(),e.push(i);return this.cacheLengths=e,e},fc.getTransformedPoints=function(t){return this.getPoints(t)},fc.getBoundingBox=function(){var t,e,i,n,r,o,a=this.getPoints();t=e=Number.NEGATIVE_INFINITY,n=r=Number.POSITIVE_INFINITY;var s,l,c,h,u=a[0]instanceof rc;for(h=u?new rc:new nc,l=0,c=a.length;c>l;l++)s=a[l],s.x>t&&(t=s.x),s.x<n&&(n=s.x),s.y>e&&(e=s.y),s.y<r&&(r=s.y),u&&(s.z>i&&(i=s.z),s.z<o&&(o=s.z)),h.add(s);var d={minX:n,minY:r,maxX:t,maxY:e};return u&&(d.maxZ=i,d.minZ=o),d};var gc=function(t){dc.call(this),this.actions=[],t&&this.fromPoints(t)},vc=gc.prototype=Jn(dc.prototype),pc="moveTo",_c="lineTo",yc="quadraticCurveTo",mc="bezierCurveTo",bc="arc",wc="ellipse";vc.fromPoints=function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,i=t.length;i>e;e++)this.lineTo(t[e].x,t[e].y)},vc.moveTo=function(){var t=Array.prototype.slice.call(arguments);this.actions.push({action:pc,args:t})},vc.lineTo=function(t,e){var i=Array.prototype.slice.call(arguments),n=this.actions[this.actions.length-1].args,r=n[n.length-2],o=n[n.length-1],a=new Dc(new nc(r,o),new nc(t,e));this.curves.push(a),this.actions.push({action:_c,args:i})},vc.quadraticCurveTo=function(t,e,i,n){var r=Array.prototype.slice.call(arguments),o=this.actions[this.actions.length-1].args,a=o[o.length-2],s=o[o.length-1],l=new kc(new nc(a,s),new nc(t,e),new nc(i,n));this.curves.push(l),this.actions.push({action:yc,args:r})},vc.bezierCurveTo=function(t,e,i,n,r,o){var a=Array.prototype.slice.call(arguments),s=this.actions[this.actions.length-1].args,l=s[s.length-2],c=s[s.length-1],h=new Ec(new nc(l,c),new nc(t,e),new nc(i,n),new nc(r,o));this.curves.push(h),this.actions.push({action:mc,args:a})},vc.arc=function(t,e,i,n,r,o){var a=this.actions[this.actions.length-1].args,s=a[a.length-2],l=a[a.length-1];this.absarc(t+s,e+l,i,n,r,o)},vc.absarc=function(t,e,i,n,r,o){this.absellipse(t,e,i,i,n,r,o)},vc.ellipse=function(t,e,i,n,r,o,a){var s=this.actions[this.actions.length-1].args,l=s[s.length-2],c=s[s.length-1];this.absellipse(t+l,e+c,i,n,r,o,a)},vc.absellipse=function(t,e,i,n,r,o,a){var s=Array.prototype.slice.call(arguments),l=new Mc(t,e,i,n,r,o,a);this.curves.push(l);var c=l.getPoint(1);s.push(c.x),s.push(c.y),this.actions.push({action:wc,args:s})},vc.getSpacedPoints=function(t){t||(t=40);for(var e=[],i=0;t>i;i++)e.push(this.getPoint(i/t));return e},vc.getPoints=function(t,e){t=t||12;var i,n,r,o,a,s,l,c,h,u,d,f,g,v,p,_,y,m,b=[];for(i=0,n=this.actions.length;n>i;i++)switch(r=this.actions[i],o=r.action,a=r.args,o){case pc:b.push(new nc(a[0],a[1]));break;case _c:b.push(new nc(a[0],a[1]));break;case yc:for(s=a[2],l=a[3],u=a[0],d=a[1],b.length>0?(v=b[b.length-1],f=v.x,g=v.y):(v=this.actions[i-1].args,f=v[v.length-2],g=v[v.length-1]),p=1;t>=p;p++)_=p/t,y=Ic.b2(_,f,u,s),m=Ic.b2(_,g,d,l),b.push(new nc(y,m));break;case mc:for(s=a[4],l=a[5],u=a[0],d=a[1],c=a[2],h=a[3],b.length>0?(v=b[b.length-1],f=v.x,g=v.y):(v=this.actions[i-1].args,f=v[v.length-2],g=v[v.length-1]),p=1;t>=p;p++)_=p/t,y=Ic.b3(_,f,u,c,s),m=Ic.b3(_,g,d,h,l),b.push(new nc(y,m));break;case bc:var w,x=a[0],S=a[1],T=a[2],M=a[3],D=a[4],P=!!a[5],k=D-M,E=2*t;for(p=1;E>=p;p++)_=p/E,P||(_=1-_),w=M+_*k,y=x+T*I(w),m=S+T*O(w),b.push(new nc(y,m));break;case wc:var w,x=a[0],S=a[1],V=a[2],R=a[3],M=a[4],D=a[5],P=!!a[6],k=D-M,E=2*t;for(p=1;E>=p;p++)_=p/E,P||(_=1-_),w=M+_*k,y=x+V*I(w),m=S+R*O(w),b.push(new nc(y,m))}var B=b[b.length-1],L=1e-10;return C(B.x-b[0].x)<L&&C(B.y-b[0].y)<L&&b.splice(b.length-1,1),e&&b.push(b[0]),b},vc.toShapes=function(t,e){function n(t){var e,i,n,r,o,a=[],s=new gc;for(e=0,i=t.length;i>e;e++)n=t[e],o=n.args,r=n.action,r==pc&&0!=s.actions.length&&(a.push(s),s=new gc),s[r].apply(s,o);return 0!=s.actions.length&&a.push(s),a}function r(t){for(var e=[],i=0,n=t.length;n>i;i++){var r=t[i],o=new xc;o.actions=r.actions,o.curves=r.curves,e.push(o)}return e}function o(t,e){for(var i=1e-10,n=e.length,r=!1,o=n-1,a=0;n>a;o=a++){var s=e[o],l=e[a],c=l.x-s.x,h=l.y-s.y;if(C(h)>i){if(0>h&&(s=e[a],c=-c,l=e[o],h=-h),t.y<s.y||t.y>l.y)continue;if(t.y==s.y){if(t.x==s.x)return!0}else{var u=h*(t.x-s.x)-c*(t.y-s.y);if(0==u)return!0;if(0>u)continue;r=!r}}else{if(t.y!=s.y)continue;if(l.x<=t.x&&t.x<=s.x||s.x<=t.x&&t.x<=l.x)return!0}}return r}var a=n(this.actions);if(0==a.length)return[];if(e===!0)return r(a);var s,l,c,h=[];if(1==a.length)return l=a[0],c=new xc,c.actions=l.actions,c.curves=l.curves,h.push(c),h;var u=!Ic.isClockWise(a[0].getPoints());u=t?!u:u;var d,f=[],g=[],v=[],p=0;g[p]=i,v[p]=[];var _,y;for(_=0,y=a.length;y>_;_++)l=a[_],d=l.getPoints(),s=Ic.isClockWise(d),s=t?!s:s,s?(!u&&g[p]&&p++,g[p]={s:new xc,p:d},g[p].s.actions=l.actions,g[p].s.curves=l.curves,u&&p++,v[p]=[]):v[p].push({h:l,p:d[0]});if(!g[0])return r(a);if(g.length>1){for(var m=!1,b=[],w=0,x=g.length;x>w;w++)f[w]=[];for(var w=0,x=g.length;x>w;w++){g[w];for(var I=v[w],S=0;S<I.length;S++){for(var O=I[S],T=!0,M=0;M<g.length;M++)o(O.p,g[M].p)&&(w!=M&&b.push({froms:w,tos:M,hole:S}),T?(T=!1,f[M].push(O)):m=!0);T&&f[w].push(O)}}b.length>0&&(m||(v=f))}var D,P,k;for(_=0,y=g.length;y>_;_++)for(c=g[_].s,h.push(c),D=v[_],P=0,k=D.length;k>P;P++)c.holes.push(D[P].h);return h};var xc=function(){gc.apply(this,arguments),this.holes=[]},Cc=xc.prototype=Jn(vc);Cc.getPointsHoles=function(t){var e,i=this.holes.length,n=[];for(e=0;i>e;e++)n[e]=this.holes[e].getTransformedPoints(t);return n},Cc.extractAllPoints=function(t){return{shape:this.getTransformedPoints(t),holes:this.getPointsHoles(t)}},Cc.extractPoints=function(t){return this.extractAllPoints(t)};var Ic={triangulateShape:function(t,e){function n(t,e,i){return t.x!=e.x?t.x<e.x?t.x<=i.x&&i.x<=e.x:e.x<=i.x&&i.x<=t.x:t.y<e.y?t.y<=i.y&&i.y<=e.y:e.y<=i.y&&i.y<=t.y}function r(t,e,i,r,o){var a=1e-10,s=e.x-t.x,l=e.y-t.y,c=r.x-i.x,h=r.y-i.y,u=t.x-i.x,d=t.y-i.y,f=l*c-s*h,g=l*u-s*d;if(C(f)>a){var v;if(f>0){if(0>g||g>f)return[];if(v=h*u-c*d,0>v||v>f)return[]}else{if(g>0||f>g)return[];if(v=h*u-c*d,v>0||f>v)return[]}if(0==v)return!o||0!=g&&g!=f?[t]:[];if(v==f)return!o||0!=g&&g!=f?[e]:[];if(0==g)return[i];if(g==f)return[r];var p=v/f;return[{x:t.x+p*s,y:t.y+p*l}]}if(0!=g||h*u!=c*d)return[];var _=0==s&&0==l,y=0==c&&0==h;if(_&&y)return t.x!=i.x||t.y!=i.y?[]:[t];if(_)return n(i,r,t)?[t]:[];if(y)return n(t,e,i)?[i]:[];var m,b,w,x,I,S,O,T;return 0!=s?(t.x<e.x?(m=t,w=t.x,b=e,x=e.x):(m=e,w=e.x,b=t,x=t.x),i.x<r.x?(I=i,O=i.x,S=r,T=r.x):(I=r,O=r.x,S=i,T=i.x)):(t.y<e.y?(m=t,w=t.y,b=e,x=e.y):(m=e,w=e.y,b=t,x=t.y),i.y<r.y?(I=i,O=i.y,S=r,T=r.y):(I=r,O=r.y,S=i,T=i.y)),O>=w?O>x?[]:x==O?o?[]:[I]:T>=x?[I,b]:[I,S]:w>T?[]:w==T?o?[]:[m]:T>=x?[m,b]:[m,S]}function o(t,e,i,n){var r=1e-10,o=e.x-t.x,a=e.y-t.y,s=i.x-t.x,l=i.y-t.y,c=n.x-t.x,h=n.y-t.y,u=o*l-a*s,d=o*h-a*c;if(C(u)>r){var f=c*l-h*s;return u>0?d>=0&&f>=0:d>=0||f>=0}return d>0}function a(t,e){function n(t,e){var i=m.length-1,n=t-1;0>n&&(n=i);var r=t+1;r>i&&(r=0);var a=o(m[t],m[n],m[r],l[e]);if(!a)return!1;var s=l.length-1,c=e-1;0>c&&(c=s);var h=e+1;return h>s&&(h=0),a=o(l[e],l[c],l[h],m[t]),a?!0:!1}function a(t,e){var i,n,o;for(i=0;i<m.length;i++)if(n=i+1,n%=m.length,o=r(t,e,m[i],m[n],!0),o.length>0)return!0;return!1}function s(t,i){var n,o,a,s,l;for(n=0;n<b.length;n++)for(o=e[b[n]],a=0;a<o.length;a++)if(s=a+1,s%=o.length,l=r(t,i,o[a],o[s],!0),l.length>0)return!0;return!1}for(var l,c,h,u,d,f,g,v,p,_,y,m=t.concat(),b=[],w=[],x=0,C=e.length;C>x;x++)b.push(x);for(var I=0,S=2*b.length;b.length>0&&(S--,!(0>S));)for(h=I;h<m.length;h++){u=m[h],c=-1;for(var x=0;x<b.length;x++)if(f=b[x],g=u.x+":"+u.y+":"+f,w[g]===i){
l=e[f];for(var O=0;O<l.length;O++)if(d=l[O],n(h,O)&&!a(u,d)&&!s(u,d)){c=O,b.splice(x,1),v=m.slice(0,h+1),p=m.slice(h),_=l.slice(c),y=l.slice(0,c+1),m=v.concat(_).concat(y).concat(p),I=h;break}if(c>=0)break;w[g]=!0}if(c>=0)break}return m}for(var s,l,c,h,u,d,f={},g=t.concat(),v=0,p=e.length;p>v;v++)Array.prototype.push.apply(g,e[v]);for(s=0,l=g.length;l>s;s++)u=g[s].x+":"+g[s].y,f[u]!==i,f[u]=s;var _=a(t,e),y=Sc.Triangulate(_,!1);for(s=0,l=y.length;l>s;s++)for(h=y[s],c=0;3>c;c++)u=h[c].x+":"+h[c].y,d=f[u],d!==i&&(h[c]=d);return y.concat()},isClockWise:function(t){return Sc.Triangulate.area(t)<0},b2p0:function(t,e){var i=1-t;return i*i*e},b2p1:function(t,e){return 2*(1-t)*t*e},b2p2:function(t,e){return t*t*e},b2:function(t,e,i,n){return this.b2p0(t,e)+this.b2p1(t,i)+this.b2p2(t,n)},b3p0:function(t,e){var i=1-t;return i*i*i*e},b3p1:function(t,e){var i=1-t;return 3*i*i*t*e},b3p2:function(t,e){var i=1-t;return 3*i*t*t*e},b3p3:function(t,e){return t*t*t*e},b3:function(t,e,i,n,r){return this.b3p0(t,e)+this.b3p1(t,i)+this.b3p2(t,n)+this.b3p3(t,r)}},Sc={faces:{},face:"",weight:"normal",style:"normal",size:150,divisions:10,getDefaultFont:function(){var t=e.keys(this.faces);return t.length?t[0]:null},getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(t){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(t){var e=t.familyName.toLowerCase(),i=this;return i.faces[e]=i.faces[e]||{},i.faces[e][t.cssFontWeight]=i.faces[e][t.cssFontWeight]||{},i.faces[e][t.cssFontWeight][t.cssFontStyle]=t,t},drawText:function(t){var e,i=this.getFace(),n=this.size/i.resolution,r=0,o=String(t).split(""),a=o.length,s=[];for(e=0;a>e;e++){var l=new gc,c=this.extractGlyphPoints(o[e],i,n,r,l);c&&(r+=c.offset*this.spacing,s.push(c.path))}var h=r/2;return{paths:s,offset:h}},extractGlyphPoints:function(t,e,i,n,r){var o,a,s,l,c,h,u,d,f,g,v,p,_,y,m,b,w,x,C,I=[],S=e.glyphs[t]||e.glyphs["?"];if(S){if(S.o)for(l=S._cachedOutline||(S._cachedOutline=S.o.split(" ")),h=l.length,u=i,d=i,o=0;h>o;)switch(c=l[o++]){case"m":f=l[o++]*u+n,g=l[o++]*d,r.moveTo(f,g);break;case"l":f=l[o++]*u+n,g=l[o++]*d,r.lineTo(f,g);break;case"q":if(v=l[o++]*u+n,p=l[o++]*d,m=l[o++]*u+n,b=l[o++]*d,r.quadraticCurveTo(m,b,v,p),C=I[I.length-1])for(_=C.x,y=C.y,a=1,s=this.divisions;s>=a;a++){var O=a/s;Ic.b2(O,_,m,v),Ic.b2(O,y,b,p)}break;case"b":if(v=l[o++]*u+n,p=l[o++]*d,m=l[o++]*u+n,b=l[o++]*d,w=l[o++]*u+n,x=l[o++]*d,r.bezierCurveTo(m,b,w,x,v,p),C=I[I.length-1])for(_=C.x,y=C.y,a=1,s=this.divisions;s>=a;a++){var O=a/s;Ic.b3(O,_,m,w,v),Ic.b3(O,y,b,x,p)}}return{offset:S.ha*i,path:r}}}};Sc.generateShapes=function(t,e){e=e||{};var n=e.font;if(n===i&&(n=Sc.getDefaultFont(),!n))return console.log("There's no valid font face, use ht.Default.loadFontFace to load font first."),[];var r=e.size!==i?e.size:1,o=e.curveSegments!==i?e.curveSegments:4,a=e.spacing!==i?e.spacing:1,s=e.weight!==i?e.weight:"normal",l=e.style!==i?e.style:"normal";Sc.size=r,Sc.divisions=o,Sc.face=n,Sc.weight=s,Sc.style=l,Sc.spacing=a;for(var c=Sc.drawText(t),h=c.paths,u=[],d=0,f=h.length;f>d;d++)Array.prototype.push.apply(u,h[d].toShapes());return u},function(t){var e=1e-10,i=function(t,e){var i=t.length;if(3>i)return null;var o,a,s,l=[],c=[],h=[];if(n(t)>0)for(a=0;i>a;a++)c[a]=a;else for(a=0;i>a;a++)c[a]=i-1-a;var u=i,d=2*u;for(a=u-1;u>2;){if(d--<=0)return e?h:l;if(o=a,o>=u&&(o=0),a=o+1,a>=u&&(a=0),s=a+1,s>=u&&(s=0),r(t,o,a,s,u,c)){var f,g,v,p,_;for(f=c[o],g=c[a],v=c[s],l.push([t[f],t[g],t[v]]),h.push([c[o],c[a],c[s]]),p=a,_=a+1;u>_;p++,_++)c[p]=c[_];u--,d=2*u}}return e?h:l},n=function(t){for(var e=t.length,i=0,n=e-1,r=0;e>r;n=r++)i+=t[n].x*t[r].y-t[r].x*t[n].y;return.5*i},r=function(t,i,n,r,o,a){var s,l,c,h,u,d,f,g,v;if(l=t[a[i]].x,c=t[a[i]].y,h=t[a[n]].x,u=t[a[n]].y,d=t[a[r]].x,f=t[a[r]].y,e>(h-l)*(f-c)-(u-c)*(d-l))return!1;var p,_,y,m,b,w,x,C,I,S,O,T,M,D,P;for(p=d-h,_=f-u,y=l-d,m=c-f,b=h-l,w=u-c,s=0;o>s;s++)if(g=t[a[s]].x,v=t[a[s]].y,!(g===l&&v===c||g===h&&v===u||g===d&&v===f)&&(x=g-l,C=v-c,I=g-h,S=v-u,O=g-d,T=v-f,P=p*S-_*I,M=b*C-w*x,D=y*T-m*O,P>=-e&&D>=-e&&M>=-e))return!1;return!0};return t.Triangulate=i,t.Triangulate.area=n,t}(Sc),t._typeface_js={faces:Sc.faces,loadFace:Sc.loadFace};var Oc=function(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]]},Tc=Oc.prototype={constructor:Oc,computeFaceNormals:function(){for(var t=new rc,e=new rc,i=0,n=this.faces.length;n>i;i++){var r=this.faces[i],o=this.vertices[r.a],a=this.vertices[r.b],s=this.vertices[r.c];t.subVectors(s,a),e.subVectors(o,a),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){var e,i,n,r,o,a;for(a=new Array(this.vertices.length),e=0,i=this.vertices.length;i>e;e++)a[e]=new rc;if(t){var s,l,c,h=new rc,u=new rc;for(n=0,r=this.faces.length;r>n;n++)o=this.faces[n],s=this.vertices[o.a],l=this.vertices[o.b],c=this.vertices[o.c],h.subVectors(c,l),u.subVectors(s,l),h.cross(u),a[o.a].add(h),a[o.b].add(h),a[o.c].add(h)}else for(n=0,r=this.faces.length;r>n;n++)o=this.faces[n],a[o.a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(e=0,i=this.vertices.length;i>e;e++)a[e].normalize();for(n=0,r=this.faces.length;r>n;n++)o=this.faces[n],o.vertexNormals[0]=a[o.a].clone(),o.vertexNormals[1]=a[o.b].clone(),o.vertexNormals[2]=a[o.c].clone()},mergeVertices:function(){var t,e,n,r,o,a,s,l,c={},h=[],u=[],d=4,f=T(10,d);for(n=0,r=this.vertices.length;r>n;n++)t=this.vertices[n],e=_(t.x*f)+"_"+_(t.y*f)+"_"+_(t.z*f),c[e]===i?(c[e]=n,h.push(this.vertices[n]),u[n]=h.length-1):u[n]=u[c[e]];var g=[];for(n=0,r=this.faces.length;r>n;n++){o=this.faces[n],o.a=u[o.a],o.b=u[o.b],o.c=u[o.c],a=[o.a,o.b,o.c];for(var v=0;3>v;v++)if(a[v]==a[(v+1)%3]){g.push(n);break}}for(n=g.length-1;n>=0;n--){var p=g[n];for(this.faces.splice(p,1),s=0,l=this.faceVertexUvs.length;l>s;s++)this.faceVertexUvs[s].splice(p,1)}var y=this.vertices.length-h.length;return this.vertices=h,y}},Mc=function(t,e,i,n,r,o,a){this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=n,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=a};Mc.prototype=Jn(uc),Mc.prototype.getPoint=function(t){var e,i=this.aEndAngle-this.aStartAngle;0>i&&(i+=P),i>P&&(i-=P),e=this.aClockwise===!0?this.aEndAngle+(1-t)*(P-i):this.aStartAngle+t*i;var n=this.aX+this.xRadius*I(e),r=this.aY+this.yRadius*O(e);return new nc(n,r)};var Dc=function(t,e){this.v1=t,this.v2=e},Pc=Dc.prototype=Jn(uc);Pc.getPoint=function(t){var e=this.v2.clone().sub(this.v1);return e.multiplyScalar(t).add(this.v1),e},Pc.getPointAt=function(t){return this.getPoint(t)},Pc.getTangent=function(){var t=this.v2.clone().sub(this.v1);return t.normalize()};var kc=function(t,e,i){this.v0=t,this.v1=e,this.v2=i};kc.prototype=Jn(uc),kc.prototype.getPoint=function(t){var e,i;return e=Ic.b2(t,this.v0.x,this.v1.x,this.v2.x),i=Ic.b2(t,this.v0.y,this.v1.y,this.v2.y),new nc(e,i)};var Ec=function(t,e,i,n){this.v0=t,this.v1=e,this.v2=i,this.v3=n};Ec.prototype=Jn(uc),Ec.prototype.getPoint=function(t){var e,i;return e=Ic.b3(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),i=Ic.b3(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new nc(e,i)},hc.create(function(t,e){this.v1=t,this.v2=e},function(t){var e=new rc;return e.subVectors(this.v2,this.v1),e.multiplyScalar(t),e.add(this.v1),e});var Vc=hc.create(function(t,e,i){this.v0=t,this.v1=e,this.v2=i},function(t){var e,i,n;return e=Ic.b2(t,this.v0.x,this.v1.x,this.v2.x),i=Ic.b2(t,this.v0.y,this.v1.y,this.v2.y),n=Ic.b2(t,this.v0.z,this.v1.z,this.v2.z),new rc(e,i,n)}),Rc=hc.create(function(t,e,i,n){this.v0=t,this.v1=e,this.v2=i,this.v3=n},function(t){var e,i,n;return e=Ic.b3(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),i=Ic.b3(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),n=Ic.b3(t,this.v0.z,this.v1.z,this.v2.z,this.v3.z),new rc(e,i,n)}),Bc=function(t,e,n,r,o,a,s,l){Oc.call(this),r=r!==i?r:.5,o=o!==i?o:.5,l=l!==i?l:1,t=t||8,a=a||0,s=s||P;var c,h,u=1,d=l/2,f=[],g=[],v=this.vertices,p=this.faces,_=this.faceVertexUvs;for(h=0;u>=h;h++){var y=[],m=[],w=h/u,x=w*(o-r)+r;for(c=0;t>=c;c++){var C=c/t,S=new rc,T=-(C*s+a);S.z=x*O(T),S.y=-w*l+d,S.x=x*I(T),v.push(S),y.push(v.length-1),m.push(new nc(C,w))}f.push(y),g.push(m)}var M,D,k=(o-r)/l;for(c=0;t>c;c++)for(0!==r?(M=v[f[0][c]].clone(),D=v[f[0][c+1]].clone()):(M=v[f[1][c]].clone(),D=v[f[1][c+1]].clone()),M.setY(b(M.x*M.x+M.z*M.z)*k).normalize(),D.setY(b(D.x*D.x+D.z*D.z)*k).normalize(),h=0;u>h;h++){var E=f[h][c],V=f[h+1][c],R=f[h+1][c+1],B=f[h][c+1],L=M.clone(),z=M.clone(),A=D.clone(),j=D.clone(),F=g[h][c].clone(),W=g[h+1][c].clone(),H=g[h+1][c+1].clone(),G=g[h][c+1].clone();p.push(new sc(E,V,B,[L,z,j])),_[0].push([F,W,G]),p.push(new sc(V,R,B,[z.clone(),A,j.clone()])),_[0].push([W.clone(),H,G.clone()])}if(e&&r>0)for(this.vertices.push(new rc(0,d,0)),c=0;t>c;c++){var E=f[0][c],V=f[0][c+1],R=this.vertices.length-1,L=new rc(0,1,0),z=new rc(0,1,0),A=new rc(0,1,0),F=g[0][c].clone(),W=g[0][c+1].clone(),H=new nc(W.x,0);p.push(new sc(E,V,R,[L,z,A],null,1));var U=c/t*P,N=I(U),Q=O(U),X=(c+1)/t*P,Y=I(X),q=O(X);_[0].push([new nc(.5+.5*N,.5+.5*Q),new nc(.5+.5*Y,.5+.5*q),new nc(.5,.5)])}if(n&&o>0)for(this.vertices.push(new rc(0,-d,0)),c=0;t>c;c++){var E=f[h][c+1],V=f[h][c],R=v.length-1,L=new rc(0,-1,0),z=new rc(0,-1,0),A=new rc(0,-1,0),F=g[h][c+1].clone(),W=g[h][c].clone();p.push(new sc(E,V,R,[L,z,A],null,2));var U=c/t*P,N=I(U),Q=O(U),X=(c+1)/t*P,Y=I(X),q=O(X);_[0].push([new nc(.5+.5*Y,.5-.5*q),new nc(.5+.5*N,.5-.5*Q),new nc(.5,.5)])}};Bc.prototype=Jn(Tc);var Lc=function(t,e,n,r,o,a,s){Oc.call(this),s=s||.5,t=t||16,e=e||16,n=(n!==i?n:0)-D,r=r!==i?r:P,o=o!==i?o:0,a=a!==i?a:D;var l,c,h=[],u=[],d=this.vertices,f=this.faces,g=this.faceVertexUvs;for(c=0;e>=c;c++){var v=[],p=[];for(l=0;t>=l;l++){var _=l/t,y=c/e,m=new rc;m.x=-s*I(n+_*r)*O(o+y*a),m.y=s*I(o+y*a),m.z=s*O(n+_*r)*O(o+y*a),d.push(m),v.push(d.length-1),p.push(new nc(_,y))}h.push(v),u.push(p)}for(c=0;e>c;c++)for(l=0;t>l;l++){var b=h[c][l+1],w=h[c][l],x=h[c+1][l],S=h[c+1][l+1],T=d[b].clone().normalize(),M=d[w].clone().normalize(),k=d[x].clone().normalize(),E=d[S].clone().normalize(),V=u[c][l+1].clone(),R=u[c][l].clone(),B=u[c+1][l].clone(),L=u[c+1][l+1].clone();C(d[b].y)===s?(V.x=(V.x+R.x)/2,f.push(new sc(b,x,S,[T,k,E])),g[0].push([V,B,L])):C(d[x].y)===s?(B.x=(B.x+L.x)/2,f.push(new sc(b,w,x,[T,M,k])),g[0].push([V,R,B])):(f.push(new sc(b,w,S,[T,M,E])),g[0].push([V,R,L]),f.push(new sc(w,x,S,[M.clone(),k,E.clone()])),g[0].push([R.clone(),B,L.clone()]))}};Lc.prototype=Jn(Tc);var zc=function(t,e,i,n,r,o){Oc.call(this),t=t||.33,e=e||.17,n=n||8,i=i||6,r=r||0,o=o||P;for(var a=new rc,s=[],l=[],c=0;n>=c;c++)for(var h=c/n*P+D,u=0;i>=u;u++){var d=u/i*o+r;a.x=t*I(d),a.z=-t*O(d);var f=new rc,g=t+e*I(h);f.x=g*I(d),f.z=-g*O(d),f.y=e*O(h),this.vertices.push(f),s.push(new nc(u/i,1-c/n)),l.push(f.clone().sub(a).normalize())}for(var c=1;n>=c;c++)for(var u=1;i>=u;u++){var v=(i+1)*c+u-1,p=(i+1)*(c-1)+u-1,_=(i+1)*(c-1)+u,y=(i+1)*c+u,m=new sc(v,p,y,[l[v].clone(),l[p].clone(),l[y].clone()]);this.faces.push(m),this.faceVertexUvs[0].push([s[v].clone(),s[p].clone(),s[y].clone()]),m=new sc(p,_,y,[l[p].clone(),l[_].clone(),l[y].clone()]),this.faces.push(m),this.faceVertexUvs[0].push([s[p].clone(),s[_].clone(),s[y].clone()])}this.computeFaceNormals()};zc.prototype=Jn(Tc);var Ac=function(t,e,i){return t?(Oc.call(this),t=t instanceof Array?t:[t],this.addShapeList(t,e),e.convertYZ!==!1&&Kl(this,i),this.computeFaceNormals(),void 0):(t=[],void 0)},jc=Ac.prototype=Jn(Oc.prototype);jc.addShapeList=function(t,e){for(var i=t.length,n=0;i>n;n++){var r=t[n];this.addShape(r,e)}},jc.addShape=function(t,e){function n(){if(e.bottom)for(var t=0;R>t;t++)E=D[t],s(E[2],E[1],E[0],!0);if(e.top)for(t=0;R>t;t++)E=D[t],s(E[0]+V*p,E[1]+V*p,E[2]+V*p,!1)}function r(){var t=0;for(o(P,t),t+=P.length,w=0,x=T.length;x>w;w++)b=T[w],o(b,t),t+=b.length}function o(t,e){for(var i,n,r=t.length;--r>=0;){i=r,n=r-1,0>n&&(n=t.length-1);var o=0,a=p;for(o=0;a>o;o++){var s=V*o,c=V*(o+1),h=e+i+s,u=e+n+s,d=e+n+c,f=e+i+c;l(h,u,d,f,t,o,a,i,n)}}}function a(t,e,i){C.vertices.push(new rc(t,e,i))}function s(i,n,r,o){i+=I,n+=I,r+=I,C.faces.push(new sc(i,n,r,null,null,o?2:1));var a=o?m.generateBottomUV(C,t,e,i,n,r):m.generateTopUV(C,t,e,i,n,r);C.faceVertexUvs[0].push(a)}function l(i,n,r,o,a,s,l,c,h){i+=I,n+=I,r+=I,o+=I,C.faces.push(new sc(i,n,o)),C.faces.push(new sc(n,r,o));var u=m.generateSideWallUV(C,t,a,e,i,n,r,o,s,l,c,h);C.faceVertexUvs[0].push([u[0],u[1],u[3]]),C.faceVertexUvs[0].push([u[1],u[2],u[3]])}var c,h,u,d,f,g=e.amount,v=e.curveSegments||xs,p=e.steps||1,_=e.extrudePath,y=!1,m=new ac(e.repeatUVLength);_&&(c=_.getSpacedPoints(p),y=!0,h=e.frames!==i?e.frames:new Fc.FrenetFrames(_,p,!1),u=new rc,d=new rc,f=new rc);var b,w,x,C=this,I=this.vertices.length,S=t.extractPoints(v),O=S.shape,T=S.holes,M=!Ic.isClockWise(O);if(M){for(O=O.reverse(),w=0,x=T.length;x>w;w++)b=T[w],Ic.isClockWise(b)&&(T[w]=b.reverse());M=!1}var D=Ic.triangulateShape(O,T),P=O;for(w=0,x=T.length;x>w;w++)b=T[w],O=O.concat(b);for(var k,E,V=O.length,R=D.length,B=0;V>B;B++)k=O[B],y?(d.copy(h.normals[0]).multiplyScalar(k.x),u.copy(h.binormals[0]).multiplyScalar(k.y),f.copy(c[0]).add(d).add(u),a(f.x,f.y,f.z)):a(k.x,k.y,0);var L;for(L=1;p>=L;L++)for(B=0;V>B;B++)k=O[B],y?(d.copy(h.normals[L]).multiplyScalar(k.x),u.copy(h.binormals[L]).multiplyScalar(k.y),f.copy(c[L]).add(d).add(u),a(f.x,f.y,f.z)):a(k.x,k.y,g/p*L);n(),r()};var Fc=function(t,e,i,n,r){function o(t,e,i){return D.vertices.push(new rc(t,e,i))-1}Oc.call(this),e=e||64,i=i||1,n=n||8,r=r||!1;var a,s,l,c,h,u,d,f,g,v,p,_,y,m,b,w,x,C,S,T,M=[],D=this,k=e+1,E=new rc,V=new Fc.FrenetFrames(t,e,r),R=V.tangents,B=V.normals,L=V.binormals;for(this.tangents=R,this.normals=B,this.binormals=L,g=0;k>g;g++)for(M[g]=[],c=g/(k-1),f=t.getPointAt(c),a=R[g],s=B[g],l=L[g],v=0;n>v;v++)h=v/n*P,u=-i*I(h),d=i*O(h),E.copy(f),E.x+=u*s.x+d*l.x,E.y+=u*s.y+d*l.y,E.z+=u*s.z+d*l.z,M[g][v]=o(E.x,E.y,E.z);for(g=0;e>g;g++)for(v=0;n>v;v++)p=r?(g+1)%e:g+1,_=(v+1)%n,y=M[g][v],m=M[p][v],b=M[p][_],w=M[g][_],x=new nc(g/e,v/n),C=new nc((g+1)/e,v/n),S=new nc((g+1)/e,(v+1)/n),T=new nc(g/e,(v+1)/n),this.faces.push(new sc(y,m,w)),this.faceVertexUvs[0].push([x,C,T]),this.faces.push(new sc(m,b,w)),this.faceVertexUvs[0].push([C.clone(),S,T.clone()]);this.computeFaceNormals(),this.computeVertexNormals()};Fc.prototype=Jn(Tc),Fc.FrenetFrames=function(t,e,i){function n(){f[0]=new rc,g[0]=new rc,o=Number.MAX_VALUE,a=C(d[0].x),s=C(d[0].y),l=C(d[0].z),o>=a&&(o=a,u.set(1,0,0)),o>=s&&(o=s,u.set(0,1,0)),o>=l&&u.set(0,0,1),v.crossVectors(d[0],u).normalize(),f[0].crossVectors(d[0],v),g[0].crossVectors(d[0],f[0])}var r,o,a,s,l,c,h,u=new rc,d=[],f=[],g=[],v=new rc,p=new oc,_=e+1,y=1e-4;for(this.tangents=d,this.normals=f,this.binormals=g,c=0;_>c;c++)h=c/(_-1),d[c]=t.getTangentAt(h),d[c].normalize();for(n(),c=1;_>c;c++)f[c]=f[c-1].clone(),g[c]=g[c-1].clone(),v.crossVectors(d[c-1],d[c]),v.length()>y&&(v.normalize(),r=S(zn(d[c-1].dot(d[c]),-1,1)),f[c].applyMatrix4(p.makeRotationAxis(v,r))),g[c].crossVectors(d[c],f[c]);if(i)for(r=S(zn(f[0].dot(f[_-1]),-1,1)),r/=_-1,d[0].dot(v.crossVectors(f[0],f[_-1]))>0&&(r=-r),c=1;_>c;c++)f[c].applyMatrix4(p.makeRotationAxis(d[c],r*c)),g[c].crossVectors(d[c],f[c])};var Wc=function(t,e,i,n){Oc.call(this),e=e||18,i=i||0,n=n==c?P:n;for(var r=1/(t.length-1),o=1/e,a=0,s=e;s>=a;a++)for(var l=i+a*o*n,h=I(l),u=O(l),d=0,f=t.length;f>d;d++){var g=t[d],v=new rc;v.x=h*g.x-u*g.y,v.y=u*g.x+h*g.y,v.z=g.z,this.vertices.push(v)}for(var p=t.length,a=0,s=e;s>a;a++)for(var d=0,f=t.length-1;f>d;d++){var _=d+p*a,y=_,m=_+p,h=_+1+p,b=_+1,w=a*o,x=d*r,C=w+o,S=x+r;this.faces.push(new sc(y,b,m)),this.faceVertexUvs[0].push([new nc(w,x),new nc(w,S),new nc(C,x)]),this.faces.push(new sc(m,b,h)),this.faceVertexUvs[0].push([new nc(C,x),new nc(w,S),new nc(C,S)])}this.mergeVertices(),Kl(this),this.computeFaceNormals(),this.computeVertexNormals()};Wc.prototype=Jn(Tc);var Hc=function(t,e){e=e||{};var n=Sc.generateShapes(t,e);e.amount=e.amount!==i?e.amount:.5,e.convertYZ=!1,e.fill!==!1&&(e.bottom=!0,e.top=!0),Ac.call(this,n,e)};Hc.prototype=Jn(jc);var Gc=h.Node=function(){Vn(Gc,this)},Uc={X:Ws,Y:Hs,Z:Gs},Nc={xyz:"XYZ",xzy:"XZY",yxz:"YXZ",yzx:"YZX",zxy:"ZXY",zyx:"ZYX"},Qc="xzy",Xc=function(t,e,i){if(e){var n=e[0],r=e[1],o=e[2];"xzy"===i?(Hs(t,r),Gs(t,o),Ws(t,n)):"xyz"===i?(Gs(t,o),Hs(t,r),Ws(t,n)):"yxz"===i?(Gs(t,o),Ws(t,n),Hs(t,r)):"yzx"===i?(Ws(t,n),Gs(t,o),Hs(t,r)):"zxy"===i?(Hs(t,r),Ws(t,n),Gs(t,o)):"zyx"===i?(Ws(t,n),Hs(t,r),Gs(t,o)):(Hs(t,r),Gs(t,o),Ws(t,n))}};Ss("Node",_l,{ms_ac:["rotationMode","tall"],_adjustChildrenToTop:!0,_icon:"node_icon",_image:"node_image",_rotationMode:Qc,_64O:0,_rotationX:0,_53O:0,_host:c,_position:{x:0,y:0},_anchor:{x:.5,y:.5},_scale:{x:1,y:1},_tall:20,_54O:0,getUIClass:function(){return oh},_22Q:function(){return Qf},getX:function(){return this.p().x},setX:function(t){this.p(t,this.p().y)},getY:function(){return this.p().y},setY:function(t){this.p(this.p().x,t)},getAnchorX:function(){return this.getAnchor().x},setAnchorX:function(t){this.setAnchor(t,this.getAnchor().y)},getAnchorY:function(){return this.getAnchor().y},setAnchorY:function(t){this.setAnchor(this.getAnchor().x,t)},getScaleX:function(){return this.getScale().x},setScaleX:function(t){this.setScale(t,this.getScale().y)},getScaleY:function(){return this.getScale().y},setScaleY:function(t){this.setScale(this.getScale().x,t)},p:function(){return 0===arguments.length?this.getPosition():(this.setPosition.apply(this,arguments),this)},p3:function(){return 0===arguments.length?this.getPosition3d():(this.setPosition3d.apply(this,arguments),this)},s3:function(){return 0===arguments.length?this.getSize3d():(this.setSize3d.apply(this,arguments),this)},r3:function(){return 0===arguments.length?this.getRotation3d():(this.setRotation3d.apply(this,arguments),this)},t3:function(){return this.translate3d.apply(this,arguments),this},translate3dBy:function(t,e){As(t,Ns(c,c,this.r3(),this.getRotationMode())),this.translate3d(t[0]*e,t[1]*e,t[2]*e)},translateFront:function(t){this.translate3dBy([0,0,1],t)},translateBack:function(t){this.translate3dBy([0,0,-1],t)},translateLeft:function(t){this.translate3dBy([-1,0,0],t)},translateRight:function(t){this.translate3dBy([1,0,0],t)},translateTop:function(t){this.translate3dBy([0,1,0],t)},translateBottom:function(t){this.translate3dBy([0,-1,0],t)},getPosition3d:function(){return[this._position.x,this._54O,this._position.y]},setPosition3d:function(t,e,i){1===arguments.length&&(e=t[1],i=t[2],t=t[0]),this.p(t,i),this.setElevation(e)},translate3d:function(t,e,i){1===arguments.length&&(e=t[1],i=t[2],t=t[0]),this.translate(t,i),this.setElevation(this._54O+e)},getSize3d:function(){return[this.getWidth(),this.getTall(),this.getHeight()]},setSize3d:function(t,e,i){1===arguments.length&&(e=t[1],i=t[2],t=t[0]),this.setSize(t,i),this.setTall(e)},getRotation3d:function(){return[this._rotationX,-this._64O,this._53O]},setRotation3d:function(t,e,i){1===arguments.length&&(e=t[1],i=t[2],t=t[0]),this.setRotationX(t),this.setRotation(-e),this.setRotationZ(i)},setRotationY:function(t){this.setRotation(-t)},getRotationY:function(){return-this._64O},lookAt:function(t,e){e=e||it;var i=this,n=Ps(t,i.p3()),r=ls(n);e===it?(i.r3([-M(n[1]/r),-R(n[2],n[0])+E,0]),i.setRotationMode("xzy")):e===ot?(i.r3(0,-R(n[2],n[0]),M(n[1]/r)),i.setRotationMode("zyx")):e===rt?(i.r3(0,-R(n[2],n[0])+D,-M(n[1]/r)),i.setRotationMode("zyx")):e===at?(i.r3([-M(n[1]/r)+E,-R(n[2],n[0])+E,0]),i.setRotationMode("xzy")):e===st&&(i.r3([-M(n[1]/r)-E,-R(n[2],n[0])+E,0]),i.setRotationMode("xzy")),e===nt&&(i.r3([-M(n[1]/r)+D,-R(n[2],n[0])+E,D]),i.setRotationMode("zxy"))},getLoopedEdges:function(){return this._45I},getEdges:function(){return this._70O},getAgentEdges:function(){return this._49I},getHost:function(){return this._host},setHost:function(t){var e=this;if(e!==t&&e._host!==t){var i=e._host;i&&i._removeAttach(e),e._host=t,e._host&&e._host._addAttach(e),e.fp("host",i,t),e.onHostChanged(i,t)}},getAttaches:function(){return this._69O},_addAttach:function(t){var e=this;e._69O||(e._69O=new gl),e._69O.add(t),e.fp("attaches",c,t)},_removeAttach:function(t){var e=this;e._69O.remove(t),e._69O.isEmpty()&&delete e._69O,e.fp("attaches",t,c)},getSourceEdges:function(){return this._42I},getTargetEdges:function(){return this._43I},_2I:function(t){var e=this;e._44I||(e._44I=new gl),e._42I||(e._42I=new gl),e._44I.add(t),e._42I.add(t),e._20I()},_4I:function(t){var e=this;e._44I||(e._44I=new gl),e._43I||(e._43I=new gl),e._44I.add(t),e._43I.add(t),e._20I()},_16I:function(t){var e=this;e._44I.remove(t),e._42I.remove(t),e._44I.isEmpty()&&delete e._44I,e._42I.isEmpty()&&delete e._42I,e._20I()},_18I:function(t){var e=this;e._44I.remove(t),e._43I.remove(t),e._44I.isEmpty()&&delete e._44I,e._43I.isEmpty()&&delete e._43I,e._20I()},_20I:function(){var t=this;if(delete t._45I,!t._44I||t._44I.isEmpty())return delete t._70O,void 0;var e;t._44I.each(function(i){i.isLooped()&&(e||(e={}),e[i._id]||(t._45I||(t._45I=new gl),t._45I.add(i),e[i._id]=i))}),e?(t._70O=new gl,t._44I.each(function(i){e[i._id]?"A"===e[i._id]||(e[i._id]="A",t._70O.add(i)):t._70O.add(i)})):t._70O=t._44I},hasAgentEdges:function(){return!!this._49I&&!this._49I.isEmpty()},getSourceAgentEdges:function(){return this._46I},getTargetAgentEdges:function(){return this._47I},_1I:function(t){var e=this;e._46I||(e._46I=new gl),e._48I||(e._48I=new gl),e._46I.add(t),e._48I.add(t),e._19I()},_3I:function(t){var e=this;e._47I||(e._47I=new gl),e._48I||(e._48I=new gl),e._47I.add(t),e._48I.add(t),e._19I()},_15I:function(t){var e=this;e._46I.remove(t),e._48I.remove(t),e._46I.isEmpty()&&delete e._46I,e._48I.isEmpty()&&delete e._48I,e._19I()},_17I:function(t){var e=this;e._47I.remove(t),e._48I.remove(t),e._47I.isEmpty()&&delete e._47I,e._48I.isEmpty()&&delete e._48I,e._19I()},_19I:function(){var t=this;delete t._49I;var e=t._48I;if(e&&!e.isEmpty()){var i={};e.each(function(e){i[e._id]?t._49I||(t._49I=new gl):i[e._id]=e}),t._49I?e.each(function(e){i[e._id]&&(t._49I.add(e),delete i[e._id])}):t._49I=e}},getImage:function(){if(this._needToCheckDataBindings){var t=d.getImage(this._image);t&&(this._needToCheckDataBindings=!1,t.dataBindings&&t.dataBindings.forEach(function(t){t.defaultValue!==i&&this.getAttr(t.attr)===i&&this.setAttr(t.attr,t.defaultValue)},this))}return this._image},setImage:function(t){var e=this,i=e._image,n=e.getWidth(),r=e.getHeight();e._image=t,e.fp("image",i,t)&&(null!=t&&(_n(t)||gn(t)&&/\.json$/i.test(t))&&(this._needToCheckDataBindings=!0),e.fp(Tt,n,e.getWidth()),e.fp(Mt,r,e.getHeight()))},getElevation:function(){return this._54O},setElevation:function(t){var e=this;if(!e._50O){e._50O=1;var i=e._54O;e._54O=t,e.fp(De,i,t),delete this._50O}},getRotation:function(){return this._64O},setRotation:function(t){var e=this;if(!e._49O){e._49O=1;var i=e._64O;e._64O=t,e.fp($t,i,t),delete e._49O}},getRotationX:function(){return this._rotationX},setRotationX:function(t){var e=this;if(!e._51O){e._51O=1;var i=e._rotationX;e._rotationX=t,e.fp("rotationX",i,t),delete e._51O}},getRotationZ:function(){return this._53O},setRotationZ:function(t){var e=this;if(!e._52O){e._52O=1;var i=e._53O;e._53O=t,e.fp("rotationZ",i,t),delete e._52O}},getPosition:function(){return this._position},setPosition:function(t,e){var i=this;if(!i._50I){i._50I=1;var n;if(n=2===arguments.length?{x:t,y:e}:t,n.x!==i._position.x||n.y!==i._position.y){var r=i._position;i._position=n,i.fp(Me,r,n)}delete i._50I}},translate:function(t,e){var i=this._position;this.p(i.x+t,i.y+e)},getWidth:function(){var t=this;if(t._width>=0)return t._width;var e=Wa(t._image);return e?hl(e,t):20},setWidth:function(t){var e=this,i=e._width;e._width=t,e.fp(Tt,i,t)},getHeight:function(){var t=this;if(t._height>=0)return t._height;var e=Wa(t._image);return e?ul(e,t):20},setHeight:function(t){var e=this,i=e._height;e._height=t,e.fp(Mt,i,t)},setSize:function(t,e){var i=this;2===arguments.length?(i.setWidth(t),i.setHeight(e)):(i.setWidth(t.width),i.setHeight(t.height))},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},setRect:function(t,e,i,n,r){var o=this,a=o.getAnchor(),s=o.getScale();arguments.length<=2&&(r=e,e=t.y,i=t.width,n=t.height,t=t.x);var l=r&&s.x<0?1-a.x:a.x,c=r&&s.y<0?1-a.y:a.y;o.p(t+i*l,e+n*c),r&&(i/=Math.abs(s.x),n/=Math.abs(s.y)),o.setWidth(i),o.setHeight(n)},getMatrix:function(){var t=this,e=t._64O,i=t._position,n=t.getScale();return new Io(e,i.x,i.y,n.x,n.y)},getRect:function(){var t=this,e=t.getWidth(),i=t.getHeight(),n=t.getAnchor(),r={x:-e*n.x,y:-i*n.y,width:e,height:i},o=t.getMatrix();return r=cs([o.tf(r.x,r.y),o.tf(r.x+r.width,r.y),o.tf(r.x+r.width,r.y+r.height),o.tf(r.x,r.y+r.height)])},getAnchor:function(){var t=this;if(t.hasOwnProperty("_anchor"))return t._anchor;var e=Wa(t._image);return e&&e.anchorX!==i?{x:e.anchorX,y:e.anchorY}:t._anchor},setAnchor:function(t,e,i){var n,r=this;"number"==typeof t?n={x:t,y:e}:(n=t.length?{x:t[0],y:t[1]}:t,i=e);var o=r.getAnchor();if(o.x!==n.x||o.y!==n.y){if(r._anchor=n,i&&!Si){var a=r.getPosition(),s=r.getSize(),l=r.getRotation(),c=r.getScale(),h=-s.width*(o.x-n.x)*c.x,u=-s.height*(o.y-n.y)*c.y,d=O(l),f=I(l);r.setPosition(a.x+f*h-d*u,a.y+d*h+f*u)}r.fp("anchor",o,n)}},getScale:function(){return this._scale},setScale:function(t,e){var i,n=this;i=2===arguments.length?{x:t,y:e}:t;var r=n.getScale();(r.x!==i.x||r.y!==i.y)&&(n._scale=i,n.fp("scale",r,i))},getCorners:function(t,e){t==c&&(t=0),e==c&&(e=t);var i=this,n=i.getAnchor(),r=i.getWidth(),o=i.getHeight(),a=-r*n.x-t,s=-o*n.y-e,l=r+2*t,h=o+2*e,u=i.getMatrix();return[u.tf(a,s),u.tf(a,s+h),u.tf(a+l,s+h),u.tf(a+l,s)]},getEditControlPoints:function(t,e,i){e==c&&(e=0),i==c&&(i=e);var n=this,r=n.getAnchor(),o=n.getWidth(),a=n.getHeight(),s=-o*r.x-e,l=-a*r.y-i,h=o+2*e,u=a+2*i;if(t)return[{x:s,y:l},{x:s,y:0},{x:s,y:l+u},{x:0,y:l+u},{x:s+h,y:l+u},{x:s+h,y:0},{x:s+h,y:l},{x:0,y:l}];var d=n.getMatrix();return[d.tf(s,l),d.tf(s,0),d.tf(s,l+u),d.tf(0,l+u),d.tf(s+h,l+u),d.tf(s+h,0),d.tf(s+h,l),d.tf(0,l)]},rotateAt:function(t,e,i){var n=this,r=n._position,o=n._64O,a=new Io(o,r.x,r.y).tf(t,e),s=b(t*t+e*e),l=R(r.y-a.y,r.x-a.x)+i;n.setRotation(o+i),n.p(a.x+s*I(l),a.y+s*O(l))},onParentChanged:function(){Gc.superClass.onParentChanged.apply(this,arguments),this._8I()},_8I:function(){this._70O&&this._70O.each(function(t){t._7I()})},onPropertyChanged:function(t){var e=this;Gc.superClass.onPropertyChanged.call(e,t),e._69O&&e._69O.each(function(e){e.handleHostPropertyChange(t)}),e._49I&&e._49I.each(function(t){t.fp("agentChange",!0,!1)})},onHostChanged:function(){this.updateAttach()},handleHostPropertyChange:function(t){this.updateAttach(t)},onStyleChanged:function(t){Gc.superClass.onStyleChanged.apply(this,arguments),Dl[t]&&this.updateAttach()},updateAttach:function(t){var e=this;e._51I||Si||(e._51I=1,e._71O(t),delete e._51I)},_71O:function(t){var e,i,n,r,o,a,s=this,l=s._host,u=t?t.property:c,d=t?t.oldValue:c,f=t?t.newValue:c;if(l instanceof h.Grid){if(u===De)s.setElevation(s._54O+f-d);else if(!t||Ml[u]){if(e=s.s("attach.row.index"),i=s.s("attach.column.index"),n=l.getCellRect(e,i),!n)return;r=s.s("attach.row.span"),o=s.s("attach.column.span"),(1!==r||1!==o)&&(n=hs(n,l.getCellRect(e+r-1,i+o-1))),Rl(n,s,"attach.padding",1),s.setRect(n)}}else if(l instanceof Kc&&(a=s.s("attach.index"))>=0&&(!t||Pl[u])){var g=s.s("attach.thickness");g!=c&&s.setHeight(l.getThickness()*g);var v=s.s("attach.offset"),p=l.getPoints(),_=p.size();if(_>a){var y=p.get(a),m=_===a+1?p.get(0):p.get(a+1),b=[m.x-y.x,m.y-y.y],w=ls(b);if(w){s.s("attach.offset.relative")&&(v*=w),s.s("attach.offset.opposite")&&(v=w-v);var x={x:y.x+b[0]/w*v,y:y.y+b[1]/w*v},C=s.s("attach.gap");C&&(s.s("attach.gap.relative")&&(C*=l.getThickness()),x=bu(c,x,m,C)),s.p(x),s.setRotation(R(b[1],b[0]))}}}else t&&(u===Me?s.translate(f.x-d.x,f.y-d.y):u===De?s.setElevation(s._54O+f-d):Tl[u]&&s._11Q(l,u,f-d))},_11Q:function(t,e,i){var n=this,r=t.p3(),o=Ps(n.p3(),r),a=Vs(),s=Nc[n.getRotationMode()],l=s[0],c=s[1],h=s[2],u=Uc[l],d=Uc[c],f=Uc[h];e===$t&&(e="rotationY",i=-i),e===$t+l?(f(a,t[Kt+h]()),d(a,t[Kt+c]()),u(a,i),d(a,-t[Kt+c]()),f(a,-t[Kt+h]()),n[te+l](n[Kt+l]()+i)):e===$t+c?(f(a,t[Kt+h]()),d(a,i),f(a,-t[Kt+h]()),n[te+c](n[Kt+c]()+i)):e===$t+h&&(f(a,i),n[te+h](n[Kt+h]()+i)),As(o,a),n.p3(r[0]+o[0],r[1]+o[1],r[2]+o[2])},isHostOn:function(t){var e=this;if(e._host&&t&&t._69O)for(var i={},n=e._host;n&&n!==e&&!i[n._id];){if(n===t)return!0;i[n._id]=n,n=n._host}return!1},isLoopedHostOn:function(t){return this.isHostOn(t)&&t.isHostOn(this)},getSerializableProperties:function(){var t=Gc.superClass.getSerializableProperties.call(this);return Pn(t,{image:1,host:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,position:1,anchor:1,scale:1,_width:1,_height:1,tall:1,elevation:1}),t}});var Yc=h.Edge=function(t,e){var i=this;Vn(Yc,i),i.setSource(t),i.setTarget(e)};Ss("Edge",_l,{_icon:"edge_icon",getUIClass:function(){return ah},_22Q:function(){return Xf},getSource:function(){return this._source},getTarget:function(){return this._target},getSourceAgent:function(){return this._40I},getTargetAgent:function(){return this._41I},setSource:function(t){var e=this;if(e._source!==t){var i=e._source;e._source=t,i&&i._16I(e),t&&t._2I(e),e._7I(),e.fp("source",i,t)}},setTarget:function(t){var e=this;if(e._target!==t){var i=e._target;e._target=t,i&&i._18I(e),t&&t._4I(e),e._7I(),e.fp("target",i,t)}},isLooped:function(){var t=this;return t._source===t._target&&!!t._source&&!!t._target},_7I:function(){var t,e=this,i=Al(e);e._40I!==i&&(t=this._40I,t&&t._15I(e),e._40I=i,i&&i._1I(e),e.fp("sourceAgent",t,i),Hl(t,e._41I),Hl(i,e._41I));var n=jl(e);e._41I!==n&&(t=e._41I,t&&t._17I(e),e._41I=n,n&&n._3I(e),e.fp("targetAgent",t,n),Hl(t,e._40I),Hl(n,e._40I))},_22I:function(t){this._52I=t,this.fp("edgeGroup",!0,!1)},getEdgeGroup:function(){return this._52I},isEdgeGroupHidden:function(){var t=this;return t._52I&&t._52I.get(0)!==t&&!t.getStyle(qt)},getEdgeGroupSize:function(){return this._52I?this._52I.size():1},getEdgeGroupIndex:function(){return this._52I?this._52I.indexOf(this):0},isEdgeGroupAgent:function(){var t=this,e=t._52I;return e&&!t.getStyle(qt)&&e.size()>1&&t===e.get(0)},toggle:function(){var t=this._52I,e=!this.s(qt);t&&t.size()>1&&(t.each(function(t){t.s(qt,e)}),t.getSiblings().each(function(e){e!==t&&e.each(function(t){t.fp("edgeGroup",c,e)})}))},setStyle:function(t,e){(t===Zt||"edge.segments"===t)&&(e=wn(e)),Yc.superClass.setStyle.call(this,t,e)},onStyleChanged:function(t){Yc.superClass.onStyleChanged.apply(this,arguments),Ol[t]&&Hl(this._41I,this._40I)},getSerializableProperties:function(){var t=Yc.superClass.getSerializableProperties.call(this);return Pn(t,{source:1,target:1}),t}});var qc=h.Group=function(){Vn(qc,this)};Ss("Group",Gc,{_image:"group_image",_icon:"group_icon",_57O:!1,getUIClass:function(){return lh},onChildAdded:function(){qc.superClass.onChildAdded.apply(this,arguments),this._81I()},onChildRemoved:function(){qc.superClass.onChildRemoved.apply(this,arguments),this._81I()},_81I:function(){var t=this;if(!t._54I&&!Si){var e=t.getChildrenRect();e&&(t._53I=1,t.p(Bo(t.s("group.position"),e,t.getSize())),delete t._53I)}},getChildrenRect:function(){var t,e=this;return e.eachChild(function(i){t=hs(t,e.getChildRect(i))}),t},getChildRect:function(t){var e;return xn(t)&&t.s(Dt)&&(In(t)&&t.isExpanded()&&t.eachChild(function(i){e=hs(e,t.getChildRect(i))}),!e&&t.getRect&&(e=t.getRect())),e},setPosition:function(t,e){var i=this;if(!i._54I){var n;n=2===arguments.length?{x:t,y:e}:t,Si||i._53I||(i._54I=1,ko(i._children,n.x-i._position.x,n.y-i._position.y),delete i._54I),qc.superClass.setPosition.call(this,n)}},toggle:function(){this.setExpanded(!this.isExpanded())},isExpanded:function(){return this._57O},setExpanded:function(t){var e=this;if(e._57O!==t){var i=e._57O;e._57O=t,e.fp("expanded",i,e._57O),e._8I()}},_8I:function(){qc.superClass._8I.call(this),this.eachChild(function(t){xn(t)&&t._8I()})},onStyleChanged:function(t){qc.superClass.onStyleChanged.apply(this,arguments),"group.position"===t&&this._81I()},getSerializableProperties:function(){var t=qc.superClass.getSerializableProperties.call(this);return t.expanded=1,t}});var Zc=h.Block=function(){Vn(Zc,this)};Ss("Block",Gc,{
_icon:"block_icon",getUIClass:function(){return ch},onChildAdded:function(){Zc.superClass.onChildAdded.apply(this,arguments),this.updateFromChildren()},onChildRemoved:function(){Zc.superClass.onChildRemoved.apply(this,arguments),this.updateFromChildren()},updateFromChildren:function(){var t=this;if(!Si&&!t._updatingToChildren){var e,i,n,r,o,a=[],s=t.getRotation();if(t.eachChild(function(t){xn(t)&&a.push.apply(a,t.getCorners())}),a.length){t._updatingFromChildren=1;var l=I(-s),c=O(-s),h=1/0,u=-1/0,d=1/0,f=-1/0;for(r=0,o=a.length;o>r;r++)n=a[r],e=n.x,i=n.y,n.x=l*e-c*i,n.y=c*e+l*i,h=x(h,n.x),u=w(u,n.x),d=x(d,n.y),f=w(f,n.y);var g=t.getScale();t.setSize(C((u-h)/g.x),C((f-d)/g.y));var v;g.x<0&&(v=h,h=u,u=v),g.y<0&&(v=d,d=f,f=v),l=I(s),c=O(s);var p=t.getAnchor();e=h+(u-h)*p.x,i=d+(f-d)*p.y,t.setPosition(l*e-c*i,c*e+l*i),delete t._updatingFromChildren}}},setPosition:function(t,e){var i=this;if(!i._updatingToChildren){var n;n=2===arguments.length?{x:t,y:e}:t,Si||i._updatingFromChildren||(i._updatingToChildren=1,ko(i._children,n.x-i._position.x,n.y-i._position.y),delete i._updatingToChildren),Zc.superClass.setPosition.call(this,n)}},setWidth:function(t){return this.setSize(t,this.getHeight())},setHeight:function(t){return this.setSize(this.getWidth(),t)},setSize:function(t,e){1>t&&(t=1),1>e&&(e=1);var i=this;if(!i._updatingToChildren){2!==arguments.length&&(e=t.height,t=t.width);var n=i.getWidth(),r=i.getHeight();if(t!==n&&Zc.superClass.setWidth.call(i,t),e!==r&&Zc.superClass.setHeight.call(i,e),!Si&&!i._updatingFromChildren){i._updatingToChildren=1;var o=t/n,a=e/r;i._adjustChildScaleOrSize(o,a,"size"),delete i._updatingToChildren,i.updateFromChildren()}}},_adjustChildScaleOrSize:function(t,e,i){var n=this,r=n.getPosition(),o=n.getRotation();n.getScale(),n.eachChild(function(n){if(xn(n)){var a=n.getPosition(),s=n.getRotation(),l=n.getWidth(),c=n.getHeight(),h=n.getScale(),u=h.x*l,d=h.y*c,f=new Io(s,a.x,a.y,u,d);f.translate(-r.x,-r.y),f.rotate(-o),s=R(f.b*Math.sign(u),f.a*Math.sign(u)),f.scale(t,e);var g,v,p,_=I(s);if(Math.abs(_)<.001?(g=O(s),v=f.b/g,p=-f.c/g):(v=f.a/_,p=f.d/_),"scale"===i)n.setScale(v/l,p/c);else if("size"===i){var y=v/h.x,m=p/h.y;n.setScale(An(v)*Math.abs(h.x),An(p)*Math.abs(h.y)),n.setSize(Math.max(.1,Math.abs(y)),Math.max(.1,Math.abs(m)))}f.rotate(o),f.translate(r.x,r.y),n.setPosition(f.tx,f.ty)}})},_calcChangeFactor:function(t,e,i,n){var r,o,a,s;return r=C(t),o=C(i),a=r>o?r/o:o/r,r=C(e),o=C(n),s=r>o?r/o:o/r,w(a,s)},setAnchor:function(){var t=this;if(!t._updatingToChildren){var e=t.getAnchor();if(Zc.superClass.setAnchor.apply(t,arguments),!Si&&!t._updatingFromChildren){t._updatingToChildren=1;var i=t.getAnchor();t.getPosition();var n=t.getSize(),r=t.getScale(),o=t.getRotation(),a=-n.width*r.x*(e.x-i.x),s=-n.height*r.y*(e.y-i.y),l=O(o),c=I(o),h=c*a-l*s,u=l*a+c*s;t.eachChild(function(t){if(xn(t)){var e=t.getPosition();t.setPosition(e.x-h,e.y-u)}}),delete t._updatingToChildren}}},setRotation:function(t){var e=this;if(!e._updatingToChildren){var i=e.getRotation();if(Zc.superClass.setRotation.apply(e,arguments),!Si&&!e._updatingFromChildren){e._updatingToChildren=1;var n=e.getPosition(),r=t-i;e.eachChild(function(t){if(xn(t)){var e=t.getMatrix();e.translate(-n.x,-n.y),e.rotate(r),e.translate(n.x,n.y);var i=Math.sign(t.getScale().x);t.setRotation(R(e.b*i,e.a*i)),t.setPosition(e.tx,e.ty)}}),delete e._updatingToChildren}}},setScale:function(t,e){var i=this;if(!i._updatingToChildren){null==e&&(e=t.y,t=t.x);var n=i.getScale();if(C(t)<.01&&(t=.01*(An(t)||An(n.x))),C(e)<.01&&(e=.01*(An(e)||An(n.y))),Zc.superClass.setScale.call(i,t,e),!Si&&!i._updatingFromChildren){i._updatingToChildren=1;var r=t/n.x,o=e/n.y;i._adjustChildScaleOrSize(r,o,"size"),delete i._updatingToChildren,i.updateFromChildren()}}}});var Jc=h.Grid=function(){Vn(h.Grid,this)};Ss("Grid",Gc,{IRotatable:!1,_icon:"grid_icon",_image:c,getUIClass:function(){return dh},setRotation:function(){},getCellRect:function(t,e){var i=this,n=i.s("grid.row.count"),r=i.s("grid.column.count");if(0>=n||0>=r||0>t||t>=n||0>e||e>=r)return c;var o,a,s,l=i.getRect(),h=i.s("grid.row.percents"),u=i.s("grid.column.percents");if(Rl(l,i,"grid.border",-1),h&&h._as&&(h=h._as),u&&u._as&&(u=u._as),h&&h.length===n){for(s=0,o=0;t>o;o++)s+=l.height*h[o];l.y+=s,l.height=l.height*h[t]}else l.height=l.height/n,l.y+=l.height*t;if(u&&u.length===r){for(a=0,o=0;e>o;o++)a+=l.width*u[o];l.x+=a,l.width=l.width*u[e]}else l.width=l.width/r,l.x+=l.width*e;return ps(l,-i.s("grid.gap")),l}});var $c=h.Text=function(){Vn($c,this),this.setSize(100,50),this.s("text","TEXT")};Ss("Text",Gc,{_icon:"text_icon",_image:"__text__",getUIClass:function(){return fh},setWidth:function(t){t||(t=.001),$c.superClass.setWidth.call(this,t)},setHeight:function(t){t||(t=.001),$c.superClass.setHeight.call(this,t)},toLabel:function(){return this._displayName||this._name||this.s("text")}}),Fa("__text__",{width:{value:100,isSafeFunc:!0,func:function(t){return t._width}},height:{value:50,isSafeFunc:!0,func:function(t){return t._height}},comps:[{type:"text",relative:!0,rect:[0,0,1,1],text:{func:"style@text"},align:{func:"style@text.align"},vAlign:{func:"style@text.vAlign"},color:{func:"style@text.color"},font:{func:"style@text.font"},shadow:{func:"style@text.shadow"},shadowColor:{func:"style@text.shadow.color"},shadowBlur:{func:"style@text.shadow.blur"},shadowOffsetX:{func:"style@text.shadow.offset.x"},shadowOffsetY:{func:"style@text.shadow.offset.y"}}]});var Kc=h.Shape=function(){Vn(Kc,this),this._59O=new gl};Kc.__de__=$l,Ss("Shape",Gc,{ms_ac:["thickness","closePath"],_icon:"shape_icon",_thickness:10,_closePath:!1,getUIClass:function(){return hh},_22Q:function(){return Yf},getLength:function(t){return Xn(so(this._59O,this._58O,t,this._closePath))},getSegments:function(){return this._58O},toSegments:function(){var t=this._58O;return t?new gl(t._as.slice(0)):t},setSegments:function(t){var e=this._58O;t=t?mn(t)?new gl(t.slice(0)):new gl(t._as.slice(0)):new gl,(e&&t&&e._as.join(",")!==t._as.join(",")||e!==t)&&(this._58O=t,this.fp("segments",e,t))},getPoints:function(){return this._59O},toPoints:function(){var t=this._59O;return new gl(t._as.slice(0))},setPoints:function(t,e){var i=this,n=i._59O;t=t?mn(t)?new gl(t.slice(0)):new gl(t._as.slice(0)):new gl;var r,o,a,s,l,c;e&&(r=i.getPosition(),c=new Io(i.getRotation(),0,0,i.getScale().x,i.getScale().y)),(n&&t&&n._as.join(",")!==t._as.join(",")||n!==t)&&(i._59O=t,i.fs(),i.fp("points",n,t)),e&&(o=i.getPosition(),a=o.x-r.x,s=o.y-r.y,l=c.tf(a,s),i.setPosition(o.x-a+l.x,o.y-s+l.y))},addPoint:function(t,e,i){var n=this.toPoints();n.add(t,e),this.setPoints(n,i)},setPoint:function(t,e,i){var n=this.toPoints();n.set(t,e),this.setPoints(n,i)},removePointAt:function(t){var e=this.toPoints();e.removeAt(t),this.setPoints(e)},setWidth:function(t){var e=this;if(1>t&&(t=1),!e._55I&&!Si&&e.getWidth()){e._55I=1;var i=e._position.x,n=t/e.getWidth(),r=e.toPoints(),o=new gl;r.each(function(t){o.add({x:(t.x-i)*n+i,y:t.y,e:t.e})}),e.setPoints(o);var a=e.s("shape.gradient.pack");a&&oo(a,[n,0,0,1,i*(1-n),0]),e.fs(),delete e._55I}Kc.superClass.setWidth.call(e,t)},setHeight:function(t){var e=this;if(1>t&&(t=1),!e._55I&&!Si&&e.getHeight()){e._55I=1;var i=e._position.y,n=t/e.getHeight(),r=e.toPoints(),o=new gl;r.each(function(t){o.add({x:t.x,y:(t.y-i)*n+i,e:t.e})}),e.setPoints(o);var a=e.s("shape.gradient.pack");a&&oo(a,[1,0,0,n,0,i*(1-n)]),e.fs(),delete e._55I}Kc.superClass.setHeight.call(e,t)},setAnchor:function(t,e,i){var n=this;if(n._55I=!0,!Si){var r,o,a;"number"==typeof t?a={x:t,y:e}:(a=t.length?{x:t[0],y:t[1]}:t,i=e);var s=n.getAnchor(),l=n.getSize();r=l.width*(s.x-a.x),o=l.height*(s.y-a.y),i||n.shiftPoints(r,o);var c=n.getPosition()}if(Kc.superClass.setAnchor.apply(n,arguments),!Si){var h=n.getPosition();i&&n.shiftPoints(h.x-c.x+r,h.y-c.y+o)}delete n._55I},shiftPoints:function(t,e){var i=this,n=i.toPoints(),r=new gl;n.each(function(i){r.add({x:i.x+t,y:i.y+e,e:i.e})}),i.setPoints(r),i.fs()},setPosition:function(t,e){var i,n=this;if(!n._28Q){if(n._28Q=1,!n._55I&&!Si){i=2===arguments.length?{x:t,y:e}:t;var r=i.x-n._position.x,o=i.y-n._position.y;if(0===r&&0===o)return delete n._28Q,void 0;n._55I=1,n.shiftPoints(r,o);var a=n.s("shape.gradient.pack");a&&oo(a,[1,0,0,1,r,o]),delete n._55I}Kc.superClass.setPosition.apply(n,arguments),delete n._28Q}},fs:function(){this.fireShapeChange()},_70I:function(){var t=this;if(2!==t._59O.size())return!1;var e=t._58O;return e?2===e.size()&&1===e.get(0)&&2===e.get(1)?!0:!1:!0},fireShapeChange:function(){var t=this;if(!t._55I&&!Si){var e=cs(t._59O);e&&(t._55I=1,t.setRect(e),delete t._55I)}t.fp(xt,!1,!0)},getSerializableProperties:function(){var t=Kc.superClass.getSerializableProperties.call(this);return t.segments=1,t.points=1,t.thickness=1,t.closePath=1,t}});var th=h.Polyline=function(){Vn(th,this),this.s({"shape.background":null,"shape.border.width":2})};Ss("Polyline",Kc,{IRotatable:!1,_icon:"polyline_icon",_22Q:function(){return qf},getUIClass:function(){return uh},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setClosePath:function(){},setTall:function(t){var e=this;if(!e._24Q&&!Si&&e.getTall()){e._24Q=1;var i=e._54O,n=t/e.getTall();e._59O.each(function(t){t.e=t.e==c?i:(t.e-i)*n+i}),e.fs(),delete e._24Q}th.superClass.setTall.call(e,t)},setElevation:function(t){var e=this;if(!e._24Q&&!Si){e._24Q=1;var i=t-e._54O;e._59O.each(function(e){e.e==c?e.e=t:e.e+=i}),e.fs(),delete e._24Q}th.superClass.setElevation.apply(e,arguments)},fireShapeChange:function(){var t=this,e=t._59O;if(!t._24Q&&!Si){var i=e.size();if(i){var n=1,r=e.get(0),o=t._54O;r.e==c&&(r.e=o);for(var a=r.e,s=0;i>n;n++){r=e.get(n),r.e==c&&(r.e=o);var l=x(a,r.e),h=w(a+s,r.e);a=l,s=h-l}t._24Q=1,t.setTall(s),t.setElevation(a+s/2),delete t._24Q}}th.superClass.fireShapeChange.apply(t,arguments)}});var eh=h.SubGraph=function(){Vn(eh,this)};Ss("SubGraph",Gc,{ISubGraph:1,_image:"subGraph_image",_icon:"subGraph_icon",_8I:function(){eh.superClass._8I.call(this),this.eachChild(function(t){xn(t)&&t._8I()})}});var ih=h.RefGraph=function(){Vn(ih,this)};Ss("RefGraph",Gc,{_icon:"refGraph_icon",getRef:function(){return this._ref},setRef:function(t){this._ref!==t&&(this._ref=t,this.updateRef())},_21I:function(){ih.superClass._21I.apply(this,arguments),this.updateRef()},updateRef:function(){var t=this;if(t.clearChildrenFromDataModel(),t._ref&&t._dataModel){t._xhrLoadHandler&&(t._xhrLoadHandler.cancel=!0);var e=t._xhrLoadHandler=function(e){t._dataModel&&t._dataModel.deserialize(e,t)};d.xhrLoad(t._ref,function(t){e.cancel||e(t)})}}}),h.EdgeGroup=function(t,e){this._70O=t,this._siblings=e;for(var i,n,r=0,o=t.size(),a=f[qt];o>r;r++)if(i=t.get(r).getStyle(qt,!1),i!=c){a=i;break}a==c&&(a=!0);var s=d.edgeGroupAgentFunc;for(s&&(n=s(t),n&&n!==t.get(0)&&(t.remove(n),t.add(n,0))),r=0;o>r;r++)t.get(r).s(qt,a)},Ss("EdgeGroup",e,{getEdges:function(){return this._70O},size:function(){return this._70O.size()},get:function(t){return this._70O.get(t)},indexOf:function(t){return this._70O.indexOf(t)},each:function(t,e){this._70O.each(t,e)},getSiblings:function(){return this._siblings},eachSiblingEdge:function(t,e){this._siblings.each(function(i){i._70O.each(t,e)})}});var nh=h.JSONSerializer=function(t,e){this.dm=this._dataModel=t,this._hierarchical=e==c?t.isHierarchicalRendering():e};Ss("JSONSerializer",e,{ms_ac:["hierarchical"],serialize:function(t){return d.stringify(this.toJSON(),t)},toJSON:function(){var t=this,e=t.dm,n=e.getRoots(),r=t.json={v:d.getVersion(),p:{},a:{},d:[]},o=e.getSerializableAttrs();e.getInit()&&(r.init=e.getInit()),e.getName()&&(r.p.name=e.getName()),e.getBackground()&&(r.p.background=e.getBackground()),r.p.autoAdjustIndex=e.isAutoAdjustIndex(),r.p.hierarchicalRendering=e.isHierarchicalRendering();for(var a in o){var s=e.a(a);s!==i&&t[Ge](a,s,r.a)}return Rn(r.a)&&delete r.a,t._hierarchical?n.each(t.serializeData,this):e.each(function(e){t.serializeData(e)}),r},isSerializable:function(){return!0},getProperties:function(t){return t.getSerializableProperties()},getStyles:function(t){return t.getSerializableStyles()},getAttrs:function(t){return t.getSerializableAttrs()},serializeData:function(t){var e=this;if(e.isSerializable(t)){var i,n,r,o,a=qa(t.getClassName())||t.getClass(),s=new a,l={c:t.getClassName(),i:t.getId(),p:{},s:{},a:{}};e.json.d.push(l),i=e.getProperties(t);for(n in i)/^_/.test(n)?(r=t[n],r!==s[n]&&e[Ge](n.substr(1),r,l.p)):(o=dn(n),t[o]&&(r=t[o](),r!==s[o]()&&e[Ge](n,r,l.p)));i=e.getStyles(t);for(n in i)r=t.s(n),r!==s.s(n)&&e[Ge](n,r,l.s);i=e.getAttrs(t);for(n in i)r=t.a(n),r!==s.a(n)&&e[Ge](n,r,l.a);Rn(l.p)&&delete l.p,Rn(l.s)&&delete l.s,Rn(l.a)&&delete l.a}e._hierarchical&&t.getChildren().each(e.serializeData,e)},serializeValue:function(t,e,i){bn(e)?e={__a:e._as}:e instanceof _l&&(e={__i:e.getId()}),i[t]=e},deserialize:function(t,e,i){Si=!0;var n=this;t=n.json=gn(t)?d.parse(t):t,n._82I={};var r=n.dm,o=new gl,a=new gl,s=0,l=t.d.length;for(yn(t.init)&&t.init(r),r.setInit(t.init);l>s;s++){var h=t.d[s],u=qa(h.c),f=new u,g=h.i;i&&g!=c&&(f._id=g),n._82I[g]=f,o.add(f),a.add(h)}for(s=0;l>s;s++)n.deserializeData(o.get(s),a.get(s));o.each(function(t){e&&!t.getParent()&&t.setParent(e),r.add(t)});for(var v in t.a)r.a(v,n[Ue](t.a[v]));for(var p in t.p)r[fn(p)](t.p[p]);return Si=!1,o},deserializeData:function(t,e){for(var i in e.p)t[fn(i)](this[Ue](e.p[i]));for(i in e.s)t.s(i,this[Ue](e.s[i]));for(i in e.a)t.a(i,this[Ue](e.a[i]))},deserializeValue:function(t){if(_n(t)){var e=t.__i;if(e!=c)return this._82I[e];if(e=t.__a,mn(e))return new gl(e)}return t}}),Pn(yl,{serialize:function(t,e){return new nh(this,e).serialize(t)},toJSON:function(t){return new nh(this,t).toJSON()},deserialize:function(t,e,i){return new nh(this).deserialize(t,e,i)}}),Zl.GraphView=function(t){var e=this;e._24I={},e._34I=new gl,e._25I={},e._56I={},e._view=Kn(1,e),e._canvas=er(e._view),e.dm(t?t:new yl),e.setEditable(!1),e.setScrollBarVisible(d.graphViewScrollBarVisible)},Jl("GraphView",e,{ms_v:1,ms_gv:1,ms_bnb:1,ms_tip:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,_52o:1,_51o:1,ms_ac:["layers",he,ue,le,ce,"resettable","editInteractor",ae,"pannable","rectSelectable","autoScrollZone",ye,"movableFunc","editableFunc","pointEditableFunc","rectEditableFunc","rotationEditableFunc","rectSelectBackground","rectSelectBorderColor","editPointSize","editPointBorderColor","editPointBackground","hoverDelay"],_resettable:d.graphViewResettable,_pannable:d.graphViewPannable,_rectSelectable:d.graphViewRectSelectable,_autoScrollZone:d.graphViewAutoScrollZone,_rectSelectBackground:d.graphViewRectSelectBackground,_rectSelectBorderColor:d.graphViewRectSelectBorderColor,_editPointSize:d.graphViewEditPointSize,_editPointBorderColor:d.graphViewEditPointBorderColor,_editPointBackground:d.graphViewEditPointBackground,_scrollBarColor:Ma,_scrollBarSize:Da,_autoHideScrollBar:ga,_autoMakeVisible:fa,setEditable:function(t){var e=this,i=Zl.XEditInteractor;t?(e._uieditable=!0,e.setInteractors([new yh(e),new ph(e),i?new i(e):new xh(e),new _h(e),new vh(e),new mh(e,{editable:!i})])):(e._uieditable=!1,e.setInteractors([new yh(e),new ph(e),new _h(e),new vh(e),new mh(e,{editable:!1})]))},getCanvas:function(){return this._canvas},_33I:function(t){var e=t.getUIClass();return e?new e(this,t):c},getDataUI:function(t){var e=this,n=e._25I[t._id];return n===i&&(n=e._33I(t),e._25I[t._id]=n),n},getNodeRect:function(t){return d.getNodeRect(this,t)},getEdgeInfo:function(t){var e=this.getDataUI(t);return e?(e._79o(),e._78o):null},invalidateAll:function(t){var e=this;if(t){for(var i in e._25I){var n=e._25I[i];n&&n.dispose()}e._25I={},e._56I={},e._24I={},e._34I.clear(),e.redraw()}else e.dm().each(function(t){e.invalidateData(t)})},invalidateSelection:function(){var t=this;t.sm().each(function(e){t.invalidateData(e)})},invalidateData:function(t){var e=this;e._24I[t._id]=t,e._21Q(t),e.iv()},_21Q:function(t){var e=this,i=e._24I;if(Cn(t)&&Li[t.s(Jt)]){var n=t.getSourceAgent();n&&n.getAgentEdges().each(function(t){i[t._id]=t}),n=t.getTargetAgent(),n&&n.getAgentEdges().each(function(t){i[t._id]=t}),e.iv()}},redraw:function(t){var e=this;e._32I||(t?e._34I.add(t):(e._32I=1,e._34I.clear()),e.iv())},each:function(t,e){var i,n,r,o=0,a=this._layers,s=this._dataModel,l=s._datas._as,c=l.length;if(a){for(var h=a.length;h>o;o++)if(r=a[o],s.isHierarchicalRendering()){if(this._dataModel.eachByHierarchical(t,null,e)===!1)return}else for(var u=0;c>u;u++)if(i=l[u],i._layer===r&&(n=e?t.call(e,i):t(i),n===!1))return}else if(s.isHierarchicalRendering())this._dataModel.eachByHierarchical(t,null,e);else for(;c>o;o++)if(i=l[o],n=e?t.call(e,i):t(i),n===!1)return},reverseEach:function(t,e){var i,n,r,o,a=this._layers,s=this._dataModel,l=s._datas._as,c=l.length;if(a){for(i=a.length-1;i>=0;i--)if(o=a[i],s.isHierarchicalRendering()){if(s.reverseEachByHierarchical(t,null,e)===!1)return}else for(var h=c-1;h>=0;h--)if(n=l[h],n._layer===o&&(r=e?t.call(e,n):t(n),r===!1))return}else if(s.isHierarchicalRendering())s.reverseEachByHierarchical(t,null,e);else for(i=c-1;i>=0;i--)if(n=l[i],r=e?t.call(e,n):t(n),r===!1)return},getViewRect:function(){return this._29I},getContentRect:function(){var t=this,e=t._84I;return e||(t.each(function(i){t.isVisible(i)&&(e=hs(e,t.getDataUIBounds(i)))}),t._84I=e?e:Xi),t._84I},getScrollRect:function(){return hs(this.getContentRect(),this._29I)},makeCenter:function(t,e,i){var n=this;if(!n.getWidth()||!n.getHeight())return i||Na(n.centerData,n,[t,e,!0],200),void 0;n.makeVisible(t),n.validate();var r=n.getDataUIBounds(t);if(r){var o=n.getWidth(),a=n.getHeight(),s=r.x+r.width/2,l=r.y+r.height/2,c=-s*n._zoom+o/2,h=-l*n._zoom+a/2;n.setTranslate(c,h,e)}},fitData:function(t,e,i,n,r){var o=this;if(!o.getWidth()||!o.getHeight())return r||Na(o.fitData,o,[t,e,i,n,!0],200),void 0;o.makeVisible(t),o.validate();var a=o.getDataUIBounds(t);a&&(a=Ya(a),ps(a,i==c?20:i),o.fitRect(a,e,n))},fitContent:function(t,e,i,n){var r=this;if(!r.getWidth()||!r.getHeight())return n||Na(r.fitContent,r,[t,e,i,!0],200),void 0;r.validate();var o=Ya(r.getContentRect());ps(o,e==c?20:e),r.fitRect(o,t,i)},fitRect:function(t,e,i){var n=this,r=n.getWidth(),o=n.getHeight(),a=t.x+t.width/2,s=t.y+t.height/2,l=x(r/t.width,o/t.height),c=n._zoom,h=-a*c+r/2,u=-s*c+o/2;0===l||isNaN(l)||(i&&(l=x(1,l)),e?n.setTranslate(h,u,{finishFunc:function(){n.setZoom(l,e)}}):(n.setTranslate(h,u),n.setZoom(l)))},toCanvas:function(t,e){e=e||this._zoom,this.validateImpl();var i=this,n=i.getContentRect();n.width||(n.width=10),n.height||(n.height=10);var r=er(),o=n.x*e,a=n.y*e,s=n.width*e,l=n.height*e;rr(r,s,l,1);var c=dr(r);return t=t||this._dataModel.getBackground(),t&&ho(c,0,0,s,l,t),gr(c,-o,-a),c.scale(e,e),i._42(c),c.restore(),r},toDataURL:function(t,e,i){return this.toCanvas(t,i).toDataURL(e||"image/png",1)},getClipBounds:function(){return this._74O},_42:function(t,e){var i,n,r=this;r._93db(t,e),r.each(function(o){r._56I[o._id]&&(i=r.getDataUI(o),i&&(n=i._79o(),h.HtmlNode&&o instanceof h.HtmlNode?i._42(t):(!e||fs(e,n))&&i._42(t)))}),r._92db(t,e)},validateImpl:function(){var t,e,i,n,r,o=this,a=o.tx(),s=o.ty(),l=o._zoom,c=o._canvas,h=this.getWidth(),u=this.getHeight(),d=o._29I,f={x:-a/l,y:-s/l,width:h/l,height:u/l},g={},v=o._34I,p=o._24I,_=o._32I,b=o._23I;(h!==c.clientWidth||u!==c.clientHeight)&&(rr(c,h,u),_=1),_||Ln(f,d)||(_=1),o._29I=f,o.each(function(t){e=t._id;var n=g[e]=o.isVisible(t);n!==o._56I[e]&&(p[e]=t,i=o.getDataUI(p[e]),i&&i._84o(n),o._84o(t,n))},o);for(e in p)i=o.getDataUI(p[e]),i&&(!_&&o._56I[e]&&(r=i._79o(),r&&v.add(r)),i.invalidate()),o._83I=1;if(o._56I=g,!_)for(e in p)g[e]&&(i=o.getDataUI(p[e]),i&&(r=i._79o(),r&&v.add(r)));if(_?n=f:(v.each(function(t){fs(f,t)&&(n=hs(n,t))}),n&&(ps(n,w(1,1/l)),n.x=y(n.x*l)/l,n.y=y(n.y*l)/l,n.width=m(n.width*l)/l,n.height=m(n.height*l)/l,n=gs(f,n))),o._74O=n,n&&(t=dr(c),fr(t,a,s,l),t.beginPath(),t.rect(n.x,n.y,n.width,n.height),t.clip(),t.clearRect(n.x,n.y,n.width,n.height),o._42(t,n),t.restore(),delete o._74O),o._24I={},v.clear(),delete o._32I,b&&h>0&&u>0){var i=o.getDataUI(b);if(i){var r=i._79o(),x=o._29I,C=x.x,I=x.y,S=x.width,O=x.height,l=o._zoom;r&&!fs(r,x)&&(r.x+r.width<C&&o.tx(-r.x*l),r.x>C+S&&o.tx(-(r.x+r.width-S)*l),r.y+r.height<I&&o.ty(-r.y*l),r.y>I+O&&o.ty(-(r.y+r.height-O)*l))}delete o._23I}o._83I&&(delete o._83I,delete o._84I),o._98O()},isScrollBarVisible:function(){return!!this._79O},setScrollBarVisible:function(t){var e=this;t!==e.isScrollBarVisible()&&(t?(or(e._view,e._79O=tr()),or(e._79O,e._27I=tr()),or(e._79O,e._28I=tr())):(ms(e._79O),delete e._79O,delete e._27I,delete e._28I),e.fp("scrollBarVisible",!t,t))},showScrollBar:function(){var t=this;t._79O&&(t._85I||(H(function(){t._86I()},Pa),t.iv()),t._85I=new Date)},_86I:function(){var t=this;if(t._85I){var e=new Date,i=e.getTime();i-t._85I.getTime()>=Pa?(delete t._85I,t.iv()):H(function(){t._86I()},Pa)}},_98O:function(){var t=this,e=this._27I,i=this._28I;if(t._79O){if(t._autoHideScrollBar&&!t._85I)return e.style.visibility=ee,i.style.visibility=ee,void 0;var n=t.getScrollBarColor(),r=t._zoom,o=t.getScrollBarSize(),a=t.getViewRect(),s=t.getScrollRect(),l=a.height*r,c=s.height*r,h=a.width*r-o-2,u=l*((a.y-s.y)*r/c),d=l*(l/c),f=e.style;c-.5>l?(ka>d&&(u=u+d/2-ka/2,0>u&&(u=0),u+ka>l&&(u=l-ka),d=ka),mr(e,h,u,o,d),f.visibility=ie,f.background=n,f.borderRadius=o/2+vt):f.visibility=ee;var g=a.width*r,v=s.width*r,u=a.height*r-o-2,h=g*((a.x-s.x)*r/v),p=g*(g/v),f=i.style;v-.5>g?(ka>p&&(h=h+p/2-ka/2,0>h&&(h=0),h+ka>g&&(h=g-ka),p=ka),mr(i,h,u,p,o),f.visibility=ie,f.background=n,f.borderRadius=o/2+vt):f.visibility=ee}},setDataModel:function(t){var e=this,i=e._dataModel,n=e._selectionModel;i!==t&&(i&&(i.ump(e.handleDataModelPropertyChange,e),i.umm(e.handleDataModelChange,e),i.umd(e.handleDataPropertyChange,e),i.removeIndexChangeListener(e._75O,e),i.removeHierarchyChangeListener(e.handleHierarchyChange,e),n||i.sm().ums(e.handleSelectionChange,e)),e._dataModel=t,t.mp(e.handleDataModelPropertyChange,e),t.mm(e.handleDataModelChange,e),t.md(e.handleDataPropertyChange,e),t.addIndexChangeListener(e._75O,e),t.addHierarchyChangeListener(e.handleHierarchyChange,e),n?n._21I(t):t.sm().ms(e.handleSelectionChange,e),e.invalidateAll(!0),e.fp(Ve,i,t),e._canvas.style.background=t.getBackground()||"")},handleDataModelPropertyChange:function(t){if("background"===t.property){var e=this._canvas.style.background,i=t.newValue||"";this._canvas.style.background=i,this.fp("canvasBackground",e,i)}else"hierarchicalRendering"===t.property&&this.redraw()},handleDataPropertyChange:function(t){this.invalidateData(t.data)},onPropertyChanged:function(t){var e=this,i=t.property;if(e.redraw(),"zoom"===i){var n=e.sm().getSelection();n.size()&&n.each(function(t){t.invalidate()})}Cl[i]?e.showScrollBar():i===ae&&e.onCurrentSubGraphChanged(t)},onCurrentSubGraphChanged:function(){this.reset()},handleDataModelChange:function(t){var e=this,i=t.kind,n=t.data;if(e._83I=1,"add"===i)e.invalidateData(n),Cn(n)&&n.getEdgeGroup()&&n.getEdgeGroup().eachSiblingEdge(e.invalidateData,e);else if(i===St){e._21Q(n);var r=n._id,o=e._25I[r];if(o){if(e._56I[r]){var a=o._79o();a&&e.redraw(a)}o.dispose(),delete e._25I[r],delete e._24I[r],delete e._56I[r]}n===e._currentSubGraph&&e.setCurrentSubGraph(c)}else i===Ot&&(e.invalidateAll(!0),e.setCurrentSubGraph(c))},_75O:function(t){this.invalidateData(t.data)},handleHierarchyChange:function(t){this.invalidateData(t.data)},adjustIndex:function(t){var e=this;if(e.isVisible(t)){for(var i=t;i._parent&&e.isVisible(i._parent);)i=i._parent;i&&i!==t&&e._dataModel.adjustIndex(i),e._dataModel.adjustIndex(t)}},getSelectWidth:function(t){return t.s("select.width")},isSelectable:function(t){return!(t.getParent()instanceof h.Block)&&t.s("2d.selectable")&&this.sm().isSelectable(t)},isMovable:function(t){var e=this;return Cn(t)&&t.getStyle(Jt)!==Bt?!1:t.s("2d.movable")?e._movableFunc?e._movableFunc(t):!0:!1},isEditable:function(t){var e=this;if(h._uiSerializing)return e._uieditable;if(!e._editInteractor||!e.isSelected(t))return!1;if(In(t)){var i=e.getDataUI(t);if(!i||i._88I)return!1}return Cn(t)&&t.getStyle(Jt)!==Bt?!1:t.s("2d.editable")?e._editableFunc?e._editableFunc(t):!0:!1},handleDelete:function(){this._editInteractor&&(this._editInteractor.handleDelete?this._editInteractor.handleDelete():this.removeSelection())},isPointEditable:function(t){return xn(t)&&0!==t.getRotation()?!1:this._pointEditableFunc?this._pointEditableFunc(t):!0},isRectEditable:function(t){return this._rectEditableFunc?this._rectEditableFunc(t):!0},isRotationEditable:function(t){return t.setRotation&&t.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(t):!0:!1},getRotationPoint:function(t){var e=t.getAnchor(),i=t.getScale(),n=this._zoom,r=So(t.getRotation(),0,-t.getHeight()*i.y*e.y-(i.y<0?-1:1)*($?32:16)/n),o=t.p();return r.x+=o.x,r.y+=o.y,r},getLogicalPoint:function(t){var e=this;return _s(t,e._canvas,e.tx(),e.ty(),e._zoom,e._zoom)},getSelectedDataAt:function(t){var e=this;return this.getDataAt(t,function(t){return e.isSelected(t)})},getDataAt:function(t,e,i){t.target&&(t=this.lp(t));var n,r=this._zoom;return this.reverseEach(function(o){return(e?e(o):this.isSelectable(o))&&this.rectIntersects(o,hn(t.x,t.y,i,r))?(n=o,!1):void 0},this),n},getIconInfoAt:function(t,e){var i=this;if(t.target&&(t=i.lp(t)),e||(e=i.getDataAt(t)),e){var n=i.getDataUI(e);if(n&&n._38o){var r,o=n._38o,a=new gl;for(r in o.icons)a.add(r);for(var s=a.size()-1;s>=0;s--){r=a.get(s);for(var l=o.rects[r],h=l.rotation,u=l.length-1;u>=0;u--){var d=l[u],f=d.width,g=d.height,v={x:t.x-d.x-f/2,y:t.y-d.y-g/2};h!=c&&(v=So(-h,v.x,v.y));var d={x:-f/2,y:-g/2,width:f,height:g};if(us(d,v))return{key:r,index:u,name:o.icons[r].names[u],rect:l[u],point:t,rotation:h,relativeRect:d,relativePoint:v,data:e}}}}}return c},getDatasInRect:function(t,e,n){n===i&&(n=1);var r=this,o=new gl;return r.reverseEach(function(i){n&&!r.isSelectable(i)||(e?r.rectIntersects(i,t):r.rectContains(i,t))&&o.add(i)}),o},moveSelection:function(t,e){var i,n=this,r=n.dm();r&&(i=r.getHistoryManager()),i&&i.beginInteraction(),ko(n.sm().toSelection(n.isMovable,n),t,e),i&&i.endInteraction()},getDataUIBounds:function(t){var e=this.getDataUI(t);return e?e._79o():c},drawData:function(t,e){var i=this.getDataUI(e);i&&i._42(t),e instanceof h.Block&&e.eachChild(function(e){this.drawData(t,e)},this)},getBoundsForGroup:function(t){return t.s(Dt)?this.getDataUIBounds(t):c},rectIntersects:function(t,e){this.validate();var i=c;if(this._56I[t._id]){var n=this._25I[t._id];if(n){var r=n._79o();if(ds(e,r))i=!0;else if((e=gs(e,r))&&(n.rectIntersects&&(i=n.rectIntersects(e)),i==c)){if(!t.s("pixelPerfect"))return!0;var o=e.x,a=e.y,s=e.width,l=e.height,h=this._zoom,u=d.hitMaxArea,f=s*l*h*h;if(f>u){var g=Math.sqrt(u/f);h*=g}s*=h,l*=h,o*=h,a*=h;var v=Zr(s,l);gr(v,-o,-a),v.scale(h,h),this._drawForChecking=!0,this.drawData(v,t),this._drawForChecking=!1;try{for(var p=0,_=v.getImageData(0,0,s,l).data;p<_.length;p+=4)if(0!==_[p+3]){i=!0;break}v.restore()}catch(t){Yr=c,i=!0}}}}return i?!0:!1},rectContains:function(t,e){if(this._56I[t._id]){var i=this._25I[t._id];if(i)return ds(e,i._79o())}return!1},reset:function(){this.setZoom(1),this.setTranslate(0,0)},handleKeyDown:function(t){if(!d.isInput(t.target)){var e=this,i=e._focusData,n=i&&e._25I[i._id],r=0,o=e._dataModel._datas;if(!(i&&i._enabled&&i._editable&&n&&n.onKeyDown&&n.onKeyDown(t)===!0))if(9===t.keyCode&&(i&&(r=o.indexOf(i),rs(t)?-1===--r&&(r=0):++r===o.size()&&(r=0)),e._focusData=i=o.get(r),e.sm().setSelection(i)),Pr(t)?e.selectAll():Gr(t)&&e.isResettable()&&e.reset(),e.sm().isEmpty()){if(e._editing)return;var a=e.tx(),s=e.ty(),l=!1,c=rs()?100:10;jr(t)&&(a-=c,l=!0),Fr(t)&&(s-=c,l=!0),Wr(t)&&(a+=c,l=!0),Hr(t)&&(s+=c,l=!0),l&&e.setTranslate(a,s)}else{kr(t)&&e.handleDelete(t);var h=rs()?10:1;jr(t)&&(e.moveSelection(-h,0),e.fi({kind:"moveLeft"})),Fr(t)&&(e.moveSelection(0,-h),e.fi({kind:"moveUp"})),Wr(t)&&(e.moveSelection(h,0),e.fi({kind:"moveRight"})),Hr(t)&&(e.moveSelection(0,h),e.fi({kind:"moveDown"}))}}},handleScroll:function(t,e){ja(t);var i=this.lp(t);e>0?this.scrollZoomIn(i):0>e&&this.scrollZoomOut(i)},handlePinch:function(t,e,i){this._68I||(e>i?this.pinchZoomIn(t):this.pinchZoomOut(t))},checkDoubleClickOnNote:function(t,e){var i=this,n=i.lp(t),r=i.getDataUI(e),o=r.note2Info;return o&&e.s("note2.toggleable")&&us(o.clickRect,n)?(e.s(Yt,!e.s(Yt)),i.fi({kind:"toggleNote2",event:t,data:e}),!0):(o=r.noteInfo,o&&e.s("note.toggleable")&&us(o.clickRect,n)?(e.s(Xt,!e.s(Xt)),i.fi({kind:"toggleNote",event:t,data:e}),!0):!1)},_84o:function(){},isNoteVisible:function(){return this._zoom>.15},isLabelVisible:function(){return this._zoom>.15},isSelectVisible:function(){return this._zoom>.15},isEditVisible:function(){return this._zoom>.15},autoScroll:function(t,e){var i=this,n=i.getAutoScrollZone(),r=n/i.getZoom(),o=n/4,a=i._29I,s=i.lp(t),l={x:i.tx(),y:i.ty()};return s&&n>0&&a&&(s.x-a.x<r?i.translate(o,0):a.x+a.width-s.x<r&&i.translate(-o,0),s.y-a.y<r?i.translate(0,o):a.y+a.height-s.y<r&&i.translate(0,-o)),l.x=i.tx()-l.x,l.y=i.ty()-l.y,e&&(e.x+=l.x,e.y+=l.y),l},getMoveMode:function(t,e){var i=e.s("2d.move.mode");return i?i:Vi["88"]?"x":Vi["89"]?"y":"xy"},getSerializableProperties:function(){return{layers:1,scrollBarColor:1,scrollBarSize:1,autoMakeVisible:1,autoHideScrollBar:1,editable:1,resettable:1,pannable:1,rectSelectable:1,autoScrollZone:1,visibleFunc:1,movableFunc:1,editableFunc:1,pointEditableFunc:1,rectEditableFunc:1,rotationEditableFunc:1,rectSelectBackground:1,rectSelectBorderColor:1,editPointSize:1,editPointBorderColor:1,editPointBackground:1,hoverDelay:1,dataModel:1,selectionModel:1,currentSubGraph:1,zoom:1,translateX:1,translateY:1}},serializeProperty:function(t,e,i){var n=this;return"currentSubGraph"===e?{__i:t.getId()}:i.serializeProperty(t,e,n)},deserializeProperty:function(t,e,i){var n=this;if("currentSubGraph"===e){var r=n.dm(),o=r.__idMap;return o[t.__i]}return i.deserializeProperty(t,e,n)}});var rh=function(t,e){var i=this;i.gv=t,i.s=function(t){return e.getStyle(t)},i._data=e,i._87I=new gl};Is(rh,e,{_6I:c,ms_icons:1,_84o:function(){},dispose:function(){},isShadowed:function(){return this.s("shadow")||this.gv.isSelected(this._data)&&"shadow"===this.s("select.type")},getSelectWidth:function(){var t=this,e=t.gv.isSelected(t._data);return!e||t.isShadowed()?0:t.gv.getSelectWidth(t._data)},getBodyColor:function(t){var e=this._data,i=this.gv.getBodyColor(e);return i?i:t?e.getStyle(t):c},_2Q:function(t){return this.s(t)},_1Q:function(t,e,i,n){var r=this.s,o=r(e+".dash.color");t.strokeStyle=o,t.lineWidth=i,t.stroke(),r(e+".dash.3d")&&lo(t,o,r(e+".dash.3d.color"),i,this.gv._zoom,r(e+".dash.3d.accuracy")),Js(t,n)},invalidate:function(){this._6I=c},_79o:function(){var t=this;if(!t._6I){t.labelInfo=t.label2Info=t.noteInfo=t.note2Info=t._38o=c,t._87I.clear(),t._3O();var e=t._data,i=t.gv;t._55O=i.isEditable(e)?{_42O:i.isRectEditable(e),_43O:i.isPointEditable(e),_56O:i.isRotationEditable(e)}:c,t._6I=t._81o()}return t._6I},_3O:function(){},getPosition:function(){return Xi},_68o:function(t,e){t&&this._87I.add(eo(t,e))},_81o:function(){var t=this,e=t.s;t._24O(jt,"getLabel"),t._24O(Ft,"getLabel2"),t._26O(Wt,"getNote"),t._26O(Ht,"getNote2"),t._15O(),t._55O&&t._48O();var i;if(t._87I.each(function(t){i=hs(i,t)}),i&&t.isShadowed()){var n=Ya(i);n.x+=e("shadow.offset.x"),n.y+=e("shadow.offset.y"),ps(n,e("shadow.blur")),i=hs(i,n)}return t._87I.clear(),i},_42:function(t){var e=this,i=e._data,n=e.gv,r=e.s,o=r("opacity"),a=this.isShadowed();if(a){var s=t.shadowOffsetX,l=t.shadowOffsetY,h=t.shadowBlur,u=t.shadowColor,d=n.getZoom();t.shadowOffsetX=r("shadow.offset.x")*d,t.shadowOffsetY=r("shadow.offset.y")*d,t.shadowBlur=r("shadow.blur")*d,t.shadowColor=r("select.color")}if(o!=c){var f=t.globalAlpha;t.globalAlpha=o}e._80o(t),n.isLabelVisible(i)&&((!n._drawForChecking||r("label.selectable"))&&Gl(t,e.labelInfo),(!n._drawForChecking||r("label2.selectable"))&&Gl(t,e.label2Info)),n.isNoteVisible(i)&&(Ul(t,e.noteInfo),Ul(t,e.note2Info)),e._99O(t),o!=c&&(t.globalAlpha=f),a&&(t.shadowOffsetX=s,t.shadowOffsetY=l,t.shadowBlur=h,t.shadowColor=u)},_80o:function(){},
_47O:function(){},_24O:function(t,e){var i=this,n=i._data,r=i.gv,o=i.s,a=r[e](n);if(a!=c){var s=o(t+".scale"),l=o(t+".max"),h=o(t+".position"),u=i[t+"Info"]={label:a,scale:s,color:r[e+"Color"](n),font:o(t+".font"),opacity:o(t+".opacity"),align:o(t+".align"),rotation:i.getRotation(o(t+".rotation"),!1,h),background:r[e+"Background"](n)},d=ar(u,a);l>0&&l<d.width&&(u.labelWidth=d.width,d.width=l),1!==s&&(d.width*=s,d.height*=s);var f=i.getPosition(h,o(t+".offset.x"),o(t+".offset.y"),d,o(t+".position.fixed"));if(d.x=f.x-d.width/2,d.y=f.y-d.height/2,i._68o(u.rect=d,u.rotation),1!==s){var g=d.width/s,v=d.height/s;u.rect={x:f.x-g/2,y:f.y-v/2,width:g,height:v}}}},_26O:function(t,e){var i=this,n=i.gv,r=i._data,o=i.s,a=n[e](r);if(a!=c){var s,l,h=o(t+".scale"),u=i[t+"Info"]={note:a,scale:h,data:r,view:n,expanded:o(t+".expanded"),font:o(t+".font"),color:o(t+".color"),opacity:o(t+".opacity"),align:o(t+".align"),icon:o(t+".icon"),backgroundImage:o(t+".backgroundImage"),borderWidth:o(t+".border.width"),borderColor:o(t+".border.color"),background:n[e+"Background"](r)},d=i.getPosition(o(t+".position"),o(t+".offset.x"),o(t+".offset.y")),f=d.x,g=d.y;if(u.expanded){var v,p=o(t+".max"),_=o(t+".backgroundImage");_?(_=Wa(_),v={width:hl(_,r),height:ul(_,r)}):v=ar(u,a),v.width+=6,v.height+=2,p>0&&p<v.width&&(u.labelWidth=v.width,v.width=p),s=v.width,l=v.height+8,u.clickRect={x:f-s*h/2,y:g-l*h,width:s*h,height:l*h*v.height/l}}else{var y=o(t+".icon");y?(y=Wa(y),s=hl(y,r),l=ul(y,r)):(s=12,l=18),u.clickRect={x:f-s*h/2,y:g-l*h,width:s*h,height:l*h}}u.rect={x:f-s/2,y:g-l*h/2-l/2,width:s,height:l};var b=m(u.borderWidth/2)*h;i._68o({x:f-s*h/2-b,y:g-l*h-b,width:s*h+2*b,height:l*h+2*b})}},_48O:function(){},_99O:function(t){var e=this,i=e._38o;if(i){var n=e.gv,r=e._data,o=i.icons;for(var a in o){var s=o[a],l=i.rects[a];if(l){var h=dl(s.opacity,r,n),u=dl(s.names,r,n),d=u?u.length:0,f=l.rotation;if(h!=c){var g=t.globalAlpha;t.globalAlpha*=h}for(var v=0;d>v;v++){var p=u[v],_=Wa(p),y=l[v];if(f){var m=y.x+y.width/2,b=y.y+y.height/2;t.save(),gr(t,m,b),vr(t,f),gr(t,-m,-b)}Ga(t,_,dl(s.stretch,r,n),y.x,y.y,y.width,y.height,e._data,e.gv),f&&t.restore()}h!=c&&(t.globalAlpha=g)}}}}});var oh=function(t,e){Vn(oh,this,[t,e])};Is(oh,rh,{_checkEmptyRect:!0,_40O:function(t,e){var i=this,n=i.s,r=t.rect;if((t.borderColor=i.gv.getBorderColor(i._data))&&(t.borderType=n("border.type"),t.borderWidth=n("border.width"),t.borderPadding=n("border.padding"),e=w(e,t.borderPadding+t.borderWidth/2)),t.selectWidth=i.getSelectWidth()){var o=i.gv._zoom;t.selectType=n("select.type"),t._97o=n("select.color"),t.selectPadding=n("select.padding"),e=w(e,(t.selectPadding+t.selectWidth/2)/o)}if(e>0){var a=i._data.getScale();e*=w(1,w(C(a.x),C(a.y))),r=Ya(r),ps(r,e)}i._68o(r)},_39O:function(t,e){var i,n=this,r=e.rect;if(e.borderWidth>0&&(i=e.borderPadding,t.strokeStyle=e.borderColor,t.lineWidth=e.borderWidth,uo(t,e.borderType,{x:r.x-i,y:r.y-i,width:r.width+2*i,height:r.height+2*i}),t.stroke()),e.selectWidth>0){var o=n.gv._zoom;if(i=e.selectPadding/o,t.strokeStyle=e._97o,t.lineWidth=e.selectWidth/o,e.rotation!=c){t.save(),t.translate(e.position.x,e.position.y),t.rotate(e.rotation);var a=n._data,s=a.getWidth(),l=a.getHeight(),h=e.scale,u=e.anchor;r={x:h.x*-s*u.x,y:h.y*-l*u.y,width:h.x*s,height:h.y*l}}uo(t,e.selectType,{x:r.x-i,y:r.y-i,width:r.width+2*i,height:r.height+2*i}),e.rotation!=c&&t.restore(),t.stroke()}},_3O:function(){var t=this,e=t.s,i=t._data,n=i.getStyle(xt),r=t.getBodyColor(),o=t._83o=n?{shape:n,_53o:t.getBodyColor("shape.background"),_27Q:Wa(e("shape.repeat.image"),r),shapeGradientPack:e("shape.gradient.pack"),_54o:e("shape.border.width"),_55o:e("shape.border.color"),_56o:e("shape.border.3d"),_57o:e("shape.border.3d.color"),_58o:e("shape.border.3d.accuracy"),shapeGradient:e("shape.gradient"),_59o:e("shape.gradient.color"),_60o:e("shape.border.pattern"),_61o:e("shape.border.cap"),_62o:e("shape.border.join")}:{img:Wa(i.getImage(),r),bodyColor:r,stretch:e("image.stretch")};if(L&&!z);else{o.rect=i.getRect(),o.position=i.p(),o.scale=i.getScale(),o.anchor=i.getAnchor(),o.rotation=i.getRotation(),n===mt&&(o._63o=e("shape.depth"));var a=0;n?(a=to(c,o._54o/2,o._62o),t.s("shape.dash")&&(a=w(a,(t.s("shape.dash.width")||o._54o)/2))):o.img&&o.img.boundExtend&&(a=dl(o.img.boundExtend,i,t.gv)),t._40O(o,a)}},getPosition:function(t,e,i,n){var r=Bo(t,this._83o.rect,n);return r.x+=e,r.y+=i,r},_80o:function(t){var e=this,i=e.s,n=e.gv,r=e._data,o=e._83o,a=o.rect,s=o.position,l=o.rotation,c=o.anchor,h=o.scale,u=o.shape;console.log(a);if(!e._checkEmptyRect||a.width>0&&a.height>0){var d=r.getSize();if(d.x=-d.width*c.x,d.y=-d.height*c.y,t.save(),gr(t,s.x,s.y),vr(t,l),pr(t,h.x,h.y),e.freeDraw)e.freeDraw(t,d,o);else if(u){var f,g,v,p,_=o._60o,y=Zs(t,_),m=o._53o,b=o._27Q,w=o._54o,x=o._55o,C=o.shapeGradientPack,I=t.lineJoin,S=t.lineCap;if("roundRect"===u?f=i("shape.corner.radius"):"polygon"===u?f=i("shape.polygon.side"):"arc"===u&&(f=i("shape.arc.from"),g=i("shape.arc.to"),v=i("shape.arc.close"),p=i("shape.arc.oval")),t.lineJoin=o._62o,t.lineCap=o._61o,m||b||C?(uo(t,u,d,f,g,v,p),C?ro(t,C):b?go(t,b):fo(t,m,o.shapeGradient,o._59o,d),t.fill(),C&&t.restore(),t!==y&&uo(y,u,d,f,g,v,p)):uo(y,u,d,f,g,v,p),w>0){var O=i("shape.border.width.absolute");O&&(t.save(),t.setTransform(1,0,0,1,0,0)),t.lineWidth=w,t.strokeStyle=x,t.stroke(),O&&t.restore(),o._56o&&lo(t,x,o._57o,w,n._zoom,o._58o)}if(Js(t,_),i("shape.dash")){var T=i("shape.dash.width")||w;if(T>0){_=i("shape.dash.pattern");var y=Zs(t,_,e._2Q("shape.dash.offset"));y!==t&&uo(y,u,d,f,g,v,p),e._1Q(t,"shape",T,_)}}yo(t,m,o._63o,d),t.lineJoin=I,t.lineCap=S}else Ga(t,o.img,o.stretch,d.x,d.y,d.width,d.height,r,n,o.bodyColor);t.restore()}e._39O(t,o)},_48O:function(){},_47O:function(){}});var ah=function(t,e){Vn(ah,this,[t,e])},sh=function(t,e,i,n){var r=ls(t,e);return i=n?x(i,r):Nl(i,r),r?i/=r:i=0,{x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i}};Is(ah,rh,{_3O:function(){var t,e=this,i=e._data,n=e.gv,r=e.s,o=r(Jt),a=i.isLooped(),s=r("edge.width"),l=r("edge.center"),h=r("edge.offset"),u=n.getBorderColor(i),f=u?r("border.width"):0,g=e.getSelectWidth(),v=i._40I,p=i._41I,_=e._78o=v&&p?{looped:a,type:o,width:s,center:l,color:e.getBodyColor("edge.color"),borderColor:u,borderWidth:f,_97o:g?r("select.color"):c,selectWidth:g,pattern:r("edge.pattern"),cap:r("edge.cap"),join:r("edge.join"),is3d:r("edge.3d"),_67o:r("edge.3d.color"),_66o:r("edge.3d.accuracy")}:c;if(_){var y=d.getEdgeType(o);if(y){var m=y(i,Yl(e,n,i,a,o),n,e._19Q);m.points&&m.points.size()>1&&(_._4O=m,t=cs(_._4O.points))}else{var b=Fl(n,v,r("edge.source.position"),r("edge.source.offset.x"),r("edge.source.offset.y"),r("edge.source.anchor.x"),r("edge.source.anchor.y")),x=Fl(n,p,r("edge.target.position"),r("edge.target.offset.x"),r("edge.target.offset.y"),r("edge.target.anchor.x"),r("edge.target.anchor.y"));if(o===Bt){var C=_.points=r(Zt)||vl,I=C.size();if(_.segments=r("edge.segments"),!l)if(h){var S=sh(b,I?C.get(0):x,h,I),O=sh(x,I?C.get(I-1):b,h,I);b=S,x=O}else{var T=bl(n,v),M=bl(n,p),P=Fn(b,I?C.get(0):x,T);P&&(b={x:P[0],y:P[1]}),P=Fn(I?C.get(I-1):b,x,M),P&&(x={x:P[0],y:P[1]})}t=hs(cs(_.points),cs(b,x))}else{var k=Yl(e,n,i,a,o);if(e._19Q||(k=-k),a)b=Ya(b),b.x=n.getNodeRect(v).x,_.radius=k,t={x:b.x-k,y:b.y-k,width:2*k,height:2*k};else{var E=ls(b,x),V=Nl(h,E),S={x:V,y:k},O={x:E-V,y:k},B=R(x.y-b.y,x.x-b.x),L=_.mat=new Io(B);if(_.orienAngle=B,_.angle=x.x<b.x?B+D:B,_.rect={x:S.x,y:S.y,width:O.x-S.x,height:0},_.origin=b,S=L.tf(S),S.x+=b.x,S.y+=b.y,O=L.tf(O),O.x+=b.x,O.y+=b.y,l){var z={x:E,y:0};z=L.tf(z),z.x+=b.x,z.y+=b.y,t=cs([b,S,O,z]),_.c1=b,_.c2=z}else t=cs(S,O);b=S,x=O}}_.sourcePoint=b,_.targetPoint=x}var A=0;r("edge.dash")&&(A=r("edge.dash.width")||s);var j="square"===_.cap?.71:.5;to(t,w(A*j,s*j+f+g),_.join),e._68o(t)}},getRotation:function(t,e,i){t=t||0;var n=this._78o;if(n){var r,o=n.angle,a=n.points,s=n._4O;if(o!=c)return e?n.orienAngle+t:o+t;if(s){var l=s.points;return r=l.size(),xl[i]?r&&0===r%2?Ql(l.get(r/2-1),l.get(r/2),e,t):t:wl[i]?Ql(l.get(0),l.get(1),e,t):Ql(l.get(r-2),l.get(r-1),e,t)}if(a)return r=a.size(),xl[i]?r&&0===r%2?Ql(a.get(r/2-1),a.get(r/2),e,t):t:wl[i]?Ql(n.sourcePoint,r?a.get(0):n.targetPoint,e,t):Ql(r?a.get(r-1):n.sourcePoint,n.targetPoint,e,t)}return t},getPosition:function(t,e,i,n,r){var o=this._78o;if(o){var a,s=o.type,l=o.points,c=o._4O,h=o.sourcePoint,u=o.targetPoint;if(!s)return o.looped?{x:h.x-o.radius+e,y:h.y+i}:(r&&h&&u&&(h.x>u.x||h.x===u.x&&h.y>u.y)&&(t=Ro[t],i=-i),a=Bo(t,o.rect,n),a.x+=e,a.y+=i,a=o.mat.tf(a),a.x+=o.origin.x,a.y+=o.origin.y,a);if(l){var a,d=l.size();if(xl[t]){if(d){var f=d%2;if(0===f)return Xl(l.get(d/2-1),l.get(d/2),t,e,i,n,r);a=l.get((d-f)/2)}else a={x:(h.x+u.x)/2,y:(h.y+u.y)/2};return a=Bo(t,{x:a.x,y:a.y,width:0,height:0},n),a.x+=e,a.y+=i,a}return wl[t]?Xl(h,d?l.get(0):u,t,e,i,n,r):Xl(d?l.get(d-1):h,u,t,e,i,n,r)}if(c){var g=c.points,d=g.size();if(xl[t]){var f=d%2;return 0===f?Xl(g.get(d/2-1),g.get(d/2),t,e,i,n,r):(a=g.get((d-f)/2),a=Bo(t,{x:a.x,y:a.y,width:0,height:0},n),a.x+=e,a.y+=i,a)}return wl[t]?Xl(g.get(0),g.get(1),t,e,i,n,r):Xl(g.get(d-2),g.get(d-1),t,e,i,n,r)}}return Xi},_42:function(t){this._78o&&ah.superClass._42.call(this,t)},drawPath:function(t,e){t.beginPath();var i=e.type,n=e.points,r=e.segments,o=e._4O;if(!i||n){var a=e.sourcePoint,s=a.x,l=a.y,c=e.targetPoint,h=c.x,u=c.y;if(i)if(r){var d=new gl({x:s,y:l});d.addAll(n),d.add({x:h,y:u}),ao(t,d,r)}else t.moveTo(s,l),n.each(function(e){t.lineTo(e.x,e.y)}),t.lineTo(h,u);else e.looped?t.arc(s,l,e.radius,0,P,!0):e.center?(t.moveTo(e.c1.x,e.c1.y),t.lineTo(s,l),t.lineTo(h,u),t.lineTo(e.c2.x,e.c2.y)):(t.moveTo(s,l),t.lineTo(h,u))}else o&&ao(t,o.points,o.segments)},_80o:function(t){var e=this,i=e.s,n=e._78o,r=n.width,o=n.selectWidth,a=n.borderWidth,s=n.color,l=t.lineJoin,c=t.lineCap,h=n.pattern;t.lineJoin=n.join,t.lineCap=n.cap,e.drawPath(Zs(t,h),n);var u=i("edge.width.absolute");if(u&&(t.save(),t.setTransform(1,0,0,1,0,0)),o&&(t.strokeStyle=n._97o,t.lineWidth=r+2*(a+o),t.stroke()),a&&(t.strokeStyle=n.borderColor,t.lineWidth=r+2*a,t.stroke()),t.strokeStyle=s,t.lineWidth=r,t.stroke(),n.is3d&&lo(t,s,n._67o,r,e.gv._zoom,n._66o),u&&t.restore(),Js(t,h),i("edge.dash")){h=i("edge.dash.pattern");var d=Zs(t,h,e._2Q("edge.dash.offset"));d!==t&&e.drawPath(d,n),e._1Q(t,"edge",i("edge.dash.width")||r,h)}t.lineJoin=l,t.lineCap=c},_48O:function(){},_47O:function(){},_71o:function(t,e){var i=this,n=i._data;if(i._19Q=!0,!n.getEdgeGroup())return t?n.s("edge.gap"):0;var r,o=0,a=0,s=0;if(n.getEdgeGroup().getSiblings().each(function(t){t.each(function(t){if(i.gv.isVisible(t)&&t.s(Jt)==e){var l=t.s("edge.gap");r?(a+=s/2+l/2,s=l):(r=t,s=l),t===n&&(o=a)}})}),t)return a-o+s;var l=o-a/2;return r&&n._40I!==r._40I&&(i._19Q=!1),l}});var lh=function(t,e){Vn(lh,this,[t,e])};Is(lh,oh,{_3O:function(){var t,e,i=this,n=i.s,r=i._data,o=i.gv;if(i._88I=c,r.isExpanded()&&r.eachChild(function(i){var n=o.getBoundsForGroup(i);n&&(e||(e=[]),e.push(n),t=hs(t,n))}),t){var a=o.getLabel(r),s=n("group.type");t=ql(s,e,t),Rl(t,r,"group.padding",1);var l=i._88I={type:s,rect:t,_64o:t};if(!s&&a!=c){var h,u=i.labelInfo={label:a,color:n("group.title.color"),font:n("group.title.font"),align:n("group.title.align")},d=ar(u,a),f=d.width,g=d.height,v=n("group.title.align");f>t.width&&(t.width=f),u.rect={y:t.y-g,width:d.width,height:g},h=v===rt?t.x:v===ot?t.x+t.width-f:t.x+t.width/2-f/2,u.rect.x=h,l.titleRect={x:t.x,y:t.y-g,width:t.width,height:g+1},l.rect={x:t.x,y:t.y-g,width:t.width,height:t.height+g}}i._40O(l,n("group.border.width")/2)}else lh.superClass._3O.call(i)},getPosition:function(t,e,i,n){var r=this._88I;if(r){var o=Bo(t,r.rect,n);return o.x+=e,o.y+=i,o}return lh.superClass.getPosition.apply(this,arguments)},_24O:function(t,e){var i=this._88I;(!i||i.type||"label2"===t)&&lh.superClass._24O.call(this,t,e)},_80o:function(t){var e=this,i=e._88I;if(i){var n=e._data,r=e.s,o=e.gv,a=i.type,s=i.rect,l=i._64o,c=i.titleRect,h=e.getBodyColor(),u=Wa(r("group.image"),h),d=r("group.image.stretch"),f=e.getBodyColor("group.background"),g=Wa(r("group.repeat.image"),h),v=r("group.gradient.pack"),p=r("group.gradient"),_=r("group.gradient.color"),y=r("group.depth");if(a){var m=r("group.border.pattern"),b=r("group.border.width"),w=t.lineJoin,x=t.lineCap;if(t.lineJoin=r("group.border.join"),t.lineCap=r("group.border.cap"),u){if(t.save(),uo(t,a,s),t.clip(),Ga(t,u,d,s.x,s.y,s.width,s.height,n,o,h),t.restore(),b>0){var C=Zs(t,m);uo(C,a,s),t.lineWidth=b,t.strokeStyle=r("group.border.color"),t.stroke(),Js(t,m)}}else{var C=Zs(t,m);f||g||v?(uo(t,a,s),v?ro(t,v):g?go(t,g):fo(t,f,p,_,s),t.fill(),v&&t.restore(),t!==C&&uo(C,a,s)):uo(C,a,s),b>0&&(t.lineWidth=b,t.strokeStyle=r("group.border.color"),t.stroke()),Js(t,m),a===mt&&yo(t,f,y,s)}t.lineJoin=w,t.lineCap=x}else if(u?Ga(t,u,d,l.x,l.y,l.width,l.height,n,o,e.getBodyColor()):(f||g)&&(g?go(t,g):fo(t,f,p,_,l),uo(t,mt,l),t.fill(),yo(t,f,y,l)),c){var I=r("group.title.background");ho(t,c.x,c.y,c.width,c.height,I),yo(t,I,y,c)}e._39O(t,i)}else lh.superClass._80o.call(e,t)}});var ch=function(t,e){Vn(ch,this,[t,e])};Is(ch,oh,{_80o:function(){}});var hh=function(t,e){Vn(hh,this,[t,e])};Is(hh,oh,{_3O:function(){var t=this,e=t._data,i=t.s,n=t.gv,r=e.getPoints(),o=n.getBorderColor(e),a=o?i("border.width"):0,s=t.getSelectWidth(),l=i("shape.border.width"),h=e.getRect(),u=n.getBodyColor(e),d=t._99o=r.isEmpty()?c:{rect:h,rotation:e.getRotation(),fillRule:i("shape.fill.rule")||"nonzero",scale:e.getScale(),position:e.p(),points:r,segments:e.getSegments(),bodyColor:u,borderColor:o,borderWidth:a,_94o:i("shape.border.3d"),_95o:i("shape.border.3d.color"),_96o:i("shape.border.3d.accuracy"),_97o:s?i("select.color"):c,selectWidth:s,_53o:i("shape.background"),_27Q:Wa(i("shape.repeat.image"),u),shapeGradientPack:i("shape.gradient.pack"),_54o:l,_55o:i("shape.border.color"),shapeGradient:i("shape.gradient"),_59o:i("shape.gradient.color"),_60o:i("shape.border.pattern"),_61o:i("shape.border.cap"),_62o:i("shape.border.join")};if(d){var f=l*("square"===d._61o?.71:.5)+a+s/t.gv._zoom;if(f){var g=e.getScale();f*=w(1,w(C(g.x),C(g.y))),h=Ya(h),to(h,f,d._62o)}t._68o(h)}},getPosition:function(t,e,i,n){var r=this._99o;if(r){var o=Bo(t,r.rect,n);return o.x+=e,o.y+=i,o}return Xi},_42:function(t){this._99o&&hh.superClass._42.call(this,t)},_80o:function(t){var e,i=this,n=i.s,r=i._99o,o=r.position,a=r.scale,s=r.rotation,l=r.bodyColor,c=r.borderWidth,h=r.selectWidth,u=r._53o,d=r._27Q,f=r.shapeGradientPack,g=r._54o,v=r.points,p=r.segments,_=i._data.isClosePath(),y=r.fillRule;t.save(),gr(t,o.x,o.y),vr(t,s),pr(t,a.x,a.y),gr(t,-o.x,-o.y);var m=r._60o,b=Zs(t,m),w=t.lineJoin,x=t.lineCap;t.lineJoin=r._62o,t.lineCap=r._61o,u||d||f?(ao(t,v,p,_),f?ro(t,f):d?go(t,d):(e=l?l:u,fo(t,e,r.shapeGradient,r._59o,r.rect)),t.fill(y),f&&t.restore(),b!==t&&ao(b,v,p,_)):ao(b,v,p,_);var C=n("shape.border.width.absolute");if(C&&(t.save(),t.setTransform(1,0,0,1,0,0)),h&&(t.strokeStyle=r._97o,t.lineWidth=g+2*(c+h),t.stroke()),c&&(t.strokeStyle=r.borderColor,t.lineWidth=g+2*c,t.stroke()),g&&(e=r._55o,!u&&l&&(e=l),t.strokeStyle=e,t.lineWidth=g,t.stroke(),r._94o&&lo(t,e,r._95o,g,i.gv._zoom,r._96o)),C&&t.restore(),Js(t,m),n("shape.dash")){var I=n("shape.dash.width")||g;if(I>0){m=n("shape.dash.pattern");var b=Zs(t,m,i._2Q("shape.dash.offset"));b!==t&&ao(b,v,p,_),i._1Q(t,"shape",I,m)}}t.lineJoin=w,t.lineCap=x,t.restore()},_48O:function(){},_47O:function(){}});var uh=function(t,e){Vn(uh,this,[t,e])};Is(uh,hh,{getRotation:function(t,e,i){t=t||0;var n=this._data.getPoints(),r=n.size();return r>1?xl[i]?r&&0===r%2?Ql(n.get(r/2-1),n.get(r/2),e,t):t:wl[i]?Ql(n.get(0),n.get(1),e,t):Ql(n.get(r-2),n.get(r-1),e,t):t},getPosition:function(t,e,i,n,r){var o=this._data.getPoints(),a=o.size();if(a>1){if(xl[t]){var s=a%2;if(0===s)return Xl(o.get(a/2-1),o.get(a/2),t,e,i,n,r);var l=o.get((a-s)/2),c={x:l.x,y:l.y,width:0,height:0};return l=Bo(t,c,n),l.x+=e,l.y+=i,l}return wl[t]?Xl(o.get(0),o.get(1),t,e,i,n,r):Xl(o.get(a-2),o.get(a-1),t,e,i,n,r)}return Xi}});var dh=function(t,e){Vn(dh,this,[t,e])};Is(dh,oh,{_3O:function(){var t=this;dh.superClass._3O.call(t);var e=t.s,i=t._83o;t._82o=i.img||i.shape?c:{background:t.getBodyColor("grid.background"),depth:e("grid.depth"),rect:i.rect,_88o:e("grid.cell.depth"),cellBorderColor:e("grid.cell.border.color"),_89o:e("grid.row.count"),_90o:e("grid.column.count"),block:e("grid.block"),_91o:e("grid.block.color"),_92o:e("grid.block.padding"),_93o:e("grid.block.width")}},_80o:function(t){var e=this,i=e._82o;if(!i)return dh.superClass._80o.call(e,t),void 0;var n,r,o=e._data,a=i.background,s=i.rect,l=i.block,c=i._91o,h=i._92o,u=i._93o,d=i._88o,f=i.cellBorderColor,g=i._89o,v=i._90o;if(a)if(ho(t,s.x,s.y,s.width,s.height,a),yo(t,a,i.depth,s),d)for(n=0;g>n;n++)for(r=0;v>r;r++)s=o.getCellRect(n,r),s&&yo(t,a,d,s);else if(f){for(t.beginPath(),n=0;g>n;n++)for(r=0;v>r;r++)s=o.getCellRect(n,r),s&&t.rect(s.x,s.y,s.width,s.height);t.strokeStyle=f,t.lineWidth=1,t.stroke()}if("h"===l)for(n=0;g>n;n++)s=hs(o.getCellRect(n,0),o.getCellRect(n,v-1)),ps(s,h),_o(t,c,s.x,s.y,s.width,s.height,u);else if("v"===l)for(r=0;v>r;r++)s=hs(o.getCellRect(0,r),o.getCellRect(g-1,r)),ps(s,h),_o(t,c,s.x,s.y,s.width,s.height,u);e._39O(t,e._83o)}});var fh=function(t,e){Vn(fh,this,[t,e])};Is(fh,oh,{_checkEmptyRect:!1,_81o:function(){var t=this._data,e=fh.superClass._81o.call(this),i=t.s("text");if(i!=c){var n,r,o=t.s("text.font"),a=t.s("text.align"),s=t.s("text.vAlign"),l=t.getRotation(),h=ts(o,i),u=h.width,d=h.height;"left"===a?n=-t.getWidth()/2:"center"===a?n=-h.width/2:"right"===a&&(n=t.getWidth()/2-h.width),"top"===s?r=-t.getHeight()/2:"middle"===s?r=-h.height/2:"bottom"===s&&(r=t.getHeight()/2-h.height);var f;if(l){var g=new Io(l);f=cs([g.tf(n,r),g.tf(n+u,r),g.tf(n+u,r+d),g.tf(n,r+d)])}else f={x:n,y:r,width:u,height:d};f.x+=t.getPosition().x,f.y+=t.getPosition().y,e=hs(e,f)}return e}});var gh=Zl.Interactor=function(t){this.gv=this._graphView=t};Jl("Interactor",e,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners(),this.clear()},clear:function(){},fi:function(t){this.gv.fi(t)},setCursor:function(t){$||(this.getView().style.cursor=t)},startDragging:function(t){var e=this;e._lastClientPoint=as(t),e._lastLogicalPoint=e.gv.lp(t),ys(e,t)},clearDragging:function(){var t=this;t._lastClientPoint=t._lastLogicalPoint=t._logicalPoint=c},autoScroll:function(t){return this.gv.autoScroll(t,this._lastClientPoint)}});var vh=Zl.DefaultInteractor=function(t){Vn(vh,this,[t])};Jl("DefaultInteractor",gh,{handle_mousedown:function(t){ja(t);var e=this,i=e.gv,n=i.getDataAt(t);!i.setFocus(t)||i._editing||i._scrolling||(ns(t)?i.handleDoubleClick(t,n):i.handleClick(t,n),!Gr()&&n||!i.isPannable()||!es(t)||os(t)||(e._tx=i.tx(),e._ty=i.ty(),e.startDragging(t)))},handleWindowMouseUp:function(t){var e=this,i=e.gv;i._panning&&(delete i._panning,i.onPanEnded(),e.fi({kind:"endPan",event:t})),delete e._tx,delete e._ty,e.clearDragging()},handle_mousemove:function(t){var e=this,i=e.gv;e._hoverTimer&&(G(e._hoverTimer),delete e._hoverTimer),e._hoverTimer=H(function(){e.fi({kind:"hover",event:t}),G(e._hoverTimer),delete e._hoverTimer},i.getHoverDelay()||800)},handle_touchmove:function(t){this.handle_mousemove(t)},handleWindowMouseMove:function(t){var e=this,i=e.gv,n=e._lastClientPoint;e.fi({kind:i._panning?"betweenPan":"beginPan",event:t}),i._panning=1,i.setTranslate(e._tx+t.clientX-n.x,e._ty+t.clientY-n.y)},handle_mousewheel:function(t){this.gv.handleScroll(t,t.wheelDelta)},handle_DOMMouseScroll:function(t){2===t.axis&&this.gv.handleScroll(t,-t.detail)},handle_keydown:function(t){this.gv.handleKeyDown(t)}});var ph=Zl.SelectInteractor=function(t){Vn(ph,this,[t])};Jl("SelectInteractor",gh,{_42:function(){var t=this,e=t.gv,i=e.getZoom(),n=t.mark,r=t.div;r||(r=t.div=tr(),or(t.getView(),r));var o={};o.x=n.x*i+e.tx(),o.y=n.y*i+e.ty(),o.width=n.width*i,o.height=n.height*i,mr(r,o),this.intersects()?(r.style.border="",r.style.background=e.getRectSelectBackground()):(r.style.background="",r.style.border="1px solid "+e.getRectSelectBorderColor())},handle_mousedown:function(t){var e=this,i=e.gv;if(e._57I=c,!(i._editing||i._scrolling||Gr())){var n=i.getDataAt(t),r=i.sm();n?os(t)?r.co(n)?r.rs(n):r.as(n):r.co(n)||r.ss(n):os(t)||!i.isPannable()?es(t)&&(os(t)||r.cs(),i.isRectSelectable()&&(e.startDragging(t),i._77O=1)):e._57I=as(t)}},handle_mouseup:function(t){var e=this,i=e._57I;i&&(ls(i,as(t))<=1&&e.gv.sm().cs(),e._57I=c)},handleWindowMouseUp:function(t){this.clear(t)},handleWindowMouseMove:function(t){var e=this,i=e.gv;e._logicalPoint=i.lp(t),e.mark?(e.fi({kind:"betweenRectSelect",event:t}),e.autoScroll(t),e.redraw()):e.fi({kind:"beginRectSelect",event:t}),e.mark=cs(e._lastLogicalPoint,e._logicalPoint),e.redraw()},intersects:function(){var t=this,e=t._lastLogicalPoint,i=t._logicalPoint;return e.x>i.x||e.y>i.y},clear:function(t){var e=this,i=e.gv,n=e.mark;if(e._57I=c,e._lastLogicalPoint){if(n){if(0!==n.width&&0!==n.height){var r=i.getDatasInRect(n,e.intersects());if(!r.isEmpty()){var o=i.sm(),a=o.toSelection();r.each(function(t){o.co(t)?a.remove(t):a.add(t)}),o.ss(a)}}ms(e.div),delete e.div,delete e.mark,e.redraw(),e.fi({kind:"endRectSelect",event:t}),i.onRectSelectEnded()}e.clearDragging(),delete i._77O}},redraw:function(){var t=this;t._draw||(t._draw=1,H(function(){t.mark&&t._42(),delete t._draw},16))}});var _h=Zl.MoveInteractor=function(t){Vn(_h,this,[t])};Jl("MoveInteractor",gh,{handle_mousedown:function(t){var e=this,i=e.gv;if(es(t)&&!i._editing&&!i._scrolling&&!Gr()){var n=i.getSelectedDataAt(t);n?(e._data=n,i.handleMouseDown&&i.handleMouseDown(t,n),e.startDragging(t),i.isMovable(n)&&(i._moving=1)):i._focusData=c}},handleWindowMouseUp:function(t){var e=this,i=e.gv;i.handleMouseUp&&i.handleMouseUp(t,e._data),e.clear(t)},handleWindowMouseMove:function(t){var e=this,i=e._data,n=e.gv,r=n.getDataModel(),o=r.getHistoryManager();if((!n._93O||!n._93O(t,i))&&n._moving){e._logicalPoint||e.fi({kind:"prepareMove",event:t});var a=e._logicalPoint?"betweenMove":"beginMove",s={kind:a,event:t},l=e._logicalPoint=n.lp(t);o&&"beginMove"===a&&o.beginInteraction();var c=e._calcShift(a,t),h=c.x,u=c.y,d=e.gv.getMoveMode(t,i);d&&("x"===d?u=0:"y"===d?h=0:"xy"!==d&&(h=u=0)),n.moveSelection(h,u),e._lastLogicalPoint=l,e.autoScroll(t),e.fi(s)}},_calcShift:function(){var t=this,e=t._logicalPoint,i=t._lastLogicalPoint,n=e.x-i.x,r=e.y-i.y;return{x:n,y:r}},clear:function(t){var e=this,i=e.gv,n=i.getDataModel(),r=n.getHistoryManager();e._lastLogicalPoint&&(e._lastLogicalPoint=e._data=i._moving=c,e._logicalPoint&&(e.fi({kind:"endMove",event:t}),i.onMoveEnded(),r&&r.endInteraction()),e.clearDragging())}});var yh=Zl.ScrollBarInteractor=function(t){Vn(yh,this,[t])};Jl("ScrollBarInteractor",gh,{_41o:function(){return this.gv.getViewRect().height<this.gv.getScrollRect().height},_40o:function(){return this.gv.getViewRect().width<this.gv.getScrollRect().width},isV:function(t){var e=this.gv.getViewRect();return this._41o()&&(e.x+e.width-this.gv.lp(t).x)*this.gv.getZoom()<Ea},isH:function(t){var e=this.gv.getViewRect();return this._40o()&&(e.y+e.height-this.gv.lp(t).y)*this.gv.getZoom()<Ea},handle_mousemove:function(t){this.handle_touchmove(t)},handle_touchmove:function(t){if(!Cr&&es(t)){var e=this,i=e.isV(t),n=e.isH(t);(i||n)&&e.gv.showScrollBar(),e.gv._scrolling=i||n}},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)},handleWindowTouchEnd:function(t){this._state=this._cp=this._tx=this._ty=this.gv._scrolling=c,this.fi({kind:"endScroll",event:t})},handle_mousedown:function(t){this.handle_touchstart(t)},handle_touchstart:function(t){var e=this;if(e.gv.setFocus(t),ja(t),e.handle_touchmove(t),!(is(t)>1)&&e.gv._scrolling){e._cp=as(t),e._tx=e.gv.tx(),e._ty=e.gv.ty();var i=e.isV(t);e._state=i?"vScroll":"hScroll",ys(e,t),e.fi({kind:"beginScroll",event:t})}},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(t){var e=as(t),i=this.gv.getViewRect(),n=this.gv.getScrollRect();"vScroll"===this._state?this.gv.ty(this._ty+(this._cp.y-e.y)*n.height/i.height):"hScroll"===this._state&&this.gv.tx(this._tx+(this._cp.x-e.x)*n.width/i.width),this.fi({kind:"betweenScroll",event:t})}});var mh=Zl.TouchInteractor=function(t,e){e=e||{},e.selectable===i&&(e.selectable=!0),e.movable===i&&(e.movable=!0),e.pannable===i&&(e.pannable=!0),e.pinchable===i&&(e.pinchable=!0),e.editable===i&&(e.editable=!0),this.params=e,Vn(mh,this,[t])};Jl("TouchInteractor",gh,{ms_edit:1,setUp:function(){var t=this;mh.superClass.setUp.call(t),$&&t.params.editable&&t.gv.setEditInteractor(t)},tearDown:function(){var t=this;mh.superClass.tearDown.call(t),$&&t.params.editable&&t.gv.setEditInteractor(c)},clear:function(t){var e=this,i=e.gv,n=i.dm().getHistoryManager();i._moving&&(e.fi({kind:"endMove",event:t}),delete i._moving,i.onMoveEnded(),n&&n.endInteraction()),i._panning&&(e.fi({kind:"endPan",event:t}),delete i._panning,i.onPanEnded()),i._pinching&&(e.fi({kind:"endPinch",event:t}),delete i._pinching,i.onPinchEnded()),i._editing&&(e._46O(t),e._77I=e._node=e._edge=e._shape=e._rect=e._89I=e._index=i._editing=c),e._moving=e._panning=e._pinching=e._editing=e._57I=e._data=e._beginHistory=c,e.clearDragging()},handle_touchstart:function(t){var e=this;if(!e.gv._editing){ja(t),e._57I=c;var i=e.params,n=e.gv,r=n.sm(),o=n.getDataAt(t),a=is(t);if(1===a)ns(t)?n.handleDoubleClick(t,o):(n.handleClick(t,o),o&&(n.handleMouseDown&&n.handleMouseDown(t,o),e._data=o)),i.selectable||(o=c),o?(r.co(o)||r.ss(o),i.editable&&n.isEditable(o)&&e._79I(t,o,!0)?(e._editing=1,e.startDragging(t)):i.movable&&n.isMovable(o)&&(e._moving=1,e.startDragging(t))):(e._57I=as(t),i.pannable&&n.isPannable()&&(e._panning=1,e.startDragging(t),e._translate={x:n.tx(),y:n.ty()}));else if(i.pinchable&&2===a){e._pinching=1,e.startDragging(t);var s=n.getView(),l=n.getZoom(),h=s.getBoundingClientRect(),u=t.touches[0],d=t.touches[1],f={x:(u.clientX+d.clientX)/2-h.left,y:(u.clientY+d.clientY)/2-h.top};f.x-=n.tx(),f.y-=n.ty(),f.x/=l,f.y/=l,e._p=f,e._d=Oo(t)}}},handle_touchend:function(t){var e=this,i=e.gv,n=e._57I,r=e._data;n&&(ls(n,as(t))<=1&&i.sm().cs(),e._57I=c),r&&i.handleMouseUp&&i.handleMouseUp(t,r)},handleWindowTouchEnd:function(t){this.clear(t)},handleWindowTouchMove:function(t){var e=this,i=e.gv,n=i.dm().getHistoryManager(),r=is(t);if(1===r){if(e._editing&&(n&&!e._beginHistory&&(e._beginHistory=1,n.beginInteraction()),i._editing=1,e._78I(t)),e._moving)n&&!e._beginHistory&&(e._beginHistory=1,n.beginInteraction()),e.handleMove(t);else if(e._panning){var o=as(t);i.setTranslate(e._translate.x+o.x-e._lastClientPoint.x,e._translate.y+o.y-e._lastClientPoint.y),e.fi({kind:i._panning?"betweenPan":"beginPan",event:t}),i._panning=1}}else if(2===r&&e._pinching){var a=Oo(t);i.handlePinch(e._p,a,e._d),e._d=a,e.fi({kind:i._pinching?"betweenPinch":"beginPinch",event:t}),i._pinching=1}},handleMove:function(t){var e=this,i=e.gv,n=i.lp(t);i._93O&&i._93O(t,e._data)||(i.moveSelection(n.x-e._lastLogicalPoint.x,n.y-e._lastLogicalPoint.y),e._lastLogicalPoint=n,e.autoScroll(t),e.fi({kind:i._moving?"betweenMove":"beginMove",event:t}),i._moving=1)}});var h=t.ht,bh=h.graph._editor={Math:{},Guide:{}};bh.getStyle=function(t){var e,n=bh.StyleMap;return n&&(e=n[t],e!==i)?e:bh.DefaultStyleMap[t]},bh.setStyle=function(t,e){var i=bh.StyleMap;i||(i=bh.StyleMap={}),i[t]=e},bh.inEdit=function(t){return t._inXEdit===!0},bh.startEdit=function(t){t._inXEdit=!0,bh.Inject.doInject(t)},bh._46O=function(t){t._inXEdit=!1,bh.Inject.undoInject(t)},bh.toScreenPosition=function(t,e){var i=t.tx(),n=t.ty(),r=t._zoom;return new bh.Math.Vector2(e.x*r+i,e.y*r+n)},bh.checkHit=function(t,e,i){return t.distanceTo(e)<i?!0:!1},bh.toWorldPosition=function(t,e){var i=t.tx(),n=t.ty(),r=t._zoom;return{x:(e.x-i)/r,y:(e.y-n)/r}},bh.log=function(){};var wh=bh.Inject={_modules:[]};wh.registAsModule=function(t,e){var i={},n={};for(var r in t){var o=e.prototype[r];i[r]=o}t.getBackup=function(t){return i[t]},t.getBackups=function(){return i},n.doInject=function(){for(var i in t)"getBackup"!==i&&(e.prototype[i]=t[i])},n.undoInject=function(){for(var n in t)"getBackup"!==n&&(e.prototype[n]=i[n])},wh._modules.push(n)},wh.doInject=function(t){for(var e,i=wh._modules,n=0,r=i.length;r>n;n++)e=i[n],e.doInject(t)},wh.undoInject=function(t){for(var e,i=wh._modules,n=0,r=i.length;r>n;n++)e=i[n],e.undoInject(t)};var gh=h.graph.EditInteractor=function(t){var e=this,i=l.createElement("canvas");i.className="editCanvas",i.style.position="absolute",e._styleMap={},e._canvas=i,e._context=i.getContext("2d"),gh.superClass.constructor.call(e,t),e.setAntialias(!1),e._subModules=[new bh.Anchor(e),new bh.Rect(e),new bh.Curve(e),new bh.MoveHelper(e)],e._gridGuide=new bh.Guide.Grid(e),e._rectGuide=new bh.Guide.Rect(e)},xh=gh;h.Default.def(gh,h.graph.Interactor,{ms_edit:1,ms_fire:1}),e.defineProperties(gh.prototype,{editDetail:{get:function(){var t=!!this._editDetail;return t},set:function(t){var e=this,i=e._editDetail;i!==t&&(e._editDetail=t,e.gv._editing=t,e.fp("editDetail",i,t))}},gvEditing:{get:function(){return this.gv._editing},set:function(t){(!this._editDetail||t)&&(this.gv._editing=t,t||(this.editDetail=!1))}},editing:{get:function(){return this._editing},set:function(t){this._editing=t,this.gvEditing=t}},gridEnabled:{get:function(){var t=this._gridEnabled;if(!t)return!1;var e=this.gv;return e?e._zoom<this.getStyle("gridZoomThreshold")?!1:!0:!0},set:function(t){t!==this._gridEnabled&&(this._gridEnabled=t,this._42())}},alignmentGuideEnabled:{get:function(){return this._agEnabled},set:function(t){t!==this._agEnabled&&(this._agEnabled=t,this._42())}},gridGuide:{get:function(){return this._gridGuide}},rectGuide:{get:function(){return this._rectGuide}}}),gh.prototype.getSubModule=function(t){var e,i,n,r=this._subModules;for(i=0,n=r.length;n>i;i++)if(e=r[i],e.catalog===t)return e},gh.prototype.invokeSubModule=function(t,e){var n=this,r=n._subModules;if(r)for(var o,a,s,l=Array.prototype.slice.call(arguments,2),c=0,h=r.length;h>c;c++)if(o=r[c],a=o[t],a&&(s=a.apply(o,l),s!=i&&e))return o},gh.prototype.invokeSubModuleInverse=function(t,e){var n=this,r=n._subModules;if(r)for(var o,a,s,l=Array.prototype.slice.call(arguments,2),c=r.length-1;c>=0;c--)if(o=r[c],a=o[t],a&&(s=a.apply(o,l),s!=i&&e))return o},gh.prototype.setUp=function(){bh.log("setUp");var t=this,e=t.gv,i=e.getView(),n=t._canvas;gh.superClass.setUp.call(t),e.setEditInteractor(t),e._79O?i.insertBefore(n,e._79O):i.appendChild(n),bh.startEdit(e),t.invokeSubModule("setUp"),e.dm().mm(t._onDataModelChanged,t),e.dm().md(t._onDataPropertyChanged,t)},gh.prototype.tearDown=function(){bh.log("tearDown");var t=this,e=t.gv,i=e.getView();gh.superClass.tearDown.call(t),e.dm().umm(t._onDataModelChanged),e.dm().umd(t._onDataPropertyChanged),e.setEditInteractor(null),i.removeChild(t._canvas),bh._46O(e),t.invokeSubModule("tearDown")},gh.prototype._onDataModelChanged=function(t){var e=this;("clear"===t.kind||"remove"===t.kind&&e.editDetail&&t.data===e.getSubModule("Curve").target)&&(e.editDetail=!1,e._42())},gh.prototype._onDataPropertyChanged=function(t){var e=this;if(e.editDetail){var i=e.getSubModule("Curve"),n=t.data;n===i.target&&(n._writing||i._handleDataChanged())}},gh.prototype.clear=function(){bh.log("clear")},gh.prototype.redraw=function(){this._42()},gh.prototype._42=function(){var t=this;t._drawTimer||(t._drawTimer=H(function(){delete t._drawTimer,t.drawImpl()},0))},gh.prototype.drawImpl=function(){var t;for(t in{_42:!0})break;return function(){var e=this,i=e._canvas,n=e.gv,r=n.getWidth(),o=n.getHeight(),a=e._context,s=h.Default.getInternal();(i.width!==r||i.height!==o)&&s.setCanvas(i,r,o),a.clearRect(0,0,i.width,i.height);var l=e._getValidSelection();a.save();var c=h.Default.devicePixelRatio;a.scale(c,c),e._gridGuide._42(),e._rectGuide._42(),e.invokeSubModuleInverse(t,!1,a,n,l),a.restore()}}(),gh.prototype._getValidSelection=function(){var t=this,e=t.gv,i=e.sm().getSelection(),n=[];return i.each(function(t){e.isVisible(t)&&n.push(t)}),n},gh.prototype.setAntialias=function(t){for(var e,i=this._context,n=["imageSmoothingEnabled","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","oImageSmoothingEnabled","msImageSmoothingEnabled"],r=0,o=n.length;o>r&&(e=n[r],
!i[e]);r++);i[e]=t},gh.prototype.handle_touchmove=function(t){return this.handle_mousemove(t)},gh.prototype.handle_mousemove=function(t){if(!h.Default.isDragging()){var e=this;(e.editDetail||!Gr())&&(e.gvEditing=!1,e.gv.sm().size()&&e._checkEdit(t)&&(e.gvEditing=!0))}},gh.prototype.handle_touchstart=function(t){return this.handle_mousedown(t)},gh.prototype.handle_mousedown=function(t){ja(t);var e=this;if(e.editDetail||!Gr()){if(ns(t)){if(e.editDetail){if(e._tryQuitEditDetailMode(t))return}else if(e._tryEnterEditDetailMode())return;if(e.invokeSubModule("handleDoubleClick",!0,t))return}var i=e._checkEdit(t);i&&(e._downPosition=e._getLogicalPoint(t),i.startEdit(e,t),e.editing=!0)}},gh.prototype._checkEdit=function(t){var e=this,i=e.gv,n=e._getLogicalPoint(t),r=e.invokeSubModule("check",!0,i,t,n)||null;return e._editMod=r,r},gh.prototype.handleWindowTouchMove=function(t){return this.handleWindowMouseMove(t)},gh.prototype.handleWindowMouseMove=function(t){var e=this,i=e._downPosition;if(i){var n=e._getLogicalPoint(t);if(n.distanceTo(i)<e.getStyle("moveSensitivity"))return;delete e._downPosition}var r=e._editMod;r&&r.handleEdit(e.gv,t)},gh.prototype._getLogicalPoint=function(t){var e=this,i=h.Default.getLogicalPoint(t,e._canvas);return new bh.Math.Vector2(i)},gh.prototype.handleWindowTouchEnd=function(t){return this.handleWindowMouseUp(t)},gh.prototype.handleWindowMouseUp=function(){var t;for(t in{_46O:!0})break;return function(){var e=this;e.editing=!1,e.setCursor("default"),e.invokeSubModule(t,!1),e._42()}}(),gh.prototype.handle_mousewheel=function(t){var e=this;ja(t),e.invokeSubModule("preHandleScroll",!0)||e.gv.handleScroll(t,t.wheelDelta)},gh.prototype.handleDelete=function(){var t=this;return t.editDetail?(t.invokeSubModule("handleDelete",!0),t._42(),void 0):(t.gv.removeSelection(),void 0)},gh.prototype.handle_keydown=function(t){var e=this;if((t.metaKey||t.ctrlKey)&&e._42(),Gr(t)&&!e.editing)return e.gvEditing=!1,e.setCursor("default"),e._42(),void 0;var i=Ur(t);return e.editDetail?((i||Nr(t))&&(e.editDetail=!1,e._42()),e.invokeSubModule("handle_keydown",!0,t),void 0):(i&&e._tryEnterEditDetailMode(),void 0)},gh.prototype._tryEnterEditDetailMode=function(){var t=this;return!t.editDetail&&t.invokeSubModule("canEnterEditDetailMode",!0)&&1===t._getValidSelection().length?(t.editDetail=!0,t._42(),!0):void 0},gh.prototype._tryQuitEditDetailMode=function(t){var e=this;if(e.editDetail){var i=e.gv,n=e.getSubModule("Curve").target;return i.getDataAt(t)!==n?(e.editDetail=!1,e._42(),!0):void 0}},gh.prototype.setStyle=function(t,e,i){var n=this;i?bh.setStyle(t,e):n._styleMap[t]=e,n._42()},gh.prototype.getStyle=function(t){var e=this,n=e._styleMap[t];return n!==i?n:bh.getStyle(t)};var Ch=bh.Group=function(t){var e=this;e._entities=t,e._64O=0,e._position={x:0,y:0},e._scale={x:1,y:1},e._anchor={x:.5,y:.5},e._anchor2={x:.5,y:.5}};Ch.prototype={},Ch.prototype.constructor=Ch;var Ih=null;Ch.findOrCreateGroup=function(t){if(Ih&&Ih.checkIsMe(t))return Ih;var e=new bh.Group(t);return e.getKeyOb()?(Ih=e,e):void 0},Ch.prototype.checkIsMe=function(t){var e=this._entities;if(e.length!==t.length)return!1;var i,n={},r=t.length;for(i=0;r>i;i++)n[t[i]._id]=!0;for(i=0;r>i;i++)if(!n[e[i]._id])return!1;return!0},Ch.prototype.getRotation=function(){return this._64O},Ch.prototype.getPosition=function(){return this._position},Ch.prototype.getAnchor=function(){return this._anchor},Ch.prototype.getWidth=function(){return this._width},Ch.prototype.getScale=function(){return this._scale},Ch.prototype.getSize=function(){return{width:this._width,height:this._height}},Ch.prototype.getHeight=function(){return this._height},Ch.prototype.getKeyOb=function(){for(var t=this._entities,e=t.length-1;e>=0;e--){var i=t[e];if(this.isNode(i))return i}},Ch.prototype.getAnchor2=function(){var t=this,e=t.getKeyOb();if(!e)return t._anchor;var i=t._anchor2,n=e.getMatrix();return n.tf({x:e.getWidth()*(i.x-e.getAnchor().x),y:e.getHeight()*(i.y-e.getAnchor().y)})},Ch.prototype.setAnchor2=function(t,e){var i=this,n=i.getKeyOb();if(n){var r,o=n.getMatrix();r="number"==typeof t?{x:t,y:e}:t;var a=o.tfi(r);i._anchor2={x:n.getAnchor().x+a.x/n.getWidth(),y:n.getAnchor().y+a.y/n.getHeight()}}},Ch.prototype.addRotation=function(t){var e=this,i=e._anchor2;e._entities.forEach(function(n){if(e.isNode(n)){var r=n.getAnchor(),o=n.getMatrix(),a=o.tf({x:n.getWidth()*(i.x-r.x),y:n.getHeight()*(i.y-r.y)}),s=new bh.Math.Matrix2;s.set(o.a,o.b,o.c,o.d,o.tx,o.ty),s.translate(-a.x,-a.y),s.rotate(t),s.translate(a.x,a.y);var l=Math.sign(n.getScale().x);n.setRotation(R(s.b*l,s.a*l)),n.setPosition(s.tx,s.ty)}})},Ch.prototype.setPosition=function(t){var e,i,n,r,o=this,a=o._position,s=t.x-a.x,l=t.y-a.y,c=o._entities;for(i=0,n=c.length;n>i;i++)e=c[i],xn(e)&&(r=e.getPosition(),e.setPosition(r.x+s,r.y+l));o._position=t},Ch.prototype.setScale=function(t,e){var i=this,n=t/i._scale.x,r=e/i._scale.y;i._adjustChildScaleOrSize(n,r,"size"),i._scale={x:t,y:e}},Ch.prototype.getRect=function(){var t=this,e=t._position,i=t._width,n=t._height;return{x:e.x-i/2,y:e.y-n/2,width:i,height:n}},Ch.prototype.setSize=function(t,e){var i=this,t=Math.max(1,t),e=Math.max(1,e),n=t/i._width,r=e/i._height;i._adjustChildScaleOrSize(n,r,"size"),i._width=t,i._height=e},Ch.prototype._adjustChildScaleOrSize=function(t,e,i){var n,r,o,a,s,l,c,h,u,d,f,g,v,p,_=this,y=_._position,m=_._entities,b=new bh.Math.Matrix2;for(r=0,o=m.length;o>r;r++)if(n=m[r],_.isNode(n)){if(a=n.getPosition(),s=n.getRotation(),l=n.getWidth(),c=n.getHeight(),h=n.getScale(),f=h.x*l,g=h.y*c,b.identity().scale(f,g).rotate(s).translate(a.x,a.y).translate(-y.x,-y.y).rotate(-_._64O),s=R(b.b*Math.sign(f),b.a*Math.sign(f)),b.scale(t,e),u=Math.cos(s),d=Math.sin(s),Math.abs(u)<.001?(v=b.b/d,p=-b.c/d):(v=b.a/u,p=b.d/u),"scale"===i)n.setScale(v/l,p/c);else if("size"===i){var w=v/h.x,x=p/h.y;n.setScale(An(v)*Math.abs(h.x),An(p)*Math.abs(h.y)),n.setSize(Math.max(.1,Math.abs(w)),Math.max(.1,Math.abs(x)))}b.rotate(_._64O).translate(y.x,y.y),n.setPosition(b.tx,b.ty)}},Ch.prototype.getMatrix=function(){var t=this,e=t._position,i=h.Default.getInternal(),n=t._scale;return new i.Mat(t._64O,e.x,e.y,n.x,n.y)},Ch.prototype.getCorners=function(){var t=this,e=t._width,i=t._height,n=t._anchor,r=-e*n.x,o=-i*n.y,a=t.getMatrix();return[a.tf(r,o),a.tf(r,o+i),a.tf(r+e,o+i),a.tf(r+e,o)]},Ch.prototype.calcInfo=function(){var t,e,i,n,r,o,a=this,s=[],l=a._entities,c=a._64O;for(n=0,r=l.length;r>n;n++)o=l[n],a.isNode(o)&&o.getCorners&&s.push.apply(s,o.getCorners());if(s.length){var h=Math.cos(-c),u=Math.sin(-c),d=1/0,f=-1/0,g=1/0,v=-1/0;for(n=0,r=s.length;r>n;n++)i=s[n],t=i.x,e=i.y,i.x=h*t-u*e,i.y=u*t+h*e,d=Math.min(d,i.x),f=Math.max(f,i.x),g=Math.min(g,i.y),v=Math.max(v,i.y);a._width=(f-d)/a._scale.x,a._height=(v-g)/a._scale.y,h=Math.cos(c),u=Math.sin(c);var p=a._anchor;t=d+(f-d)*p.x,e=g+(v-g)*p.y,a._position={x:h*t-u*e,y:u*t+h*e}}},Ch.prototype.isNode=function(t){return xn(t)?t instanceof h.Group&&t.isExpanded()?!1:!0:!1},Ch.prototype._42=function(t,e,i){var n,r,o,a,s,l,c,h=this,u=h._entities,d=h.getKeyOb();for(n=0,r=u.length;r>n;n++)o=u[n],h.isNode(o)&&(l=o.getRect(),a=bh.toScreenPosition(i,{x:l.x,y:l.y}),s=bh.toScreenPosition(i,{x:l.x+l.width,y:l.y+l.height}),c={min:a,max:s},o===d&&(c.isKeyOb=!0),bh.Icons.DrawIcon(t,e,bh.Icons.GroupSubEntityRect,c))};var Jc=bh.Guide.Grid=function(t){var e=this;e._interactor=t,e._alignmentGuideId=0,e._xAlignmentGuide=[],e._yAlignmentGuide=[]};Jc.prototype={},Jc.prototype.constructor=Jc,e.defineProperties(Jc.prototype,{gridBlockSize:{get:function(){var t=this;return t._gridBlockSize||t._interactor.getStyle("gridBlockSize")},set:function(t){this._gridBlockSize=t,this._interactor._42()}},gridThickLinesEvery:{get:function(){var t=this;return t._gridThickLinesEvery||t._interactor.getStyle("gridThickLinesEvery")},set:function(t){this._gridThickLinesEvery=t,this._interactor._42()}},gridEnabled:{get:function(){var t=this,e=t._interactor;return e.gridEnabled&&t.isValidGrid()}}}),Jc.prototype._42=function(){var t=this,e=t._interactor;t.gridEnabled&&t.drawGrid(),e.alignmentGuideEnabled&&t.drawAlignmentGuide()},Jc.prototype.makeMatrix=function(){var t=this,e=t._interactor.getStyle("gridAngle"),i=t._interactor.getStyle("gridRotation"),n=new bh.Math.Matrix2,r=Math.sin(e),o=Math.cos(e);return n.set(1,0,o,r,0,0),n.rotate(i),n},Jc.prototype.isValidGrid=function(){var t=this,e=Math.PI,i=t._interactor.getStyle("gridAngle"),n=Math.abs(180*(i%e/e)),r=1-1e-8;return r>n||n>180-r?!1:!0},Jc.prototype.drawAlignmentGuide=function(){var t=this,e=t._interactor,i=e.gv,n=e._canvas,r=e._context,o=n.width,a=n.height,s=i.tx(),l=i.ty(),c=i._zoom;r.beginPath(),r.strokeStyle=e.getStyle("gridAlignmentGuideColor"),r.lineWidth=1,t._xAlignmentGuide.forEach(function(t){var e=t.p*c+s;r.moveTo(e,0),r.lineTo(e,a)}),t._yAlignmentGuide.forEach(function(t){var e=t.p*c+l;r.moveTo(0,e),r.lineTo(o,e)}),r.stroke()},Jc.prototype.drawGrid=function(){function t(t,e,i,n){var r=bh.toScreenPosition(s,d.apply({x:t,y:e})),o=bh.toScreenPosition(s,d.apply({x:i,y:n}));c.moveTo(r.x,r.y),c.lineTo(o.x,o.y)}var e=this,i=e._interactor,n=e.gridBlockSize,r=e.gridThickLinesEvery,o=i.getStyle("gridThickColor"),a=i.getStyle("gridLightColor"),s=i.gv,l=i._canvas,c=i._context,h=l.width,u=l.height,d=e.makeMatrix(),f=d.applyInverse(bh.toWorldPosition(s,{x:0,y:0})),g=d.applyInverse(bh.toWorldPosition(s,{x:h,y:0})),v=d.applyInverse(bh.toWorldPosition(s,{x:0,y:u})),p=d.applyInverse(bh.toWorldPosition(s,{x:h,y:u})),_=Math.min(f.x,g.x,v.x,p.x),y=Math.max(f.x,g.x,v.x,p.x),m=Math.min(f.y,g.y,v.y,p.y),b=Math.max(f.y,g.y,v.y,p.y);h=y-_,u=b-m;var w=Math.ceil(_/n),x=Math.floor(y/n),C=Math.ceil(m/n),I=Math.floor(b/n);s.tx(),s.ty(),s._zoom;var S,O,T;for(c.save(),c.lineWidth=1,c.beginPath(),c.strokeStyle=o,T=Math.ceil(w/r)*r;x>=T;T+=r)S=T*n,t(S,m,S,b);for(T=Math.ceil(C/r)*r;I>=T;T+=r)O=T*n,t(_,O,y,O);for(c.stroke(),c.beginPath(),c.strokeStyle=a,T=w;x>=T;T++)0!==T%r&&(S=T*n,t(S,m,S,b));for(T=C;I>=T;T++)0!==T%r&&(O=T*n,t(_,O,y,O));c.stroke(),c.restore()},Jc.prototype.getAlignmentGuides=function(){var t=this;return{x:t._xAlignmentGuide,y:t._yAlignmentGuide}},Jc.prototype.addAlignmentGuide=function(t,e,i){var n=this,r="x"===t?n._xAlignmentGuide:n._yAlignmentGuide,i=i?i:++n._alignmentGuideId,o={p:e,id:i};if(r.length){var a=n._findClosestAlignmentGuide(o.p,r);a.dis<0?r.splice(a.index+1,0,o):r.splice(a.index,0,o)}else r.push(o);return n._interactor._42(),i},Jc.prototype.findClosest=function(t,e,i){var n=this,r=n._interactor,o=r.gv;i&&(t=bh.toWorldPosition(o,t));var a,s,l,c=1/0,h=1/0,u=t.x,d=t.y;if(n.gridEnabled){var f=n.gridBlockSize,g=n.makeMatrix(),v=g.applyInverse(t);v=g.apply({x:Math.round(v.x/f)*f,y:Math.round(v.y/f)*f}),c=v.x-u,h=v.y-d,l=!0}if(r.alignmentGuideEnabled&&(a=n._findClosestAlignmentGuide(u,n._xAlignmentGuide).dis,s=n._findClosestAlignmentGuide(d,n._yAlignmentGuide).dis,Math.abs(a)<Math.abs(c)&&(c=a,l=!0),Math.abs(s)<Math.abs(h)&&(h=s,l=!0)),l){l=!1;var p=o._zoom,_=r.getStyle("smartGuideSensitivity")/p,y={};if(Math.abs(c)<_&&"y"!==e&&(y.x=i?c*p:c,l=!0),Math.abs(h)<_&&"x"!==e&&(y.y=i?h*p:h,l=!0),l)return y}},Jc.prototype._findClosestAlignmentGuide=function(t,e){if(!e.length)return{dis:1/0};for(var i,n=0,r=e.length-1;r-n>1;)i=Math.floor((n+r)/2),e[i].p<t?n=i:r=i;var o=e[n].p-t,a=e[r].p-t;return Math.abs(o)<=Math.abs(a)?{line:e[n],dis:o,index:n}:{line:e[r],dis:a,index:r}},Jc.prototype.removeAllAlignmentGuide=function(t){var e=this;"y"!==t&&(e._xAlignmentGuide=[]),"x"!==t&&(e._yAlignmentGuide=[]),e._interactor._42()},Jc.prototype.removeAlignmentGuide=function(t){var e,i,n,r=this,o=r._xAlignmentGuide;for(k=0;2>k;k++)for(o=0===k?r._xAlignmentGuide:r._yAlignmentGuide,e=0,i=o.length;i>e;e++)if(n=o[e],n.id===t)return o.splice(e,1),r._interactor._42(),{axis:0===k?"x":"y",position:n.p};return!1},Jc.prototype.adjustAlignmentGuide=function(t,e){var i=this,n=i.removeAlignmentGuide(t);return n?(i.addAlignmentGuide(n.axis,e,t),!0):!1};var Sh=bh.Guide.Rect=function(t){var e=this;e._interactor=t};Sh.prototype={},Sh.prototype.constructor=Sh,Sh.prototype.gatherRects=function(){var t,e,i,n,r=this,o=r._interactor.gv,a=[],s=[],l={x:a,y:s},c={},h=o.getDataModel(),u=h.a("width"),d=h.a("height");u&&d&&(t=0,e=0,i=u,n=d,a.push({node:h,type:0,p:t},{node:h,type:1,p:t+i/2},{node:h,type:2,p:t+i}),s.push({node:h,type:0,p:e},{node:h,type:1,p:e+n/2},{node:h,type:2,p:e+n}),c[h._id||0]={x:t,y:e,width:i,height:n}),h.each(function(r){if(xn(r)&&!o.isSelected(r)&&o.isVisible(r)){var l=!1;if(o.sm().getSelection().each(function(t){l||(r.isHostOn(t)?l=!0:r.isDescendantOf(t)&&(l=!0))}),!l){var h=r.getRect();t=h.x,e=h.y,i=h.width,n=h.height,a.push({node:r,type:0,p:t},{node:r,type:1,p:t+i/2},{node:r,type:2,p:t+i}),s.push({node:r,type:0,p:e},{node:r,type:1,p:e+n/2},{node:r,type:2,p:e+n}),c[r._id]=h}}}),a.sort(function(t,e){return t.p-e.p}),s.sort(function(t,e){return t.p-e.p}),r._grid=l,r._87I=c},Sh.prototype.gatherLines=function(t,e,i){var n,r,o,a,s,l,c,h,u,d,f,g,v=this,p=[v.findClosest({x:t.x,y:t.y},e),v.findClosest({x:t.x+t.w/2,y:t.y+t.h/2},e),v.findClosest({x:t.x+t.w,y:t.y+t.h},e)],_={},y=v._87I;i=i||255;var m,b;for(v._guideLine=[],n=0;2>n;n++)for(_={},0===n?(a="y",h=t.x,u=h+t.w):(a="x",h=t.y,u=h+t.h),r=0;3>r;r++)s=p[r],s&&isFinite(s[a])&&(m=1<<3*n+r,i&m&&(l=s[a+"Line"],c=l.node,b=c._id||0,_[b]||(_[b]=!0,g=y[b],"y"===a?(d=g.x,f=g.x+g.width):(d=g.y,f=g.y+g.height),o=l.p,v._guideLine.push({type:a,a:h,b:u,c:d,d:f,p:o}))))},Sh.prototype._binarySearchClosest=function(t,e){if(!e.length)return{dis:1/0};for(var i,n=0,r=e.length-1;r-n>1;)i=Math.floor((n+r)/2),e[i].p<t?n=i:r=i;var o=e[n].p-t,a=e[r].p-t;return Math.abs(o)<=Math.abs(a)?{line:e[n],dis:o}:{line:e[r],dis:a}},Sh.prototype.findClosest=function(t,e,i){var n=this,r=n._interactor,o=r.gv,a=n._grid;i&&(t=bh.toWorldPosition(o,t));var s,l=n._binarySearchClosest(t.x,a.x),c=n._binarySearchClosest(t.y,a.y),h=l.dis,u=c.dis,d=o._zoom,f=r.getStyle("smartGuideSensitivity")/d,g={};return Math.abs(h)<f&&"y"!==e&&(g.x=i?h*d:h,g.xLine=l.line,s=!0),Math.abs(u)<f&&"x"!==e&&(g.y=i?u*d:u,g.yLine=c.line,s=!0),s?g:void 0},Sh.prototype._42=function(){var t=this,e=t._guideLine;if(e&&!h.Default.isCtrlDown()){var i,n,r,o,a,s,l,c,u,d,f,g,v,p,_,y,m,b=t._interactor,w=b.gv,x=b._context,C=w.tx(),I=w.ty(),S=w._zoom,O=b.getStyle("guideLineTextSpacing");for(i=0,n=e.length;n>i;i++)r=e[i],c=r.type,u=r.p,d=r.a,f=r.b,g=r.c,v=r.d,p=Math.min(d,g),_=Math.max(f,v),"x"===c?(o=u*S+C,a=p*S+I,s=o,l=_*S+I):(o=p*S+C,a=u*S+I,s=_*S+C,l=a),bh.Icons.DrawIcon(b,x,bh.Icons.MoveLineGuide,[o,a,s,l]),v>=d&&f>=g||(p=d>v?v:f,_=d>v?d:g,m=_-p,"x"===c?(r.center2center||(o-=O,s=o),a=p*S+I,l=_*S+I,y=bh.Icons.MoveLineGuideDistanceV):"y"===c&&(r.center2center||(a-=O,l=a),o=p*S+C,s=_*S+C,y=bh.Icons.MoveLineGuideDistanceH),bh.Icons.DrawIcon(b,x,y,{x0:o,y0:a,x1:s,y1:l,dis:m}))}},Sh.prototype.clear=function(){this._guideLine=null},bh.DefaultStyleMap={pointSize:[24,9],checkSize:7,rotateCheckSize:10,moveSensitivity:10,rotateRound:Math.PI/2,rotateSensitivity:Math.PI/60,shiftRotateRound:Math.PI/12,shiftLineRotateRound:Math.PI/4,anchorMovable:!0,anchorVisible:!0,anchorRound:.25,anchorSensitivity:.02,smartGuideSensitivity:8,curveIntersectSize:5,curvePointIntersectSize:8,guideLineTextSpacing:32,gridBlockSize:40,gridThickLinesEvery:10,gridThickColor:"#5d5d5d",gridLightColor:"#d0d0d0",gridZoomThreshold:.25,gridAlignmentGuideColor:"#ff0000",gridAngle:Math.PI/2,gridRotation:0,tipTextColor:"#ffffff",tipBackground:"#333333",curveHighlightColor:"#30599e",rectPointBackground:"white",rectPointBorderColor:"#666666",rectPointShadowColor:"rgba(0,0,0,0.35)",shapeCtrlPointBackground:"white",shapeCtrlPointBorderColor:"#707070"};var Oh=bh.Icons={},Th=1e4,Mh=null,Dh=8;h.Default.setImage("Icons.RectPoint",{width:Dh,height:Dh,comps:[{type:"shape",points:[0,0,0,Dh,Dh,Dh,Dh,0],segments:[1,2,2,2,5],shadow:!0,borderWidth:1,shadowColor:{func:function(){return Mh.getStyle("rectPointShadowColor")}},background:{func:function(){return Mh.getStyle("rectPointBackground")}},borderColor:{func:function(){return Mh.getStyle("rectPointBorderColor")}}}]});var Ph="#e000e0";Oh.GroupSubEntityRect={comps:[{type:"shape",points:{func:function(){var t=Oh.GroupSubEntityRect.data;if(!t)return[];var e=t.min,i=t.max;return[e.x,e.y,e.x,i.y,i.x,i.y,i.x,e.y]}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:{func:function(){return Oh.GroupSubEntityRect.data.isKeyOb?Ph:"#666666"}}}]},Oh.Line={comps:[{type:"image",name:"Icons.RectPoint",rect:{func:function(){return[[Oh.Line.data.P1.x,Oh.Line.data.P1.y],Dh,Dh]}}},{type:"image",name:"Icons.RectPoint",rect:{func:function(){return[[Oh.Line.data.P2.x,Oh.Line.data.P2.y],Dh,Dh]}}}]},Oh.Rect={comps:[{type:"shape",points:{func:function(){var t=Oh.Rect.data;if(!t)return[];var e=t.LT,i=t.LB,n=t.RB,r=t.RT;return[e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y]}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:"#666666"},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return Oh.Rect.data.rotation}},rect:{func:function(){return[[Oh.Rect.data.LT.x,Oh.Rect.data.LT.y],Dh,Dh]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return Oh.Rect.data.rotation}},rect:{func:function(){return[[Oh.Rect.data.LB.x,Oh.Rect.data.LB.y],Dh,Dh]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return Oh.Rect.data.rotation}},rect:{func:function(){return[[Oh.Rect.data.RB.x,Oh.Rect.data.RB.y],Dh,Dh]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return Oh.Rect.data.rotation}},rect:{func:function(){return[[Oh.Rect.data.RT.x,Oh.Rect.data.RT.y],Dh,Dh]}}},{type:"image",name:"Icons.RectPoint",scaleX:.9,scaleY:.9,rotation:{func:function(){return Oh.Rect.data.rotation}},visible:{func:function(){return Oh.Rect.data.L?!0:!1}},rect:{func:function(){return[[Oh.Rect.data.L.x,Oh.Rect.data.L.y],Dh,Dh]}}},{type:"image",name:"Icons.RectPoint",scaleX:.9,scaleY:.9,rotation:{func:function(){return Oh.Rect.data.rotation}},visible:{func:function(){return Oh.Rect.data.R?!0:!1}},rect:{func:function(){return[[Oh.Rect.data.R.x,Oh.Rect.data.R.y],Dh,Dh]}}},{type:"image",name:"Icons.RectPoint",scaleX:.9,scaleY:.9,rotation:{func:function(){return Oh.Rect.data.rotation}},visible:{func:function(){return Oh.Rect.data.T?!0:!1}},rect:{func:function(){return[[Oh.Rect.data.T.x,Oh.Rect.data.T.y],Dh,Dh]}}},{type:"image",name:"Icons.RectPoint",scaleX:.9,scaleY:.9,rotation:{func:function(){return Oh.Rect.data.rotation}},visible:{func:function(){return Oh.Rect.data.B?!0:!1}},rect:{func:function(){return[[Oh.Rect.data.B.x,Oh.Rect.data.B.y],Dh,Dh]}}}]};var kh=18;h.Default.setImage("Icons.Anchor",{width:kh,height:kh,comps:[{type:"arc",rect:[4,4,kh-8,kh-8],arcFrom:0,arcClose:!1,background:"#ffffff",borderWidth:0,borderColor:"#000000"},{type:"shape",points:[2,kh/2,kh-2,kh/2,kh/2,2,kh/2,kh-2],segments:[1,2,1,2],background:null,borderWidth:1,borderColor:"#111111"},{type:"arc",rect:[5.5,5.5,kh-11,kh-11],arcFrom:0,arcClose:!1,background:null,borderWidth:1,borderColor:"#111111"}]}),Oh.Anchor={comps:[{type:"image",name:"Icons.Anchor",rect:{func:function(){return[[Oh.Anchor.data.POS.x,Oh.Anchor.data.POS.y],kh,kh]}}}]},Oh.TipShiftX=12,Oh.TipShiftY=12;var Eh=[8,28];Oh.TipHelper={comps:[{type:"roundRect",rect:{func:function(){return[Oh.TipHelper.data.helperPos.x,Oh.TipHelper.data.helperPos.y,Eh[0]*Oh.TipHelper.data.size,Eh[1]]}},background:{func:function(){return Mh.getStyle("tipBackground")}},opacity:.6},{type:"text",text:{func:function(){return Oh.TipHelper.data.text}},rect:{func:function(){return[Oh.TipHelper.data.helperPos.x,Oh.TipHelper.data.helperPos.y,Eh[0]*Oh.TipHelper.data.size,Eh[1]]}},color:{func:function(){return Mh.getStyle("tipTextColor")}},font:"bold 12px Arial",align:"center"}]};var Vh=7;Oh.ShapePoint={comps:[{type:"circle",rect:{func:function(){var t=Oh.ShapePoint.data;return[t,Vh,Vh]}},background:"#ffffff",borderWidth:1,borderColor:"#333333"}]},Oh.ShapeBgCurve={comps:[{type:"shape",points:{func:function(){return Oh.ShapeBgCurve.data.P}},segments:{func:function(){return Oh.ShapeBgCurve.data.S}},background:null,borderWidth:1,borderColor:"#333333"}]};var Rh=8;Oh.ShapeHighlighPoint={comps:[{type:"circle",rect:{func:function(){var t=Oh.ShapeHighlighPoint.data;return[[t.x,t.y],Rh,Rh]}},background:"#30599e",borderWidth:0}]};var Bh=10;Oh.ShapeHighlighRealPoint={comps:[{type:"circle",rect:{func:function(){var t=Oh.ShapeHighlighRealPoint.data;return[[t.x,t.y],Bh,Bh]}},background:"#ffffff",borderWidth:2,borderColor:"#333333"}]};var Lh=3;Oh.ShapeHighlightCurve={comps:[{type:"shape",points:{func:function(){return Oh.ShapeHighlightCurve.data}},segments:[1,4],background:null,borderWidth:Lh,borderColor:{func:function(){return Mh.getStyle("curveHighlightColor")}}}]},Oh.ShapeGuideLine={comps:[{type:"shape",points:{func:function(){return Oh.ShapeGuideLine.data}},background:null,borderWidth:1,borderColor:"red"}]},Oh.MoveLineGuide={comps:[{type:"shape",points:{func:function(){return Oh.MoveLineGuide.data}},background:null,borderWidth:1,borderColor:"red"}]};var zh=5;Oh.MoveLineGuideDistanceH={comps:[{type:"shape",points:{func:function(){var t=Oh.MoveLineGuideDistanceH.data,e=t.x0,i=t.y0,n=t.x1,r=t.y1;return[e,i,n,r,e,i-zh,e,i+zh,n,r-zh,n,r+zh]}},segments:[1,2,1,2,1,2],background:null,borderWidth:1,borderColor:"red"},{type:"text",text:{func:function(){return Math.round(Oh.MoveLineGuideDistanceH.data.dis)}},rect:{func:function(){var t=Oh.MoveLineGuideDistanceH.data;return[[(t.x0+t.x1)/2,t.y0-10],20,20]}},color:"red",font:"12px Arial",align:"center"}]},Oh.MoveLineGuideDistanceV={comps:[{type:"shape",points:{func:function(){var t=Oh.MoveLineGuideDistanceV.data,e=t.x0,i=t.y0,n=t.x1,r=t.y1;return[e,i,n,r,e-zh,i,e+zh,i,n-zh,r,n+zh,r]}},segments:[1,2,1,2,1,2],background:null,borderWidth:1,borderColor:"red"},{type:"text",text:{func:function(){return Math.round(Oh.MoveLineGuideDistanceV.data.dis)}},rect:{func:function(){var t=Oh.MoveLineGuideDistanceV.data;return[[t.x0-10,(t.y0+t.y1)/2],20,20]}},color:"red",font:"12px Arial",align:"center"}]};var Ah=6;Oh.ShapeActivingCtrl={comps:[{type:"shape",visible:{func:function(){return Oh.ShapeActivingCtrl.data.c1?!0:!1}},points:{func:function(){var t=Oh.ShapeActivingCtrl.data;return[t.point.x,t.point.y,t.c1.x,t.c1.y]}},segments:[1,2],background:null,borderWidth:1,borderColor:"#707070"},{type:"shape",visible:{func:function(){return Oh.ShapeActivingCtrl.data.c2?!0:!1}},points:{func:function(){var t=Oh.ShapeActivingCtrl.data;return[t.point.x,t.point.y,t.c2.x,t.c2.y]}},segments:[1,2],background:null,borderWidth:1,borderColor:"#707070"},{type:"shape",visible:{func:function(){return Oh.ShapeActivingCtrl.data.c1?!0:!1}},points:{func:function(){var t=Oh.ShapeActivingCtrl.data.c1,e=t.x,i=t.y,n=Ah/2;return[e-n,i-n,e-n,i+n,e+n,i+n,e+n,i-n]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return Mh.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return Mh.getStyle("shapeCtrlPointBorderColor")}}},{type:"shape",visible:{func:function(){return Oh.ShapeActivingCtrl.data.c2?!0:!1}},points:{func:function(){var t=Oh.ShapeActivingCtrl.data.c2,e=t.x,i=t.y,n=Ah/2;return[e-n,i-n,e-n,i+n,e+n,i+n,e+n,i-n]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return Mh.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return Mh.getStyle("shapeCtrlPointBorderColor")}}}]},bh.Icons.DrawIcon=function(t,e,i,n){i.width=i.height=Th,i.data=n,Mh=t,h.Default.drawImage(e,i,0,0,Th,Th)},bh.Icons.MapPoints=function(t,e){for(var i=0,n=t.length;n>i;i++)t[i]/=e},bh.roundTo=function(t,e,i){var n=Math.abs(t%e);return i>n||i>e-n?e*Math.round(t/e):t},bh.toFixed=function(t){return Math.round(100*t)/100};var jh=bh.Math.Matrix2=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0};jh.prototype={},jh.prototype.constructor=jh,jh.prototype.set=function(t,e,i,n,r,o){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=o,this},jh.prototype.apply=function(t,e){e=e||new Fh;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},jh.prototype.applyInverse=function(t,e){e=e||new Fh;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,r=t.y;return e.x=this.d*i*n+-this.c*i*r+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*r+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},jh.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},jh.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},jh.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,r=this.c,o=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=r*e-this.d*i,this.d=r*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this},jh.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,r=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*r,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*r,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*r+this.ty,this},jh.prototype.setTransform=function(t,e,i,n,r,o,a,s,l){var c,h,u,d,f,g,v,p,_,y;return f=Math.sin(a),g=Math.cos(a),v=Math.cos(l),p=Math.sin(l),_=-Math.sin(s),y=Math.cos(s),c=g*r,h=f*r,u=-f*o,d=g*o,this.a=v*c+p*u,this.b=v*h+p*d,this.c=_*c+y*u,this.d=_*h+y*d,this.tx=t+(i*c+n*u),this.ty=e+(i*h+n*d),this},jh.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},jh.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,o=t*n-e*i;return this.a=n/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-n*r)/o,this.ty=-(t*this.ty-e*r)/o,this},jh.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},jh.prototype.clone=function(){var t=new jh;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},jh.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},jh.IDENTITY=new jh,jh.TEMP_MATRIX=new jh;var Fh=bh.Math.Vector2=function(t,e){"object"==typeof t&&(t.x!=i?(e=t.y,t=t.x):(e=t[1],t=t[0])),this.set(t||0,e||0)};Fh.prototype={},Fh.prototype.constructor=Fh,e.defineProperties(Fh.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Fh.prototype.clone=function(){return new Fh(this.x,this.y)},Fh.prototype.copy=function(t){return this.set(t.x,t.y),this},Fh.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},Fh.prototype.set=function(t,e){return this.x=t||0,this.y=e||(0!==e?this.x:0),this},Fh.prototype.setScalar=function(t){return this.x=t,this.y=t,this},Fh.prototype.setX=function(t){return this.x=t||0,this},Fh.prototype.setY=function(t){return this.y=t||0,this},Fh.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},Fh.prototype.addVectors=function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},Fh.prototype.addScalar=function(t){return this.x+=t,this.y+=t,this},Fh.prototype.addScaledVector=function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},Fh.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},Fh.prototype.subScalar=function(t){return this.x-=t,this.y-=t,this},Fh.prototype.subVectors=function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},Fh.prototype.multiply=function(t){return this.x*=t.x,this.y*=t.y,this},Fh.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this},Fh.prototype.divide=function(t){return this.x/=t.x,this.y/=t.y,this},Fh.prototype.divideScalar=function(t){return this.multiplyScalar(1/t)},Fh.prototype.min=function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},Fh.prototype.max=function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},Fh.prototype.clamp=function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},Fh.prototype.clampScalar=function(){var t,e;return function(n,r){return t===i&&(t=new Fh,e=new Fh),t.set(n,n),e.set(r,r),this.clamp(t,e)}}(),Fh.prototype.clampLength=function(t,e){var i=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,i))/i)},Fh.prototype.dot=function(t){return this.x*t.x+this.y*t.y},Fh.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},Fh.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},Fh.prototype.normalize=function(){return this.divideScalar(this.length())},Fh.prototype.angle=function(){var t=Math.atan2(this.y,this.x);return 0>t&&(t+=2*Math.PI),t},Fh.prototype.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))},Fh.prototype.distanceToSquared=function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},Fh.prototype.isNearEnough=function(t){return this.distanceToSquared(t)<1e-8},Fh.prototype.setLength=function(t){return this.multiplyScalar(t/this.length())},Fh.prototype.lerp=function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},Fh.prototype.lerpVectors=function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},Fh.prototype.rotateAround=function(t,e){var i=Math.cos(e),n=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*i-o*n+t.x,this.y=r*n+o*i+t.y,this};var Wh=bh.Math.Curve=function(){this._curves=[]};Wh.prototype={},Wh.prototype.constructor=Wh,Wh.prototype.createFromHtShape=function(t,e){e instanceof h.List&&(e=e.toArray());var i,n,r,o,a,s,l,c=this,u=null,d=null,f=0,g=bh.Math.Vector2,v=bh.Math.CubicBezier;for(n=0,r=e.length;r>n;n++){switch(o=e[n],a=null,o){case 1:d=new g(t[f],t[f+1]),u=d,f+=2;break;case 2:i=new g(t[f],t[f+1]),f+=2,a=new v(d,d.clone(),i.clone(),i),d=i;break;case 3:s=new g(t[f],t[f+1]),i=new g(t[f+2],t[f+3]),f+=4,a=new v(d,s.clone().sub(d).multiplyScalar(2/3).add(d),s.clone().sub(i).multiplyScalar(2/3).add(i),i),d=i;break;case 4:s=new g(t[f],t[f+1]),l=new g(t[f+2],t[f+3]),i=new g(t[f+4],t[f+5]),f+=6,a=new v(d,s,l,i),d=i;break;case 5:if(!u)break;a=new v(d,d.clone(),u.clone(),u),d=null,u=null}a&&(a._index=c._curves.length,c._curves.push(a))}},Wh.prototype.checkPoint=function(t,e){var i,n,r,o,a,s=this,l=s._curves;for(i=0,n=l.length;n>i;i++)if(o=l[i],a=o.intersectRect(t,e,e),a.length)return r=0,a.forEach(function(t){r+=t.t}),r/=a.length,t=o.getPointAt(r),t.t=r,{bezier:o,intersection:t}},Wh.prototype.insertKnot=function(t,e){var i=t.insertKnot(e),n=this,r=n._curves;r.splice(t._index,1,i[0],i[1])},Wh.prototype._isCloseEnough=function(t,e){return Math.abs(t.x-e.x)<1e-6&&Math.abs(t.y-e.y)<1e-6},Wh.prototype._isSamePoint=function(t,e){return t===e},Wh.prototype.moveRealPoint=function(t,e){var i=this,n=i._curves,r=e.clone().sub(t);n.forEach(function(n){var o=n._p1;n._p2,n._p3;var a=n._p4;i._isSamePoint(o,t)&&(n._p2.add(r),n._p1=e),i._isSamePoint(a,t)&&(n._p3.add(r),n._p4=e)})},Wh.prototype.moveCtrlPoint=function(t,e,i){var n=t[i];if(n){var r=this,o=r._curves;e.clone().sub(n),o.forEach(function(t){var o;"c2"===i?o="_p2":"c1"===i&&(o="_p3"),r._isSamePoint(t[o],n)&&(t[o]=e)}),t[i]=e}},Wh.prototype.deleteRealPoint=function(t,e){var i,n,r,o,a,s,l,c=this,h=c._curves,u={},d=[],f=bh.Math.CubicBezier;for(n=0,r=h.length;r>n;n++)i=h[n],o=i._p1,a=i._p2,s=i._p3,l=i._p4,(u[n]||!c._isSamePoint(o,t))&&(c._isSamePoint(l,t)?r>n+1&&c._isSamePoint(h[n+1]._p1,t)&&(e||d.push(new f(o,a,h[n+1]._p3,h[n+1]._p4))):d.push(i));c._curves=d},Wh.prototype.findPairs=function(t,e){var i,n,r,o,a,s,l,c,h=this,u=h._curves,d={},f=[];for(n=0,r=u.length;r>n;n++)i=u[n],o=i._p1,a=i._p2,s=i._p3,l=i._p4,!d[n]&&h._isSamePoint(o,t)&&(e?f.push({point:o,r2:l}):f.push({point:o,c2:a})),h._isSamePoint(l,t)&&(c=e?{point:l,r1:o}:{point:l,c1:s},r>n+1&&h._isSamePoint(u[n+1]._p1,t)&&(e?c.r2=u[n+1]._p4:c.c2=u[n+1]._p2,d[n+1]=!0),f.push(c));return f},Wh.prototype.toHtShape=function(){var t=this,e=t._curves,i=[],n=[],r={x:1/0,y:1/0};return e.forEach(function(e){var o=e._p1,a=e._p2,s=e._p3,l=e._p4;return t._isCloseEnough(o,r)||(i.push(1),n.push(o.clone())),r=l,t._isCloseEnough(o,a)&&t._isCloseEnough(s,l)?(i.push(2),n.push(l.clone()),void 0):(i.push(4),n.push(a.clone(),s.clone(),l.clone()),
void 0)}),{segments:i,points:n}};var Hh=bh.Math.CubicBezier=function(t,e,i,n){var r=this;r._p1=t,r._p2=e,r._p3=i,r._p4=n};Hh.prototype={},Hh.prototype.constructor=Hh,Hh.prototype.intersectRect=function(t,e,i){var n=e/2,r=i/2,o=t.x,a=t.y,s=bh.Math.Vector2,l=new s(-n+o,-r+a),c=new s(n+o,r+a),h=new s(c.x,l.y),u=new s(l.x,c.y),d=this,f=d.intersectLine(l,h),g=d.intersectLine(h,c),v=d.intersectLine(c,u),p=d.intersectLine(u,l),_=f.concat(g).concat(v).concat(p);return _},Hh.prototype.intersectLine=function(t,e){var i,n,r,o,a,s,l,c,h,u,d,f,g,v=this,p=t.clone().min(e),_=t.clone().max(e);o=v._p1,a=v._p2,s=v._p3,l=v._p4,i=o.clone().multiplyScalar(-1),n=a.clone().multiplyScalar(3),r=s.clone().multiplyScalar(-3),d=i.add(n).add(r).add(l),i=o.clone().multiplyScalar(3),n=a.clone().multiplyScalar(-6),r=s.clone().multiplyScalar(3),u=i.add(n).add(r),i=o.clone().multiplyScalar(-3),n=a.clone().multiplyScalar(3),h=i.add(n),c=o.clone(),g=new bh.Math.Vector2(t.y-e.y,e.x-t.x),f=t.x*e.y-e.x*t.y;for(var y=v.getRoots(g.dot(d),g.dot(u),g.dot(h),g.dot(c)+f),m=new Array,b=0,w=y.length;w>b;b++){var x=y[b];if(!(0>x||x>1)){var C=o.clone().lerp(a,x),I=a.clone().lerp(s,x),S=s.clone().lerp(l,x),O=C.lerp(I,x),T=I.lerp(S,x),M=O.lerp(T,x);M.t=x,t.x==e.x?p.y<=M.y&&M.y<=_.y&&m.push(M):t.y==e.y?p.x<=M.x&&M.x<=_.x&&m.push(M):M.x>=p.x&&M.y>=p.y&&M.x<=_.x&&M.y<=_.y&&m.push(M)}}return m},Hh.prototype.getPointAt=function(t){var e=this,i=e._p1,n=e._p2,r=e._p3,o=e._p4,a=i.clone().lerp(n,t),s=n.clone().lerp(r,t),l=r.clone().lerp(o,t),c=a.lerp(s,t),h=s.lerp(l,t);return c.lerp(h,t)},Hh.prototype.getRoots=function(t,e,i,n){var r,o,a,s,l,c=new Array;if(Math.abs(t)<1e-6){var r=e,o=i/r,a=n/r,s=o*o-4*a;if(s>0){var l=Math.sqrt(s);c.push(.5*(-o+l)),c.push(.5*(-o-l))}else 0==s&&c.push(.5*-o)}e/=t,i/=t,n/=t,r=(3*i-e*e)/3,o=(2*e*e*e-9*i*e+27*n)/27;var h=e/3,u=o*o/4+r*r*r/27,d=o/2;if(Math.abs(u)<=1e-6&&(u=0),u>0){var f,g,l=Math.sqrt(u);f=-d+l,g=f>=0?Math.pow(f,1/3):-Math.pow(-f,1/3),f=-d-l,f>=0?g+=Math.pow(f,1/3):g-=Math.pow(-f,1/3),c.push(g-h)}else if(0>u){var v=Math.sqrt(-r/3),p=Math.atan2(Math.sqrt(-u),-d)/3,_=Math.cos(p),y=Math.sin(p),m=Math.sqrt(3);c.push(2*v*_-h),c.push(-v*(_+m*y)-h),c.push(-v*(_-m*y)-h)}else{var f;f=d>=0?-Math.pow(d,1/3):Math.pow(-d,1/3),c.push(2*f-h),c.push(-f-h)}return c},Hh.prototype._70I=function(){var t=this;return t._p1.distanceToSquared(t._p2)<1e-10&&t._p3.distanceToSquared(t._p4)<1e-10},Hh.prototype.insertKnot=function(t){var e=this,i=e._p1,n=e._p2,r=e._p3,o=e._p4,a=i.clone().lerp(n,t),s=n.clone().lerp(r,t),l=r.clone().lerp(o,t),c=a.clone().lerp(s,t),h=s.clone().lerp(l,t),u=c.clone().lerp(h,t);return e._70I()?(i.clone().lerp(o,t),[new bh.Math.CubicBezier(i,i.clone(),u.clone(),u),new bh.Math.CubicBezier(u,u.clone(),o.clone(),o)]):[new bh.Math.CubicBezier(i,a,c,u),new bh.Math.CubicBezier(u,h,l,o)]};var ah=h.Default.getInternal().ui().EdgeUI,Gh={_47O:function(t){var e=this,i=Gh.getBackups()._47O;bh.inEdit(e.gv)||i.call(e,t)}};bh.Inject.registAsModule(Gh,ah);var oh=h.Default.getInternal().ui().NodeUI,Uh={_47O:function(t){var e=this,i=Uh.getBackups()._47O;bh.inEdit(e.gv)||i.call(e,t)},getSelectWidth:function(){var t=this,e=t.gv,i=t._data;if(e.isEditable(i)&&bh.inEdit(e))return 0;var n=Uh.getBackup("getSelectWidth");return n.call(t)}};bh.Inject.registAsModule(Uh,oh);var Nh=h.graph.GraphView,Qh={_editPointSize:function(){var t=h.Default.isTouchable,e=bh.getStyle("pointSize");return e[t?0:1]}(),isPointEditable:function(t){var e=this;if(bh.inEdit(e))return e._pointEditableFunc?e._pointEditableFunc(t):!0;var i=Qh.getBackup("isPointEditable");i.call(e,t)},isEditable:function(t){var e=this,i=Qh.getBackup("isEditable"),n=i.call(e,t);if(!bh.inEdit(e))return n;if(!(t instanceof h.Edge))return n;if(!t.s("2d.editable"))return!1;var r=e.getEditableFunc();return r?r(t):!0},_42:function(t,e){var i=this,n=Qh.getBackups()._42;if(n.call(i,t,e),bh.inEdit(i)){var r=i.getEditInteractor();r.drawImpl()}}};bh.Inject.registAsModule(Qh,Nh);var hh=h.Default.getInternal().ui().ShapeUI,Xh={_47O:function(t){var e=this,i=Xh.getBackups()._47O;bh.inEdit(e.gv)||i.call(e,t)}};bh.Inject.registAsModule(Xh,hh);var vh=h.graph.DefaultInteractor,Yh={handle_mousewheel:function(t){var e=this,i=Yh.getBackup("handle_mousewheel");bh.inEdit(e.gv)||i.call(e,t)}};bh.Inject.registAsModule(Yh,vh);var _h=h.graph.MoveInteractor,qh={_calcShift:function(t,e){var i=this,n=qh.getBackup("_calcShift"),r=i.gv;if(!bh.inEdit(r))return n.call(i,t,e);var o=r.getEditInteractor(),a=o.getSubModule("Move").calcShift(t,e,i);return a||n.call(i,t,e)},clear:function(t){var e=this,i=qh.getBackup("clear");i.call(e,t);var n=e.gv;if(bh.inEdit(n)){var r=n.getEditInteractor();r.getSubModule("Move").clear(t)}}};bh.Inject.registAsModule(qh,_h);var Sh=bh.Rect=function(t){this.catalog="Rect",this._interactor=t};Sh.prototype={},Sh.prototype.constructor=Sh,Sh.prototype.gatherInfo=function(t,e){var i=this;if(1===e.length){var n=e[0];return n instanceof h.Shape&&n._70I()?i.gatherLine(t,n):n instanceof h.Group&&n.isExpanded()?!1:i.gatherSingleTarget(t,n)}return e.length>1?i.gatherMultiTargets(t,e):!1},Sh.prototype.gatherSingleTarget=function(t,e){if(e.getCorners){var i,n=this.info;this.target=e,i=this.screenInfo={};var r=e.getCorners();n.LT=new bh.Math.Vector2(r[0]),n.LB=new bh.Math.Vector2(r[1]),n.RB=new bh.Math.Vector2(r[2]),n.RT=new bh.Math.Vector2(r[3]),n.T=n.LT.clone().add(n.RT).divideScalar(2),n.B=n.LB.clone().add(n.RB).divideScalar(2),n.L=n.LT.clone().add(n.LB).divideScalar(2),n.R=n.RT.clone().add(n.RB).divideScalar(2);for(var o in n)i[o]=bh.toScreenPosition(t,n[o]);var a=this._interactor.getStyle("checkSize"),s=function(t,e,i){var n=e.clone().sub(t).setLength(-a),r=i.clone().sub(t).setLength(-a),o=n.add(r).add(t);return o};return i.rotLT=s(i.LT,i.RT,i.LB),i.rotLB=s(i.LB,i.LT,i.RB),i.rotRB=s(i.RB,i.LB,i.RT),i.rotRT=s(i.RT,i.LT,i.RB),i.rotT=i.rotLT.clone().add(i.rotRT).divideScalar(2),i.rotB=i.rotLB.clone().add(i.rotRB).divideScalar(2),i.rotL=i.rotLT.clone().add(i.rotLB).divideScalar(2),i.rotR=i.rotRT.clone().add(i.rotRB).divideScalar(2),i.rotation=e.getRotation(),!0}},Sh.prototype.gatherMultiTargets=function(t,e){var i=bh.Group.findOrCreateGroup(e);if(!i)return!1;var n=this;return n.editing&&"rotate"!==n.editing.mode||i.calcInfo(),n.gatherSingleTarget(t,i)},Sh.prototype.gatherLine=function(t,e){this.target=e;var i=this.screenInfo={},n=e.getPoints();return i.P1=bh.toScreenPosition(t,n.get(0)),i.P2=bh.toScreenPosition(t,n.get(1)),!0},Sh.ResizeKeys=["LT","RB","LB","RT","L","R","B","T"],Sh.ResizeDirection=[{x:-1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:-1},{x:-1,y:0},{x:1,y:0},{x:0,y:1},{x:0,y:-1}],Sh.RotateKeys=["rotLT","rotRB","rotLB","rotRT","rotL","rotR","rotB","rotT"],Sh.prototype.check=function(t,e,i){if(h.Default.isLeftButton(e)){var n=this;if(n.editing=null,n.tipInfo=null,n.screenInfo){if(n.screenInfo.P1)return n._checkLine(i);var r,o,a,s=null,l=n._interactor,c=l.getStyle("checkSize");for(o in bh.Rect.ResizeKeys)if(a=bh.Rect.ResizeKeys[o],bh.checkHit(i,n.screenInfo[a],c)){s=a,r="resize";break}if(!s){var u=l.getStyle("rotateCheckSize");for(o in bh.Rect.RotateKeys)if(a=bh.Rect.RotateKeys[o],bh.checkHit(i,n.screenInfo[a],u)){s=a,r="rotate";break}}if(!s)return this._interactor.setCursor("default"),void 0;var d=n.target;if("rotate"===r){this._interactor.setCursor("crosshair");var f=t.lp(e),g=d instanceof bh.Group?d.getAnchor2():d.getPosition();n.editing={mode:r,key:s,pos:g,flipY:d.getScale().y<0,rotation:d.getRotation(),hitRot:Math.atan2(f.y-g.y,f.x-g.x)}}else{var v=bh.Rect.ResizeKeys.indexOf(s),p=bh.Rect.ResizeDirection[v],_=Math.cos(d.getRotation()),y=Math.sin(d.getRotation()),m=p.x*Math.sign(d.getScale().x),b=p.y*Math.sign(d.getScale().y),w=Math.atan2(-y*m-_*b,_*m-y*b),x=(Math.round(w/(Math.PI/4))+8)%8,C=["ew-resize","nesw-resize","ns-resize","nwse-resize","ew-resize","nesw-resize","ns-resize","nwse-resize"][x];this._interactor.setCursor(C);var I=d.getWidth(),S=d.getHeight(),O=d.getAnchor();n.editing={mode:r,key:s,rect:{x:-I*O.x,y:-S*O.y,width:I,height:S},anchor:O,matrix:d.getMatrix()}}return s}}},Sh.prototype._checkLine=function(t){var e=this;e.screenInfo;var i,n=e._interactor.getStyle("checkSize");if(bh.checkHit(t,e.screenInfo.P1,n))i="P1";else{if(!bh.checkHit(t,e.screenInfo.P2,n))return this._interactor.setCursor("default"),void 0;i="P2"}return e.editing={mode:"line",key:i},i},Sh.prototype.startEdit=function(t,e){t.startDragging(e);var i=this,n=i.editing,r=i.target;n&&"rotate"!==n.mode&&("line"===n.mode||r&&0===r.getRotation())&&(i._inSmartGuide=!0,i._interactor.rectGuide.gatherRects())},Sh.prototype._46O=function(){var t=this;t.editing=null,t.tipInfo=null,t._inSmartGuide&&(t._interactor.rectGuide.clear(),t._inSmartGuide=!1)},Sh.prototype.handleEdit=function(t,e){var i=this,n=i.editing;if(n){var r,o,a,s,l,c,u=i.target,d=n.key,f=n.mode,g=i._interactor;if("rotate"===f){var v,p=t.lp(e),_=n.pos,y=Math.atan2(p.y-_.y,p.x-_.x);if(u instanceof bh.Group?v=y-n.hitRot:(y-=n.hitRot,v=n.rotation+y),v%=2*Math.PI,0>v&&(v+=2*Math.PI),!h.Default.isCtrlDown(e)){var m,b;h.Default.isShiftDown(e)?(m=g.getStyle("shiftRotateRound"),b=m/2):(m=g.getStyle("rotateRound"),b=g.getStyle("rotateSensitivity")),v=bh.roundTo(v,m,b)}u instanceof bh.Group?(y=v-(n.lastRotation||0),0!==y&&(u.addRotation(y),n.lastRotation=v)):u.setRotation(v),v>Math.PI&&(v-=2*Math.PI);var w=180*(v/Math.PI);w=w.toFixed(2),r=""+w+"°"}else if("resize"===f){var x=n.rect;s=x.x,l=x.y;var C=x.width,S=x.height,T=n.anchor,M=n.matrix;o=t.lp(e);var D,P=h.Default.unionPoint;if(i._inSmartGuide&&!h.Default.isCtrlDown(e)){var k;"L"===d||"R"===d?k="x":("T"===d||"B"===d)&&(k="y"),i._adsorbedToClosest(o,k),c=!0}D=M.tfi(o);var E;"LT"===d?(x=P(D,{x:s+C,y:l+S}),E=9):"T"===d?(x=P({x:s,y:D.y},{x:s+C,y:l+S}),E=1):"RT"===d?(x=P({x:s,y:D.y},{x:D.x,y:l+S}),E=33):"L"===d?(x=P({x:D.x,y:l},{x:s+C,y:l+S}),E=8):"R"===d?(x=P({x:s,y:l},{x:D.x,y:l+S}),E=32):"LB"===d?(x=P({x:D.x,y:l},{x:s+C,y:D.y}),E=12):"B"===d?(x=P({x:s,y:l},{x:s+C,y:D.y}),E=4):"RB"===d&&(x=P({x:s,y:l},D),E=36);var V=M.tf(x.x+x.width*T.x,x.y+x.height*T.y);u.setPosition(V),u.setSize(x.width,x.height),c&&(a=u.getRect(),g.rectGuide.gatherLines({node:u,x:a.x,y:a.y,w:a.width,h:a.height},k,E)),r=""+Math.round(x.width)+" * "+Math.round(x.height)}else if("line"===f){if(o=t.lp(e),rs(e)){var R=u.getPoints(),B="P1"===d?R.get(1):R.get(0),L={x:o.x-B.x,y:o.y-B.y},z=g.getStyle("shiftLineRotateRound"),A=i._shiftDirList;if(!A||i._shiftRotateRound!==z){i._shiftRotateRound=z,i._shiftDirList=A=[];for(var j=0;j<Math.PI;j+=z)A.push({x:O(j),y:I(j)})}for(var F,W=0,H=0,G=A.length;G>H;H++){var U=A[H],N=U.x*L.x+U.y*L.y;Math.abs(N)>Math.abs(W)&&(W=N,F=U)}o={x:B.x+F.x*W,y:B.y+F.y*W},g.rectGuide.clear()}else i._inSmartGuide&&!h.Default.isCtrlDown(e)&&(i._adsorbedToClosest(o),c=!0);u.setPoint("P1"===d?0:1,o,!0);var Q=u.getPoints(),X=Q.get(0),Y=Q.get(1);s=X.x-Y.x,l=X.y-Y.y,r=" "+Math.round(Math.sqrt(s*s+l*l))+" ",c&&(a=u.getRect(),g.rectGuide.gatherLines({node:u,x:a.x,y:a.y,w:a.width,h:a.height}))}var q=h.Default.getLogicalPoint(e,g._canvas);q.x+=bh.Icons.TipShiftX,q.y+=bh.Icons.TipShiftY,i.tipInfo={helperPos:q,text:r,size:r.length}}},Sh.prototype._adsorbedToClosest=function(t,e){var i=this,n=i._interactor,r=n.rectGuide.findClosest(t,e),o=n.gridGuide.findClosest(t,e),a=1/0,s=1/0;r&&(isFinite(r.x)&&(a=r.x),isFinite(r.y)&&(s=r.y)),o&&(isFinite(o.x)&&Math.abs(o.x)<Math.abs(a)&&(a=o.x),isFinite(o.y)&&Math.abs(o.y)<Math.abs(s)&&(s=o.y)),isFinite(a)&&(t.x+=a),isFinite(s)&&(t.y+=s)},Sh.prototype._42=function(t,e,i){var n=this;n.info={},n.screenInfo=null;var r=n._interactor;if(!r.editDetail&&n.gatherInfo(e,i)){var o=n.screenInfo;o.P1?bh.Icons.DrawIcon(r,t,bh.Icons.Line,n.screenInfo):bh.Icons.DrawIcon(r,t,bh.Icons.Rect,n.screenInfo),n.tipInfo&&bh.Icons.DrawIcon(r,t,bh.Icons.TipHelper,n.tipInfo),n.target instanceof bh.Group&&n.target._42(r,t,e)}};var Zh=bh.Anchor=function(t){this.catalog="Anchor",this._interactor=t};Zh.prototype={},Zh.prototype.constructor=Zh,Zh.prototype.gatherInfo=function(t,e){var i=this;if(1===e.length){var n=e[0];if(!n.getAnchor)return;if(n instanceof h.Shape&&n._70I())return;if(n instanceof h.Group&&n.isExpanded())return;return i.gatherSingleTarget(t,e[0])}return e.length>1?i.gatherMultiTargets(t,e):!1},Zh.prototype.gatherSingleTarget=function(t,e){var i=this;return i.info.POS=e.getPosition(),i.screenInfo.POS=bh.toScreenPosition(t,i.info.POS),i.target=e,!0},Zh.prototype.gatherMultiTargets=function(t,e){var i=this,n=bh.Group.findOrCreateGroup(e);return n?(i.screenInfo.POS=bh.toScreenPosition(t,n.getAnchor2()),i.target=n,!0):!1},Zh.prototype.check=function(t,e,i){if(h.Default.isLeftButton(e)){var n=this,r=n._interactor;if(r.getStyle("anchorMovable")!==!1){n.editing=null,n.tipInfo=null;var o;if(n.screenInfo&&(o=n.screenInfo.POS)&&bh.checkHit(i,new bh.Math.Vector2(o),r.getStyle("checkSize"))){if(n.target instanceof bh.Group)return n.editing={},!0;var a=n.target,s=a.getWidth(),l=a.getHeight(),c=a.getAnchor();return n.editing={rect:{x:-s*c.x,y:-l*c.y,width:s,height:l},anchor:c,matrix:a.getMatrix()},!0}}}},Zh.prototype.startEdit=function(t,e){t.startDragging(e)},Zh.prototype._46O=function(){this.editing=null,this.tipInfo=null},Zh.prototype.handleEdit=function(t,e){var i=this,n=i.target;if(n&&i.editing){var r=t.lp(e);if(n instanceof bh.Group)return n.setAnchor2(r),i._interactor._42(),void 0;var o=i.editing.matrix,a=o.tfi(r),s=i.editing.rect,l=(a.x-s.x)/s.width,c=(a.y-s.y)/s.height;if(!h.Default.isCtrlDown(e)){var u=i._interactor.getStyle("anchorRound"),d=i._interactor.getStyle("anchorSensitivity");l=bh.roundTo(l,u,d),c=bh.roundTo(c,u,d)}n.setAnchor(l,c,!0);var f=h.Default.getLogicalPoint(e,i._interactor._canvas);f.x+=bh.Icons.TipShiftX,f.y+=bh.Icons.TipShiftY;var g=""+l.toFixed(2)+", "+c.toFixed(2);i.tipInfo={helperPos:f,text:g,size:g.length}}},Zh.prototype._42=function(t,e,i){var n=this;n.info={},n.screenInfo={};var r=n._interactor;r.editDetail||n.gatherInfo(e,i)&&r.getStyle("anchorVisible")!==!1&&(bh.Icons.DrawIcon(r,t,bh.Icons.Anchor,n.screenInfo),n.tipInfo&&bh.Icons.DrawIcon(r,t,bh.Icons.TipHelper,n.tipInfo))};var Wh=bh.Curve=function(t){this.catalog="Curve",this._interactor=t};Wh.prototype={},Wh.prototype.constructor=Wh,Wh.PointType={Mirrored:0,Straight:1,Disconnected:2,Asymmetric:3},Wh.prototype.setUp=function(){var t=this,e=t._interactor;e&&e.gv.mp(t._onGraphviewPropertyChanged,t)},Wh.prototype._onGraphviewPropertyChanged=function(t){("zoom"===t.property||"translateX"===t.property||"translateY"===t.property)&&this._handleDataChanged()},Wh.prototype.tearDown=function(){var t=this,e=t._interactor;e&&e.gv.ump(t._onGraphviewPropertyChanged)},Wh.prototype.canEnterEditDetailMode=function(){var t=this,e=t._interactor._getValidSelection();if(1===e.length){var i=e[0];if(i instanceof h.Shape)return t.target=i,!0}},Wh.prototype.preHandleScroll=function(){var t=this.editing;return t&&t.inEdit?!0:void 0},Wh.prototype.getCurrentSelectintStatus=function(){var t=this;if(t.activing&&!t.activing.selections){if(t.activing.status!=i)return t.activing.status;var e=function(e){var i=t.activing.status;t.activing.status=e,t._interactor.fp("shapePointStatus",i,e)},n=bh.Curve.PointType,r=t.activing.point,o=t.activing.pairs;if(!o||1!==o.length)return e(n.Mirrored);var a=o[0],s=a.c1&&a.c1.isNearEnough(r),l=a.c2&&a.c2.isNearEnough(r);if(!a.c1||!a.c2)return s||l?e(n.Straight):e(n.Disconnected);if(s&&l)return e(n.Straight);if(s||l)return e(n.Asymmetric);var c=a.c1.clone().sub(r),h=a.c2.clone().sub(r);return Math.abs(c.x*h.y-c.y*h.x)>1e-5||c.x*h.x>0?e(n.Disconnected):Math.abs(c.length()-h.length())>1e-5?e(n.Asymmetric):e(n.Mirrored)}},Wh.prototype.handle_keydown=function(t){var e=this;if(e._interactor.editDetail){var i=bh.Curve.PointType;"1"===t.key?e.setCurrentSelectionStatus(i.Straight):"2"===t.key?e.setCurrentSelectionStatus(i.Mirrored):"3"===t.key?e.setCurrentSelectionStatus(i.Disconnected):"4"===t.key&&e.setCurrentSelectionStatus(i.Asymmetric)}},Wh.prototype.setCurrentSelectionStatus=function(t){var e=this;if(e.activing){var i=e.getCurrentSelectintStatus();if(null!==i&&i!==t){e.activing.status=t;var n=e.activing.point,r=e.activing.pairs;if(r&&1===r.length){var o=r[0],a=e.screenInfo.curve,s=bh.Curve.PointType,l=function(){e._writeToShape(),e._interactor.fp("shapePointStatus",i,t)};if(t===s.Straight)return a.moveCtrlPoint(o,n,"c1"),a.moveCtrlPoint(o,n,"c2"),l(),void 0;if(i===s.Straight){var c=a.findPairs(n,!0),h=c[0],u=h.r1||n,d=h.r2||n,f=d.clone().sub(u).multiplyScalar(.25);return a.moveCtrlPoint(o,n.clone().sub(f),"c1"),a.moveCtrlPoint(o,n.clone().add(f),"c2"),l(),void 0}var g=o.c1,v=o.c2;if(g&&v){if(t===s.Mirrored)return a.moveCtrlPoint(o,n.clone().multiplyScalar(2).sub(v),"c1"),l(),void 0;if(t===s.Asymmetric&&i===s.Disconnected){var p=g.clone().sub(n).length(),f=n.clone().sub(v).setLength(p).add(n);return a.moveCtrlPoint(o,f,"c1"),l(),void 0}}e._interactor.fp("shapePointStatus",i,t)}}}},Wh.prototype._handleDataChanged=function(t){var e=this;if(e.screenInfo&&e.target){var i=e._interactor;e.gatherSingleTarget(i.gv,e.target,!0),e.check(i.gv,null,t?i._getLogicalPoint(t):new bh.Math.Vector2(i._lastClientPoint)),i._42()}},Wh.prototype.gatherSingleTarget=function(t,e,i){var n,r,o=this;o.screenInfo&&o.screenInfo.curve&&(r=o.screenInfo.curve._curves);var a=o.editing;n=a?o.screenInfo:o.screenInfo={},n.S=e._58O;var s=n.P=[],l=o._getShapeMatrix();if(e._59O.each(function(e){e=l.apply(e);var i=bh.toScreenPosition(t,e);s.push(i.x,i.y)}),!n.S||!n.S.size()){n.S=new h.List,n.S.add(1);for(var c=0;c<s.length/2-1;c++)n.S.add(2)}if((!a||i)&&o.convertToCubicBezier(r),o.activing&&(i||!o.editing||"realPoint"===o.editing.type)){var u=n.curve.findPairs(o.activing.point);o.activing.pairs=u}},Wh.prototype._getShapeMatrix=function(){var t=new bh.Math.Matrix2,e=this.target,i=e.getPosition();return t.translate(-i.x,-i.y).scale(e.getScale().x,e.getScale().y).rotate(e.getRotation()).translate(i.x,i.y),t},Wh.prototype._convertToNewPoint=function(t,e,i){var n,r,o;for(n=0,r=e.length;r>n;n++){if(o=e[n],o._p1.isNearEnough(t))return o._p1;if(o._p4.isNearEnough(t))return o._p4}if(i)for(n=0,r=Math.min(i.length,r);r>n;n++){if(o=i[n],o._p1===t)return e[n]._p1;if(o._p4===t)return e[n]._p4}},Wh.prototype.convertToCubicBezier=function(t){var e,i,n=this,r=new bh.Math.Curve,o=n.screenInfo;if(r.createFromHtShape(o.P,o.S),o.curve=r,n.activing){var a=r._curves;if(e=n.activing.point,i=n._convertToNewPoint(e,a,t),i&&(n.activing.point=i),n.activing.selections){var s=-1,l=n.activing.selections;l.forEach(function(e){s++,i=n._convertToNewPoint(e,a,t),i&&(l[s]=i)})}}},Wh.prototype.check=function(t,e,i){if(!e||h.Default.isLeftButton(e)){var n=this;if(n._interactor.setCursor("default"),n.editing=null,n.highlight=null,n.tipInfo=null,n.screenInfo){if(Gr())return n._interactor._42(),!0;if(n._checkEditCtrlPoint(i))return n._interactor._42(),!0;if(n._checkEditRealPoint(i))return n._interactor._42(),!0;var r=n.screenInfo.curve,o=r.checkPoint(i,n._interactor.getStyle("curveIntersectSize"));if(o){var a=n.highlight={};a.type="insertKnot",a.bezier=o.bezier,a.point=o.intersection}return n._interactor._42(),!0}}},Wh.prototype._checkEditRealPoint=function(t){var e,i,n,r,o,a,s=this,l=s.screenInfo.curve._curves,c=s._interactor.getStyle("curvePointIntersectSize"),h=1/0;for(c*=c,n=0,r=l.length;r>n;n++)e=l[n],o=e._p1,a=t.distanceToSquared(o),h>a&&(h=a,i=o),o=e._p4,a=t.distanceToSquared(o),h>a&&(h=a,i=o);if(h>c)return!1;var u=s.highlight={};return u.type="changeRealPoint",u.point=i,s.editing={type:"realPoint",point:i,shiftGuide:{point:i.clone(),dir:"x",limit:0}},s._interactor.setCursor("crosshair"),!0},Wh.prototype._checkEditCtrlPoint=function(t){var e=this;if(e.activing&&!e.activing.selections){var i=e.getCurrentSelectintStatus();if(i!==bh.Curve.PointType.Straight){var n=e.activing.pairs;if(n){var r=e._interactor.getStyle("curvePointIntersectSize");r*=r;var o,a,s,l,c,h,u,d,f,g=1/0;for(u=0,f=n.length;f>u;u++)for(l=n[u],d=0;2>d;d++)c=0===d?"c1":"c2",l[c]&&(h=t.distanceToSquared(l[c]),g>h&&(g=h,o=l,a=u,s=c));if(g>r)return!1;e.activing.hlpair=o,e.activing.hltype=s;var v=e.highlight={};return v.type="changeCtrlPoint",v.point=o[s],e.editing={type:"ctrlPoint",pair:o,pairId:a,ctrlType:s,direction:o[s].clone().sub(e.activing.point).normalize()},e._interactor.setCursor("crosshair"),!0}}}},Wh.prototype.startEdit=function(t,e){t.startDragging(e);var i=this;i.highlight&&"insertKnot"===i.highlight.type&&(i.insertKnot(),i.gatherSingleTarget(i._interactor.gv,i.target),i.activing=null,i._checkEditRealPoint(i._interactor._getLogicalPoint(e)));var n=i.highlight,r=h.Default.isCtrlDown(e);if(!n||Gr()){var o=i._interactor.gv;if(!o.setFocus(e)||o._scrolling)return;return o.isPannable()&&es(e)&&!r&&(i._pan={tx:o.tx(),ty:o.ty()}),void 0}if("changeRealPoint"===n.type){var a,s=i.activing?i.activing.point:null,l=i.activing?i.activing.selections:null;if(r&&i.activing)s===n.point?(l?(i.activing={point:l[0]},l.length>1&&(l.splice(0,1),i.activing.selections=l)):i.activing=null,i.editing=null):l&&(a=l.indexOf(n.point))>=0?(l.length>1?l.splice(a,1):delete i.activing.selections,i.editing=null):l?(l.push(s),i.activing={point:n.point,selections:l}):i.activing={point:n.point,selections:[s]};else if(l)s===n.point||((a=l.indexOf(n.point))>=0?(l.splice(a,1,s),i.activing={point:n.point,selections:l}):i.activing={point:n.point});else{var c;s===n.point&&(c=i.activing.status),i.activing={point:n.point},c&&(i.activing.status=c)}}},Wh.prototype.insertKnot=function(){var t=this,e=t.highlight,i=t.screenInfo.curve;i.insertKnot(e.bezier,e.point.t),t._writeToShape()},Wh.prototype._writeToShape=function(){var t,e,i=this,n=i.screenInfo.curve,r=n.toHtShape(),o=r.points,a=[],s=r.segments,l=i._interactor.gv,c=i.target,h=i._getShapeMatrix().invert();c.getPosition();for(var u=0,d=o.length;d>u;u++)t=o[u],e=bh.toWorldPosition(l,t),e=h.apply(e),a.push(e);i.target._writing=!0,a.length?(i.target.setSegments(s),i.target.setPoints(a,!0)):i.target.removeFromDataModel(),delete i.target._writing},Wh.prototype._handlePanning=function(t){var e=this,i=e._pan;if(i){i.started=!0;var n=e._interactor,r=n.gv,o=n._lastClientPoint;r.setTranslate(i.tx+t.clientX-o.x,i.ty+t.clientY-o.y),e.gatherSingleTarget(n.gv,e.target),n._42()}},Wh.prototype.handleEdit=function(t,e){var i=this,n=i.editing;if(i._pan)return i._handlePanning(e),void 0;if(n){n.inEdit=!0;var r,o=i._interactor._getLogicalPoint(e),a=h.Default.isCtrlDown(e),s=h.Default.isShiftDown(e);if(i._guideInfo=null,"ctrlPoint"===n.type&&s){var l=i.editing.direction.clone();r=i.activing.point;var c=l.dot(o.clone().sub(r));o=l.setLength(c).add(r)}else{var l;if("realPoint"===n.type&&s){var u=i.editing.shiftGuide,d=u.point,f=Math.abs(o.x-d.x),g=Math.abs(o.y-d.y);f>g&&f>u.limit&&"y"===u.dir&&(u.dir="x"),g>f&&g>u.limit&&"x"===u.dir&&(u.dir="y"),l=u.dir,"x"===l?(o.y=d.y,u.limit=Math.max(u.limit,f)):"y"===l&&(o.x=d.x,u.limit=Math.max(u.limit,g))}if(!a){var v=i._guidingToEdit(o,l),p="realPoint"===n.type?i._interactor.gridGuide.findClosest(o,l,!0):null,_=1/0,y=1/0;p&&(p.x&&(_=p.x),p.y&&(y=p.y));var m=!1;v&&(v.xList&&(Math.abs(v.x)<=Math.abs(_)?(m=!0,_=v.x):delete v.xList),v.yList&&(Math.abs(v.y)<=Math.abs(y)?(m=!0,y=v.y):delete v.yList),m&&(i._guideInfo=v)),isFinite(_)&&(o.x+=_),isFinite(y)&&(o.y+=y),m&&(v.v=o)}}var b=i.screenInfo.curve;if("realPoint"===n.type){r=n.point,b.moveRealPoint(r,o),n.point=o,i.highlight.point=o;var w=i.activing.status,x=i.activing.selections;if(i.activing={point:o,status:w},x){var C=o.clone().sub(r),I=0;x.forEach(function(t){var e=t.clone().add(C);b.moveRealPoint(t,e),x[I++]=e}),i.activing.selections=x}}else if("ctrlPoint"===n.type){var S=i.activing,O=S.pairs,T=O[n.pairId];b.moveCtrlPoint(T,o,n.ctrlType);var M=S.status,D=bh.Curve.PointType;if((M===D.Mirrored||M===D.Asymmetric)&&T.c1&&T.c2){var r=new bh.Math.Vector2(S.point),P="c1"===n.ctrlType?"c2":"c1";if(M===bh.Curve.PointType.Mirrored)b.moveCtrlPoint(T,r.clone().multiplyScalar(2).sub(o),P);else if(M===D.Asymmetric){var c=T[P].clone().sub(r).length(),k=r.clone().sub(T[n.ctrlType]).setLength(c).add(r);isNaN(k.x)||b.moveCtrlPoint(T,k,P)}}}var E=h.Default.getLogicalPoint(e,i._interactor._canvas);E.x+=bh.Icons.TipShiftX,E.y+=bh.Icons.TipShiftY;var V=bh.toWorldPosition(t,o),R=""+bh.toFixed(V.x)+", "+bh.toFixed(V.y);i.tipInfo={helperPos:E,text:R,size:R.length},i._writeToShape()}},Wh.prototype._guidingToEdit=function(t,e){var i,n,r=this;if(i=r.screenInfo.curve){n=i._curves;var o,a,s,l,c,h,u,d,f=1/0,g=1/0,v=[];for(r.editing&&"realPoint"===r.editing.type&&(d=r.editing.point),c=0,h=2*n.length;h>c;c++)u=n[Math.floor(c/2)][c%2?"_p4":"_p1"],v.indexOf(u)>=0||(v.push(u),d&&d===u||(s=u.x-t.x,l=u.y-t.y,Math.abs(s)<Math.abs(f)?(f=s,o=[u]):s===f&&o.push(u),Math.abs(l)<Math.abs(g)?(g=l,a=[u]):l===g&&a.push(u)));var p=r._interactor.getStyle("smartGuideSensitivity");if((Math.abs(f)>p||"y"===e)&&(o=null),(Math.abs(g)>p||"x"===e)&&(a=null),o||a){var _=!1,y={};if(o&&(_=!0,y.xList=o,y.x=f),a&&(_=!0,y.yList=a,y.y=g),_)return y}}},Wh.prototype._46O=function(){var t=this;t.editing=null,t._guideInfo=null,t._pan=null,t.tipInfo=null},Wh.prototype.handleDelete=function(){var t=this;if(t.activing&&t.screenInfo){var e=h.Default.isShiftDown(),i=t.screenInfo.curve;i.deleteRealPoint(t.activing.point,e),t.activing.selections&&t.activing.selections.forEach(function(t){i.deleteRealPoint(t,e)}),delete t.activing,delete t.editing,delete t.tipInfo,delete t._pan,t._writeToShape(),t._interactor.fp("deleteShapePoint",!1,!0)}},Wh.prototype.handleDoubleClick=function(t){var e=this,i=e._interactor._getLogicalPoint(t);if(e.screenInfo&&e._checkEditRealPoint(i)){var n=e.getCurrentSelectintStatus(),r=bh.Curve.PointType;return n=n===r.Mirrored?r.Straight:r.Mirrored,e.setCurrentSelectionStatus(n),e._interactor._42(),!0}},Wh.prototype._drawHighlight=function(t){var e=this,i=e.highlight;if(i){var n=i.bezier,r=e._interactor;n&&bh.Icons.DrawIcon(r,t,bh.Icons.ShapeHighlightCurve,[n._p1.x,n._p1.y,n._p2.x,n._p2.y,n._p3.x,n._p3.y,n._p4.x,n._p4.y]);var o=i.point;o&&"insertKnot"===i.type&&bh.Icons.DrawIcon(r,t,bh.Icons.ShapeHighlighPoint,o)}},Wh.prototype._drawGuide=function(t){var e=this,i=e._guideInfo;if(i){var n,r,o,a,s=i.v;for(n=0;2>n;n++)if(a=0===n?i.xList:i.yList)for(r=0,o=a.length;o>r;r++)bh.Icons.DrawIcon(e._interactor,t,bh.Icons.ShapeGuideLine,[s.x,s.y,a[r].x,a[r].y])}},Wh.prototype._drawCurrentPoint=function(t){var e=this;if(e.activing){var i=e.activing,n=e.getCurrentSelectintStatus(),r=e._interactor;if(n!==bh.Curve.PointType.Straight){var o=i.pairs,a=i.hlpair,s=i.hltype,l=i.selections;if(o&&!l){var c,h,u;for(h=0,u=o.length;u>h;h++)c=o[h],h===a&&c[s]?bh.Icons.DrawIcon(r,t,bh.Icons.ShapeActivingCtrl,{point:c.point,c1:c.c1,c2:c.c2,hl:s}):bh.Icons.DrawIcon(r,t,bh.Icons.ShapeActivingCtrl,c)}}bh.Icons.DrawIcon(r,t,bh.Icons.ShapeHighlighRealPoint,e.activing.point),l&&l.forEach(function(e){bh.Icons.DrawIcon(r,t,bh.Icons.ShapeHighlighRealPoint,e)})}},Wh.prototype.clear=function(){var t=this;t.editing=null,t._guideInfo=null,t.activing=null,t.highlight=null},Wh.prototype._42=function(t){var e=this;e.info={},e.editing||(e.screenInfo=null);var i=e._interactor;return i.editDetail?e.target&&e._interactor.gv.isSelected(e.target)&&e._interactor.gv.isVisible(e.target)?(e.gatherSingleTarget(i.gv,e.target),bh.Icons.DrawIcon(i,t,bh.Icons.ShapeBgCurve,e.screenInfo),e._drawHighlight(t),e._drawCurrentPoint(t),e._getRealPoint().forEach(function(e){bh.Icons.DrawIcon(i,t,bh.Icons.ShapePoint,e)}),e._drawGuide(t),e.tipInfo&&bh.Icons.DrawIcon(i,t,bh.Icons.TipHelper,e.tipInfo),void 0):(i.editDetail=!1,e.clear(),void 0):(e.clear(),void 0)},Wh.prototype._getRealPoint=function(){var t=this.screenInfo,e=t.P,i=t.S,n=-1,r=[];return i.each(function(t){var i=1;if(3===t)i=2;else if(4===t)i=3;else if(5===t)return;n+=i,r.push({x:e[2*n],y:e[2*n+1]})}),r};var Jh=bh.MoveHelper=function(t){var e=this;e.catalog="Move",e._interactor=t};Jh.prototype={},Jh.prototype.constructor=Jh,Jh.prototype.calcShift=function(t,e,i){var n,r,o=this,a=o._interactor.gv,s=a.lp(e);if("beginMove"===t&&o._gatherGridInfo(i._lastLogicalPoint||s),n=o._target){var l=n.downPosition;if(l){var c=o._interactor.getStyle("moveSensitivity")/a._zoom;if(l.distanceTo(s)<c)return{x:0,y:0};delete n.downPosition}var u;r=h.Default.isShiftDown(e),r&&(s=o._dealShiftDown(s),u=n.shiftGuide.dir);var d,f=n.rawPos={x:n.pos.x+s.x-n.lp.x,y:n.pos.y+s.y-n.lp.y};if(h.Default.isCtrlDown(e)){if(d=o._calcShiftByAddon(),o._target.node instanceof bh.Group){var g=o._target.node;g._position.x+=d.x,g._position.y+=d.y}return d}for(var v,p=n.x+f.x,_=n.y+f.y,y={x:p,y:_},m={x:p+n.w/2,y:_+n.h/2},b={x:p+n.w,y:_+n.h},w=o._interactor.rectGuide,x=o._interactor.gridGuide,C=[w.findClosest(y,u),w.findClosest(m,u),w.findClosest(b,u),x.findClosest(y,u),x.findClosest(m,u),x.findClosest(b,u)],I=1/0,S=1/0,O=0,T=C.length;T>O;O++)v=C[O],v&&(p=v.x,_=v.y,isFinite(p)&&Math.abs(p)<Math.abs(I)&&(I=p),isFinite(_)&&Math.abs(_)<Math.abs(S)&&(S=_));if(isFinite(I)||(I=0),isFinite(S)||(S=0),d=o._calcShiftByAddon(I,S),o._target.node instanceof bh.Group){var g=o._target.node;g._position.x+=d.x,g._position.y+=d.y}var M=n.node,D=M instanceof h.Group&&M.isExpanded();if(!D){var P=f.x+I,k=f.y+S;o._interactor.rectGuide.gatherLines({node:M,x:n.x+P,y:n.y+k,w:n.w,h:n.h},u)}return d}},Jh.prototype._calcShiftByAddon=function(t,e){var i=this._target,n=i.rawPos,r=i.node.getPosition();return t=t||0,e=e||0,{x:n.x-r.x+t,y:n.y-r.y+e}},Jh.prototype._dealShiftDown=function(t){var e=this,i=e._target.shiftGuide,n=e._target.lp,r=Math.abs(t.x-n.x),o=Math.abs(t.y-n.y);r>o&&r>i.limit&&"y"===i.dir&&(i.dir="x"),o>r&&o>i.limit&&"x"===i.dir&&(i.dir="y");var a=i.dir;return"x"===a?(t.y=n.y,i.limit=Math.max(i.limit,r)):"y"===a&&(t.x=n.x,i.limit=Math.max(i.limit,o)),t},Jh.prototype._gatherGridInfo=function(t){var e,i=this,n=i._interactor,r=n._getValidSelection();if(1===r.length){if(e=r[0],!e.getRect)return i._target=null,void 0}else if(e=bh.Group.findOrCreateGroup(r),!e)return i._target=null,void 0;var o=e.getPosition(),a=e.getRect();i._target={node:e,x:a.x-o.x,y:a.y-o.y,w:a.width,h:a.height,lp:{x:t.x,y:t.y},pos:{x:o.x,y:o.y},shiftGuide:{dir:"x",limit:0},downPosition:new bh.Math.Vector2(t)},n.rectGuide.gatherRects()},Jh.prototype.clear=function(){var t=this;t._interactor.rectGuide.clear(),t._interactor._42()};var $h="directional",Kh="point",tu="spot",eu="light.color";Pn(d,{graph3dViewAttributes:c,graph3dViewFirstPersonMode:!1,graph3dViewMouseRoamable:!0,graph3dViewMoveStep:15,graph3dViewRotateStep:D/60,graph3dViewPannable:!0,graph3dViewRotatable:!0,graph3dViewWalkable:!0,graph3dViewResettable:!0,graph3dViewZoomable:!0,graph3dViewRectSelectable:!0,graph3dViewRectSelectBackground:Ao,graph3dViewGridVisible:!1,graph3dViewGridSize:50,graph3dViewGridGap:50,graph3dViewGridColor:[.4,.75,.85,1],graph3dViewOriginAxisVisible:!1,graph3dViewCenterAxisVisible:!1,graph3dViewAxisXColor:[1,0,0,1],graph3dViewAxisYColor:[0,1,0,1],graph3dViewAxisZColor:[0,0,1,1],graph3dViewEditSizeColor:[1,1,0,1],graph3dViewOrtho:!1,graph3dViewOrthoWidth:2e3,graph3dViewFovy:D/4,graph3dViewNear:10,graph3dViewFar:1e4,graph3dViewEye:[0,300,1e3],graph3dViewCenter:[0,0,0],graph3dViewUp:[0,1,-1e-7],graph3dViewHeadlightRange:0,graph3dViewHeadlightColor:[1,1,1,1],graph3dViewHeadlightIntensity:1,graph3dViewHeadlightDisabled:!1,graph3dViewFogDisabled:!0,graph3dViewFogColor:"white",graph3dViewFogNear:1,graph3dViewFogFar:2e3,graph3dViewDashDisabled:!0,graph3dViewBatchBlendDisabled:!0,graph3dViewBatchBrightnessDisabled:!0,graph3dViewBatchColorDisabled:!1,setShape3dModel:function(t,e){ki[t]=e},getShape3dModel:function(t){return ki[t]},createMatrix:function(t,e){mn(t)||(t=[t]);for(var i=t.length-1;i>=0;i--){var n=t[i];e=Ns(n.mat,n.s3,n.r3,n.rotationMode,n.t3,e)}return e},transformVec:function(t,e){return As(t,e)},createBoxModel:function(){return{vs:Xd,ns:Jd,uv:qd,is:Yd}},createRoundRectModel:function(t,e){return cf.roundRect(t,e)},createStarModel:function(t,e){return cf.star(t,e)},createRectModel:function(t,e){return cf.rect(t,e)},createTriangleModel:function(t,e){return cf.triangle(t,e)},createRightTriangleModel:function(t,e){return cf.rightTriangle(t,e)},createParallelogramModel:function(t,e){
return cf.parallelogram(t,e)},createTrapezoidModel:function(t,e){return cf.trapezoid(t,e)},createSmoothSphereModel:function(t,e,i,n,r,o,a){return tc(new Lc(t,e,i,n,r,o,a))},createSphereModel:function(t,e,i,n,r,o){return t?tf(t,e,i,n,r,o):d.createSmoothSphereModel()},createSmoothConeModel:function(t,e,i,n,r){return af(t,e,i,n,r)},createConeModel:function(t,e,i,n,r,o){return t?sf(t,e,i,n,r,o):af(o)},createSmoothCylinderModel:function(t,e,i,n,r,o,a,s){return tc(new Bc(t,e,i,n,r,o,a,s))},createCylinderModel:function(t,e,i,n,r,o,a){return t?of(t,e,i,n,r,o,a):rf(o,a)},createSmoothTorusModel:function(t,e,i,n,r,o){return tc(new zc(t,e,i,n,r,o))},createTorusModel:function(t,e,i,n,r,o,a){return t?nf(t,e,i,n,r,o,a):ef(o,a)},createExtrusionModel:function(t,e,i,n,r,o,a,s){return lf(t,e,i,n,r,o,a,s)},createSmoothRingModel:function(t,e,i,n,r,o){for(var a=[],s=0;s<t.length-1;s+=2)a.push({x:t[s],y:t[s+1]});for(t=so(a,e,i)[0],a=[],s=0;s<t.length;s++){var l=t[s];a.push(new rc(l.x,0,l.y))}return tc(new Wc(a,o,n,r))},createTextGeometry:function(t,e){return tc(new Hc(t,e))},loadFontFace:function(t,e){d.xhrLoad(t,function(t){if(!t)return e();var i;try{i=JSON.parse(t)}catch(e){i=JSON.parse(t.substring(65,t.length-2))}Sc.loadFace(i),e&&e(i.familyName.toLowerCase())},e?null:{sync:!0})},createRingModel:function(t,e,i,n,r,o,a,s,l,h){for(var u=[],f=0;f<t.length-1;f+=2)u.push({x:t[f],y:t[f+1]});o=o||d.shapeSide,a=a||0,s=s||o;var g,v,p,_,y,m,b,w,x,C,f,S,T,M,D,P,k,E,V=[],R=[],B=l?[]:c,L=l?[]:c,z=h?[]:c,A=h?[]:c,j=n?[]:c,F=n?[]:c,W=r?[]:c,H=r?[]:c,t=so(u,e,i),G=Xn(t),U=0,N=2*Math.PI/o;return t.forEach(function(t){if(p=t.length,p>1){if(_=t[0],n)for(m=_.x,w=_.y,f=a;s>f;f++)S=f+1,T=f*N,M=S*N,D=I(T),P=O(T),k=I(M),E=O(M),j.push(D*m,w,-P*m,k*m,w,-E*m,0,w,0),F.push(.5-.5*D,.5-.5*P,.5-.5*k,.5-.5*E,.5,.5);for(C=0;p>C;C++){for(y=t[C],m=_.x,b=y.x,w=_.y,x=y.y,g=U/G,U+=ls(_,y),v=U/G,f=a;s>f;f++)S=f+1,T=f*N,M=S*N,D=I(T),P=O(T),k=I(M),E=O(M),V.push(D*b,x,-P*b,k*b,x,-E*b,D*m,w,-P*m,k*b,x,-E*b,k*m,w,-E*m,D*m,w,-P*m),R.push(f/o,v,S/o,v,f/o,g,S/o,v,S/o,g,f/o,g),l&&f===a&&(B.push(0,w,0,0,x,0,D*b,x,-P*b,D*b,x,-P*b,D*m,w,-P*m,0,w,0),L.push(0,.5-w,0,.5-x,2*b,.5-x,2*b,.5-x,2*m,.5-w,0,.5-w)),h&&S===s&&(z.push(0,w,0,k*b,x,-E*b,0,x,0,k*b,x,-E*b,0,w,0,k*m,w,-E*m),A.push(1,.5-w,1-2*b,.5-x,1,.5-x,1-2*b,.5-x,1,.5-w,1-2*m,.5-w));_=y}if(r)for(m=_.x,w=_.y,f=a;s>f;f++)S=f+1,T=f*N,M=S*N,D=I(T),P=O(T),k=I(M),E=O(M),W.push(k*m,w,-E*m,D*m,w,-P*m,0,w,0),H.push(.5-.5*k,.5+.5*E,.5-.5*D,.5+.5*P,.5,.5)}}),{vs:V,uv:R,bottom_vs:W,bottom_uv:H,top_vs:j,top_uv:F,from_vs:B,from_uv:L,to_vs:z,to_uv:A}}},!0),Pn(f,{"3d.move.mode":i,"3d.selectable":!0,"3d.visible":!0,"3d.movable":!0,"3d.editable":!0,"shape.border.gradient.color":i,"edge.gradient.color":i,"edge.source.t3":i,"edge.target.t3":i,"light.type":Kh,"light.center":[0,0,0],"light.color":[1,1,1,1],"light.disabled":!1,"light.angle":D/4,"light.range":0,"light.exponent":1,"light.intensity":1,"wf.visible":!1,"wf.width":1,"wf.color":Jo,"wf.short":!1,"wf.mat":i,batch:i,"transparent.mask":!1,brightness:i,"select.brightness":.7,"repeat.uv.length":i,"label.face":it,"label.t3":i,"label.r3":i,"label.texture.scale":2,"label.rotationMode":Qc,"label.light":!1,"label.blend":i,"label.reverse.flip":!1,"label.reverse.color":Lo,"label.reverse.cull":!1,"label.transparent":!1,"label.autorotate":!1,"label2.face":it,"label2.t3":i,"label2.r3":i,"label2.texture.scale":2,"label2.rotationMode":Qc,"label2.light":!1,"label2.blend":i,"label2.reverse.flip":!1,"label2.reverse.color":Lo,"label2.reverse.cull":!1,"label2.transparent":!1,"label2.autorotate":!1,"note.face":it,"note.t3":i,"note.r3":i,"note.texture.scale":2,"note.rotationMode":Qc,"note.light":!1,"note.blend":i,"note.reverse.flip":!1,"note.reverse.color":Lo,"note.reverse.cull":!1,"note.transparent":!1,"note.autorotate":!1,"note2.face":it,"note2.t3":i,"note2.r3":i,"note2.texture.scale":2,"note2.rotationMode":Qc,"note2.light":!1,"note2.blend":i,"note2.reverse.flip":!1,"note2.reverse.color":Lo,"note2.reverse.cull":!1,"note2.transparent":!1,"note2.autorotate":!1,shape3d:i,"shape3d.color":qo,"shape3d.top.color":i,"shape3d.bottom.color":i,"shape3d.from.color":i,"shape3d.to.color":i,"shape3d.image":i,"shape3d.top.image":i,"shape3d.bottom.image":i,"shape3d.from.image":i,"shape3d.to.image":i,"shape3d.light":!0,"shape3d.side":0,"shape3d.side.from":i,"shape3d.side.to":i,"shape3d.visible":!0,"shape3d.from.visible":!0,"shape3d.to.visible":!0,"shape3d.top.visible":!0,"shape3d.bottom.visible":!0,"shape3d.torus.radius":.17,"shape3d.resolution":0,"shape3d.blend":i,"shape3d.opacity":i,"shape3d.reverse.flip":!1,"shape3d.reverse.color":Lo,"shape3d.reverse.cull":!1,"shape3d.transparent":!1,"shape3d.uv.offset":i,"shape3d.uv.scale":i,"shape3d.top.uv.offset":i,"shape3d.top.uv.scale":i,"shape3d.bottom.uv.offset":i,"shape3d.bottom.uv.scale":i,"shape3d.from.uv.offset":i,"shape3d.from.uv.scale":i,"shape3d.to.uv.offset":i,"shape3d.to.uv.scale":i,"shape3d.top.cap":i,"shape3d.bottom.cap":i,"shape3d.start.angle":0,"shape3d.sweep.angle":P,"shape3d.discard.selectable":!0,"shape3d.top.discard.selectable":!0,"shape3d.bottom.discard.selectable":!0,"shape3d.from.discard.selectable":!0,"shape3d.to.discard.selectable":!0,"shape3d.scaleable":!0,"all.light":!0,"all.visible":!0,"all.color":qo,"all.image":i,"all.blend":i,"all.opacity":i,"all.reverse.flip":!1,"all.reverse.color":Lo,"all.reverse.cull":!1,"all.transparent":!1,"all.uv":i,"all.uv.offset":i,"all.uv.scale":i,"all.discard.selectable":!0,mat:i,"left.mat":i,"right.mat":i,"top.mat":i,"bottom.mat":i,"front.mat":i,"back.mat":i},!0);var iu,nu=!1,ru=[0,0,0,1/255],ou={left:[1/255,0,0,1],right:[2/255,0,0,1],top:[3/255,0,0,1],bottom:[4/255,0,0,1],front:[5/255,0,0,1],back:[6/255,0,0,1],m:{1:rt,2:ot,3:at,4:st,5:it,6:nt}},au=function(t,e,i,n){if(e.getFaceVisible(t,i)){ad(e,Us(t,e.getFaceMat(t,i)||e.getMat(t)));var r=e._26I;e.getFaceReverseCull(t,i)?r.enable(r.CULL_FACE):r.disable(r.CULL_FACE),ed(r,e._prg.uFixPickReverseColor,ou[i]),Yu(r),$u(r,n,6),qu(r),rd(e)}},su=function(t){return t instanceof Of},lu=function(t){return[t.x,t.e||0,t.y]},cu=function(t,e,i){for(var e=$r(e),n=e[0],r=e[1],o=e[2];i--;)t.push(n,r,o)},hu=function(t,e,i){for(var e=$r(e),n=e[0],r=e[1],o=e[2],a=e[3];i--;)t.push(n,r,o,a)},uu=function(t,e,i){if(e)for(var n,r,o,a=e[0],s=e[1],l=e[2],c=e[4],h=e[5],u=e[6],d=e[8],f=e[9],g=e[10],v=e[12],p=e[13],_=e[14],y=i.length,m=0,m=0;y>m;m+=3)n=i[m],r=i[m+1],o=i[m+2],t.push(a*n+c*r+d*o+v,s*n+h*r+f*o+p,l*n+u*r+g*o+_);else Mn(t,i)},du=function(t,e){var i=e.s("light.intensity"),n=$r(e.s(eu)),r=n[0],o=n[1],a=n[2];1!==i&&(r*=i,o*=i,a*=i),t.push(r,o,a,e.s("light.disabled")?1:0)},fu=function(t,e,i){ed(e,i.uHeadlightRange,t._headlightRange);var n=t._headlightIntensity,r=$r(t._headlightColor);1!==n&&(r=[r[0]*n,r[1]*n,r[2]*n]),ed(e,i.uHeadlightColor,[r[0],r[1],r[2],t._headlightDisabled?1:0]);var o=t._59O,a=t._spots,s=t._dirs;if(o.length){var l=[],c=[],h=[];o.forEach(function(t){du(l,t),Mn(c,t.p3()),h.push(t.s("light.range"))}),e.uniform4fv(i.uPointColor,l),e.uniform1fv(i.uPointRange,h),e.uniform3fv(i.uPointPosition,c)}if(a.length){var u=[],d=[],f=[],g=[],v=[],p=[];a.forEach(function(t){du(u,t),Mn(d,t.p3()),Mn(f,t.s("light.center")),g.push(t.s("light.range")),v.push(I(t.s("light.angle")/2)),p.push(t.s("light.exponent"))}),e.uniform4fv(i.uSpotColor,u),e.uniform1fv(i.uSpotRange,g),e.uniform1fv(i.uSpotAngle,v),e.uniform1fv(i.uSpotExponent,p),e.uniform3fv(i.uSpotPosition,d),e.uniform3fv(i.uSpotCenter,f)}if(s.length){var _=[],y=[];s.forEach(function(t){du(_,t),Mn(y,t.p3())}),e.uniform4fv(i.uDirColor,_),e.uniform3fv(i.uDirPosition,y)}},gu=function(t){return t>0&&0===(t-1&t)},vu=function(t){return t=w(0,x(D,t)),t=w(Ts,x(D-Ts,t))},pu=function(){return.05+B()/2},_u=function(t,e,i,n){var r,o=t.getEye();return t.isOrtho()?(r=Ps(t.getCenter(),o),r[0]+=n[0],r[1]+=n[1],r[2]+=n[2]):r=o,yu(e,i,n,r)},yu=function(t,e,i,n){var r=Es(t,e),o=Ps(n,i,!0),a=Es(o,e);if(C(a)<Ts)return c;var s=(r-Es(i,e))/a;return[i[0]+o[0]*s,i[1]+o[1]*s,i[2]+o[2]*s]},mu=function(t,e){return{x:2*t.x-e.x,y:2*t.y-e.y}},bu=function(t,e,i,n){var r,o;if(!t)return r=R(e.y-i.y,i.x-e.x),{x:e.x+n*O(r),y:e.y+n*I(r)};if(!i)return r=R(t.y-e.y,e.x-t.x),{x:e.x+n*O(r),y:e.y+n*I(r)};var a=Ps([t.x,t.y,0],[e.x,e.y,0],!0),s=Ps([i.x,i.y,0],[e.x,e.y,0],!0),l=-(a[0]+s[0])/2,c=-(a[1]+s[1])/2,h=b(l*l+c*c);if(Ts>h)return r=R(t.y-e.y,e.x-t.x),{x:e.x+n*O(r),y:e.y+n*I(r)};var u=t.x-e.x,d=t.y-e.y,f=i.x-e.x,g=i.y-e.y,v=b(Math.min(u*u+d*d,f*f+g*g));return r=S(Es(a,s))/2,o=a[1]*s[0]-a[0]*s[1]>0?-1:1,l/=h,c/=h,h=Math.min(n/O(r),v/I(r)),{x:e.x+o*h*l,y:e.y+o*h*c}},wu=function(t){var e=t[1],i=t[2],n=t[3],r=t[6],o=t[7],a=t[11];t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=e,t[6]=t[9],t[7]=t[13],t[8]=i,t[9]=r,t[11]=t[14],t[12]=n,t[13]=o,t[14]=a},xu=function(t){var e=t[0],i=t[1],n=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],h=t[8],u=t[9],d=t[10],f=t[11],g=t[12],v=t[13],p=t[14],_=t[15],y=e*a-i*o,m=e*s-n*o,b=e*l-r*o,w=i*s-n*a,x=i*l-r*a,C=n*l-r*s,I=h*v-u*g,S=h*p-d*g,O=h*_-f*g,T=u*p-d*v,M=u*_-f*v,D=d*_-f*p,P=y*D-m*M+b*T+w*O-x*S+C*I;return P?(P=1/P,t[0]=(a*D-s*M+l*T)*P,t[1]=(n*M-i*D-r*T)*P,t[2]=(v*C-p*x+_*w)*P,t[3]=(d*x-u*C-f*w)*P,t[4]=(s*O-o*D-l*S)*P,t[5]=(e*D-n*O+r*S)*P,t[6]=(p*b-g*C-_*m)*P,t[7]=(h*C-d*b+f*m)*P,t[8]=(o*M-a*O+l*I)*P,t[9]=(i*O-e*M-r*I)*P,t[10]=(g*x-v*b+_*y)*P,t[11]=(u*b-h*x-f*y)*P,t[12]=(a*S-o*T-s*I)*P,t[13]=(e*T-i*S+n*I)*P,t[14]=(v*m-g*w-p*y)*P,t[15]=(h*w-u*m+d*y)*P,void 0):c},Cu=function(t,e){if(e){var i=e[0],n=e[1],r=e[2];t[12]=t[0]*i+t[4]*n+t[8]*r+t[12],t[13]=t[1]*i+t[5]*n+t[9]*r+t[13],t[14]=t[2]*i+t[6]*n+t[10]*r+t[14],t[15]=t[3]*i+t[7]*n+t[11]*r+t[15]}},Iu=function(t,e){if(e){var i=e[0],n=e[1],r=e[2];t[0]=t[0]*i,t[1]=t[1]*i,t[2]=t[2]*i,t[3]=t[3]*i,t[4]=t[4]*n,t[5]=t[5]*n,t[6]=t[6]*n,t[7]=t[7]*n,t[8]=t[8]*r,t[9]=t[9]*r,t[10]=t[10]*r,t[11]=t[11]*r}},Su=function(t,e,i){var n=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],h=e[7],u=e[8],d=e[9],f=e[10],g=e[11],v=e[12],p=e[13],_=e[14],y=e[15],m=i[0],b=i[1],w=i[2],x=i[3];return t[0]=m*n+b*s+w*u+x*v,t[1]=m*r+b*l+w*d+x*p,t[2]=m*o+b*c+w*f+x*_,t[3]=m*a+b*h+w*g+x*y,m=i[4],b=i[5],w=i[6],x=i[7],t[4]=m*n+b*s+w*u+x*v,t[5]=m*r+b*l+w*d+x*p,t[6]=m*o+b*c+w*f+x*_,t[7]=m*a+b*h+w*g+x*y,m=i[8],b=i[9],w=i[10],x=i[11],t[8]=m*n+b*s+w*u+x*v,t[9]=m*r+b*l+w*d+x*p,t[10]=m*o+b*c+w*f+x*_,t[11]=m*a+b*h+w*g+x*y,m=i[12],b=i[13],w=i[14],x=i[15],t[12]=m*n+b*s+w*u+x*v,t[13]=m*r+b*l+w*d+x*p,t[14]=m*o+b*c+w*f+x*_,t[15]=m*a+b*h+w*g+x*y,t},Ou=function(t,e,i,n){var r,o,a,s,l,c,h,u,d,f,g=e[0],v=e[1],p=e[2],_=n[0],y=n[1],m=n[2],w=i[0],x=i[1],I=i[2];return C(g-w)<Ts&&C(v-x)<Ts&&C(p-I)<Ts?zs(t):(h=g-w,u=v-x,d=p-I,f=1/b(h*h+u*u+d*d),h*=f,u*=f,d*=f,r=y*d-m*u,o=m*h-_*d,a=_*u-y*h,f=b(r*r+o*o+a*a),f?(f=1/f,r*=f,o*=f,a*=f):(r=0,o=0,a=0),s=u*a-d*o,l=d*r-h*a,c=h*o-u*r,f=b(s*s+l*l+c*c),f?(f=1/f,s*=f,l*=f,c*=f):(s=0,l=0,c=0),t[0]=r,t[1]=s,t[2]=h,t[3]=0,t[4]=o,t[5]=l,t[6]=u,t[7]=0,t[8]=a,t[9]=c,t[10]=d,t[11]=0,t[12]=-(r*g+o*v+a*p),t[13]=-(s*g+l*v+c*p),t[14]=-(h*g+u*v+d*p),t[15]=1,t)},Tu=function(t,e,i,n,r){var o=1/V(e/2),a=1/(n-r);return t[0]=o/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+n)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*n*a,t[15]=0,t},Mu=function(t,e,i,n,r,o,a){var s=1/(e-i),l=1/(n-r),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*s,t[13]=(r+n)*l,t[14]=(a+o)*c,t[15]=1,t},Du=function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],a=i*i+n*n+r*r+o*o,s=a?1/a:0;return t[0]=-i*s,t[1]=-n*s,t[2]=-r*s,t[3]=o*s,t},Pu=function(t,e){var i=e[0]+e[5]+e[10],n=0;return i>0?(n=2*Math.sqrt(i+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t},ku=function(t,e,i){var n=e[0],r=e[1],o=e[2],a=e[3],s=n+n,l=r+r,c=o+o,h=n*s,u=n*l,d=n*c,f=r*l,g=r*c,v=o*c,p=a*s,_=a*l,y=a*c;return t[0]=1-(f+v),t[1]=u+y,t[2]=d-_,t[3]=0,t[4]=u-y,t[5]=1-(h+v),t[6]=g+p,t[7]=0,t[8]=d+_,t[9]=g-p,t[10]=1-(h+f),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Eu=function(t,e){return Ou(e?e:Vs(),t._eye,t._center,t._up)},Vu=function(t){var e=t.getAspect(),i=t._near,n=t._far,r=Vs();if(t._ortho){var o=t._orthoWidth/2,a=o/e;Mu(r,-o,o,-a,a,i,n)}else Tu(r,t._fovy,e,i,n);return r},Ru=function(t,e){if(!t)return c;var i=0,n=1,r=2,o=[],a=0,s=t.length,l=s/3;if(e){for(;s>a;a++)o[a]=0;for(a=0;a<e.length;a+=3){var h=[],u=[],d=[];h[i]=t[3*e[a+1]+i]-t[3*e[a]+i],h[n]=t[3*e[a+1]+n]-t[3*e[a]+n],h[r]=t[3*e[a+1]+r]-t[3*e[a]+r],u[i]=t[3*e[a+2]+i]-t[3*e[a+1]+i],u[n]=t[3*e[a+2]+n]-t[3*e[a+1]+n],u[r]=t[3*e[a+2]+r]-t[3*e[a+1]+r],d[i]=h[n]*u[r]-h[r]*u[n],d[n]=h[r]*u[i]-h[i]*u[r],d[r]=h[i]*u[n]-h[n]*u[i];for(var f=0;3>f;f++)o[3*e[a+f]+i]+=d[i],o[3*e[a+f]+n]+=d[n],o[3*e[a+f]+r]+=d[r]}}else for(a=0;l>a;a+=3){var h=[],u=[],d=[];h[i]=t[3*(a+1)+i]-t[3*a+i],h[n]=t[3*(a+1)+n]-t[3*a+n],h[r]=t[3*(a+1)+r]-t[3*a+r],u[i]=t[3*(a+2)+i]-t[3*(a+1)+i],u[n]=t[3*(a+2)+n]-t[3*(a+1)+n],u[r]=t[3*(a+2)+r]-t[3*(a+1)+r],d[i]=h[n]*u[r]-h[r]*u[n],d[n]=h[r]*u[i]-h[i]*u[r],d[r]=h[i]*u[n]-h[n]*u[i];for(var f=0;3>f;f++)o[3*(a+f)+i]=d[i],o[3*(a+f)+n]=d[n],o[3*(a+f)+r]=d[r]}for(a=0;s>a;a+=3){var g=[];g[i]=o[a+i],g[n]=o[a+n],g[r]=o[a+r];var v=b(g[i]*g[i]+g[n]*g[n]+g[r]*g[r]);0===v&&(v=Ts),g[i]=g[i]/v,g[n]=g[n]/v,g[r]=g[r]/v,o[a+i]=g[i],o[a+n]=g[n],o[a+r]=g[r]}return new Ds(o)},Bu=function(t,e,i){if(i||(i=t.createTexture()),e){var n=t.TEXTURE_2D,r=t.LINEAR,o=t.REPEAT,a=t.CLAMP_TO_EDGE,s=t.TEXTURE_MIN_FILTER;Fu(t,i),t.texImage2D(n,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),Hu(t,t.TEXTURE_MAG_FILTER,r),gu(e.width)&&gu(e.height)?(Hu(t,t.TEXTURE_WRAP_S,o),Hu(t,t.TEXTURE_WRAP_T,o),Hu(t,s,t.LINEAR_MIPMAP_LINEAR),t.generateMipmap(n)):(Hu(t,t.TEXTURE_WRAP_S,a),Hu(t,t.TEXTURE_WRAP_T,a),Hu(t,s,r)),Fu(t,c)}return i},Lu=function(t,e){var i=new Uint8Array(3);return e=e||t.createTexture(),Fu(t,e),Hu(t,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGB,1,1,0,t.RGB,t.UNSIGNED_BYTE,i),e},zu=function(t){t._26I&&t._prg&&(t._26I.deleteProgram(t._prg),t._prg=c)},Au=function(t,e,i,n){var r=t.createShader(i);return t.shaderSource(r,n),t.compileShader(r),t.attachShader(e,r),r},ju=function(t){return t.createBuffer()},Fu=function(t,e){t.bindTexture(t.TEXTURE_2D,e)},Wu=function(t,e){t.bindFramebuffer(t.FRAMEBUFFER,e)},Hu=function(t,e,i){t.texParameteri(t.TEXTURE_2D,e,i)},Gu=function(t,e){if(e){var e=$r(e);t.clearColor(e[0],e[1],e[2],e[3])}},Uu=function(t,e){ed(t,e.uFix,!0),nd(t,e.aNormal)},Nu=function(t,e){ed(t,e.uFix,!1),id(t,e.aNormal)},Qu=function(t,e,i,n,r,o,a,s){t._picking||(i?(ed(t,e.uBlend,!0),ed(t,e.uBlendColor,i)):ed(t,e.uBlend,!1),ed(t,e.uLight,n==c?!0:n),vn(r)&&1!==r&&ed(t,e.uPartOpacity,r),ed(t,e.uReverseFlip,o==c?!1:o),ed(t,e.uFixPickReverseColor,a||Lo)),s?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE)},Xu=function(t,e){t._picking||ed(t,e.uPartOpacity,1)},Yu=function(t,e,i,n,r,o,a,s){if(!i)return Fu(t,t._emptyTexture),void 0;ed(t,e.uTexture,!0),ed(t,e.uDiscardSelectable,pn(n)?n:!0),id(t,e.aUv),Ku(t,r,o,e.aUv,2),t.activeTexture(t.TEXTURE0),Fu(t,i),t.uniform1i(e.uSampler,0);var l=[0,0,1,1];a&&(l[0]=a[0],l[1]=a[1]),s&&(l[2]=s[0],l[3]=s[1]),ed(t,e.uOffsetScale,l)},qu=function(t,e,i){Fu(t,c),i&&(nd(t,e.aUv),ed(t,e.uTexture,!1))},Zu=function(t,e,i,n,r,o){!i||X||q||t.lineWidth(i),n&&!t._picking&&ed(t,e.uFixPickReverseColor,n),r&&Ku(t,r,o,e.aPosition)},Ju=function(t,e,i,n){iu&&(n=t[iu]),t.drawArrays(n==c?t.TRIANGLES:n,e,i)},$u=function(t,e,i,n){iu&&(n=t[iu]),t.drawElements(n==c?t.TRIANGLES:n,i,t.UNSIGNED_SHORT,e==c?0:2*e)},Ku=function(t,e,i,n,r){var o=t.ARRAY_BUFFER;t.bindBuffer(o,e),i&&t.bufferData(o,i,t.STATIC_DRAW),n!=c&&t.vertexAttribPointer(n,r?r:3,t.FLOAT,!1,0,0)},td=function(t,e,i){var n=t.ELEMENT_ARRAY_BUFFER;t.bindBuffer(n,e),i&&t.bufferData(n,i,t.STATIC_DRAW)},ed=function(t,e,i){if(i!=c&&e!=c){i=$r(i);var n=i.length;3===n?t.uniform3fv(e,i):4===n?t.uniform4fv(e,i):16===n?t.uniformMatrix4fv(e,!1,i):pn(i)?t.uniform1i(e,i?1:0):2===n?t.uniform2fv(e,i):t.uniform1f(e,i)}},id=function(t,e){e!=c&&e>=0&&t.enableVertexAttribArray(e)},nd=function(t,e){e!=c&&e>=0&&t.disableVertexAttribArray(e)},rd=function(t,e){var i=t.getGL(),n=t._prg;t._7O=t._8O.pop(),e&&(ed(i,n.uMVMatrix,t._7O),t._6O=e,ed(i,n.uNMatrix,e))},od=function(t,e){return e||(e=Vs()),Ls(e,t),xu(e),wu(e),e},ad=function(t,e){var i=t.getGL(),n=t._prg,r=t._7O;e&&(t._8O.push(Bs(r)),Su(r,r,e)),ed(i,n.uMVMatrix,r),ed(i,n.uNMatrix,od(r,t._6O))},sd=function(t,e,i,n,r,o){if(i){if(n){var a=i.value++,s=[(255&a>>24)/255,(255&a>>16)/255,(255&a>>8)/255,(255&a)/255];i[a]={data:r,part:o}}else s=ru;return ed(t,e.uFixPickReverseColor,s),s}},ld=function(){var t={center:function(t,e,i,n,r){var o=e[1]/2,a={x:-e[0]/2,y:o,width:e[0],height:e[1]},s=Bo(t,a,i);return[s.x+n,2*o-s.y-r,pu()]},front:function(t,e,i,n,r){var o=e[1]/2,a={x:-e[0]/2,y:o,width:e[0],height:e[1]},s=Bo(t,a,i);return[s.x+n,2*o-s.y-r,e[2]/2+pu()]},back:function(t,e,i,n,r){var o=e[0]/2,a=e[1]/2,s={x:o,y:a,width:e[0],height:e[1]},l=Bo(t,s,i);return[2*o-l.x-n,2*a-l.y-r,-e[2]/2-pu()]},left:function(t,e,i,n,r){var o=e[1]/2,a={x:-e[2]/2,y:o,width:e[2],height:e[1]},s=Bo(t,a,i);return[-e[0]/2-pu(),2*o-s.y-r,s.x+n]},right:function(t,e,i,n,r){var o=e[2]/2,a=e[1]/2,s={x:o,y:a,width:e[2],height:e[1]},l=Bo(t,s,i);return[e[0]/2+pu(),2*a-l.y-r,2*o-l.x-n]},top:function(t,e,i,n,r){var o={x:-e[0]/2,y:-e[2]/2,width:e[0],height:e[2]},a=Bo(t,o,i);return[a.x+n,e[1]/2+pu(),a.y+r]},bottom:function(t,e,i,n,r){var o=e[2]/2,a={x:-e[0]/2,y:o,width:e[0],height:e[2]},s=Bo(t,a,i);return[s.x+n,-e[1]/2-pu(),2*o-s.y-r]}};return function(e,i,n,r,o,a){return t[r](e,i,n,o||0,a||0)}}(),cd=function(t,e,i,n,r,o,a,s,l,c){if(r&&(e[0]+=r[0],e[1]+=r[1],e[2]+=r[2]),Cu(t,i),s){var h=Vs();if(Xc(h,l,c),As(e,h),Cu(t,e),t.auto=s,t.pos=As([0,0,0],t),o){var u=t.mat2=Vs();Xc(u,o,a)}}else Xc(t,l,c),Cu(t,e),n===rt?Hs(t,-E):n===ot?Hs(t,E):n===at?Ws(t,-E):n===st?Ws(t,E):n===nt&&Hs(t,D),Xc(t,o,a);return t},hd=function(t,e){var i=e.auto,n=e.mat2,r=t.gv;if(i){var o,a=Vs(),s=[0,0,0,0];o="string"==typeof i?[i.indexOf("x")<0?r._eye[0]:r._center[0],i.indexOf("y")<0?r._eye[1]:r._center[1],i.indexOf("z")<0?r._eye[2]:r._center[2]]:r._eye,Pu(s,Ou(Vs(),o,r._center,r._up)),ku(a,Du(s,s),e.pos),n&&Su(a,a,n),ad(r,a)}else ad(r,e)},ud=function(t,e,i,n,r){var o=t.s,a=t.gv,s=a.getGL(),l=a._prg,c=a._buffer,h=a._1O;Bu(s,Yr,h),hd(t,i),Qu(s,l,o(e+".blend"),o(e+".light"),o(e+".opacity"),o(e+".reverse.flip"),o(e+".reverse.color"),o(e+".reverse.cull")),Yu(s,l,h,r,c.uv,Ud),Ku(s,c.vs,n,l.aPosition),Ku(s,c.ns,Nd,l.aNormal),td(s,c.is,Qd),$u(s,0,Qd.length),qu(s,l,h),Xu(s,l),rd(a)},dd=function(t,e,i){var n=t.gv,r=t.data,o=t[e]={blend:n.getBodyColor(r)||n.getFaceBlend(r,e),light:n.getFaceLight(r,e),color:n.getFaceColor(r,e),opacity:n.getFaceOpacity(r,e),transparent:n.getFaceTransparent(r,e),reverseFlip:n.getFaceReverseFlip(r,e),reverseColor:n.getFaceReverseColor(r,e),reverseCull:n.getFaceReverseCull(r,e),texture:n.getFaceImage(r,e),discardSelectable:n.getFaceDiscardSelectable(r,e)};if("csg"!==e){o.uv=n.getFaceUv(r,e)||i&&i[e+"Uv"],o.uvScale=n.getFaceUvScale(r,e)||i&&i[e+"UvScale"],o.uvOffset=n.getFaceUvOffset(r,e)||i&&i[e+"UvOffset"];var a=n.getFaceMat(r,e);a&&(o.mat=Us(r,a))}return o},fd=function(t,e,i,n,r){if(n){if(!r(n.transparent))return;var o=t.data,a=t.gv,s=a._buffer,l=a.getTexture(n.texture,o);Yu(e,i,l,n.discardSelectable,s.uv,n.tuv,n.uvOffset,n.uvScale),Qu(e,i,n.blend,n.light,n.opacity,n.reverseFlip,n.reverseColor,n.reverseCull),ed(e,i.uDiffuse,n.color),Ku(e,s.vs,n.vs,i.aPosition),Ku(e,s.ns,n.ns,i.aNormal),Ju(e,0,n.vs.length/3),Xu(e,i),qu(e,i,l)}},gd=function(t,e,i,n,r,o){var a,s,l,c,h,u,d,f,g,v,p,_=[n-e,r-i],y=t?t.length:0;for(l=0;y>l;l++){for(c=2,a=t[l],h=a[0],u=a[1];c+1<a.length;){if(d=a[c],f=a[c+1],s=Wn(e,i,n,r,h,u,d,f,!0)){g=[d-h,f-u],v=ls(g),g[0]/=v,g[1]/=v,v=Es(_,g),v=v>0?o:-o,p=[g[0]*v,g[1]*v];break}h=d,u=f,c+=2}if(p)break}if(p)for(n=e+p[0],r=i+p[1],l=0;y>l;l++)for(c=2,a=t[l],h=a[0],u=a[1];c+1<a.length;){if(d=a[c],f=a[c+1],s=Wn(e,i,n,r,h,u,d,f,!0))return[0,0];h=d,u=f,c+=2}return p?p:[n-e,r-i]},vd=h.graph3d={},pd=function(t,e,i){Is(n+".graph3d."+t,e,i)},_d="~<yfusfw!+!yjsubNQv!>!opjujtpQ`mh\v!gjeof$!\v~<fdobutjEfojMb!>!fdobutjEfojMw|*itbEv)gj\v!ITBE!gfegj$!\v\v!gjeof$!\v~<ttfouihjsCidubCb!>!ttfouihjsCidubCw|*ttfouihjsCidubCv)gj\v!TTFOUIHJSCIDUBC!gfegj$!\v\v!gjeof$!\v~<eofmCidubCb!>!eofmCidubCw|*eofmCidubCv)gj\v!EOFMCIDUBC!gfegj$!\v\v!gjeof$!\v~<spmpDidubCb!>!spmpDidubCw|*spmpDidubCv)gj\v!SPMPDIDUBC!gfegj$!\v~<x{/fmbdTuftggPv!+!wVb!,!zy/fmbdTuftggPv!>!wVw|*fsvuyfUv)gj~\v!gjeof$!\v~~<*^j]opjujtpQupqTw!.!sfuofd)f{jmbnspo!>!^j]opjudfsjEupqTw<**1/2!-^j]sfuofDupqTv)5dfw!+!yjsubNxfjWv)4dfw!>!sfuofd!4dfw<**1/2!-^j]opjujtpQupqTv)5dfw!+!yjsubNxfjWv)4dfw!>!^j]opjujtpQupqTw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg\v!1!?!UPQT`YBN!gj$!\v\v!gjeof$!\v~~<**1/2!-^j]opjujtpQuojpQv)5dfw!+!yjsubNxfjWv)4dfw!>!^j]opjujtpQuojpQw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg\v!1!?!UOJPQ`YBN!gj$!\v\v!gjeof$!\v~~<*opjujtpQsje!.!sfuofd)f{jmbnspo!>!^j]opjudfsjEsjEw<**1/2!-1/1!-1/1!-1/1)5dfw!+!yjsubNxfjWv)4dfw!>!sfuofd!4dfw<**1/2!-^j]opjujtpQsjEv)5dfw!+!yjsubNxfjWv)4dfw!>!opjujtpQsje!4dfw|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg\v!1!?!SJE`YBN!gj$!\v<*yfusfw)4dfw!>!yfusfWw<**1/2!-mbnspOb)5dfw!+!yjsubNOv)4dfw!>!mbnspOw|*ldjQva!%%!yjGva)gj<*1/2!-opjujtpQb)5dfw!+!yjsubNWNv!>!yfusfw!5dfw|!*ejpw)ojbn!ejpw\v!gjeof$!\v<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEfojMb!ubpmg!fuvcjsuub<itbEv!mppc!nspgjov\v!ITBE!gfegj$!\v\v!gjeof$!\v<^UPQT`YBN]opjudfsjEupqTw!4dfw!hojzsbw<^UPQT`YBN]opjujtpQupqTw!4dfw!hojzsbw<^UPQT`YBN]sfuofDupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov\v!1!?!UPQT`YBN!gj$!\v\v!gjeof$!\v<^UOJPQ`YBN]opjujtpQuojpQw!4dfw!hojzsbw<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov\v!1!?!UOJPQ`YBN!gj$!\v\v!gjeof$!\v<^SJE`YBN]opjudfsjEsjEw!4dfw!hojzsbw<^SJE`YBN]opjujtpQsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov\v!1!?!SJE`YBN!gj$!\v\v!gjeof$!\v<eofmCidubCw!4dfw!hojzsbw<eofmCidubCb!4dfw!fuvcjsuub<eofmCidubCv!mppc!nspgjov\v!EOFMCIDUBC!gfegj$!\v\v!gjeof$!\v<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCb!ubpmg!fuvcjsuub<ttfouihjsCidubCv!mppc!nspgjov\v!TTFOUIHJSCIDUBC!gfegj$!\v\v!gjeof$!\v<spmpDidubCw!5dfw!hojzsbw<spmpDidubCb!5dfw!fuvcjsuub<spmpDidubCv!mppc!nspgjov\v!SPMPDIDUBC!gfegj$!\v<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<yjGv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjsubNxfjWv!5ubn!nspgjov<yjsubNOv!5ubn!nspgjov<yjsubNQv!5ubn!nspgjov<yjsubNWNv!5ubn!nspgjov<opjujtpQb!4dfw!fuvcjsuub<mbnspOb!4dfw!fuvcjsuub<wVw!3dfw!hojzsbw<wVb!3dfw!fuvcjsuub<fmbdTuftggPv!5dfw!nspgjov<fsvuyfUv!mppc!nspgjov!YJGFSQ^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN",yd="~~<eJ!>!spmpDhbsG`mh\v!gjeof$!\v~<ttfouihjsCidubCw!>+!chs/eJ!!!|*ttfouihjsCidubCv)gj\v!TTFOUIHJSCIDUBC!gfegj$!\v~<ttfouihjsCv!>+!chs/eJ!!!|*1/2!>a!ttfouihjsCv)gj~~<zujdbqPusbQv!>+!b/eJ!!!|*1/2!>a!zujdbqPusbQv)gj~\v!gjeof$!\v<*spudbGhpg!-*x/eJ!-chs/spmpDhpGv)5dfw!-eJ)yjn!>!eJ<*iuqfe!-sbGhpGv!-sbfOhpGv)qfutiuppnt!>!spudbGhpg!ubpmg<x/esppDhbsG`mh0{/esppDhbsG`mh!>!iuqfe!ubpmg\v!HPG!gfegj$!\v\v!gjeof$!\v~~~~<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt|*^j]fmhoBupqTv!?!udfggFupqt)gj<*mbnspOm!-^j]opjudfsjEupqTw)upe!>!udfggFupqt!ubpmg<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSupqTv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQupqTw!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg\v!1!?!UPQT`YBN!gj$!\v\v!gjeof$!\v~~~<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSuojpQv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQuojpQw!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg\v!1!?!UOJPQ`YBN!gj$!\v\v!gjeof$!\v~~<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEw)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg\v!1!?!SJE`YBN!gj$!\v~<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ~<*1/2!-fhobSuihjmebfIv0*yfusfWw)iuhofm)ojn!.!1/2!!>+!nsfUusfcnbm|*1/1!?!fhobSuihjmebfIv)gj<*1/1!-6/1!,!6/1!+!*M.!-O)upe)ybn!>!nsfUusfcnbm!ubpmg|*1/1!>>!x/spmpDuihjmebfIv)gj|*uihjMv)gj~\v!gjeof$!\v~<spmpDeofmCv!>+!eJ|*eofmCv)gj\v!ftmf$!\v~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf~<eofmCidubCw!>+!chs/eJ|*eofmCidubCv)gj\v!EOFMCIDUBC!gfegj$!\v~<spmpd!>!eJ|ftmf~<spmpDwv!>!eJ|*fsvuyfUv)gj|!ftmf~<spmpDftsfwfSldjQyjGv!>!eJ|*qjmGftsfwfSva!%%!ldbCtj)gj~<fvsu!>!ldbCtj<O.!>!O|*1/1!=!*O!-F)upe)gj<ftmbg!>!ldbCtj!mppc<F.!>!M!4dfw<*yfusfWw.)f{jmbnspo!>!F!4dfw<*mbnspOw)f{jmbnspo!>!O!4dfw\v!gjeof$!\v<ftvggjEv!>!spmpd\v!ftmf$!\v~<ftvggjEv!>!spmpd|ftmf~<spmpDidubCw!>!spmpd|*spmpDidubCv)gj\v!SPMPDIDUBC!gfegj$!\v<spmpd!5dfw|!ftmf~\v!gjeof$!\v~~<ftvggjEv!>!eJ|ftmf~<esbdtje|*1/1!>>!x/ftvggjEv)gj|!*!fdobutjEitbEv!?!*!fdobutjEqbHitbEv!-fdobutjEfojMw!)epn!%%!itbEv)!gj\v!ITBE!gfegj$!\v\v!gjeof$!\v<spmpDftsfwfSldjQyjGv!>!eJ\v!ftmf$!\v~<spmpDftsfwfSldjQyjGv!>!eJ|ftmf~<spmpDidubCw!>!eJ|*spmpDidubCv)gj\v!SPMPDIDUBC!gfegj$!\v|*yjGv)gj<eJ!5dfw|ftmf~\v!gjeof$!\v<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh\v!ftmf$!\v~<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh|ftmf~<spmpDidubCw!>!spmpDhbsG`mh|*spmpDidubCv)gj\v!SPMPDIDUBC!gfegj$!\v|*ldjQv)gj~~~<1/2!>!b/spmpDwv|ftmf~<esbdtje|*5/1!=!b/spmpDwv)gj|ftmf~~<esbdtje|*1/1!>>!b/spmpDwv)gj|*uofsbqtobsUv)gj<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv|**fmcbudfmfTesbdtjEv!%%!ldjQv)a!%%!fsvuyfUv)gj<spmpDwv!5dfw|!*ejpw)ojbn!ejpw\v!gjeof$!\v<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEqbHitbEv!ubpmg!nspgjov<fdobutjEitbEv!ubpmg!nspgjov<itbEv!mppc!nspgjov\v!ITBE!gfegj$!\v\v!gjeof$!\v<sbGhpGv!ubpmg!nspgjov<sbfOhpGv!ubpmg!nspgjov<spmpDhpGv!5dfw!nspgjov\v!HPG!gfegj$!\v\v!gjeof$!\v<^UPQT`YBN]opjudfsjEupqTw!4dfw!hojzsbw<^UPQT`YBN]opjujtpQupqTw!4dfw!hojzsbw<^UPQT`YBN]fhobSupqTv!ubpmg!nspgjov<^UPQT`YBN]fmhoBupqTv!ubpmg!nspgjov<^UPQT`YBN]uofopqyFupqTv!ubpmg!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov\v!1!?!UPQT`YBN!gj$!\v\v!gjeof$!\v<^UOJPQ`YBN]opjujtpQuojpQw!4dfw!hojzsbw<^UOJPQ`YBN]fhobSuojpQv!ubpmg!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov\v!1!?!UOJPQ`YBN!gj$!\v\v!gjeof$!\v<^SJE`YBN]opjudfsjEsjEw!4dfw!hojzsbw<^SJE`YBN]spmpDsjEv!5dfw!nspgjov\v!1!?!SJE`YBN!gj$!\v\v!gjeof$!\v<eofmCidubCw!4dfw!hojzsbw<eofmCidubCv!mppc!nspgjov\v!EOFMCIDUBC!gfegj$!\v\v!gjeof$!\v<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCv!mppc!nspgjov\v!TTFOUIHJSCIDUBC!gfegj$!\v\v!gjeof$!\v<spmpDidubCw!5dfw!hojzsbw<spmpDidubCv!mppc!nspgjov\v!SPMPDIDUBC!gfegj$!\v<spmpDuihjmebfIv!5dfw!nspgjov<fhobSuihjmebfIv!ubpmg!nspgjov<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<ftvggjEv!5dfw!nspgjov<zujdbqPusbQv!ubpmg!nspgjov<ttfouihjsCv!ubpmg!nspgjov<uihjMv!mppc!nspgjov<spmpDeofmCv!5dfw!nspgjov<eofmCv!mppc!nspgjov<sfmqnbTv!E3sfmqnbt!nspgjov<wVw!3dfw!hojzsbw<fsvuyfUv!mppc!nspgjov<spmpDftsfwfSldjQyjGv!5dfw!nspgjov<qjmGftsfwfSv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjGv!mppc!nspgjov<fmcbudfmfTesbdtjEv!mppc!nspgjov<uofsbqtobsUv!mppc!nspgjov!YJGFSQ\v!gjeof$!\v\v!gjeof$!\v\v!<ubpmg!qnvjefn!opjtjdfsq!\v\v!ftmf$!\v\v!<ubpmg!qihji!opjtjdfsq!\v\v!IHJI`OPJTJDFSQ`UOFNHBSG`MH!gfegj$!\v\v!TF`MH!gfegj$!\v";Pn(d,{setBatchInfo:function(t,e){Pi[t]=e},getBatchInfo:function(t){return Pi[t]}},!0);var md=[1,1,1],bd=[1,0,0,0,0,1,0,1,1,1,1,0],wd=[-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5],xd=[.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5],Cd=[.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5],Id=[.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5],Sd=[.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5],Od=[-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5],Td=function(t,e){Md(t,e),Dd(t,e,"_wireframeModelMap","_wireframeIndexMap"),Dd(t,e,"_polylineModelMap","_polylineIndexMap")},Md=function(t,e){if(e){var i,n,r=e._id,o=t._33O,a=t._34O,s=a[r];if(s){n=s.batch,i=o[n];var l=s.begin,c=s.size,h=3*l,u=3*c,d=4*l,f=4*c,g=i.vs,v=i.uv,p=i.cs,_=i.bs,y=i.rs,m=i.ds,b=s.index;if(i.invalidate=!0,delete a[r],m.splice(b,1),Bn(m))delete o[n];else{for(;b<m.length;b++)s=a[m[b]._id],s.index--,s.begin-=c;g.splice(h,u),i.ns.splice(h,u),i.ps.splice(d,f),v&&v.splice(2*l,2*c),p&&p.splice(d,f),_&&_.splice(h,u),y&&y.splice(l,c)}}}else t._34O={},t._33O={}},Dd=function(t,e,i,n){if(e){var r,o,a=e._id,s=t[i],l=t[n],c=l[a];if(c){o=c.batch,r=s[o];var h=c.begin,u=c.size,d=3*h,f=3*u,g=4*h,v=4*u,p=r.ds,_=c.index;if(r.invalidate=!0,delete l[a],p.splice(_,1),Bn(p))delete s[o];else{for(;_<p.length;_++)c=l[p[_]._id],c.index--,c.begin-=u;r.vs.splice(d,f),r.cs.splice(g,v),r.ps.splice(g,v),r.ls&&r.ls.splice(h,u)}}}else t[i]={},t[n]={}},Pd=function(t,e,i,n){if(!n)return c;var r=e[n];if(!r){var o=Pi[n]||Fi,a=o.image?[]:c;r=e[n]={vs:[],ns:[],uv:a,cs:a?c:o.color?c:[],bs:o.blend?[]:c,ps:[],rs:o.brightness?[]:c,ds:[]}}return r.invalidate=!0,t[i._id]={index:r.ds.length,begin:r.vs.length/3,batch:n},r.ds.push(i),r},kd=function(t,e){return e!=c&&1!==e?[t[0]*e,t[1]*e,t[2]*e,t[3]]:t},Ed=function(t,e,i){var n=t.getBrightness(e),r=$r(i.color||"white"),o=r[3]<1,a=Math.ceil(i.width)||1,s=(o?"T":"O")+a,l=t._wireframeIndexMap,c=t._wireframeModelMap,h=c[s];h||(h=c[s]={vs:[],cs:[],ps:[],ds:[],T:o,W:a}),h.invalidate=!0;var u=h.vs,d=h.cs,f=h.ds,g=l[e._id]={index:f.length,begin:u.length/3,batch:s};f.push(e),uu(u,Us(e,i.mat),i.short?Kd:$d);var v=g.size=u.length/3-g.begin;hu(d,kd(r,n),v)},Vd=function(t,e,i,n,r,o,a,s,l){var h=t.getBrightness(e);h==c&&(h=1);var u=kd($r(n),h),d=u[3]<1;o=Math.ceil(o)||1;var f=(d?"T":"O")+o;if(a){var g=a[0],v=(a[1]||g)+g;f+="-"+g+"-"+v,l&&(f+="-"+Jr(l)+"-"+h,l=kd($r(l),h))}var p=t._polylineIndexMap,_=t._polylineModelMap,y=_[f];y||(y=_[f]={vs:[],cs:[],ps:[],ds:[],ls:a?[]:c,T:d,W:o},a&&(y.D=g,y.G=v,y.A=l)),y.invalidate=!0;var m,b=y.vs,w=y.cs,x=y.ds,C=y.ls,I=p[e._id]={index:x.length,begin:b.length/3,batch:f};x.push(e),Mn(b,i);var S,O=I.size=b.length/3-I.begin,T=i.length,M=0,D=[];if(a||r)for(m=0;T>m;m+=6)S=ls([i[m],i[m+1],i[m+2]],[i[m+3],i[m+4],i[m+5]]),D.push(S),M+=S;if(M&&r){var P,k=kd($r(r),h),E=[k[0]-u[0],k[1]-u[1],k[2]-u[2],k[3]-u[3]],V=0;for(m=0;T>m;m+=6)P=V/M,hu(w,[u[0]+E[0]*P,u[1]+E[1]*P,u[2]+E[2]*P,u[3]+E[3]*P],1),V+=D[m/6],P=V/M,hu(w,[u[0]+E[0]*P,u[1]+E[1]*P,u[2]+E[2]*P,u[3]+E[3]*P],1)}else hu(w,u,O);if(a)for(V=s||0,m=0;T>m;m+=6)C.push(V),V+=D[m/6],C.push(V)},Rd=function(t,e,i){if(e)for(var n=4*e.begin,r=i[e.batch].ps,o=0;o<e.size;o++)r[n++]=t[0],r[n++]=t[1],r[n++]=t[2],r[n++]=t[3]},Bd=function(t,e){var i=e+["32"],n=t[e],r=t[i];n?r&&r.length===n.length?r.set(n):t[i]=new Ds(n):delete t[i]},Ld=function(t,e,i,n,r,o,a,s,l){if(mn(i))i.forEach(function(i){Ld(t,e,i,n,r,o,a,s,l)});else if(gn(i))Ld(t,e,yf(n,i),n,r,o,a,s,l);else if(_n(i)){var c,h=dl(i.mat,e,t),u=dl(i.s3,e,t),d=dl(i.t3,e,t),f=dl(i.r3,e,t);if((u||f||d||h)&&(c=Ns(h,u,f,dl(i.rotationMode,e,t),d),o.push(c)),i.shape3d)Ld(t,e,i.shape3d,n,r,o,a,s,i);else{var g=n.s;l=l||Fi;var v=o[0],p=o.length,_=g("shape3d.color",i.color,l.color);if(r||(r=g("shape3d.blend",i.blend,l.blend)),p>1){v=Bs(v);for(var y=1;p>y;y++)Su(v,v,o[y])}i.vs&&g(ze,i.visible,l.visible)&&zd(v,a,s,i.vs,i.uv,i.is,r,_),i.top_vs&&g(Fe,i.topVisible,l.topVisible)&&zd(v,a,s,i.top_vs,i.top_uv,i.top_is,r,g("shape3d.top.color",i.topColor,l.topColor)||_),i.bottom_vs&&g(We,i.bottomVisible,l.bottomVisible)&&zd(v,a,s,i.bottom_vs,i.bottom_uv,i.bottom_is,r,g("shape3d.bottom.color",i.bottomColor,l.bottomColor)||_),i.from_vs&&g(Ae,i.fromVisible,l.fromVisible)&&zd(v,a,s,i.from_vs,i.from_uv,i.from_is,r,g("shape3d.from.color",i.fromColor,l.fromColor)||_),i.to_vs&&g(je,i.toVisible,l.toVisible)&&zd(v,a,s,i.to_vs,i.to_uv,i.to_is,r,g("shape3d.to.color",i.toColor,l.toColor)||_)}c&&o.pop()}},zd=function(t,e,i,n,r,o,a,s){
var l,c=e.cs,h=e.uv,u=e.bs;if(o){l=o.length;for(var d=0;l>d;d++){var f=o[d];uu(i,t,[n[3*f],n[3*f+1],n[3*f+2]]),h&&Mn(h,[r[2*f],r[2*f+1]])}}else l=n.length/3,uu(i,t,n),h&&Mn(h,r);c&&hu(c,s,l),u&&(a?cu(u,a,l):Mn(u,md,l))},Ad=function(t,e,i,n){var r=[];n?Ld(t.gv,t.data,n,t,t.getBodyColor(),[e],i,r):(jd(t,rt,e,i,r),jd(t,ot,e,i,r),jd(t,it,e,i,r),jd(t,nt,e,i,r),jd(t,at,e,i,r),jd(t,st,e,i,r),jd(t,"csg",e,i,r)),r.length&&(Mn(i.vs,r),Mn(i.ns,Ru(r)))},jd=function(t,e,i,n,r){var o=t[e];if(o){var a=o.tuv;if(a){var s,l,h,u,d=o.uvScale,f=o.uvOffset;if(d)for(s=a.length,l=d[0],h=d[1],u=0;s>u;u+=2)a[u]*=l,a[u+1]*=h;if(f)for(s=a.length,l=f[0],h=f[1],u=0;s>u;u+=2)a[u]+=l,a[u+1]+=h}zd(i,n,r,o.vs,a,c,o.blend,o.color)}},Fd=function(t,e,i,n,r,o,a,s){var l,c=i.cs,h=i.uv,u=i.bs;if(t.getFaceVisible(e,o)){var d=t.getFaceMat(e,o);if(d&&(r=Us(e,d)),uu(a,r,s),c&&hu(c,t.getFaceColor(e,o),6),h){var f=t.getFaceUv(e,o)||n[o+"Uv"],g=t.getFaceUvScale(e,o)||n[o+"UvScale"],v=t.getFaceUvOffset(e,o)||n[o+"UvOffset"];f=f?[f[6],f[7],f[0],f[1],f[2],f[3],f[2],f[3],f[4],f[5],f[6],f[7]]:bd;var p=f[0],_=f[1],y=f[2],m=f[3],b=f[4],w=f[5],x=f[6],C=f[7],I=f[8],S=f[9],O=f[10],T=f[11];if(g){var M=g[0],D=g[1];p*=M,_*=D,y*=M,m*=D,b*=M,w*=D,x*=M,C*=D,I*=M,S*=D,O*=M,T*=D}if(v){var P=v[0],k=v[1];p+=P,_+=k,y+=P,m+=k,b+=P,w+=k,x+=P,C+=k,I+=P,S+=k,O+=P,T+=k}h.push(p,_,y,m,b,w,x,C,I,S,O,T)}u&&(l=t.getBodyColor(e)||t.getFaceBlend(e,o),l?cu(u,l,6):Mn(u,md,6))}},Wd=function(t,e,i,n){var r=t.getGL(),o=t._prg,a=t._buffer;if(!Rn(e)){ad(t),Uu(r,o);for(var s in e){var l=e[s];if(!(n&&!l.T||!n&&l.T)){l.invalidate?(l.invalidate=!1,Bd(l,"vs"),Bd(l,"cs"),Bd(l,"ls"),Bd(l,"ps")):i&&Bd(l,"ps");var h=l.vs32,u=i?l.ps32:l.cs32;Zu(r,o,l.W,c,a.vs,h);var d=l.D,f=!t._dashDisabled&&d;f&&(ed(r,o.uDash,!0),ed(r,o.uDashDistance,d),ed(r,o.uDashGapDistance,l.G),id(r,o.aLineDistance),Ku(r,a.lineDistance,l.ls32,o.aLineDistance,1),ed(r,o.uDiffuse,l.A||Qi));var g=!t._batchColorDisabled;g&&(ed(r,o.uBatchColor,!0),id(r,o.aBatchColor),Ku(r,a.batchColor,u,o.aBatchColor,4)),Yu(r),Ju(r,0,h.length/3,r.LINES),qu(r),g&&(ed(r,o.uBatchColor,!1),nd(r,o.aBatchColor)),f&&(ed(r,o.uDash,!1),nd(r,o.aLineDistance))}}Nu(r,o)}},Hd=function(t,e,i){var n,r,o,a,s,l,h,u,d,f,g,v=t.getGL(),p=t._prg,_=t._buffer,y=t._33O;if(!Rn(y)){ad(t);for(n in y)if(r=Pi[n]||Fi,!(i&&!r.transparent||!i&&r.transparent)&&(o=y[n],e||!r.transparentMask)){var m=i&&r.autoSort!==!1&&(t._33Q||o.invalidate);if(o.invalidate?(o.invalidate=!1,Bd(o,"vs"),Bd(o,"ns"),Bd(o,"cs"),Bd(o,"rs"),Bd(o,"ps"),Bd(o,"bs"),Bd(o,"uv")):e&&Bd(o,"ps"),s=o.vs32,l=e?o.ps32:o.cs32,d=o.uv32,h=o.bs32,u=o.rs32,g=s.length/3,m&&(o.is=Gd(s,t.getEye())),g){a=r.light,f=t.getTexture(r.image),Qu(v,p,c,r.light,r.opacity,r.reverseFlip,r.reverseColor,r.reverseCull),l?t._batchColorDisabled||(ed(v,p.uBatchColor,!0),id(v,p.aBatchColor),Ku(v,_.batchColor,l,p.aBatchColor,4)):ed(v,p.uDiffuse,r.color);var b=h&&!t._batchBlendDisabled;b&&(ed(v,p.uBatchBlend,!0),id(v,p.aBatchBlend),Ku(v,_.batchBlend,h,p.aBatchBlend));var w=u&&!t._batchBrightnessDisabled;w&&(ed(v,p.uBatchBrightness,!0),id(v,p.aBatchBrightness),Ku(v,_.batchBrightness,u,p.aBatchBrightness,1)),d?Yu(v,p,f,r.discardSelectable,_.uv,d,r.uvOffset,r.uvScale):Yu(v),Ku(v,_.vs,s,p.aPosition),Ku(v,_.ns,o.ns32,p.aNormal),o.is?(td(v,_.is,o.is),$u(v,0,g)):Ju(v,0,g),d?qu(v,p,f):qu(v),l&&!t._batchColorDisabled&&(ed(v,p.uBatchColor,!1),nd(v,p.aBatchColor)),b&&(ed(v,p.uBatchBlend,!1),nd(v,p.aBatchBlend)),w&&(ed(v,p.uBatchBrightness,!1),nd(v,p.aBatchBrightness)),Xu(v,p)}}}},Gd=function(t,e){for(var i=t.length/3,n=new Array(i),r=i/3,o=new Array(r),a=0;r>a;a++)o[a]=a;o.sort(function(i,n){var r=9*i,o=[(t[r]+t[r+3]+2*t[r+6])/4,(t[r+1]+t[r+4]+2*t[r+7])/4,(t[r+2]+t[r+5]+2*t[r+8])/4];r=9*n;var a=[(t[r]+t[r+3]+2*t[r+6])/4,(t[r+1]+t[r+4]+2*t[r+7])/4,(t[r+2]+t[r+5]+2*t[r+8])/4],s=ls(e,o)-ls(e,a);return s>0?-1:0>s?1:0});for(var a=0;r>a;a++){var s=3*a,l=3*o[a];n[s]=l,n[s+1]=l+1,n[s+2]=l+2}return new Ms(n)},Ud=new Ds([0,0,0,1,1,1,1,0]),Nd=new Ds([0,0,1,0,0,1,0,0,1,0,0,1]),Qd=new Ms([0,1,2,2,3,0]),Xd=new Ds([-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5]),Yd=new Ms([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),qd=new Ds([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),Zd=new Ds([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),Jd=Ru(Xd,Yd),$d=(new Ds([-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5]),new Ms([0,1,2,3,0,7,5,4,6,7,5,3,2,4,6,1]),[-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5]),Kd=[-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4],tf=function(t,e,i,n,r,o){o=o||16,t=t||16,e=e||0,i=i||t;var a,s,l,c,h,u,d,f,g=.5,v=[],p=[],_=P/t,y=D/o;for(a=0;o>a;a++)for(h=a+1,c=a*y,f=h*y,s=e;i>s;s++)u=s+1,l=s*_,d=u*_,v.push(g*O(c)*I(l),g*I(c),-g*O(c)*O(l),g*O(f)*I(d),g*I(f),-g*O(f)*O(d),g*O(c)*I(d),g*I(c),-g*O(c)*O(d),g*O(c)*I(l),g*I(c),-g*O(c)*O(l),g*O(f)*I(l),g*I(f),-g*O(f)*O(l),g*O(f)*I(d),g*I(f),-g*O(f)*O(d)),p.push(s/t,a/o,u/t,h/o,u/t,a/o,s/t,a/o,s/t,h/o,u/t,h/o);if(n){var m=[],b=[];for(l=e*_,a=0;o>a;a++)h=a+1,c=a*y,f=h*y,m.push(0,0,0,g*O(f)*I(l),g*I(f),-g*O(f)*O(l),g*O(c)*I(l),g*I(c),-g*O(c)*O(l)),b.push(0,.5,e/t,h/o,e/t,a/o)}if(r){var w=[],x=[];for(l=i*_,a=0;o>a;a++)h=a+1,c=a*y,f=h*y,w.push(0,0,0,g*O(c)*I(l),g*I(c),-g*O(c)*O(l),g*O(f)*I(l),g*I(f),-g*O(f)*O(l)),x.push(1,.5,i/t,a/o,i/t,h/o)}return{vs:v,uv:p,from_vs:m,from_uv:b,to_vs:w,to_uv:x}},ef=function(t,e,i){t=t||.17,e=e||12,i=i||18,0>t?t=0:t>.25&&(t=.25);var n,r,o,a,s,l,c,h=.5,u=[],d=[],f=[],g=P/i,v=P/e,p=h-t;for(r=0;e>=r;r++)for(a=-D+r*v,l=I(a),s=O(a),n=0;i>=n;n++)o=n*g,c=p+t*l,u.push(I(o)*c,s*t,-O(o)*c),d.push(n/i,1-r/e);for(r=0;e>r;r++){var _=r*(i+1),y=(r+1)*(i+1);for(n=0;i>n;n++)f.push(_+n,y+n+1,y+n,_+n,_+n+1,y+n+1)}return{vs:u,uv:d,is:f}},nf=function(t,e,i,n,r,o,a){a=a||12,t=t||18,e=e||0,i=i||t,o=o||.17,0>o?o=0:o>.25&&(o=.25);var s,l,c,h,u,d,f,g,v,p,_=.5,y=[],m=[],b=P/t,w=P/a,x=_-o;for(c=0;a>c;c++)for(h=c+1,f=-D+c*w,g=-D+h*w,s=e;i>s;s++)l=s+1,u=s*b,d=l*b,v=x+o*I(f),p=x+o*I(g),y.push(I(u)*v,O(f)*o,-O(u)*v,I(d)*v,O(f)*o,-O(d)*v,I(d)*p,O(g)*o,-O(d)*p,I(u)*v,O(f)*o,-O(u)*v,I(d)*p,O(g)*o,-O(d)*p,I(u)*p,O(g)*o,-O(u)*p),m.push(s/t,1-c/a,l/t,1-c/a,l/t,1-h/a,s/t,1-c/a,l/t,1-h/a,s/t,1-h/a);if(n){var C=[],S=[];for(c=0;a>c;c++)h=c+1,f=-D+c*w,g=-D+h*w,u=e*b,v=x+o*I(f),p=x+o*I(g),C.push(I(u)*v,O(f)*o,-O(u)*v,I(u)*p,O(g)*o,-O(u)*p,I(u)*x,0,-O(u)*x),S.push(.5+.5*I(f),.5-.5*O(f),.5+.5*I(g),.5-.5*O(g),.5,.5)}if(r){var T=[],M=[];for(c=0;a>c;c++)h=c+1,f=-D+c*w,g=-D+h*w,u=i*b,v=x+o*I(f),p=x+o*I(g),T.push(I(u)*v,O(f)*o,-O(u)*v,I(u)*x,0,-O(u)*x,I(u)*p,O(g)*o,-O(u)*p),M.push(.5-.5*I(f),.5-.5*O(f),.5,.5,.5-.5*I(g),.5-.5*O(g))}return{vs:y,uv:m,from_vs:C,from_uv:S,to_vs:T,to_uv:M}},rf=function(t,e){for(var i,n,r,o=.5,a=16,s=[],l=[],c=[],h=P/a,u=0;a>=u;u++)i=u*h,n=I(i)*o,r=O(i)*o,s.push(n,-o,r,n,o,r),l.push(1-u/a,1,1-u/a,0);for(u=0;a>u;u++)c.push(2*u,2*u+1,2*u+3,2*u,2*u+3,2*u+2);if(e){var d=[],f=[],g=[];for(d.push(0,-o,0),f.push(.5,.5),u=0;a>=u;u++)i=u*h,n=I(i),r=O(i),d.push(n*o,-o,-r*o),f.push(.5+.5*n,.5+.5*r);for(u=0;a>u;u++)g.push(0,u+2,u+1)}if(t){var v=[],p=[],_=[];for(v.push(0,o,0),p.push(.5,.5),u=0;a>=u;u++)i=u*h,n=I(i),r=O(i),v.push(n*o,o,-r*o),p.push(.5+.5*n,.5-.5*r);for(u=0;a>u;u++)_.push(0,u+1,u+2)}return{vs:s,uv:l,is:c,bottom_vs:d,bottom_uv:f,bottom_is:g,top_vs:v,top_uv:p,top_is:_}},of=function(t,e,i,n,r,o,a){t=t||12,e=e||0,i=i||t;for(var s,l,c,h,u,d,f,g,v=.5,p=[],_=[],y=P/t,m=e;i>m;m++)s=m+1,l=m*y,c=s*y,h=I(l)*v,u=O(l)*v,d=I(c)*v,f=O(c)*v,p.push(h,-v,-u,d,-v,-f,h,v,-u,d,-v,-f,d,v,-f,h,v,-u),_.push(m/t,1,s/t,1,m/t,0,s/t,1,s/t,0,m/t,0);if(a){var b=[],w=[];for(m=e;i>m;m++)l=y*m,c=y*(m+1),h=I(l),u=O(l),d=I(c),f=O(c),b.push(h*v,-v,-u*v,0,-v,0,d*v,-v,-f*v),w.push(.5+.5*h,.5+.5*u,.5,.5,.5+.5*d,.5+.5*f)}if(o){var x=[],C=[];for(m=e;i>m;m++)l=y*m,c=y*(m+1),h=I(l),u=O(l),d=I(c),f=O(c),x.push(h*v,v,-u*v,d*v,v,-f*v,0,v,0),C.push(.5+.5*h,.5-.5*u,.5+.5*d,.5-.5*f,.5,.5)}if(n){var S=[],T=[];l=y*e,h=I(l)*v,u=O(l)*v,g=e/t,S.push(0,v,0,0,-v,0,h,-v,-u,h,-v,-u,h,v,-u,0,v,0),T.push(0,0,0,1,g,1,g,1,g,0,0,0)}if(r){var M=[],D=[];l=y*i,h=I(l)*v,u=O(l)*v,g=i/t,M.push(0,-v,0,0,v,0,h,v,-u,h,v,-u,h,-v,-u,0,-v,0),D.push(1,1,1,0,g,0,g,0,g,1,1,1)}return{vs:p,uv:_,bottom_vs:b,bottom_uv:w,top_vs:x,top_uv:C,from_vs:S,from_uv:T,to_vs:M,to_uv:D}},af=function(t,e,i,n,r){e=e||18,i=i||0,n=n==c?P:n,r=r==c?.5:r;for(var o,a,s,l,h,u,d=[0,.5,.75,.875,.9375],f=[],g=[],v=[],p=n/e,_=0;_<d.length;_++){var y=0===_%2?0:.5;for(o=0;e>=o;o++)a=(o+y)*p+i,s=1-d[_],f.push(I(a)*r*s,-r+2*d[_]*r,-O(a)*r*s),g.push((o+y)/e,s)}for(_=0;_<d.length-1;_++){var m=_*(e+1),b=(_+1)*(e+1);for(o=0;e>o;o++)v.push(m+o,b+o+1,b+o,m+o,m+o+1,b+o+1)}for(u=f.length/3-(e+1),o=0;e>o;o++)f.push(0,r,0),g.push((o+.5)/e,0);for(o=0;e>o;o++)v.push(u+o,u+o+1,u+(e+1)+o);if(t){var w=[],x=[],C=[];for(w.push(0,-r,0),x.push(.5,.5),o=0;e>=o;o++)a=o*p+i,l=I(a),h=O(a),w.push(l*r,-r,-h*r),x.push(.5+.5*l,.5+.5*h);for(o=0;e>o;o++)C.push(0,o+2,o+1)}return{vs:f,uv:g,is:v,bottom_vs:w,bottom_uv:x,bottom_is:C}},sf=function(t,e,i,n,r,o){t=t||16,e=e||0,i=i||t;for(var a=.5,s=[],l=[],c=P/t,h=e;i>h;h++){var u=h+1,d=c*h,f=c*u;s.push(I(d)*a,-a,-O(d)*a,I(f)*a,-a,-O(f)*a,0,a,0),l.push(h/t,1,u/t,1,(h+u)/2/t,0)}if(o){var g=[],v=[];for(h=e;i>h;h++){d=c*h,f=c*(h+1);var p=I(d),_=O(d),y=I(f),m=O(f);g.push(p*a,-a,-_*a,0,-a,0,y*a,-a,-m*a),v.push(.5+.5*p,.5+.5*_,.5,.5,.5+.5*y,.5+.5*m)}}if(n){var b=[],w=[];d=c*e,b.push(0,a,0,0,-a,0,I(d)*a,-a,-O(d)*a),w.push(0,0,0,1,e/t,1)}if(r){var x=[],C=[];d=c*i,x.push(0,-a,0,0,a,0,I(d)*a,-a,-O(d)*a),C.push(1,1,1,0,i/t,1)}return{vs:s,uv:l,bottom_vs:g,bottom_uv:v,from_vs:b,from_uv:w,to_vs:x,to_uv:C}},lf=function(t,e,i,n,r,o,a,s){for(var l=[],c=0;c<t.length-1;c+=2)l.push({x:t[c],y:t[c+1]});return ic(l,e,i,n,r,o,a,s,!1)},cf={roundRect:function(t,e){return lf([.5,.4,.5,.442,.471,.471,.442,.5,.4,.5,-.4,.5,-.442,.5,-.471,.471,-.5,.442,-.5,.4,-.5,-.4,-.5,-.442,-.471,-.471,-.442,-.5,-.4,-.5,.4,-.5,.442,-.5,.471,-.471,.5,-.442,.5,-.4,.5,.4],[1,3,3,2,3,3,2,3,3,2,3,3,2],t,e,3)},star:function(t,e){return lf([.193,.079,.333,.5,0,.233,-.333,.5,-.194,.079,-.5,-.167,-.112,-.167,0,-.5,.111,-.167,.5,-.167],[1,2,2,2,2,2,2,2,2,2,5],t,e)},rect:function(t,e){return lf([.5,-.5,.5,.5,-.5,.5,-.5,-.5],[1,2,2,2,5],t,e)},triangle:function(t,e){return lf([0,-.5,.5,.5,-.5,.5],[1,2,2,5],t,e)},rightTriangle:function(t,e){return lf([.5,.5,-.5,.5,-.5,-.5],[1,2,2,5],t,e)},parallelogram:function(t,e){return lf([.5,-.5,.25,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],t,e)},trapezoid:function(t,e){return lf([.25,-.5,.5,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],t,e)}},hf={sphere:1,cylinder:1,cone:1,torus:1},uf={torus:1,sphere:1},df=Pn(Ya(cf),{cylinder:1}),ff=Pn(Ya(cf),{cylinder:1,cone:1}),gf=function(t,e,i){var n,r=dl(t.mat,i,e),o=dl(t.s3,i,e),a=dl(t.t3,i,e),s=dl(t.r3,i,e);return(o||s||a||r)&&(n=Bs(e._6O),ad(e,Ns(r,o,s,dl(t.rotationMode,i,e),a))),n},vf=function(t,e,i,n,r,o,a){if(mn(i))i.forEach(function(i){vf(t,e,i,n,r,o,a)});else if(gn(i))vf(t,e,yf(n,i),n,r,o,a);else if(_n(i))if(i.shape3d){var s=gf(i,t,e);vf(t,e,i.shape3d,n,r,o,i),s&&rd(t,s)}else pf(t,e,i,n.s,r,o,a)},pf=function(t,e,i,n,r,o,a){if(a=a||Fi,!o||o(n("shape3d.transparent",i.transparent,a.transparent))){var s=gf(i,t,e);mf(i);var l=t._26I,c=t._prg,h=t._buffer,u=n("shape3d.color",i.color,a.color);r||(r=n("shape3d.blend",i.blend,a.blend)),Qu(l,c,r,n("shape3d.light",i.light,a.light),n("shape3d.opacity",i.opacity,a.opacity),n("shape3d.reverse.flip",i.reverseFlip,a.reverseFlip),n("shape3d.reverse.color",i.reverseColor,a.reverseColor),n("shape3d.reverse.cull",i.reverseCull,a.reverseCull)),i.vs&&n(ze,i.visible,a.visible)&&_f(l,c,h,u,t.getTexture(n("shape3d.image",i.image,a.image),e),n("shape3d.discard.selectable",i.discardSelectable,a.discardSelectable),i.vs,i.uv,i.ns,i.is,n("shape3d.uv.offset",i.uvOffset,a.uvOffset),n("shape3d.uv.scale",i.uvScale,a.uvScale)),i.top_vs&&n(Fe,i.topVisible,a.topVisible)&&_f(l,c,h,n("shape3d.top.color",i.topColor,a.topColor)||u,t.getTexture(n("shape3d.top.image",i.topImage,a.topImage),e),n("shape3d.top.discard.selectable",i.topDiscardSelectable,a.topDiscardSelectable),i.top_vs,i.top_uv,i.top_ns,i.top_is,n("shape3d.top.uv.offset",i.topUvOffset,a.topUvOffset),n("shape3d.top.uv.scale",i.topUvScale,a.topUvScale)),i.bottom_vs&&n(We,i.bottomVisible,a.bottomVisible)&&_f(l,c,h,n("shape3d.bottom.color",i.bottomColor,a.bottomColor)||u,t.getTexture(n("shape3d.bottom.image",i.bottomImage,a.bottomImage),e),n("shape3d.bottom.discard.selectable",i.bottomDiscardSelectable,a.bottomDiscardSelectable),i.bottom_vs,i.bottom_uv,i.bottom_ns,i.bottom_is,n("shape3d.bottom.uv.offset",i.bottomUvOffset,a.bottomUvOffset),n("shape3d.bottom.uv.scale",i.bottomUvScale,a.bottomUvScale)),i.from_vs&&n(Ae,i.fromVisible,a.fromVisible)&&_f(l,c,h,n("shape3d.from.color",i.fromColor,a.fromColor)||u,t.getTexture(n("shape3d.from.image",i.fromImage,a.fromImage),e),n("shape3d.from.discard.selectable",i.fromDiscardSelectable,a.fromDiscardSelectable),i.from_vs,i.from_uv,i.from_ns,i.from_is,n("shape3d.from.uv.offset",i.fromUvOffset,a.fromUvOffset),n("shape3d.from.uv.scale",i.fromUvScale,a.fromUvScale)),i.to_vs&&n(je,i.toVisible,a.toVisible)&&_f(l,c,h,n("shape3d.to.color",i.toColor,a.toColor)||u,t.getTexture(n("shape3d.to.image",i.toImage,a.toImage),e),n("shape3d.to.discard.selectable",i.toDiscardSelectable,a.toDiscardSelectable),i.to_vs,i.to_uv,i.to_ns,i.to_is,n("shape3d.to.uv.offset",i.toUvOffset,a.toUvOffset),n("shape3d.to.uv.scale",i.toUvScale,a.toUvScale)),Xu(l,c),s&&rd(t,s)}},_f=function(t,e,i,n,r,o,a,s,l,c,h,u){a&&(ed(t,e.uDiffuse,n),s?Yu(t,e,r,o,i.uv,s,h,u):Yu(t),Ku(t,i.vs,a,e.aPosition),Ku(t,i.ns,l,e.aNormal),c?(td(t,i.is,c),$u(t,0,c.length)):Ju(t,0,a.length/3),s?qu(t,e,r):qu(t))},yf=function(t,e){var n=t.s;if(e||(e=n(Be)),!e)return c;if(_n(e))return e;var r=ki[e];if(r)return r;if("text"===e){var o={amount:n("shape3d.text.amount"),size:n("shape3d.text.size"),font:n("shape3d.text.font"),style:n("shape3d.text.style"),weight:n("shape3d.text.weight"),fill:n("shape3d.text.fill"),curveSegments:n("shape3d.text.curveSegments"),spacing:n("shape3d.text.spacing")},a=t.gv.getShape3dText(t.data),s=a;for(var l in o)s+="_"+(o[l]===i?"U":o[l]);return t._cachedTextKey===s?t._cachedTextGeometry:(t._cachedTextKey=s,t._cachedTextGeometry=d.createTextGeometry(a,o))}var l=e;if(hf[e]){var h=n("shape3d.side"),u=n("shape3d.side.from"),f=n("shape3d.side.to"),g=n(Ae),v=n(je);3>h?(h=0,u=0,f=0,g=!1,v=!1):((u==c||0>u)&&(u=0),(f==c||f>h)&&(f=h),0===u&&f===h&&(g=!1,v=!1)),l+="-"+h+"-"+u+"-"+f+"-"+g+"-"+v}if(df[e]){var p=n(Fe);l+="-"+p}if(ff[e]){var _=n(We);l+="-"+_}if("torus"===e){var y=n("shape3d.torus.radius");0>y?y=0:y>.25&&(y=.25),l+="-"+y}if(uf[e]){var m=n(Le);l+="-"+m}return r=Ei[l],r||("box"===e?r=d.createBoxModel():cf[e]?r=cf[e](p,_):"sphere"===e?r=d.createSphereModel(h,u,f,g,v,m):e===wt?r=d.createCylinderModel(h,u,f,g,v,p,_):"cone"===e?r=d.createConeModel(h,u,f,g,v,_):"torus"===e&&(r=d.createTorusModel(h,u,f,g,v,y,m)),Ei[l]=r),r},mf=function(){var t=["vs","ns","uv","top_vs","top_ns","top_uv","bottom_vs","bottom_ns","bottom_uv","from_vs","from_ns","from_uv","to_vs","to_ns","to_uv","er","al"],e=["is","top_is","bottom_is","from_is","to_is"];return r=En(_d.substr(_d.indexOf("^#")+2)),qs(d[dn(Ke+t[15]+"n"+t[16])]())&&qr()?function(i){i&&!i._complete_&&(i._complete_=!0,i.vs&&Bn(i.ns)&&(i.ns=Ru(i.vs,i.is)),i.top_vs&&Bn(i.top_ns)&&(i.top_ns=Ru(i.top_vs,i.top_is)),i.bottom_vs&&Bn(i.bottom_ns)&&(i.bottom_ns=Ru(i.bottom_vs,i.bottom_is)),i.from_vs&&Bn(i.from_ns)&&(i.from_ns=Ru(i.from_vs,i.from_is)),i.to_vs&&Bn(i.to_ns)&&(i.to_ns=Ru(i.to_vs,i.to_is)),t.forEach(function(t){var e=i[t];mn(e)&&(i[t]=new Ds(e))}),e.forEach(function(t){var e=i[t];mn(e)&&(i[t]=new Ms(e))}))}:void 0}(),bf=function(t,e){var i=t[e];mn(i)&&(t[e]=new Ds(i))};Pn(ca,{_25Q:function(t){t._16O=function(t,e,i,n,r,o,a,s,l){var c=this.info;if(c){var h,u,d,f,g,v,p=Vs();if(xl[e]?(h=c.p3,u=c.c1,d=c.c2):wl[e]?(u=c.s1||c.c1,d=c.s2||c.c2):(u=c.t1||c.c1,d=c.t2||c.c2),h)v=ld(e,Ni,i,n,s,l);else{var _=Ps(d,u),y=ls(u,d);f=[0,-R(_[2],_[0]),M(_[1]/y)],g="zyx",h=[(u[0]+d[0])/2,(u[1]+d[1])/2,(u[2]+d[2])/2],v=ld(e,[y,0,0],i,n,s,l)}return cd(p,v,h,n,r,o,a,t,f,g)}return Rs},t._80o=function(t,e,i){var n=this,r=n.shapeModel;if(r){var o=n.gv;ad(o),vf(o,n.data,r,n,n.getBodyColor(),i)}},t.createLineModel=function(t,e,i,n,r){for(var o=this,a=o.s,s=Cf(t,e,a(Le)),l=[],h=0;h<s.length;h++){var u=s[h],d=u.length;if(d>1){var f=u[0];l.push(f.x,f.y,f.z);for(var g=1;d-1>g;g++)f=u[g],l.push(f.x,f.y,f.z),l.push(f.x,f.y,f.z);f=u[d-1],l.push(f.x,f.y,f.z)}}var v,p,_,y=a(n+".color"),m=a(r),b=0;return m&&(p=a(r+".color"),v=a(r+".pattern"),b=a(r+".offset"),_=y),Vd(o.gv,o.data,l,p||y,_?c:a(n+".gradient.color"),i,v||a(n+".pattern"),b,_),s},t.createTubeModel=function(t,e,i,n){for(var r=this,o=r.s,a=o("shape3d.side")||Cs,s=o("shape3d.start.angle"),l=o("shape3d.sweep.angle"),h=o(Fe)?o("shape3d.top.cap"):c,u=o(We)?o("shape3d.bottom.cap"):c,d="flat"===h,f="flat"===u,g=d&&(n?n.uv:o("shape3d.top.image")),v=f&&(n?n.uv:o("shape3d.bottom.image")),p=n?n.uv:o("shape3d.image"),_={vs:[],uv:p?[]:c,top_vs:d?[]:c,top_uv:g?[]:c,bottom_vs:f?[]:c,bottom_uv:v?[]:c},y=Cf(t,e,o(Le),i),m=0,b=y.length;b>m;m++)Sf(_,y[m],o(He),i,a,s,l,h,u);if(n){var w=[];Ld(r.gv,r.data,_,r,r.getBodyColor(),[],n,w),w.length&&(Mn(n.vs,w),Mn(n.ns,Ru(w)))}else r.shapeModel=_;return y},t.getCache=function(){var t=this.info;if(t){var e=t.list;if(e){var i=t.cache;return i||(i=t.cache=xf(e)),i}}return c}}});var wf=function(t,e){for(var i,n=0,r=t.length,o=0,a=r-1;a>=o;)if(n=y(o+(a-o)/2),i=t[n].length-e,0>i)o=n+1;else{if(!(i>0)){a=n;break}a=n-1}n=a;var s=t[n],l=s.point;return n===r-1||s.length===e||(l=(new rc).subVectors(t[n+1].point,l).normalize().multiplyScalar(e-s.length).add(l)),{point:l,tangent:s.tangent}},xf=function(t){for(var e,i,n=[],r=0,o=0;o<t.length;o++){for(var a=t[o],s=0;s<a.length;s++){e=a[s],i&&(r+=i.distanceTo(e));var l=new rc,c=a[s+1];c?l.subVectors(c,e):i?l.subVectors(e,i):l.x=1,l.normalize(),n.push({point:e,length:r,tangent:l}),i=e}i=null}return n},Cf=function(t,e,i,n){i=i||ws;for(var r=[],o=0,a=t.size();a>o;o++){var s=t.get(o);r.push(new rc(s.x,s.e||0,s.y))}bn(e)&&(e=e._as);for(var l,h,u,d,f,g=[],v=0,p=0,_=e?e.length:a;_>p;p++)if(f=e?e[p]:0===p?1:2,1===f)g.push(u=[]),u.push(r[v++]);else if(2===f||5===f)if(d=2===f?r[v++]:u[0],n){var y=e?e[p+1]:_>p+1?2:c;if(2===y||5===y){var m=u[u.length-1],b=2===y?r[v]:u[0],w=(new rc).subVectors(m,d),C=(new rc).subVectors(b,d),I=w.length(),S=C.length();if(n>I/2&&n>S/2)u.push(d);else for(w.multiplyScalar(x(n,I/2)/I).add(d),C.multiplyScalar(x(n,S/2)/S).add(d),l=new Vc(w,d,C).getPoints(i),h=0;i>=h;h++)u.push(l[h])}else u.push(d)}else u.push(d);else if(3===f)for(l=new Vc(u[u.length-1],r[v++],r[v++]).getPoints(i),h=1;i>=h;h++)u.push(l[h]);else if(4===f)for(l=new Rc(u[u.length-1],r[v++],r[v++],r[v++]).getPoints(i),h=1;i>=h;h++)u.push(l[h]);return g},If=function(t){for(var e,i,n=new rc,r=[],o=[],a=[],s=0,l=t.length;l>s;s++)e=t[s],i=t[s+1],i?n.subVectors(i,e):n.subVectors(e,t[s-1]),r.push(n.normalize().clone());var c,h,u,d,f=new rc,g=new rc,v=new oc,p=1e-4,_=Number.MAX_VALUE,y=r[0],m=o[0]=new rc,b=a[0]=new rc;for(h=C(y.x),u=C(y.y),d=C(y.z),_>=h&&(_=h,f.set(1,0,0)),_>=u&&(_=u,f.set(0,1,0)),_>=d&&f.set(0,0,1),g.crossVectors(y,f).normalize(),m.crossVectors(y,g),b.crossVectors(y,m),s=1;l>s;s++)o[s]=o[s-1].clone(),a[s]=a[s-1].clone(),g.crossVectors(r[s-1],r[s]),g.length()>p&&(g.normalize(),c=S(zn(r[s-1].dot(r[s]),-1,1)),o[s].applyMatrix4(v.makeRotationAxis(g,c))),a[s].crossVectors(r[s],o[s]);return{B:a,T:r,N:o}},Sf=function(){var t=function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];t.push(i.x,i.y,i.z)}},e=function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e].uv;t.push(i[0],i[1])}},n=function(t,e,i,n,r){var o=-n*I(r),a=n*O(r);return new rc(t.x+o*i.x+a*e.x,t.y+o*i.y+a*e.y,t.z+o*i.z+a*e.z)},r=function(t,e,i,r,o,a,s,l){s=s||P;for(var h=[],u=s/o,d=0;o>=d;d++){var f=n(t,e,i,r,d*u+a);h.push(f),l!=c&&(f.uv=[l,d/o])}return h},o=function(e,i,r,o,a,s,l,c,h){h=h||P;var u=i?e.top_vs:e.bottom_vs;if(u)for(var d=i?e.top_uv:e.bottom_uv,f=h/l,g=0;l>g;g++){var v,p;i?(v=g*f+c,p=(g+1)*f+c):(p=g*f+c,v=(g+1)*f+c),t(u,n(r,o,a,s,v),n(r,o,a,s,p),r),d&&d.push(.5-.5*I(v),.5-.5*O(v),.5-.5*I(p),.5-.5*O(p),.5,.5)}};return function(n,a,s,l,h,u,d,f,g){var v=a.length;if(v>1){var p,_,y,w,x,C,I,S=If(a),O=S.T,T=S.N,M=S.B;"flat"===f&&o(n,!0,a[0],M[0],T[0],l,h,u,d),"flat"===g&&o(n,!1,a[v-1],M[v-1],T[v-1],l,h,u,d);var D,P,k=[],E=m(h/2),V="round"===f,R="round"===g,B=a[0],L=O[0],z=M[0],A=T[0],j=a[v-1],F=O[v-1],W=M[v-1],H=T[v-1];if(V){for(y=1;E>=y;y++)T.splice(0,0,A),M.splice(0,0,z),O.splice(0,0,L),P=-y/E*l,a.splice(0,0,L.clone().multiplyScalar(P).add(B)),k[E-y]=b(l*l-P*P);v+=E}if(R){for(y=1;E>=y;y++)T.push(H),M.push(W),O.push(F),P=y/E*l,a.push(F.clone().multiplyScalar(P).add(j)),k[a.length-1]=b(l*l-P*P);v+=E}if(n.uv){var G=0,U=0,N=[];for(s&&(G=s),x=a[0],N[0]=0,y=1;v>y;y++)w=a[y],N[y]=x.distanceTo(w),x=w,s||(G+=N[y]);for(D=[],y=0;v>y;y++)U+=N[y],D[y]=G?U/G:0}for(y=0;v>y;y++){if(w=a[y],C=M[y],I=T[y],p=r(w,C,I,k[y]===i?l:k[y],h,u,d,D?D[y]:c),_)for(var Q=0;h>Q;Q++){var X=_[Q],Y=_[Q+1]||_[0],q=p[Q],Z=p[Q+1]||p[0];t(n.vs,Y,X,q,q,Z,Y),n.uv&&e(n.uv,Y,X,q,q,Z,Y)}_=p}}}}();Pn(d,{getLineLength:function(t){return t[t.length-1].length},getLineOffset:function(t,e){return wf(t,e)},getLineCacheInfo:function(t,e,i,n){return xf(Cf(t,e,i,n))}});var Of=h.Light=function(){Vn(Of,this),this.s(eu,f[eu]),this.s(Be,"sphere"),this.s3(20,20,20)};Ss("Light",Gc,{_image:"light_icon",_icon:"light_icon",onStyleChanged:function(t,e,i){Of.superClass.onStyleChanged.apply(this,arguments),t===eu&&this.s("shape3d.color",i)}});var Tf=vd.Graph3dView=function(t,e){var i=this;i._attributes=e||d.graph3dViewAttributes,i._25I={},i._view=Kn(1,i);var n=i._canvas=er(i._view);n.addEventListener("webglcontextlost",function(t){t.preventDefault(),zu(i),i._26I=c,i._1o.texture=c,i._35O=!0},!1),n.addEventListener("webglcontextrestored",function(){i._35O=!1,i.iv()},!1),i._34O={},i._33O={},i._wireframeIndexMap={},i._wireframeModelMap={},i._polylineIndexMap={},i._polylineIndexMap={},i._8O=[],i._7O=Vs(),i._6O=Vs(),i._1o=new kf(i),i._30O=new Rf(i),i._31O=new Ef(i),i._32O=new Vf(i),i._33Q=!0,i._eye=Ya(d.graph3dViewEye),i._center=Ya(d.graph3dViewCenter),i._up=Ya(d.graph3dViewUp),i._lightChanged=!1,i._59O=[],i._spots=[],i._dirs=[],i.dm(t?t:new yl),i.setInteractors([new Pf(i)])},Mf={fogDisabled:1,dashDisabled:1,batchColorDisabled:1,batchBlendDisabled:1,batchBrightnessDisabled:1};pd("Graph3dView",e,{ms_v:1,ms_tip:1,ms_gv:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_51o:1,ms_ac:["devicePixelRatio","boundaries","moveStep","rotateStep","sizeEditableFunc","rotationEditableFunc","editableFunc","rotatable","zoomable","pannable","walkable","resettable","mouseRoamable",ae,le,"firstPersonMode",ye,"movableFunc","gridVisible","gridSize","gridGap","gridColor","originAxisVisible","centerAxisVisible","axisXColor","axisYColor","axisZColor","editSizeColor","rectSelectable","rectSelectBackground","headlightRange","headlightColor","headlightIntensity","headlightDisabled","ortho","orthoWidth","fovy","near","far",ct,lt,"up","aspect","fogDisabled","fogColor","fogNear","fogFar","dashDisabled","batchColorDisabled","batchBlendDisabled","batchBrightnessDisabled"],_editable:!1,_devicePixelRatio:i,_boundaries:i,_moveStep:d.graph3dViewMoveStep,_rotateStep:d.graph3dViewRotateStep,_pannable:d.graph3dViewPannable,_rotatable:d.graph3dViewRotatable,_walkable:d.graph3dViewWalkable,_resettable:d.graph3dViewResettable,_zoomable:d.graph3dViewZoomable,_firstPersonMode:d.graph3dViewFirstPersonMode,_mouseRoamable:d.graph3dViewMouseRoamable,_gridVisible:d.graph3dViewGridVisible,_gridSize:d.graph3dViewGridSize,_gridGap:d.graph3dViewGridGap,_gridColor:d.graph3dViewGridColor,_originAxisVisible:d.graph3dViewOriginAxisVisible,_centerAxisVisible:d.graph3dViewCenterAxisVisible,_axisXColor:d.graph3dViewAxisXColor,_axisYColor:d.graph3dViewAxisYColor,_axisZColor:d.graph3dViewAxisZColor,_ortho:d.graph3dViewOrtho,_orthoWidth:d.graph3dViewOrthoWidth,_fovy:d.graph3dViewFovy,_near:d.graph3dViewNear,_far:d.graph3dViewFar,_headlightColor:d.graph3dViewHeadlightColor,_headlightIntensity:d.graph3dViewHeadlightIntensity,_headlightRange:d.graph3dViewHeadlightRange,_headlightDisabled:d.graph3dViewHeadlightDisabled,_rectSelectable:d.graph3dViewRectSelectable,_rectSelectBackground:d.graph3dViewRectSelectBackground,_editSizeColor:d.graph3dViewEditSizeColor,_autoMakeVisible:fa,_fogDisabled:d.graph3dViewFogDisabled,_fogColor:d.graph3dViewFogColor,_fogNear:d.graph3dViewFogNear,_fogFar:d.graph3dViewFogFar,_dashDisabled:d.graph3dViewDashDisabled,_batchColorDisabled:d.graph3dViewBatchColorDisabled,_batchBlendDisabled:d.graph3dViewBatchBlendDisabled,_batchBrightnessDisabled:d.graph3dViewBatchBrightnessDisabled,setEye:function(t,e,i){1===arguments.length&&(e=t[1],i=t[2],t=t[0]);var n=this._eye;n[0]=t,n[1]=e,n[2]=i,this.fp(ct,c,n)},setCenter:function(t,e,i){1===arguments.length&&(e=t[1],i=t[2],t=t[0]);var n=this._center;n[0]=t,n[1]=e,n[2]=i,this.fp(lt,c,n)},setUp:function(t,e,i){1===arguments.length&&(e=t[1],i=t[2],t=t[0]);var n=this._up;n[0]=t,n[1]=e,n[2]=i,this.fp("up",c,n)},isTransparentMask:function(t){return t.s("transparent.mask")},getAspect:function(){var t=this,e=t._aspect;return e?e:t.getWidth()/t.getHeight()},getCanvas:function(){return this._canvas},setDataModel:function(t){var e=this,i=e._dataModel,n=e._selectionModel;i!==t&&(i&&(i.umm(e.handleDataModelChange,e),i.umd(e.handleDataPropertyChange,e),n||i.sm().ums(e.handleSelectionChange,e)),e._dataModel=t,t.mm(e.handleDataModelChange,e),t.md(e.handleDataPropertyChange,e),n?n._21I(t):t.sm().ms(e.handleSelectionChange,e),e.invalidateAll(!0),e.invalidateLight(),e.fp(Ve,i,t))},handleDataPropertyChange:function(t){var e=t.data;this.invalidateData(e),su(e)&&"s:light.type"===t.property&&this.invalidateLight()},invalidateLight:function(){this._lightChanged||(this._lightChanged=!0,this.iv())},onPropertyChanged:function(t){var e=this,i=t.property;e.iv(),e._18Q=c,"eye"===i?e._33Q=!0:"devicePixelRatio"===i?e._42(c,e._devicePixelRatio||da):Mf[i]&&zu(e)},_5O:function(t){var e=t._22Q();return e?new e(this,t):c},getData3dUI:function(t){var e=this._25I[t._id];return e===i&&(e=this._5O(t),this._25I[t._id]=e),e},invalidateAll:function(t){var e=this;if(t){for(var i in e._25I){var n=e._25I[i];n&&n.dispose()}e._25I={},e.iv(),Td(e)}else e.dm().each(function(t){e.invalidateData(t)})},invalidateSelection:function(){var t=this;t.sm().each(function(e){t.invalidateData(e)})},invalidateData:function(t){var e=this,i=e.getData3dUI(t);i&&(i.iv(),e.iv()),Td(e,t)},getShape3dText:function(t){return t.getStyle("shape3d.text")||this.getLabel(t)},invalidateBatch:function(t){var e=this,n=e._33O,r=n[t],o=[],a={};if(r){r.ds.forEach(function(t){var i=e.getData3dUI(t);i&&i.iv(),delete e._34O[t._id],o.push(t._id)}),delete n[t];for(var s,l,c,h,u,d,f,g,v,p=0;2>p;p++){var _=e[["_wireframeModelMap","_polylineModelMap"][p]],y=e[["_wireframeIndexMap","_polylineIndexMap"][p]];for(a={},g=0;g<o.length;g++){var m=y[o[g]];if(m){delete y[o[g]],v=m.batch,s=_[v];var b=m.begin,w=m.size,x=3*b,C=3*w,I=4*b,S=4*w;for(l=s.ds,c=s.vs,h=s.cs,u=s.ps,d=s.ls,f=m.index,s.invalidate=!0,l[f]=i,f=x;x+C>f;f++)c[f]=i;for(f=I;I+S>f;f++)h[f]=i;for(f=I;I+S>f;f++)u[f]=i;if(d)for(f=x;x+C>f;f++)d[f]=i;a[v]=!0}}for(v in a){s=_[v],l=s.ds,c=s.vs,h=s.cs,u=s.ps,d=s.ls;var O=[];for(f=0;f<l.length;f++)l[f]!==i&&O.push(l[f]);if(0===O.length)delete _[v];else{for(s.ds=O,O=[],f=0;f<c.length;f++)c[f]!==i&&O.push(c[f]);for(s.vs=O,O=[],f=0;f<h.length;f++)h[f]!==i&&O.push(h[f]);for(s.cs=O,O=[],f=0;f<u.length;f++)u[f]!==i&&O.push(u[f]);if(s.ps=O,d){for(O=[],f=0;f<d.length;f++)d[f]!==i&&O.push(d[f]);s.ls=O}}}}e.iv()}},handleDataModelChange:function(t){var e=this,i=t.kind,n=t.data;if("add"===i)e.invalidateData(n),Cn(n)&&n.getEdgeGroup()&&n.getEdgeGroup().eachSiblingEdge(e.invalidateData,e),su(n)&&e.invalidateLight();else if(i===St){var r=n._id,o=e._25I[r];o&&(o.dispose(),delete e._25I[r],e.iv()),n===e._currentSubGraph&&e.setCurrentSubGraph(c),Td(e,n),su(n)&&e.invalidateLight()}else i===Ot&&(e.invalidateAll(!0),e.setCurrentSubGraph(c),Td(e),e.invalidateLight())},toCanvas:function(t){var e=this,i=e.getGL();if(e.validate(),t){var n=i.getParameter(i.COLOR_CLEAR_VALUE);Gu(i,t)}e._42(c,1);var r=e.getWidth(),o=e.getHeight(),a=new Uint8Array(4*r*o),s=er(),l=s.getContext("2d");i.readPixels(0,0,r,o,i.RGBA,i.UNSIGNED_BYTE,a),rr(s,r,o,1);for(var h=l.getImageData(0,0,r,o),u=h.data,d=0;d<u.length;d+=4){var f=d/4,g=y(f/r),v=f-g*r;f=4*((o-1-g)*r+v),u[f]=a[d],u[f+1]=a[d+1],u[f+2]=a[d+2],u[f+3]=a[d+3]}return l.putImageData(h,0,0),t&&Gu(i,n),e._42(c,e._devicePixelRatio||da),s},toDataURL:function(t,e){var i=this,n=i.getGL();if(i.validate(),t){var r=n.getParameter(n.COLOR_CLEAR_VALUE);Gu(n,t)}i._42(c,1);var o=i._canvas.toDataURL(e||"image/png",1);return t&&Gu(n,r),i._42(c,i._devicePixelRatio||da),o},getGL:function(){var t=this,e=t._26I,i=t._prg;if(!e)try{t._2O={},e=t._26I=t._canvas.getContext("webgl",t._attributes)||t._canvas.getContext("experimental-webgl",t._attributes),e._emptyTexture=Lu(e),t._buffer={vs:ju(e),ns:ju(e),is:ju(e),uv:ju(e),batchColor:ju(e),batchBlend:ju(e),batchBrightness:ju(e),lineDistance:ju(e)},t._1O=Bu(e);var n=t._cube={vs:ju(e),ns:ju(e),is:ju(e),uv:ju(e)};Ku(e,n.vs,Xd),Ku(e,n.ns,Jd),Ku(e,n.uv,qd),td(e,n.is,Yd)}catch(t){}if(e&&!i){if(i=t._prg=e.createProgram(),!i)return c;var r=t._dirs.length,o=t._spots.length,a=t._59O.length,s=["uPMatrix","uMVMatrix","uNMatrix","uViewMatrix","aNormal","aUv","uOffsetScale","uDiffuse","uBlend","uBlendColor","uBrightness","uPartOpacity","uTransparent","uTexture","uSampler","uDiscardSelectable","uFix","uPick","uReverseFlip","uFixPickReverseColor","uBatchBrightness","aBatchBrightness","uBatchColor","aBatchColor","uBatchBlend","aBatchBlend","uDash","aLineDistance","uDashDistance","uDashGapDistance","uLight","uHeadlightRange","uHeadlightColor","uFogColor","uFogNear","uFogFar"];r&&s.push("uDirColor","uDirPosition"),o&&s.push("uSpotColor","uSpotRange","uSpotAngle","uSpotExponent","uSpotPosition","uSpotCenter"),a&&s.push("uPointColor","uPointRange","uPointPosition"),Gu(e,[0,0,0,0]),e.clearDepth(1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),nu||(_d=En(_d.substring(0,_d.indexOf("^#"))),yd=En(yd),nu=!0);var l=["#define MAX_DIR "+r,"#define MAX_SPOT "+o,"#define MAX_POINT "+a,t._fogDisabled?"":"#define FOG",t._dashDisabled?"":"#define DASH",t._batchColorDisabled?"":"#define BATCHCOLOR",t._batchBlendDisabled?"":"#define BATCHBLEND",t._batchBrightnessDisabled?"":"#define BATCHBRIGHTNESS",""].join("\n"),h=Au(e,i,e.VERTEX_SHADER,_d.replace("PREFIX",l)),u=Au(e,i,e.FRAGMENT_SHADER,yd.replace("PREFIX",l));X?s.push("aPosition"):(i.aPosition=0,e.bindAttribLocation(i,0,"aPosition")),e.linkProgram(i),s.forEach(function(t){i[t]=/^u/.test(t)?e.getUniformLocation(i,t):e.getAttribLocation(i,t)}),e.useProgram(i),e.deleteShader(h),e.deleteShader(u)}return e},getBrightness:function(t){var e=t.s("brightness"),i=this.isSelected(t)?t.s("select.brightness"):c;return e==c?i:i==c?e:e*i},getWireframe:function(t){var e=t.s("wf.visible"),i=t.s("wf.width");
return e===!0||i>0&&"selected"===e&&this.isSelected(t)?{color:t.s("wf.color"),width:i,short:t.s("wf.short"),mat:t.s("wf.mat")}:void 0},getBodyColor:function(t){return t.s("body.color")},getMat:function(t){return t.getMat?t.getMat():t.s("mat")},getFaceMat:function(t,e){return t.getFaceMat?t.getFaceMat(e):t.s(e+".mat")},getFaceBlend:function(t,e){return t.s(e+".blend")||t.s("all.blend")},getFaceColor:function(t,e){return t.s(e+".color")||t.s("all.color")},getFaceImage:function(t,e){return t.s(e+".image")||t.s("all.image")},getFaceDiscardSelectable:function(t,e){var i=t.s(e+".discard.selectable");return i==c?t.s("all.discard.selectable"):i},getFaceUv:function(t,e){return t.s(e+".uv")||t.s("all.uv")},getFaceUvOffset:function(t,e){return t.s(e+".uv.offset")||t.s("all.uv.offset")},getFaceUvScale:function(t,e){return t.s(e+".uv.scale")||t.s("all.uv.scale")},getFaceLight:function(t,e){var i=t.s(e+".light");return i==c?t.s("all.light"):i},getFaceVisible:function(t,e){var i=t.s(e+".visible");return i==c?t.s("all.visible"):i},getFaceOpacity:function(t,e){var i=t.s(e+".opacity");return i==c?t.s("all.opacity"):i},getFaceTransparent:function(t,e){var i=t.s(e+".transparent");return i==c?t.s("all.transparent"):i},getFaceReverseColor:function(t,e){return t.s(e+".reverse.color")||t.s("all.reverse.color")},getFaceReverseFlip:function(t,e){var i=t.s(e+".reverse.flip");return i==c?t.s("all.reverse.flip"):i},getFaceReverseCull:function(t,e){var i=t.s(e+".reverse.cull");return i==c?t.s("all.reverse.cull"):i},getTextureMap:function(){return this._2O},deleteTexture:function(t){var e=this,i=e._2O[t];i&&(delete e._2O[t],e.getGL().deleteTexture(i))},getTexture:function(t,e){if(!t)return c;var i=this,n=i.getGL(),r=i._2O[t];if(!r){var o=Wa(t);if(o)if(o.tagName){if(o.dynamic)return Bu(n,o,i._1O);r=i._2O[t]=Bu(n,o)}else{var a=hl(o,e),s=ul(o,e);if(a>=1&&s>=1){var l=Zr(a,s);return fl(l,o,0,0,a,s,e,i),l.restore(),Bu(n,Yr,i._1O)}}}return r},redraw:function(){this.iv()},validateImpl:function(){var t=this;if(t._lightChanged){t._lightChanged=!1;var e=[],i=[],n=[];t.dm().each(function(t){if(su(t)){var r=t.s("light.type");r===Kh?e.push(t):r===tu?i.push(t):r===$h&&n.push(t)}}),(e.length!==t._59O.length||i.length!==t._spots.length||n.length!==t._dirs.length)&&zu(t),t._59O=e,t._spots=i,t._dirs=n}t._42(),t._1o.iv()},_42:function(t,e){var i=this;if(!i._35O&&(!Ti||Ii(Ti))){var n,r;t&&(t instanceof Gc?r=t:n=t);var o=i._canvas,a=i.getWidth(),s=i.getHeight(),l=i.getGL(),h=i._prg;if(l){if(e?t||rr(o,a,s,e):(e=i._devicePixelRatio||da,t||a===o.clientWidth&&s===o.clientHeight||rr(o,a,s,e)),l.viewport(0,0,a*e,s*e),i._81O=c,l.clear(l.COLOR_BUFFER_BIT|l.DEPTH_BUFFER_BIT),ed(l,h.uBrightness,1),ed(l,h.uOpacity,1),ed(l,h.uPartOpacity,1),l._picking=!!t,ed(l,h.uPick,!!t),ed(l,h.uTexture,!1),ed(l,h.uFix,!1),ed(l,h.uTransparent,!1),ed(l,h.uBatchColor,!1),ed(l,h.uBatchBlend,!1),ed(l,h.uBatchBrightness,!1),t||(fu(i,l,h),i._fogDisabled||(ed(l,h.uFogColor,i._fogColor),ed(l,h.uFogNear,i._fogNear),ed(l,h.uFogFar,i._fogFar))),id(l,h.aPosition),id(l,h.aNormal),nd(l,h.aUv),nd(l,h.aBatchColor),nd(l,h.aBatchBlend),nd(l,h.aBatchBrightness),nd(l,h.aLineDistance),ed(l,h.uPMatrix,Vu(i)),ed(l,h.uViewMatrix,Eu(i,i._7O)),r){var u=l.getParameter(l.COLOR_CLEAR_VALUE);l.clearColor(0,0,0,0),l.disable(l.BLEND),nd(l,h.aNormal),Ku(l,i._cube.vs,c,h.aPosition),td(l,i._cube.is),au(r,i,rt,0),au(r,i,it,6),au(r,i,ot,12),au(r,i,nt,18),au(r,i,at,24),au(r,i,st,30),id(l,h.aNormal),Gu(l,u)}else if(n){n.value=2;var u=l.getParameter(l.COLOR_CLEAR_VALUE);l.clearColor(0,0,0,0),l.disable(l.BLEND),i._95I(l,h,n),Hd(i,n),Wd(i,i._polylineModelMap,n),Wd(i,i._wireframeModelMap,n),ed(l,h.uTransparent,!0),i._95I(l,h,n,!0),Hd(i,n,!0),Wd(i,i._polylineModelMap,n,!0),Wd(i,i._wireframeModelMap,n,!0),ed(l,h.uTransparent,!1),l.disable(l.DEPTH_TEST),i._30O._42(l,h,n),l.enable(l.DEPTH_TEST),Gu(l,u)}else l.disable(l.BLEND),i._31O._42(l,h),i.drawSky(l,h),i._95I(l,h),Hd(i),Wd(i,i._polylineModelMap),Wd(i,i._wireframeModelMap),l.enable(l.BLEND),l.depthMask(!1),ed(l,h.uTransparent,!0),i._95I(l,h,c,!0),Hd(i,c,!0),Wd(i,i._polylineModelMap,c,!0),Wd(i,i._wireframeModelMap,c,!0),ed(l,h.uTransparent,!1),l.depthMask(!0),l.disable(l.BLEND),l.disable(l.DEPTH_TEST),i._32O._42(l,h),i._30O._42(l,h),l.enable(l.DEPTH_TEST);Ku(l,c),td(l,c),i._33Q=!1}}},_updateSkyBoxPosition:function(t){if(this._skyBox&&t&&"eye"===t.property){var e=t.newValue;this._skyBox.p3(e[0],e[1],e[2]),this.invalidateData(this._skyBox)}},setSkyBox:function(t){this._skyBox=t,this.ump(this._updateSkyBoxPosition,this),this.invalidateAll(),t&&(this.mp(this._updateSkyBoxPosition,this),this._updateSkyBoxPosition())},drawSky:function(t,e,i){var n=this,r=n._skyBox;if(r){var o=n.getData3dUI(r);o&&o._42(t,e,i,function(){return!0}),t.clear(t.DEPTH_BUFFER_BIT)}},_95I:function(t,e,i,n){function r(n){if(o.isVisible(n)&&(!L||z)){if(!i&&o.isTransparentMask(n))return;var r=o.getData3dUI(n);r&&r._42(t,e,i,a)}}var o=this,a=function(t){return n?t:!t};o.sky&&t.clear(t.DEPTH_BUFFER_BIT),o.dm().each(r)},getLogicalPoint:function(t){return _s(t,this._canvas)},getHitFaceInfo:function(t){t.target&&(t=this.lp(t));var e=this.getDataInfoAt(t);if(e){var i=this._1o.face(e.data,hn(t.x,t.y));if(i)return{data:e.data,face:i}}return c},getDataAt:function(t){var e=this.getDataInfoAt(t);return e?e.data:c},getDataInfoAt:function(t,e){return t.target&&(t=this.lp(t)),this._1o.get(hn(t.x,t.y,e),!0)},getDatasInRect:function(t){return this._1o.get(t)},setEditable:function(t){var e=this,i=e._editable;e._editable=t,this.fp(Ce,i,t)},isEditable:function(t){var e=this;return e._editable?xn(t)?t.s("3d.editable")?e._editableFunc?e._editableFunc(t):!0:!1:!1:!1},isSelectable:function(t){return t.s("3d.selectable")&&this.sm().isSelectable(t)},isMovable:function(t){var e=this;return Cn(t)&&t.getStyle(Jt)!==Bt?!1:t.s("3d.movable")?e._movableFunc?e._movableFunc(t):!0:!1},isSizeEditable:function(t){return xn(t)?this._sizeEditableFunc?this._sizeEditableFunc(t):!0:!1},isRotationEditable:function(t){return xn(t)&&t.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(t):!0:!1},handleDelete:function(){this._editable&&this.removeSelection()},zoomIn:function(t){this.setZoom(Va,t)},zoomOut:function(t){this.setZoom(1/Va,t)},setZoom:function(t,e){if(1!==t){var i=this;if(i._ortho)return i.setOrthoZoom(t,e),void 0;i._14o&&i._14o.stop(!0);var n=1/t,r=i._eye,o=i._center,a=o[0]+(r[0]-o[0])*n-r[0],s=o[1]+(r[1]-o[1])*n-r[1],l=o[2]+(r[2]-o[2])*n-r[2];if(!(ls(r,o)<i._moveStep&&1>n)){if(e=Dn(e)){var h=Ya(r);return e.action=function(t){i.fi({kind:i._zooming?"betweenZoom":"beginZoom"}),i._zooming=1,r[0]=h[0]+a*t,r[1]=h[1]+s*t,r[2]=h[2]+l*t,i.fp(ct,c,r)},e._37o=function(){delete i._14o,delete i._zooming,i.fi({kind:"endZoom"}),i.onZoomEnded()},i._14o=Za(e)}r[0]+=a,r[1]+=s,r[2]+=l,i.fp(ct,c,r)}}},setOrthoZoom:function(t,e){if(1!==t){var i=this;i._14o&&i._14o.stop(!0);var n=i._orthoWidth,r=n/t-n;if(!(n<i._moveStep&&t>1))return(e=Dn(e))?(e.action=function(t){i.fi({kind:i._zooming?"betweenZoom":"beginZoom"}),i._zooming=1,i.setOrthoWidth(n+r*t)},e._37o=function(){delete i._14o,delete i._zooming,i.fi({kind:"endZoom"}),i.onZoomEnded()},i._14o=Za(e)):(i.setOrthoWidth(n/t),void 0)}},getPositionInfo:function(t){var e=this,i=e._eye,n=e._center,r=e.getAspect(),o=t?Es(Ps(n,i,!0),Ps(t,i)):ls(i,n);if(e._ortho){var a=e._orthoWidth;return{length:o,height:a/r,width:a}}var s=2*V(e._fovy/2)*o;return{length:o,height:s,width:s*r}},getCenterInfo:function(){var t=this;return t._81O||(t._81O=t.getPositionInfo()),Ya(t._81O)},rotate:function(t,e,i,n){var r=this;if(t||e){n==c&&(n=r._firstPersonMode),r._88O&&r._88O.stop(!0);var o=r._center,a=r._eye,s=r.getCenterInfo().length,l=n?o:a,h=n?a:o,u=Ps(l,h),d=R(u[0],u[2]),f=R(b(u[0]*u[0]+u[2]*u[2]),u[1]),g=n?lt:ct;return n&&(e=-e),(i=Dn(i))?(i.action=function(i){r.fi({kind:r._rotating?"betweenRotate":"beginRotate"}),r._rotating=1;var n=d+t*i,o=f+e*i;o=vu(o),u[0]=s*O(o)*O(n),u[1]=s*I(o),u[2]=s*O(o)*I(n),l[0]=h[0]+u[0],l[1]=h[1]+u[1],l[2]=h[2]+u[2],r.fp(g,c,l)},i._37o=function(){delete r._88O,delete r._rotating,r.fi({kind:"endRotate"}),r.onRotateEnded()},r._88O=Za(i)):(d+=t,f+=e,f=vu(f),u[0]=s*O(f)*O(d),u[1]=s*I(f),u[2]=s*O(f)*I(d),l[0]=h[0]+u[0],l[1]=h[1]+u[1],l[2]=h[2]+u[2],r.fp(g,c,l),void 0)}},pan:function(t,e,i,n){if(t||e){var r=this;n==c&&(n=r._firstPersonMode),r._89O&&r._89O.stop(!0);var o=Eu(r),a=[o[0]*t,o[4]*t,o[8]*t],s=[o[1]*e,o[5]*e,o[9]*e],l=a[0]+s[0],h=a[1]+s[1],u=a[2]+s[2],d=r._center,f=r._eye;if(n){var g=gd(r.getBoundaries(),f[0],f[2],f[0]+l,f[2]+u,b(l*l+u*u));l=g[0],u=g[1]}if(i=Dn(i)){var v=Ya(f),p=Ya(d);return i.action=function(t){r.fi({kind:r._panning?"betweenPan":"beginPan"}),r._panning=1,d[0]=p[0]+l*t,d[1]=p[1]+h*t,d[2]=p[2]+u*t,f[0]=v[0]+l*t,f[1]=v[1]+h*t,f[2]=v[2]+u*t,r.fp(ct,c,f),r.fp(lt,c,d)},i._37o=function(){delete r._89O,delete r._panning,r.fi({kind:"endPan"}),r.onPanEnded()},r._89O=Za(i)}d[0]+=l,d[1]+=h,d[2]+=u,f[0]+=l,f[1]+=h,f[2]+=u,r.fp(ct,c,f),r.fp(lt,c,d)}},walk:function(t,e,i){if(t){var n=this;i==c&&(i=n._firstPersonMode),n._90O&&n._90O.stop(!0);var r=n._center,o=n._eye,a=Ps(r,o,!0);if(i){var s=gd(n.getBoundaries(),o[0],o[2],o[0]+a[0]*t,o[2]+a[2]*t,C(t));if(t=ls(s),!t)return;a=[s[0]/t,0,s[1]/t]}if(e=Dn(e)){var l=Ya(o),h=Ya(r);return e.action=function(e){n.fi({kind:n._walking?"betweenWalk":"beginWalk"}),n._walking=1;var i=t*e;o[0]=l[0]+a[0]*i,o[1]=l[1]+a[1]*i,o[2]=l[2]+a[2]*i,r[0]=h[0]+a[0]*i,r[1]=h[1]+a[1]*i,r[2]=h[2]+a[2]*i,n.fp(ct,c,o),n.fp(lt,c,r)},e._37o=function(){delete n._90O,delete n._walking,n.fi({kind:"endWalk"}),n.onWalkEnded()},n._90O=Za(e)}o[0]+=a[0]*t,o[1]+=a[1]*t,o[2]+=a[2]*t,r[0]+=a[0]*t,r[1]+=a[1]*t,r[2]+=a[2]*t,n.fp(ct,c,o),n.fp(lt,c,r)}},handleScroll:function(t,e){t.preventDefault();var i=this,n=i._moveStep;i.isFirstPersonMode()?i.isPannable()&&i.pan(0,e>0?n:-n):i.isZoomable()&&i.setZoom(0>e?1/Ra:Ra)},handlePinch:function(t,e){this.isZoomable()&&this.setZoom(e>t?1/Ba:Ba)},reset:function(){this.setCenter(d.graph3dViewCenter),this.setEye(d.graph3dViewEye),this.setUp(d.graph3dViewUp)},moveSelection:function(t,e,i){var n,r=this,o=r.dm();o&&(n=o.getHistoryManager()),n&&n.beginInteraction(),ko(this.sm().toSelection(this.isMovable,this),t,e,i),n&&n.endInteraction()},getMoveMode:function(t,e){var i=e.s("3d.move.mode");if(i)return i;var n="88",r="89",o="90";return rs(t)||Vi[n]&&Vi[r]&&Vi[o]?"xyz":Vi[n]&&Vi[r]?"xy":Vi[n]&&Vi[o]?"xz":Vi[r]&&Vi[o]?"yz":Vi[n]?"x":Vi[r]?"y":Vi[o]?"z":"xz"},handleTick:function(){var t=this,e=!1,i=t._moveStep,n=i,r=!1,o=!0,a=t._rotateStep*(o?-1:1);if(t.isWalkable()||(n=0),t.isPannable()||(i=0),t.isRotatable()||(a=0),t._32Q){var s=(tn()-t._32Q)/50;n*=s,i*=s,a*=s}t._31Q&&(en(t._31Q),delete t._31Q,delete t._32Q),Br()&&(e=!0,t.pan(-i,0,r,o)),zr()&&(e=!0,t.pan(i,0,r,o)),Ar()&&(e=!0,rs()?t.pan(0,i,r,o):t.walk(n,r,o)),Lr()&&(e=!0,rs()?t.pan(0,-i,r,o):t.walk(-n,r,o)),jr()&&(e=!0,t.rotate(-a,0,r,o)),Wr()&&(e=!0,t.rotate(a,0,r,o)),Fr()&&(e=!0,t.rotate(0,-a/2,r,o)),Hr()&&(e=!0,t.rotate(0,a/2,r,o)),e&&(t._32Q=tn(),t._31Q=Na(t.handleTick,t))},handleKeyDown:function(t){var e=this;!os(t)&&Qr[t.keyCode]?e.handleTick():Pr(t)?e.selectAll():kr(t)?e.handleDelete(t):Gr(t)&&this.isResettable()&&e.reset()},checkDoubleClickOnNote:function(t,e,i){var n=this;if(i===Wt){if(e.s("note.toggleable"))return e.s(Xt,!e.s(Xt)),n.fi({kind:"toggleNote",event:t,data:e,part:i}),!0}else if(i===Ht&&e.s("note2.toggleable"))return e.s(Yt,!e.s(Yt)),n.fi({kind:"toggleNote2",event:t,data:e,part:i}),!0;return!1},checkDoubleClickOnRotation:function(t,e,i){return i===Af?(e.setRotationX(0),!0):i===jf?(e.setRotationY(0),!0):i===Ff?(e.setRotationZ(0),!0):!1},onRotateEnded:function(){},onWalkEnded:function(){},toViewPosition:function(t){var e=this,i=e.getWidth()/2,n=e.getHeight()/2,r=e._18Q;return r||(r=Vu(e),e._18Q=Su(r,r,Eu(e))),t=js([t[0],t[1],t[2],1],r),{x:i+i*t[0]/t[3],y:n-n*t[1]/t[3]}},getHitPosition:function(t,e,i){var n=this,r=n.getWidth(),o=n.getHeight(),a=t.target?n.lp(t):t,s=a.x-r/2,l=a.y-o/2,c=n.getCenterInfo(),h=Eu(n);e=e?e:[0,0,0],i=i?i:[0,1,0],s=s/r*c.width,l=-1*l/o*c.height;var u=[h[0]*s,h[4]*s,h[8]*s],d=[h[1]*l,h[5]*l,h[9]*l],f=[u[0]+d[0],u[1]+d[1],u[2]+d[2]],g=n.getCenter(),v=_u(n,e,i,[f[0]+g[0],f[1]+g[1],f[2]+g[2]]);return v?v:[0,0,0]},getLineLength:function(t){this.validate();var e=this.getData3dUI(t);if(e&&e.getCache){var i=e.getCache();if(i)return i[i.length-1].length}return 0},getLineOffset:function(t,e){var i=this.getData3dUI(t);if(i&&i.getCache){var n=i.getCache();if(n)return wf(n,e)}return c},isLabelVisible:function(){return!0},isNoteVisible:function(){return!0}});var Df=vd.Interactor=function(t){this.gv=t};pd("Interactor",e,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners()}});var Pf=vd.DefaultInteractor=function(t){Vn(Pf,this,[t])};pd("DefaultInteractor",Df,{handle_contextmenu:function(t){ja(t)},handle_mousewheel:function(t){this.gv.handleScroll(t,t.wheelDelta/40)},handle_DOMMouseScroll:function(t){2===t.axis&&this.gv.handleScroll(t,-t.detail)},handle_keydown:function(t){this.gv.handleKeyDown(t)},handle_mousedown:function(t){this.handle_touchstart(t)},handle_touchstart:function(t){ja(t);var e=this,i=e.gv,n=es(t),r=i.getDataInfoAt(t),o=r?r.data:c,a=r?r.part:c,s=i.sm(),l=Mr(t),h=is(t);i.setFocus(t)&&(e._62O=c,e._57I=c,o?os(t)?s.co(o)?s.rs(o):s.as(o):s.co(o)||s.ss(o):n&&(os(t)?i.isRectSelectable()&&(e._62O=oe):e._57I=as(t)),e._31Q&&(en(e._31Q),delete e._31Q,delete e._32Q),e._62O||(i.isFirstPersonMode()&&(rs(t)||h>2?e._62O="pan":i.isMouseRoamable()||$?(e._62O="roaming",e.foward=l&&es(t),e._32Q=tn(),e._31Q=Na(e.tick,e)):n||(e._62O="roaming")),e._62O||(n&&l&&Uf[a]?(e._62O=a,e.p3=o.p3()):n&&l&&xn(o)&&i.isSelected(o)&&i.isMovable(o)?(e._62O="move",e.p3=o.p3(),e.movedata=o):$&&(h>2?e._62O="pan":2===h&&(e.dist=Oo(t),e._62O="pinch")))),e.point=i.lp(t),ys(e,t),ns(t)?i.handleDoubleClick(t,o,a):i.handleClick(t,o,a))},tick:function(){var t=this,e=t.gv,i=e._moveStep;t.point&&e.isWalkable()&&(t._32Q&&(i*=(tn()-t._32Q)/50),e.walk(t.foward?i:-i),t._32Q=tn(),t._31Q=Na(t.tick,t))},handle_mouseup:function(t){this.handle_touchend(t)},handle_touchend:function(t){var e=this._57I;e&&(ls(e,as(t))<=1&&this.gv.sm().cs(),this._57I=c)},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(t){var e,i,n=this,r=n.gv,o=n._62O,a=n.point,s=r.dm(),l=s.getHistoryManager(),c=r.lp(t),h=c.x-a.x,u=c.y-a.y,d=-P*h/r.getWidth(),f=-P*u/r.getHeight();if("roaming"===o)n.rotate(t,d/2,f/2);else if(o===Af||o===jf||o===Ff)l&&!r._86O&&l.beginInteraction(),r.fi({kind:r._86O?"betweenEditRotation":"beginEditRotation",event:t}),r._86O=1,r.sm().each(function(t){if(xn(t)&&r.isRotationEditable(t)){var e=C(d)>C(f)?d:f;o===Af?t.setRotationX(t.getRotationX()+e):o===jf?t.setRotationY(t.getRotationY()+e):o===Ff&&t.setRotationZ(t.getRotationZ()+e)}});else if("move"===o||Uf[o]){o===Wf||o===Hf||o===Gf?(l&&!r._87O&&l.beginInteraction(),r.fi({kind:r._87O?"betweenEditSize":"beginEditSize",event:t}),r._87O=1):(l&&!r._moving&&l.beginInteraction(),r.fi({kind:r._moving?"betweenMove":"beginMove",event:t}),r._moving=1);var g,v=n.p3,p=r.getPositionInfo(v),_=Eu(r);g=o===Bf?"x":o===Lf?"y":o===zf?"z":o===Wf?"sx":o===Hf?"sy":o===Gf?"sz":r.getMoveMode(t,n.movedata),h=h/r.getWidth()*p.width,u=-1*u/r.getHeight()*p.height;var y,m,b=[_[0]*h,_[4]*h,_[8]*h],x=[_[1]*u,_[5]*u,_[9]*u],I=b[0]+x[0],S=b[1]+x[1],O=b[2]+x[2],T=[v[0]+I,v[1]+S,v[2]+O],M=Ps(r.getEye(),T,!0);if("xyz"===g?(y=T,r.moveSelection(I,S,O)):"xz"===g?(y=_u(r,v,[0,1,0],T),y&&r.moveSelection(y[0]-v[0],0,y[2]-v[2])):"xy"===g?(y=_u(r,v,[0,0,1],T),y&&r.moveSelection(y[0]-v[0],y[1]-v[1],0)):"yz"===g?(y=_u(r,v,[1,0,0],T),y&&r.moveSelection(0,y[1]-v[1],y[2]-v[2])):"x"===g||"sx"===g?(M[0]=0,y=_u(r,v,M,T),y&&(m=y[0]-v[0],"x"===g?r.moveSelection(m,0,0):r.sm().each(function(n){xn(n)&&r.isSizeEditable(n)&&(e=w(Ts,n.getWidth()+m),i=e/n.getWidth(),n.setWidth(e),rs(t)&&(n.setHeight(n.getHeight()*i),n.setTall(n.getTall()*i)))}))):"y"===g||"sy"===g?(M[1]=0,y=_u(r,v,M,T),y&&(m=y[1]-v[1],"y"===g?r.moveSelection(0,m,0):r.sm().each(function(n){xn(n)&&r.isSizeEditable(n)&&(e=w(Ts,n.getTall()+m),i=e/n.getTall(),n.setTall(e),rs(t)&&(n.setHeight(n.getHeight()*i),n.setWidth(n.getWidth()*i)))}))):("z"===g||"sz"===g)&&(M[2]=0,y=_u(r,v,M,T),y&&(m=y[2]-v[2],"z"===g?r.moveSelection(0,0,m):r.sm().each(function(n){xn(n)&&r.isSizeEditable(n)&&(e=w(Ts,n.getHeight()+m),i=e/n.getHeight(),n.setHeight(e),rs(t)&&(n.setTall(n.getTall()*i),n.setWidth(n.getWidth()*i)))}))),!y)return;n.p3=y}else if(o===oe){var D=n.div;D||(D=n.div=tr(),or(n.getView(),D),D.op=a,D.style.background=r.getRectSelectBackground()),r.fi({kind:r._rectSelecting?"betweenRectSelect":"beginRectSelect",event:t}),r._rectSelecting=1,D.rect=cs(D.op,c),mr(D,D.rect)}else if("pinch"===o&&2===is(t)){r.fi({kind:r._pinching?"betweenPinch":"beginPinch",event:t}),r._pinching=1;var m=Oo(t);r.handlePinch(m,n.dist),n.dist=m}else"pan"===o||rs(t)?n.pan(t,h,u):r.isFirstPersonMode()||(es(t)?n.rotate(t,d,f):(n.pan(t,h,0),r.isWalkable()&&(r.fi({kind:r._walking?"betweenWalk":"beginWalk",event:t}),r._walking=1,r.walk(u/r.getHeight()*r.getCenterInfo().height))));n.point=c},pan:function(t,e,i){var n=this.gv;if(n.isPannable()){var r=n.getCenterInfo(),o=e/n.getWidth()*r.width,a=-1*i/n.getHeight()*r.height;n.fi({kind:n._panning?"betweenPan":"beginPan",event:t}),n._panning=1,n.pan(-o,-a)}},rotate:function(t,e,i){var n=this.gv;n.isRotatable()&&(n.fi({kind:n._rotating?"betweenRotate":"beginRotate",event:t}),n._rotating=1,n.rotate(e,i))},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)},handleWindowTouchEnd:function(t){var e=this,i=e.gv,n=i.dm(),r=n.getHistoryManager(),o=e.div;if(o){var a=i.getDatasInRect(o.rect);if(!a.isEmpty()){var s=i.sm(),l=s.toSelection();a.each(function(t){s.co(t)?l.remove(t):l.add(t)}),s.ss(l)}ms(o)}i._moving&&(delete i._moving,i.fi({kind:"endMove",event:t}),i.onMoveEnded(),r&&r.endInteraction()),i._panning&&(delete i._panning,i.fi({kind:"endPan",event:t}),i.onPanEnded()),i._rotating&&(delete i._rotating,i.fi({kind:"endRotate",event:t}),i.onRotateEnded()),i._86O&&(delete i._86O,i.fi({kind:"endEditRotation",event:t}),r&&r.endInteraction()),i._87O&&(delete i._87O,i.fi({kind:"endEditSize",event:t}),r&&r.endInteraction()),i._pinching&&(delete i._pinching,i.fi({kind:"endPinch",event:t}),i.onPinchEnded()),i._rectSelecting&&(delete i._rectSelecting,i.fi({kind:"endRectSelect",event:t}),i.onRectSelectEnded()),i._walking&&(delete i._walking,i.fi({kind:"endWalk",event:t}),i.onWalkEnded()),e.dist=e.point=e._62O=e.p3=e.movedata=e.div=e._57I=e._32Q=e._31Q=e.foward=c}});var kf=function(t){this.gv=t};Is(kf,e,{_iv:!0,iv:function(){this._iv=!0},face:function(t,e){var i=this,n=i.gv.getGL();if(!n||!xn(t))return c;var r=e.x,o=e.width,a=e.height,s=i.height-e.y-a,l=y(o/2),h=new Uint8Array(4*o*a),u=0;for(i.iv(),i.validate(t),Wu(n,i.frame),n.readPixels(r,s,o,a,n.RGBA,n.UNSIGNED_BYTE,h),Wu(n,c),i.iv();l>=u;u++)for(var d=l-u,f=l+u,g=d;f>=g;g++)for(var v=d;f>=v;v++)if(g===d||g===f||v===d||v===f){var p=ou.m[h[4*(g*o+v)]];if(p)return p}},get:function(t,e){this.validate();var i=this,n=i.gv.getGL();if(!n)return c;var r,o,a=t.x,s=t.width,l=t.height,h=i.height-t.y-l,u=y(s/2),d=new Uint8Array(4*s*l),f=0,g=d.length,v=e?c:new gl,p=e?c:{};if(Wu(n,i.frame),n.readPixels(a,h,s,l,n.RGBA,n.UNSIGNED_BYTE,d),Wu(n,c),e){for(;u>=f;f++)for(var _=u-f,m=u+f,b=_;m>=b;b++)for(var w=_;m>=w;w++)if((b===_||b===m||w===_||w===m)&&(r=i.info(d,4*(b*s+w))))return r}else for(;g>f;f+=4)r=i.info(d,f),r&&(o=r.data,p[o._id]||(v.add(o),p[o._id]=o));return v},info:function(t,e){return this.colorMap[(t[e]<<24)+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3]]},validate:function(t){var e=this,i=e.gv,n=i.getGL();if(n){var r=i.getWidth(),o=i.getHeight(),a=n.RGBA,s=n.TEXTURE_2D,l=n.RENDERBUFFER,h=n.FRAMEBUFFER;e.texture||(e.texture=Bu(n),e.render=n.createRenderbuffer(),e.frame=n.createFramebuffer()),(e.width!==r||e.height!==o)&&(Fu(n,e.texture),n.texImage2D(s,0,a,r,o,0,a,n.UNSIGNED_BYTE,c),Hu(n,n.TEXTURE_MIN_FILTER,n.LINEAR),n.bindRenderbuffer(l,e.render),n.renderbufferStorage(l,n.DEPTH_COMPONENT16,r,o),Wu(n,e.frame),n.framebufferTexture2D(h,n.COLOR_ATTACHMENT0,s,e.texture,0),n.framebufferRenderbuffer(h,n.DEPTH_ATTACHMENT,l,e.render),Fu(n,c),n.bindRenderbuffer(l,c),Wu(n,c),e.width=r,e.height=o),e._iv&&(e._iv=!1,Wu(n,e.frame),i._42(t||(e.colorMap={}),1),Wu(n,c))}}});var Ef=function(t){this.gv=t};Is(Ef,e,{gap:0,size:0,_42:function(t,e){var i=this,n=i.gv,r=n._gridGap,o=n._gridSize;if(n._gridVisible){if(i.gap!==r||i.size!==o){for(var a=[],s=n._gridSize/2,l=r*s,h=0;2*s+1>h;h++){var u=6*h,d=6*(2*s+1)+u;a[u]=-l,a[u+1]=0,a[u+2]=-l+h*r,a[u+3]=l,a[u+4]=0,a[u+5]=-l+h*r,a[d]=-l+h*r,a[d+1]=0,a[d+2]=-l,a[d+3]=-l+h*r,a[d+4]=0,a[d+5]=l}i.vs=new Ds(a),i.gap=r,i.size=o}ad(n),Uu(t,e),Yu(t),Zu(t,e,1,n._gridColor,n._buffer.vs,i.vs),Ju(t,0,i.vs.length/3,t.LINES),qu(t),Nu(t,e)}else i.vs=i.gap=i.size=c}});var Vf=function(t){this.gv=t};Is(Vf,e,{_42:function(t,e){var i=this.gv,n=i._buffer.vs,r=i._axisXColor,o=i._axisYColor,a=i._axisZColor,s=i._originAxisVisible,l=i._centerAxisVisible;if(s||l){var h=X?t.TRIANGLES:t.TRIANGLE_FAN,u=t.LINES;if(ad(i),Uu(t,e),Yu(t),s){var d=i.getCenterInfo(),f=x(d.width,d.height)/5,g=.8*f,v=.05*f;Zu(t,e,1.5,r,n,new Ds([0,0,0,f,0,0,g,v,0,g,0,v,g,-v,0,g,0,-v,g,v,0,0,0,0,0,f,0,v,g,0,0,g,v,-v,g,0,0,g,-v,v,g,0,0,0,0,0,0,f,v,0,g,0,v,g,-v,0,g,0,-v,g,v,0,g])),Ju(t,0,2,u),Ju(t,1,6,h),Zu(t,e,c,o),Ju(t,7,2,u),Ju(t,8,6,h),Zu(t,e,c,a),Ju(t,14,2,u),Ju(t,15,6,h)}if(l){var p=i._center,_=p[0],y=p[1],m=p[2],d=i.getPositionInfo(p);f=x(d.width,d.height)/20,Zu(t,e,1.5,r,n,new Ds([_,y,m,_+f,y,m,_,y,m,_,y+f,m,_,y,m,_,y,m+f])),Ju(t,0,2,u),Zu(t,e,c,o),Ju(t,2,2,u),Zu(t,e,c,a),Ju(t,4,2,u)}qu(t),Nu(t,e)}}});var Rf=function(t){this.gv=t},Bf="edit_tx",Lf="edit_ty",zf="edit_tz",Af="edit_rx",jf="edit_ry",Ff="edit_rz",Wf="edit_sx",Hf="edit_sy",Gf="edit_sz",Uf={};Uf[Bf]=1,Uf[Lf]=1,Uf[zf]=1,Uf[Af]=1,Uf[jf]=1,Uf[Ff]=1,Uf[Wf]=1,Uf[Hf]=1,Uf[Gf]=1,Is(Rf,e,{_42:function(t,e,i){var n=this,r=n.gv,o=r.sm().ld();if(r.isEditable(o)&&xn(o)&&(!r.isFirstPersonMode()||!r.isMouseRoamable()&&!$)){ad(r);var a,s,l=r.isMovable(o),c=r.isRotationEditable(o),h=r.isSizeEditable(o),u=r._axisXColor,d=r._axisYColor,f=r._axisZColor,g=r._editSizeColor,v=r.getCenterInfo(),p=x(v.width,v.height)/10,_=p/(i?5:10),y=.7*p,m=.4*y,b=o.p3(),w=b[0],C=b[1],I=b[2];a=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],l&&n._17O(t,e,o,i,Bf,u,a,[w,C-_,I,w+y,C-_,I,w+y,C,I,w+y,C,I,w,C,I,w,C-_,I,w,C-_,I+_,w+y,C-_,I+_,w+y,C-_,I,w+y,C-_,I,w,C-_,I,w,C-_,I+_]),s=w+y,h&&n._17O(t,e,o,i,Wf,g,a,[s,C-_,I,s+m,C-_,I,s+m,C,I,s+m,C,I,s,C,I,s,C-_,I,s,C-_,I+_,s+m,C-_,I+_,s+m,C-_,I,s+m,C-_,I,s,C-_,I,s,C-_,I+_]),s+=m,c&&n._17O(t,e,o,i,Af,u,a,[s,C-_,I,s+m,C-_,I,s+m,C,I,s+m,C,I,s,C,I,s,C-_,I,s,C-_,I+_,s+m,C-_,I+_,s+m,C-_,I,s+m,C-_,I,s,C-_,I,s,C-_,I+_]),a=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],l&&n._17O(t,e,o,i,Lf,d,a,[w,C,I,w,C+y,I,w-_,C+y,I,w-_,C+y,I,w-_,C,I,w,C,I,w,C,I,w,C,I-_,w,C+y,I-_,w,C+y,I-_,w,C+y,I,w,C,I]),s=C+y,h&&n._17O(t,e,o,i,Hf,g,a,[w,s,I,w,s+m,I,w-_,s+m,I,w-_,s+m,I,w-_,s,I,w,s,I,w,s,I,w,s,I-_,w,s+m,I-_,w,s+m,I-_,w,s+m,I,w,s,I]),s+=m,c&&n._17O(t,e,o,i,jf,d,a,[w,s,I,w,s+m,I,w-_,s+m,I,w-_,s+m,I,w-_,s,I,w,s,I,w,s,I,w,s,I-_,w,s+m,I-_,w,s+m,I-_,w,s+m,I,w,s,I]),a=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],l&&n._17O(t,e,o,i,zf,f,a,[w,C,I,w,C,I+y,w,C-_,I+y,w,C-_,I+y,w,C-_,I,w,C,I,w,C-_,I,w-_,C-_,I,w-_,C-_,I+y,w-_,C-_,I+y,w,C-_,I+y,w,C-_,I]),s=I+y,h&&n._17O(t,e,o,i,Gf,g,a,[w,C,s,w,C,s+m,w,C-_,s+m,w,C-_,s+m,w,C-_,s,w,C,s,w,C-_,s,w-_,C-_,s,w-_,C-_,s+m,w-_,C-_,s+m,w,C-_,s+m,w,C-_,s]),s+=m,c&&n._17O(t,e,o,i,Ff,f,a,[w,C,s,w,C,s+m,w,C-_,s+m,w,C-_,s+m,w,C-_,s,w,C,s,w,C-_,s,w-_,C-_,s,w-_,C-_,s+m,w-_,C-_,s+m,w,C-_,s+m,w,C-_,s])}},_17O:function(t,e,i,n,r,o,a,s){var l=this.gv._buffer;sd(t,e,n,!0,i,r),Qu(t,e,c,!0,c,!0,c,!1),ed(t,e.uDiffuse,o),Ku(t,l.vs,new Ds(s),e.aPosition),Ku(t,l.ns,new Ds(a),e.aNormal),Yu(t),Ju(t,0,12),qu(t),Xu(t,e)}});var Nf=function(t,e){this.gv=t,this.s=function(i,n,r){return n==c&&(n=r),n==c?e.getStyle(i):dl(n,e,t)},this.data=e};Is(Nf,e,{I3d:!0,ms_icons:1,_iv:!0,iv:function(){this._iv=!0},_42:function(t,e,i,n){var r,o,a,s,l,h,u,d=this,f=d.gv,g=d.data,v=g._id,p=d.s("batch"),_=f._34O,y=f._33O,m=f.isSelectable(g),b=f.getBrightness(g),w=b!=c&&1!==b;if(d._iv){if(a=Pd(_,y,g,p),d.validate(a,p?Pi[p]||Fi:c),a&&(s=_[v],l=s.size=a.vs.length/3-s.begin,u=a.rs))for(b=w?b:1,h=0;l>h;h++)u.push(b);if(xn(g)){var x=f.getWireframe(g);x&&Ed(f,g,x)}d.labelInfo=d.label2Info=d.noteInfo=d.note2Info=d._38o=c,d._24O(jt,"getLabel"),d._24O(Ft,"getLabel2"),d._26O(Wt,"getNote"),d._26O(Ht,"getNote2"),d._15O(),d._iv=!1}w&&ed(t,e.uBrightness,b),o=sd(t,e,i,m,g,At),o&&(Rd(o,_[v],y),Rd(o,f._polylineIndexMap[v],f._polylineModelMap),Rd(o,f._wireframeIndexMap[v],f._wireframeModelMap)),_[v]||d._80o(t,e,n),f.isLabelVisible(g)&&((r=d.labelInfo)&&(sd(t,e,i,m,g,jt),d._28O(r,jt,n)),(r=d.label2Info)&&(sd(t,e,i,m,g,Ft),d._28O(r,Ft,n))),f.isNoteVisible(g)&&((r=d.noteInfo)&&(sd(t,e,i,m,g,Wt),d._29O(r,Wt,n)),(r=d.note2Info)&&(sd(t,e,i,m,g,Ht),d._29O(r,Ht,n))),(r=d._38o)&&d._99O(t,e,r,i,m,n),w&&ed(t,e.uBrightness,1)},validate:function(){},_16O:function(){return Rs},_80o:function(){},dispose:function(){},getBodyColor:function(t){var e=this.data,i=this.gv.getBodyColor(e);return i?i:t?e.getStyle(t):c},_24O:function(t,e){var i=this,n=i.data,r=i.gv,o=i.s,a=r[e](n);if(a!=c){var s=o(t+".scale"),l=o(t+".max"),h=i[t+"Info"]={label:a,textureScale:o(t+".texture.scale"),color:r[e+"Color"](n),font:o(t+".font"),align:o(t+".align"),background:r[e+"Background"](n)},u=h.rect=ar(h,a);l>0&&l<u.width&&(h.labelWidth=u.width,u.width=l),u.x=u.y=0,u.width*=s,u.height*=s,h.mat=i._16O(o(t+".autorotate"),o(t+".position"),u,o(t+".face"),o(t+".t3"),o(t+".r3"),o(t+".rotationMode"));var d=u.width/2,f=u.height/2;h.vs=new Ds([-d,f,0,-d,-f,0,d,-f,0,d,f,0]),u.width/=s,u.height/=s}},_26O:function(t,e){var i=this,n=i.data,r=i.gv,o=i.s,a=r[e](n);if(a!=c){var s=o(t+".scale"),l=this[t+"Info"]={note:a,textureScale:o(t+".texture.scale"),expanded:o(t+".expanded"),font:o(t+".font"),color:o(t+".color"),align:o(t+".align"),borderWidth:o(t+".border.width"),borderColor:o(t+".border.color"),background:r[e+"Background"](n)};if(l.expanded){var h=o(t+".max"),u=ar(l,a);u.width+=6,u.height+=2,h>0&&h<u.width&&(l.labelWidth=u.width,u.width=h);var d={x:-u.width/2,y:-8-u.height,width:u.width,height:u.height+8}}else d={x:-6,y:-18,width:12,height:18};l.mat=i._16O(o(t+".autorotate"),o(t+".position"),c,o(t+".face"),o(t+".t3"),o(t+".r3"),o(t+".rotationMode")),l.rect=d,1!==s&&(d=Ya(d),d.x*=s,d.height*=s,d.y=-d.height,d.width*=s);var f=d.x,g=d.y,v=d.width,p=d.height;l.vs=new Ds([f,-g,0,f,-g-p,0,f+v,-g-p,0,f+v,-g,0])}},_28O:function(t,e,i){if(i(this.s(e+".transparent"))){var n=t.rect,r=t.textureScale,o=n.width*r,a=n.height*r;if(o>=1&&a>=1){var s=Zr(o,a);1!==r&&(s.translate(s,n.x,n.y),s.scale(r,r),s.translate(s,-n.x,-n.y)),Gl(s,t),s.restore(),ud(this,e,t.mat,t.vs,!0)}}},_29O:function(t,e,i){if(i(this.s(e+".transparent"))){var n=t.rect,r=t.textureScale,o=n.x,a=n.y,s=n.width*r,l=n.height*r;if(s>=1&&l>=1){n.x=n.y=0;var c=Zr(s,l);1!==r&&c.scale(r,r),Ul(c,t),c.restore(),n.x=o,n.y=a,ud(this,e,t.mat,t.vs,!1)}}},_99O:function(t,e,i,n,r,o){if(i){var a=this,s=a.gv,l=a.data,h=s._buffer,u=s._1O,d=i.icons;for(var f in d){var g=d[f],v=i.rects[f];if(v&&o(dl(g.transparent,l,s))){sd(t,e,n,r,l,f);var p=dl(g.shape3d,l,s),_=p?[p]:dl(g.names,l,s),y=_?_.length:0,m=dl(g.textureScale,l,s)||1,b=dl(g.light,l,s);b==c&&(b=p?!0:!1),Qu(t,e,dl(g.blend,l,s),b,dl(g.opacity,l,s),dl(g.reverseFlip,l,s),dl(g.reverseColor,l,s),dl(g.reverseCull,l,s));for(var w=0;y>w;w++){var x=_[w],C=v[w];if(hd(a,C.mat),p)vf(s,l,yf(a,p),a);else{var I=Wa(x);if(I){var S=C.width*m,O=C.height*m;if(S>=1&&O>=1){var T=Zr(S,O);Ga(T,I,dl(g.stretch,l,s),0,0,S,O,l,s),T.restore(),Bu(t,Yr,u),Yu(t,e,u,dl(g.discardSelectable,l,s),h.uv,Ud),Ku(t,h.vs,C.vs,e.aPosition),Ku(t,h.ns,Nd,e.aNormal),td(t,h.is,Qd),$u(t,0,Qd.length),qu(t,e,u)}}}rd(s)}Xu(t,e)}}}}});var Qf=function(t,e){Vn(Qf,this,[t,e])};Is(Qf,Nf,{_16O:function(t,e,i,n,r,o,a,s,l){var c=this.data,h=ld(e,c.s3(),i,n,s,l);return cd(Vs(),h,c.p3(),n,r,o,a,t,c.r3(),c.getRotationMode())},clear:function(){var t=this;t.faceMat=t.mat=t.shapeModel=t.left=t.right=t.front=t.back=t.top=t.bottom=t.csg=c},validate:function(t,e){var i=this,n=i.gv,r=i.data,o=yf(i),a=Us(r,n.getMat(r),o?i.s("shape3d.scaleable"):!0);if(i.clear(),t){var s=[];o?Ld(n,r,o,i,i.getBodyColor(),[a],t,s):(Fd(n,r,t,e,a,rt,s,wd),Fd(n,r,t,e,a,ot,s,xd),Fd(n,r,t,e,a,at,s,Cd),Fd(n,r,t,e,a,st,s,Id),Fd(n,r,t,e,a,it,s,Sd),Fd(n,r,t,e,a,nt,s,Od)),s.length&&(Mn(t.vs,s),Mn(t.ns,Ru(s)))}else i.mat=a,(i.shapeModel=o)||(i.vf(rt),i.vf(ot),i.vf(it),i.vf(nt),i.vf(at),i.vf(st))},vf:function(t){var e=this;if(e.gv.getFaceVisible(e.data,t)){var i=dd(e,t);return i.mat&&(e.faceMat=!0),i}},_80o:function(t,e,i){var n=this,r=n.gv,o=n.data,a=r._cube,s=n.shapeModel;ad(r,n.mat),s?vf(r,o,s,n,n.getBodyColor(),i):(Ku(t,a.vs,c,e.aPosition),Ku(t,a.ns,c,e.aNormal),td(t,a.is),n._18O(t,e,n.left,0,i),n._18O(t,e,n.front,6,i),n._18O(t,e,n.right,12,i),n._18O(t,e,n.back,18,i),n._18O(t,e,n.top,24,i),n._18O(t,e,n.bottom,30,i)),rd(r),n.faceMat&&(n._18O(t,e,n.left,0,i,!0),n._18O(t,e,n.front,6,i,!0),n._18O(t,e,n.right,12,i,!0),n._18O(t,e,n.back,18,i,!0),n._18O(t,e,n.top,24,i,!0),n._18O(t,e,n.bottom,30,i,!0))},_18O:function(t,e,i,n,r,o){if(i){if(!r(i.transparent))return;if(o&&!i.mat||!o&&i.mat)return;o&&ad(this.gv,i.mat);var a=this,s=a.data,l=a.gv,h=l.getTexture(i.texture,s),u=i.uv,d=i.uvScale,f=i.uvOffset,g=i.discardSelectable;if(h)if(u){for(var v=8*(n/6),p=0;8>p;p++)Zd[v+p]=u[p];Yu(t,e,h,g,l._buffer.uv,Zd,f,d)}else Yu(t,e,h,g,l._cube.uv,c,f,d);else Yu(t);Qu(t,e,i.blend,i.light,i.opacity,i.reverseFlip,i.reverseColor,i.reverseCull),ed(t,e.uDiffuse,i.color),$u(t,n,6),Xu(t,e),qu(t,e,h),o&&rd(l)}}});var Xf=function(t,e){Vn(Xf,this,[t,e])};Is(Xf,Nf,{_25Q:1,validate:function(t){var e=this,i=e.gv,n=e.data,r=e.s,o=r("edge.width"),a=n._40I,s=n._41I;if(e.shapeModel=e.info=c,a&&s){var l,h,u,f,g,v,p,_,y,m,b=n.isLooped(),w=r(Jt),C=d.getEdgeType(w);if(C){var I=C(n,Yl(e,i,n,b,w),i,e._19Q);if(!I.points||I.points.isEmpty())return;v=e.info={},p=I.segments,g=I.points,_=g.size();for(var S=a.getElevation(),O=s.getElevation(),T=0;_>T;T++){var M=g.get(T);M.e==c&&(M.e=S+(O-S)*T/(_-1))}y=lu(g.get(0)),m=lu(g.get(_-1));var D=_%2;0===D?(v.c1=lu(g.get(_/2-1)),v.c2=lu(g.get(_/2))):v.p3=lu(g.get((_-D)/2)),v.s1=y,v.s2=lu(g.get(1)),v.t1=lu(g.get(_-2)),v.t2=m}else{g=new gl,v=e.info={};var P=r("edge.offset"),k=r("edge.center"),E=r("edge.source.t3"),V=r("edge.target.t3"),R=a.p3(),B=s.p3();if(E&&(R[0]+=E[0],R[1]+=E[1],R[2]+=E[2]),V&&(B[0]+=V[0],B[1]+=V[1],B[2]+=V[2]),w===Bt){p=r("edge.segments");var L=v.points=r(Zt)||vl;if(_=L.size()){y=lu(L.get(0)),m=lu(L.get(_-1)),!k&&P&&(u=Ps(y,R,!0),P=x(P,ls(R,y)),R=[R[0]+u[0]*P,R[1]+u[1]*P,R[2]+u[2]*P],u=Ps(B,m,!0),P=x(P,ls(m,B)),B=[B[0]-u[0]*P,B[1]-u[1]*P,B[2]-u[2]*P]);var D=_%2;0===D?(l=lu(L.get(_/2-1)),h=lu(L.get(_/2))):v.p3=lu(L.get((_-D)/2)),v.s1=R,v.s2=y,v.t1=m,v.t2=B}else!k&&P&&(u=Ps(B,R,!0),f=ls(R,B),P=Nl(P,f),R=[R[0]+u[0]*P,R[1]+u[1]*P,R[2]+u[2]*P],B=[B[0]-u[0]*P,B[1]-u[1]*P,B[2]-u[2]*P]),l=R,h=B;g.add({x:R[0],y:R[2],e:R[1]}),g.addAll(L),g.add({x:B[0],y:B[2],e:B[1]})}else{var z=Yl(e,i,n,b,w);if(e._19Q||(z=-z),b){var A=R[0],j=R[1],F=R[2],W=a.getTall()/2+z;l=[A-z,j+W,F],h=[A+z,j+W,F],g.add({x:A-z,y:F,e:j}),g.add({x:A-z,y:F,e:j+W}),g.add({x:A+z,y:F,e:j+W}),g.add({x:A+z,y:F,e:j})}else{u=Ps(B,R,!0),f=ls(R,B);var H={x:R[0],y:R[2]},G={x:B[0],y:B[2]},U=bu(c,H,G,z),N=U.x-H.x,Q=U.y-H.y;P=Nl(P,f),u[0]*=P,u[1]*=P,u[2]*=P,l=[R[0]+u[0]+N,R[1]+u[1],R[2]+u[2]+Q],h=[B[0]-u[0]+N,B[1]-u[1],B[2]-u[2]+Q],k?(g.add({x:R[0],y:R[2],e:R[1]}),g.add({x:l[0],y:l[2],e:l[1]}),g.add({x:h[0],y:h[2],e:h[1]}),g.add({x:B[0],y:B[2],e:B[1]})):(g.add({x:l[0],y:l[2],e:l[1]}),g.add({x:h[0],y:h[2],e:h[1]}))}}v.c1=l,v.c2=h}v.list=r(Be)===wt?e.createTubeModel(g,p,o/2,t):e.createLineModel(g,p,o,"edge","edge.dash")}}});var Yf=function(t,e){Vn(Yf,this,[t,e])};Is(Yf,Qf,{
_80o:function(t,e,i){var n=this,r=n.gv,o=n.shapeModel;ad(r,n.mat),o?vf(r,n.data,o,n,n.getBodyColor(),i):(fd(n,t,e,n.left,i),fd(n,t,e,n.front,i),fd(n,t,e,n.right,i),fd(n,t,e,n.back,i),fd(n,t,e,n.top,i),fd(n,t,e,n.bottom,i)),rd(r)},validate:function(t,e){var i,n,r=this,o=r.s,a=r.data,s=a.p3(),l=a._thickness/2,h=a.isClosePath(),u=a.getPoints(),d=a.getSegments(),f=o(Le),g=t&&t.uv;if(r.clear(),0>l)n=r.shapeModel=ic(u,d,o(Fe),o(We),f,o(He),a.getTall(),a.getElevation(),h),o(ze)?o("shape3d.image")||delete n.uv:(delete n.vs,delete n.ns,delete n.uv),o("shape3d.top.image")||delete n.top_uv,o("shape3d.bottom.image")||delete n.bottom_uv;else if(o(Be)===wt)i=so(u,d,f,h),n=r.shapeModel={vs:[]},o("shape3d.image")&&(n.uv=[],n.sum=o(He)||Xn(i)||1,n.len=0),o(Fe)&&!h&&(n.top_vs=[],o("shape3d.top.image")&&(n.top_uv=[])),o(We)&&!h&&(n.bottom_vs=[],o("shape3d.bottom.image")&&(n.bottom_uv=[])),r._12O(i,l);else{var v,p,_,y,m,b,w,x,C,I;i=so(u,d,f,h),m=r.vf(it,g,!1,e),l&&(b=r.vf(nt,g,!1,e),w=h?c:r.vf(rt,g,!1,e),x=h?c:r.vf(ot,g,!1,e),C=r.vf(at,g,!1,e),I=r.vf(st,g,!1,e)),l?r._12O(i,l):m&&i.forEach(function(t){if(y=t.length,y>0)for(v=t[0],_=1;y>_;_++)p=t[_],r.addV(m.vs,v,p),v=p}),r._20Q(i),t||(m&&(m.ns=Ru(m.vs),bf(m,"vs"),bf(m,ne)),l&&(b&&(b.ns=Ru(b.vs),bf(b,"vs"),bf(b,ne)),w&&(w.ns=Ru(w.vs),bf(w,"vs"),bf(w,ne)),x&&(x.ns=Ru(x.vs),bf(x,"vs"),bf(x,ne)),C&&(C.ns=Ru(C.vs),bf(C,"vs"),bf(C,ne)),I&&(I.ns=Ru(I.vs),bf(I,"vs"),bf(I,ne))))}var S=r.mat=Vs();Cu(S,s),Xc(S,a.r3(),a.getRotationMode()),Cu(S,ks(s)),t&&(Ad(r,S,t,n),r.clear())},_20Q:function(t){var e,i,n,r,o,a,s,l=this,h=l.front,u=l.back,d=l.top,f=l.bottom,g=h?h.tuv:c,v=u?u.tuv:c,p=d?d.tuv:c,_=f?f.tuv:c,y=0;(g||v||p||_)&&(e=l.s(He)||Xn(t)||1,t.forEach(function(t){if(i=t.length,i>0)for(a=t[0],n=1;i>n;n++)s=t[n],r=y/e,y+=ls(a,s),o=y/e,l._14O(h,r,o),l._14O(u,1-o,1-r),l._14O(d,r,o),l._14O(f,r,o),a=s}))},_14O:function(t,e,i){if(t){var n=t.uv,r=t.tuv;if(r){if(n)var o=n[0]+(n[6]-n[0])*e,a=n[1]+(n[7]-n[1])*e,s=n[2]+(n[4]-n[2])*e,l=n[3]+(n[5]-n[3])*e,c=n[2]+(n[4]-n[2])*i,h=n[3]+(n[5]-n[3])*i,u=n[0]+(n[6]-n[0])*i,d=n[1]+(n[7]-n[1])*i;else o=e,a=0,s=e,l=1,c=i,h=1,u=i,d=0;r.push(s,l,c,h,u,d,u,d,o,a,s,l)}}},_13O:function(t){var e=t.uv,i=t.tuv;i&&(e?i.push(e[2],e[3],e[4],e[5],e[6],e[7],e[6],e[7],e[0],e[1],e[2],e[3]):i.push(0,1,1,1,1,0,1,0,0,0,0,1))},_12O:function(t,e){var i,n,r,o,a,s=this;t.forEach(function(t){if(a=t.length,a>0)for(i={p:t[0],n:!0},o=1;a>o;o++)n=t[o],r=a-1>o?t[o+1]:c,s.addPoint(i,n,r,e,t)})},addPoint:function(t,e,i,n,r){var o,a,s,l,h,u,d,f,g,v=this,p=t.p,_=t.f,y=t.b,m=v.s("shape3d.side")||Cs,b=v.s("shape3d.start.angle"),w=v.s("shape3d.sweep.angle"),x=v.shapeModel,C=v.data.isClosePath();if(t.n&&(t.n=!1,_=C&&r.length>2?bu(r[r.length-2],p,e,n):bu(c,p,e,n),y=mu(p,_),x?x.top_vs&&v._10O(y,_,m,b,w,x.top_vs,x.top_uv):(o=v.left)&&(v.addV(o.vs,y,_),v._13O(o))),a=i?bu(p,e,i,n):C&&r.length>2?bu(p,e,r[1],n):bu(p,e,c,n),s=mu(e,a),x){var I,S,O=x.vs,T=x.uv,M=x.sum;for(T&&(I=x.len/M,x.len+=ls(p,e),S=x.len/M),u=v._9O(y,_,m,b,w),d=v._9O(s,a,m,b,w),f=0;m>f;f++)g=f+1,Mn(O,u[g]),Mn(O,d[f]),Mn(O,u[f]),Mn(O,d[f]),Mn(O,u[g]),Mn(O,d[g]),T&&(l=f/m,h=g/m,T.push(I,h,S,l,I,l,S,l,I,h,S,h));!i&&x.bottom_vs&&v._10O(s,a,m,b,w,x.bottom_vs,x.bottom_uv,!0)}else!i&&(o=v.right)&&(v.addV(o.vs,a,s),v._13O(o)),(o=v.front)&&v.addV(o.vs,_,a),(o=v.back)&&v.addV(o.vs,s,y),(o=v.top)&&v.addH(o.vs,_,a,s,y,!0),(o=v.bottom)&&v.addH(o.vs,y,s,a,_);t.p=e,t.f=a,t.b=s},_10O:function(t,e,i,n,r,o,a,s){var l,c,h=this,u=h.data,d=h._9O(t,e,i,n,r),f=(t.x+e.x)/2,g=(t.y+e.y)/2,v=u.getElevation(),p=0;for(p=0;i>p;p++)s?(Mn(o,d[p]),Mn(o,d[p+1])):(Mn(o,d[p+1]),Mn(o,d[p])),Mn(o,[f,v,g]),a&&(s?(l=P*(p+1)/i+n,c=P*p/i+n):(l=P*p/i+n,c=P*(p+1)/i+n),a.push(.5-.5*I(c),.5-.5*O(c),.5-.5*I(l),.5-.5*O(l),.5,.5))},_9O:function(t,e,i,n,r){var o,a,s=this,l=s.data,c=[],h=(t.x+e.x)/2,u=(t.y+e.y)/2,d=l.getTall()/2,f=l.getElevation(),g=0;for(r=r||P;i>=g;g++)o=r*g/i+n,a=I(o),c.push([h+(t.x-h)*a,f+d*O(o),u+(t.y-u)*a]);return c},addV:function(t,e,i){var n=e.x,r=e.y,o=i.x,a=i.y,s=this.data,l=s.getElevation(),c=s.getTall()/2;t.push(n,l-c,r,o,l-c,a,o,l+c,a,o,l+c,a,n,l+c,r,n,l-c,r)},addH:function(t,e,i,n,r,o){var a=this.data,s=a.getTall()/2,l=a.getElevation()+(o?s:-s);t.push(e.x,l,e.y,i.x,l,i.y,n.x,l,n.y,n.x,l,n.y,r.x,l,r.y,e.x,l,e.y)},vf:function(t,e,i,n){var r,o=this,a=o.gv.getFaceVisible(o.data,t);return(i||a)&&(r=dd(o,t,n),r.vs=[],r.tuv=a&&(r.texture||e)?[]:c,r.visible=a),r}});var qf=function(t,e){Vn(qf,this,[t,e])};Is(qf,Nf,{_25Q:1,validate:function(t){var e=this,i=e.data,n=e.s,r=i.getPoints(),o=r.size();if(e.shapeModel=e.info=c,o>1){var a=e.info={},s=i.getSegments(),l=i.getThickness(),h=lu(r.get(0)),u=lu(r.get(o-1)),d=o%2;0===d?(a.c1=lu(r.get(o/2-1)),a.c2=lu(r.get(o/2))):a.p3=lu(r.get((o-d)/2)),a.s1=h,a.s2=lu(r.get(1)),a.t1=lu(r.get(o-2)),a.t2=u,a.list=n(Be)===wt?e.createTubeModel(r,s,l/2,t):e.createLineModel(r,s,l,"shape.border","shape.dash")}}}),Pn(d,{accordionViewExpandIcon:on(Wo),accordionViewCollapseIcon:on(Wo,!0),accordionViewLabelColor:xa,accordionViewLabelFont:Ca,accordionViewTitleBackground:Fo,accordionViewSelectBackground:Jo,accordionViewSelectWidth:3,accordionViewSeparatorColor:i,splitViewDividerSize:1,splitViewDividerBackground:Fo,splitViewDragOpacity:.5,splitViewToggleIcon:{width:16,height:16,comps:[{type:yt,rect:[2,2,12,12],background:Wo}]},propertyViewLabelColor:wa,propertyViewLabelSelectColor:xa,propertyViewLabelFont:Ca,propertyViewExpandIcon:on(Go),propertyViewCollapseIcon:on(Go,!0),propertyViewBackground:Ho,propertyViewRowLineVisible:!0,propertyViewColumnLineVisible:!0,propertyViewRowLineColor:Xo,propertyViewColumnLineColor:Xo,propertyViewSelectBackground:Jo,listViewLabelColor:wa,listViewLabelSelectColor:xa,listViewLabelFont:Ca,listViewRowLineVisible:!1,listViewRowLineColor:Xo,listViewSelectBackground:Jo,treeViewLabelColor:wa,treeViewLabelSelectColor:xa,treeViewLabelFont:Ca,treeViewExpandIcon:on(Qo),treeViewCollapseIcon:on(Qo,!0),treeViewRowLineVisible:!1,treeViewRowLineColor:Xo,treeViewSelectBackground:Jo,treeViewDoubleClickToToggle:!0,tableViewLabelColor:wa,tableViewLabelSelectColor:xa,tableViewLabelFont:Ca,tableViewRowLineVisible:!0,tableViewColumnLineVisible:!0,tableViewRowLineColor:Xo,tableViewColumnLineColor:Xo,tableViewSelectBackground:Jo,treeTableViewLabelColor:wa,treeTableViewLabelSelectColor:xa,treeTableViewLabelFont:Ca,treeTableViewExpandIcon:on(Qo),treeTableViewCollapseIcon:on(Qo,!0),treeTableViewRowLineVisible:!0,treeTableViewColumnLineVisible:!0,treeTableViewRowLineColor:Xo,treeTableViewColumnLineColor:Xo,treeTableViewSelectBackground:Jo,tableHeaderLabelColor:wa,tableHeaderLabelFont:Ca,tableHeaderColumnLineVisible:!0,tableHeaderColumnLineColor:No,tableHeaderBackground:Ho,tableHeaderMoveBackground:zo,tableHeaderInsertColor:Jo,tableHeaderSortDescIcon:an(Go,!0),tableHeaderSortAscIcon:an(Go),tabViewTabGap:1,tabViewLabelColor:xa,tabViewLabelFont:Ca,tabViewTabBackground:Fo,tabViewSelectWidth:3,tabViewSelectBackground:Jo,tabViewMoveBackground:zo,tabViewInsertColor:Jo,toolbarLabelColor:wa,toolbarLabelSelectColor:xa,toolbarLabelFont:Ca,toolbarBackground:Ho,toolbarSelectBackground:Jo,toolbarItemGap:8,toolbarSeparatorColor:Uo},!0);var Zf={translateX:1,sortColumn:1},Jf={sortable:1,sortOrder:1,sortFunc:1},$f={focusData:1},Kf={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},tg={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},eg=function(t,e){e.add(t),t.hasChildren()&&t.eachChild(function(t){eg(t,e)})},ig=function(t,e,i,n,r,o,a,s,l,h,u){var f,g=i.getValueType(h),v=i.getAlign(h);if(i.getEnumValues(h)){var p=i.toEnumLabel(e,h),_=Ia||0,y=0,m=o,b=d.getTextSize(n,p).width;return f=Wa(i.toEnumIcon(e,h)),f&&(y=o+Ia/2,"center"===v?y+=(s-(_+b))/2:"right"===v&&(y=y+s-(_+b)),Ha(t,f,y,a+l/2),m=y+Ia/2),p!=c&&(f?Ka(t,p,n,r,m,a,s-(m-o),l):Ka(t,p,n,r,o,a,s,l,v)),void 0}return e=i.formatValue(e),e!=c?g===$e?(ho(t,o,a,s,l,e),void 0):g===Je||!g&&pn(e)?(f=Wa(e?Pt:kt),Ha(t,f,o+s/2,a+l/2,h,u),void 0):(Ka(t,e,n,r,o,a,s,l,v),void 0):void 0},ng=function(t,e){var i=e.view,n=i.getDataModel().getHistoryManager(),r=yr(t),o=e.column||e.property;n&&n.beginInteraction(),e.editor=t,t.info=e,i.setCurrentEditor(t),i.getView().insertBefore(r,i._79O),mr(t,e.editorRect),t.setFocus?t.setFocus():_r(t),t.commitValue=function(){t._17Q&&(t=t._17Q),i.setValue(e.data,o,t.getValue?t.getValue():t.value),t.close&&t.close(),ms(r)},o.onEditorCreated&&o.onEditorCreated(e)},rg=function(t,e,i,n,r){var o=bs(t,i),a=e.value,s=e.view,h=r.getValueType(e.data);return o.onblur=o.onchange=function(){s.endEditing()},"input"===t?(a=r.formatValue(a),a!=c&&(o.value=a),o.onkeydown=function(t){Ur(t)&&s.endEditing()},(h===Ke||h===ti)&&o.addEventListener(di,d.numberListener,!1)):t===oe&&n.forEach(function(t){var e=l.createElement("option");e.innerHTML=r.toEnumLabel(t),e.value=t,r.isEnumEqual(a,t)&&(e.selected=!0),or(o,e)}),ng(o,e),o},og=h.widget={},ag=function(t,e,i){Is(n+".widget."+t,e,i)};Pn(ca,{ms_value:function(t){t.getValue=function(t){var e=this.getItemById(t),i=e.element;return gn(i)?i:i?i.getValue?i.getValue():i.value:e.selected},t.setValue=function(t,e){var i=this.getItemById(t),n=i.element;n&&!gn(n)?n.setValue?n.setValue(e):n.value=e:pn(e)?(i.selected=e,this.iv()):(i.element=e,this.iv())},t.v=function(t,e){var i=this;if(2===arguments.length)i.setValue(t,e);else{if(!_n(t))return i.getValue(t);for(var n in t)i.setValue(n,t[n])}return i}},_46o:function(t){t._icon=c,t._accessType=c,t._valueType=c,t._editable=!1,t._batchEditable=!0,t._align=rt,t._nullable=!0,t._emptiable=!1,t.setParent=Ui,t.formatValue=function(t){var e=this,i=e._valueType;return e.getEnumValues()?e.toEnumLabel(t):i===Je?!!t:t!=c&&i===Ke?_(t):t},t.setEnum=function(t,e,i,n,r,o,a){var s=this;t&&!mn(t)&&t.values&&(n=t.editable,i=t.icons,e=t.labels,r=t.strict,o=t.maxHeight,a=t.dropDownWidth,t=t.values),bn(t)&&(t=t._as),bn(e)&&(e=e._as),bn(i)&&(i=i._as),s._enumValues=t,s._enumLabels=e,s._enumIcons=i,s._enumEditable=n,s._enumStrict=r==c?!0:r,s._enumMaxHeight=o,s._enumDropDownWidth=a,t&&t.length&&vn(t[0])&&(s._valueType=ti),s.fp("enum",!1,!0)},t.getEnumDropDownWidth=function(){return this._enumDropDownWidth},t.getEnumMaxHeight=function(){return this._enumMaxHeight},t.isEnumEditable=function(){return this._enumEditable},t.getEnumValues=function(){return this._enumValues},t.getEnumLabels=function(){return this._enumLabels},t.getEnumIcons=function(){return this._enumIcons},t.isEnumStrict=function(){return this._enumStrict},t.isEnumEqual=function(t,e){return this._enumStrict?t===e:t==e},t.toEnumLabel=function(t,e){var i=this,n=i.getEnumValues(e),r=i.getEnumLabels(e);if(n&&r)for(var o=0;o<n.length;o++)if(i.isEnumEqual(t,n[o]))return r[o];return t},t.toEnumIcon=function(t,e){var n=this,r=n.getEnumValues(e),o=n.getEnumIcons(e);if(r&&o)for(var a=0;a<r.length;a++)if(n.isEnumEqual(t,r[a]))return o[a];return i}},_45o:function(t){t._87o=function(t,e,i,n,r,o){if(t){var a=this,s=a._90I,l=tr(1);a._columnLineVisible&&(r-=1),a._rowLineVisible&&(o-=1),0>=r||0>=o||(a._90I||(s=a._90I={}),s[e]||(s[e]=new gl),mr(l,a.tx()+i,a.ty()+n,r,o),or(l,t),a._view.insertBefore(l,a._79O),t.onParentAdded&&t.onParentAdded(l),s[e].add(l))}},t._76o=function(){var t=this,e=t._90I;if(e){for(var i in e)e[i].each(function(t){ms(t)});delete t._90I}},t._77o=function(t){var e=this;if(e._90I){var i=e._90I[t];i&&(i.each(function(t){ms(t)}),delete e._90I[t])}}},_47o:function(t){t.getValue=function(t,e){return e.getValue?e.getValue(t,e,this):Hn(t,e.getAccessType(),e.getName())},t.setValue=function(t,e,n){if(e.isEmptiable(t)||""!==n||(n=i),e.isNullable(t)||n!=c){var r=this,o=e.getName(t),a=e.getAccessType(t),s=e.getValueType(t);s===Ke&&gn(n)?n=A(n):s===ti&&gn(n)?n=parseFloat(n):s===Je&&gn(n)&&(n="true"===n),r._batchEditable&&e._batchEditable&&r.isSelected(t)?r.sm().each(function(t){e.setValue?e.setValue(t,e,n,r):Gn(t,a,o,n)}):e.setValue?e.setValue(t,e,n,r):Gn(t,a,o,n)}},t.setCurrentEditor=function(t){this.endEditing(),this._currentEditor=t,this.redraw()},t.isEditing=function(t,e){var i=this,n=i._currentEditor;if(!n)return!1;if(e){var r=n.info;return r?(r.column||r.property)===e&&r.data===t:!1}return!0},t.endEditing=function(){var t=this,e=t._currentEditor,i=t.getDataModel().getHistoryManager();e&&(delete t._currentEditor,e.commitValue&&e.commitValue(e.info),t.redraw(),i&&i.endInteraction())},t.beginEditing=function(t){this.endEditing();var e=this,i=t.column||t.property;if(i.beginEditing)i.beginEditing(t);else{var n=t.data,r=t.value,o=e.getSelectBackground(n),a=i.getEnumValues(n),s=i.getSlider(n),l=i.getColorPicker(n);if(s){var h=Aa(og.Slider,s);return h.setValue(r),h.getView().onblur=function(){e.endEditing()},h.isInstant()&&(h.onValueChanged=function(){e.setValue(n,i,h.getValue())}),ng(h,t),void 0}if(l||i.getValueType(n)===$e){var u=Aa(og.ColorPicker,l);return u.setValue(r),u.onClosed=function(){e.endEditing()},u.isInstant()&&(u.onValueChanged=function(t,r){e.setValue(n,i,r)}),ng(u,t),u.open(),void 0}if(a){if(og.ComboBox){var d=new og.ComboBox;d.setValue(r),d.setValues(a),d.setLabels(i.getEnumLabels(n)),d.setIcons(i.getEnumIcons(n)),d.setEditable(i.isEnumEditable(n)),d.setStrict(i.isEnumStrict(n)),d.setMaxHeight(i.getEnumMaxHeight(n)),d.setDropDownWidth(i.getEnumDropDownWidth(n)),d.onClosed=function(){e.endEditing()},ng(d,t),d.open()}else rg(oe,t,o,a,i);return}var f=i.getValueType(n);if(f===Je||pn(r))return e.setValue(n,i,!r),void 0;if(i.getItemEditor(n)){var g=qa(i.getItemEditor(n)),v=new g(n,i,e,t),p=v.getView();return p._17Q=v,v.setValue(r),nr(p),ng(p,t),v.editBeginning&&v.editBeginning(),void 0}rg("input",t,o,c,i)}}},_44o:function(t){t.init=function(t){var e=this,i=e.th=new wg(t),n=e._view=Kn(1,e);e.tv=e._tableView=t,or(n,i.getView()),or(n,t.getView()),i.mp(function(t){t.property===Mt&&e.iv()}),e.iv()},t.getTableView=function(){return this.tv},t.getTableHeader=function(){return this.th},t.getDataModel=function(){return this.tv.dm()},t.getColumnModel=function(){return this.tv.getColumnModel()},t.setColumns=function(t){this.tv.setColumns(t)},t.addColumns=function(t){this.tv.addColumns(t)},t.endEditing=function(){this.tv.endEditing()},t.validateImpl=function(){var t=this,e=t.th,i=hr(e),n={x:0,y:0,width:t.getWidth(),height:i};mr(e,n),n.y=i,n.height=w(0,t.getHeight()-i),mr(t.tv,n)}},ms_vs:function(t){t._41o=function(){return this._29I.height<this._59I},t._43o=function(){var t=this;t._41o()&&(t._58I||(H(function(){t._94O()},Pa),t.iv()),t._58I=new Date)},t._94O=function(){var t=this;if(t._58I){var e=new Date;e.getTime()-t._58I.getTime()>=Pa?(delete t._58I,t.iv()):H(function(){t._94O()},Pa)}},t._93I=function(){var t=this,e=t._27I;if(t._58I||!t._autoHideScrollBar){e||or(t._79O,e=t._27I=tr());var i=t._29I,n=i.height,r=t._59I,o=t.getScrollBarSize(),a=i.width-o-2,s=n*(-t.ty()/r),l=n*(n/r),c=e.style;r>n?(ka>l&&(s=s+l/2-ka/2,0>s&&(s=0),s+ka>n&&(s=n-ka),l=ka),c.visibility=ie,c.background=t.getScrollBarColor(),c.borderRadius=o/2+vt,mr(e,a,s,o,l)):c.visibility=ee}else e&&(e.style.visibility=ee)}},ms_hs:function(t){t._40o=function(){return this._29I.width<this._91I},t._42o=function(){var t=this;t._40o()&&(t._95O||(H(function(){t._94I()},Pa),t.iv()),t._95O=new Date)},t._94I=function(){var t=this;if(t._95O){var e=new Date;e.getTime()-t._95O.getTime()>=Pa?(delete t._95O,t.iv()):H(function(){t._94I()},Pa)}},t._92I=function(){var t=this,e=t._28I;if(t._95O||!t._autoHideScrollBar){e||or(t._79O,e=t._28I=tr());var i=t._29I,n=i.width,r=t._91I,o=t.getScrollBarSize(),a=i.height-o-2,s=n*(-t.tx()/r),l=n*(n/r),c=e.style;r>n?(ka>l&&(s=s+l/2-ka/2,0>s&&(s=0),s+ka>n&&(s=n-ka),l=ka),c.visibility=ie,c.background=t.getScrollBarColor(),c.borderRadius=o/2+vt,mr(e,s,a,l,o)):c.visibility=ee}else e&&(e.style.visibility=ee)}}}),Fa(Pt,nn(16,16,[{type:mt,rect:[1,1,14,14],background:Jo},{type:_t,rect:[1,1,14,14],width:1,color:Yo},{type:xt,points:[13,3,7,12,4,8],borderWidth:2,borderColor:"#FFF"}])),Fa(kt,nn(16,16,{type:_t,rect:[1,1,14,14],width:1,color:Yo})),Fa(Vt,nn(16,16,[{type:bt,rect:[2,2,12,12],borderWidth:1,borderColor:Yo,background:"#FFF"},{type:bt,rect:[4,4,8,8],background:Jo}])),Fa(Rt,nn(16,16,{type:bt,rect:[2,2,12,12],borderWidth:1,borderColor:Yo})),ca._15Q=function(t){t._29I=Xi,t._59I=0,t._91I=0,t._5o=function(t){var e=this;e._30I=new gl,e._rows=new gl,e._rowMap={},e._31I=0,e._14I=0,e._view=Kn(1,e),e._canvas=er(e._view),or(e._view,e._79O=tr()),e.dm(t?t:new yl)},t.getCheckIcon=function(t){var e=this.sm(),i=e.co(t);return e.sg()?Wa(i?Vt:Rt):Wa(i?Pt:kt)},t.checkData=function(t){var e=this.sm(),i=e.co(t);e.sg()&&i||(this._32o=1,i?e.rs(t):e.as(t),delete this._32o)},t.getDataAt=function(t){t.target&&(t=this.lp(t));var e=y(t.y/this._rowHeight),i=this._rows;return 0>e||e>=i.size()?c:i.get(e)},t.onDataDoubleClicked=function(){},t.onDataClicked=function(){},t.adjustTranslateX=function(){return 0},t.adjustTranslateY=function(t){var e=this.getHeight()-this._59I;return e>t&&(t=e),t>0?0:_(t)},t.onPropertyChanged=function(t){var e=this,i=t.property;Kf[i]?e.ivm():$f[i]||e.redraw(),i===ke?e._42o():i===Ee&&e._43o()},t.getLabel=function(t){return t.toLabel()},t.getLabelFont=function(){return this._labelFont},t.getLabelColor=function(t){var e=this;if(e.isCheckMode()){if(e._focusData===t)return e._labelSelectColor}else if(e.isSelected(t))return e._labelSelectColor;return e._labelColor},t.getStartRowIndex=function(){return this._31I},t.getEndRowIndex=function(){return this._14I},t.getRowDatas=function(){return this._rows},t.getRowIndex=function(t){return this._rowMap[t._id]},t.getRowSize=function(){return this._rows.size()},t.getViewRect=function(){return Ya(this._29I)},t.isVisible=function(t){return this._visibleFunc?this._visibleFunc(t):!0},t.getCurrentSortFunc=function(){return this._sortFunc},t.setDataModel=function(t){var e=this,i=e._dataModel,n=e._selectionModel;i!==t&&(i&&(i.umm(e.handleDataModelChange,e),i.umd(e.handleDataPropertyChange,e),i.umh(e.handleHierarchyChange,e),n||i.sm().ums(e.handleSelectionChange,e)),e._dataModel=t,t.mm(e.handleDataModelChange,e),t.md(e.handleDataPropertyChange,e),t.mh(e.handleHierarchyChange,e),n?n._21I(t):t.sm().ms(e.handleSelectionChange,e),e.fp("dataModel",i,t))},t.validateModel=function(){var t=this;t._rows.clear(),t._rowMap={},t.buildChildren(t._dataModel._roots);var e=t._rows=t._rows.toList(t.isVisible,t),i=0,n=t.getCurrentSortFunc(),r=e.size();for(n&&e.sort(n);r>i;i++)t._rowMap[e.get(i)._id]=i},t.buildChildren=function(t){var e=this;t.each(function(t){e._rows.add(t),e.buildChildren(t._children)})},t.handleDataModelChange=function(){this.ivm()},t.handleDataPropertyChange=function(t){"parent"===t.property?this.ivm():this.invalidateData(t.data)},t.handleHierarchyChange=function(){this.ivm()},t.handleSelectionChange=function(t){t.datas.each(this.invalidateData,this),this.onSelectionChanged(t)},t.onSelectionChanged=function(t){var e=this,i=e.sm();!e.isAutoMakeVisible()||1!==i.size()||"set"!==t.kind&&"append"!==t.kind||e._32o||e.makeVisible(i.ld())},t.handleBackgroundClick=function(t){es(t)&&!this.isCheckMode()&&this.sm().cs()},t.makeVisible=function(t){t&&(this._23I=t,this.iv())},t.scrollToIndex=function(t){var e=this,i=e._29I,n=i.height,r=e._rowHeight,o=r*t;t>=0&&t<e._rows.size()&&n>0&&(o+r>i.y+n?e.ty(-o+n-r):o<i.y&&e.ty(-o))},t.autoScroll=function(t,e){var i=this,n=i._rowHeight,r=n,o=n/4,a=i._29I,s=i.lp(t),l={x:i.tx(),y:i.ty()};return n>0&&a&&(s.x-a.x<r?i.translate(o,0):a.x+a.width-s.x<r&&i.translate(-o,0),s.y-a.y<r?i.translate(0,o):a.y+a.height-s.y<r&&i.translate(0,-o)),l.x=i.tx()-l.x,l.y=i.ty()-l.y,e&&(e.x+=l.x,e.y+=l.y),l},t.getTopRowOrderSelection=function(){var t=this.sm().getTopSelection(),e={},i=new gl;return t.each(function(t){e[t._id]=t}),this._rows.each(function(t){e[t._id]&&i.add(t)}),i},t.getRowOrderSelection=function(){var t=new gl;return this._rows.each(function(e){this.isSelected(e)&&t.add(e)},this),t},t.ivm=function(){this.invalidateModel()},t.invalidateModel=function(){var t=this;t._96I||(t._96I=1,t._32I=1,delete t._24I),t.iv()},t.redraw=function(){var t=this;t._32I||(t._32I=1,delete t._24I,t.iv())},t.invalidateData=function(t){var e=this;Y?e.redraw():e._32I||(e._24I||(e._24I={}),e._24I[t._id]=t,e.iv())},t.getFocusData=function(){return this._focusData},t.setFocusDataById=function(t){this.setFocusData(this.dm().getDataById(t))},t.setFocusData=function(t){var e=this,i=e._focusData;i!==t&&(e._focusData=t,e.fp("focusData",i,t),i&&e.invalidateData(i),t&&(e.invalidateData(t),e.isAutoMakeVisible()&&e.makeVisible(t)))},t.drawRowBackground=function(t,e,i,n,r,o,a){var s=this,l=s.isCheckMode();(e===s._focusData&&l||i&&!l)&&ho(t,n,r,o,a,s.getSelectBackground(e))},t.drawData=function(t,e,i){var n=this,r=n._rowHeight,o=r*i,a=n._29I,s=a.x,l=a.width;t.save(),t.beginPath(),t.rect(s,o,l,r),t.clip(),n._87o(n.drawRow(t,e,n.isSelected(e),s,o,l,r),i,s,o,l,r),t.restore(),n._rowLineVisible&&ho(t,s,o+r-1,l,1,n._rowLineColor)},t._12I=function(t){var e=this,i=e._31I,n=e._29I,r=n.x,o=n.y,a=n.width,s=n.height;for(t.beginPath(),t.rect(r,o,a,s),t.clip(),t.clearRect(r,o,a,s),e._76o(),e._93db(t);i<e._14I;i++)e.drawData(t,e._rows.get(i),i);e._92db(t)},t._13I=function(t){for(var e,i=this,n=i._rowHeight,r=i._29I,o=r.x,a=r.width,s=i._31I,l=i._30I;s<i._14I;s++)e=i._rows.get(s),i._24I[e._id]&&l.add({data:e,index:s});l.isEmpty()||(t.beginPath(),l.each(function(e){t.rect(o,e.index*n,a,n)}),t.clip(),l.each(function(e){t.clearRect(o,e.index*n,a,n)}),l.each(function(t){i._77o(t.index)}),i._93db(t),l.each(function(e){i.drawData(t,e.data,e.index)}),i._92db(t),l.clear())},t.validateImpl=function(){var t=this,e=t._canvas,i=t.getWidth(),n=t.getHeight(),r=t._rowHeight,o=t._32I;(i!==e.clientWidth||n!==e.clientHeight)&&(rr(e,i,n),o=1);var a=L&&!z;t._96I&&!a&&t.validateModel();var s=t._29I,l={x:-t.tx(),y:-t.ty(),width:i,height:n},h=t._rows.size(),u=dr(e),d=t._23I;o||Ln(l,s)||(o=1),t._29I=l,t._59I=h*r,t._31I=y(l.y/r),t._14I=m((l.y+l.height)/r),t._31I<0&&(t._31I=0),t._14I>h&&(t._14I=h),t._99I&&o&&t._99I(),fr(u,t.tx(),t.ty(),1),o?t._12I(u):t._24I&&t._13I(u),t._93I(),t._92I(),u.restore(),t._32I=t._24I=t._96I=c,d&&(t.scrollToIndex(t.getRowIndex(d)),delete t._23I),t.tx(t.tx()),t.ty(t.ty())}},ca._48o=function(t){t._rootVisible=!0,t._rootData=c,t._35o=function(){this._expandMap={},this._levelMap={}},t.validateModel=function(){var t=this,e=t._rootData;t._rows.clear(),t._levelMap={},t._rowMap={},t._currentLevel=0,e?t._rootVisible?t.isVisible(e)&&t.buildData(e):t.buildChildren(e):t.buildChildren(),delete t._currentLevel},t.buildData=function(t){var e=this,i=t._id,n=e._rows;e._rowMap[i]=n.size(),n.add(t),e._levelMap[i]=e._currentLevel,e.isExpanded(t)&&(e._currentLevel++,e.buildChildren(t),e._currentLevel--)},t.buildChildren=function(t){var e=this,i=t?t._children:e._dataModel._roots,n=e.getCurrentSortFunc();n&&e.isChildrenSortable(t)?i.toList(e.isVisible,e).sort(n).each(e.buildData,e):i.each(function(t){e.isVisible(t)&&e.buildData(t)})},t.getLevel=function(t){return this._levelMap[t._id]},t.getToggleIcon=function(t){var e=this,i=e._loader,n=e._collapseIcon;return i&&!i.isLoaded(t)?n:t.hasChildren()?e.isExpanded(t)?e._expandIcon:n:c},t.isCheckMode=function(){return this._checkMode!=c},t.isChildrenSortable=function(){return!0},t.handleDataModelChange=function(t){var e=this;t.kind===St?delete e._expandMap[t.data._id]:t.kind===Ot&&(e._expandMap={}),e.ivm()},t.toggle=function(t){var e=this;e.isExpanded(t)?e.collapse(t):e.expand(t)},t.isExpanded=function(t){return 1===this._expandMap[t._id]},t.expand=function(t){var e=this,i=e._loader;e.isExpanded(t)||(i&&!i.isLoaded(t)&&i.load(t),e._expandMap[t._id]=1,e.ivm(),e.onExpanded(t))},t.onExpanded=function(){},t.collapse=function(t){var e=this;e.isExpanded(t)&&(delete e._expandMap[t._id],e.ivm(),e.onCollapsed(t))},t.onCollapsed=function(){},t.expandAll=function(){var t=this;t._dataModel.each(function(e){e.hasChildren()&&(t._expandMap[e._id]=1)}),t.ivm()},t.collapseAll=function(){this._expandMap={},this.ivm()},t.makeVisible=function(t){if(t){var e=this;if(!e._rootData||t.isDescendantOf(e._rootData)){for(var i=t._parent;i;)e.expand(i),i=i._parent;e._23I=t,e.iv()}}},t.checkData=function(t){var e,i=this,n=i._checkMode,r=i.sm(),o=r.co(t);if(!r.sg()||!o){if(i._32o=1,n===K)o?r.rs(t):r.as(t);else if(n===Pe)e=new gl(t),e.addAll(t._children);else if("descendant"===n)e=new gl,eg(t,e);else if("all"===n&&(e=new gl,eg(t,e),!o))for(var a=t._parent;a;)e.add(a),a=a._parent;e&&(o?r.rs(e):r.as(e)),delete i._32o}},t._97I=function(t,e,i,n,r,o,a){var s=this,l=s._indent,c=s._levelMap[e._id],h=s.getIconWidth(e),u=Wa(s.getToggleIcon(e));u?(n+=l*c,Ha(t,u,n+l/2,r+a/2,e,s),n+=l):n+=l*(c+1),s._checkMode&&(Ha(t,s.getCheckIcon(e),n+l/2,r+a/2,e,s),n+=l),s.drawIcon(t,e,n,r,h,a),s.drawLabel(t,e,n+h,r,a)}},ca._14Q=function(t){t.getIcon=function(t){return t.getIcon()},t.getIconWidth=function(t){return this.getIcon(t)?this._indent:0},t.drawIcon=function(t,e,i,n,r,o){if(r){var a=this,s=a.getBodyColor(e),l=Wa(a.getIcon(e),s);l&&(o-=a.isRowLineVisible()?1:0,Ga(t,l,Ne,i,n,r,o,e,a,s),_o(t,a.getBorderColor(e),i,n,r,o))}},t.drawLabel=function(t,e,i,n,r){var o=this;Ka(t,o.getLabel(e),o.getLabelFont(e),o.getLabelColor(e),i,n,0,r)}},ca._50o=function(t){t._98I=function(){var t=this,e=t._39o=new yl;t._60I=new gl,e.mm(t._17o,t),e.md(t._18o,t),e.mh(t._19o,t)},t.setColumns=function(t){this._39o.clear(),this.addColumns(t)},t.addColumns=function(t){var e=this._39o;t.forEach(function(t){if(!(t instanceof lg)){var i=qa(t.className);t=Aa(i?i:lg,t)}e.add(t)})},t.onColumnClicked=function(){},t.onCheckColumnClicked=function(){},t._3Q=function(t){for(var e,i=0,n=this._60I,r=n.size();r>i;i++)if(e=n.get(i),e.column===t)return e;return c},t.getColumnAt=function(t){var e=this._4Q(t);return e?e.column:c},t._4Q=function(t){for(var e=this,i=t.target?e.lp(t).x:t.x,n=e._60I,r=0;r<n.size();r++){var o=n.get(r),a=o.startX;if(i>=a&&i<a+o.column.getWidth())return o}return c},t.getToolTip=function(t){var e=this,i=e.getDataAt(t),n=e.getColumnAt(t);return i&&n?n.getToolTip(i,e):c},t.adjustTranslateX=function(t){var e=this.getWidth()-this._91I;return e>t&&(t=e),t>0?0:_(t)},t._99I=function(){var t=this,e=t._29I,i=t._60I;i.clear(),t._91I=0,t._39o._roots.each(function(n){if(n.isVisible()){var r=t._91I+n.getWidth();t._91I<=e.x+e.width&&r>=e.x&&i.add({column:n,startX:t._91I}),t._91I=r}})},t.drawData=function(t,e,i){var n=this,r=n._rowHeight,o=r*i,a=n.isSelected(e),s=n._29I,l=s.x,c=s.width;n.drawRowBackground(t,e,a,l,o,c,r),n._60I.each(function(s){var l=s.column,c=s.startX,h=l.getWidth();h>0&&!n.isEditing(e,l)&&(t.save(),t.beginPath(),t.rect(c,o,h,r),t.clip(),n._87o(n.drawCell(t,e,a,l,c,o,h,r),i,c,o,h,r),n._columnLineVisible&&ho(t,c+h-1,o,1,r,n._columnLineColor),t.restore())}),n._rowLineVisible&&ho(t,l,o+r-1,c,1,n._rowLineColor)},t.drawCell=function(t,e,i,n,r,o,a,s){var l=this;if(n.drawCell)return n.drawCell(t,e,i,n,r,o,a,s,l);var c=l.getValue(e,n);ig(t,c,n,l.getLabelFont(e,n,c),l.getLabelColor(e,n,c),r,o,a,s,e,l)},t.getColumnModel=function(){return this._39o},t._17o=function(){this.redraw()},t._18o=function(t){var e=this;t.data===e._sortColumn&&Jf[t.property]?e.ivm():(e._42o(),e.redraw())},t._19o=function(){this.redraw()},t.getCurrentSortFunc=function(){var t=this,e=t._sortColumn;if(e&&e.isSortable()){var i=e.getSortFunc(),n=Oe===e.getSortOrder()?1:-1;return i||(i=Xa),function(r,o){return i.call(t,t.getValue(r,e),t.getValue(o,e),r,o)*n}}return t._sortFunc},t.isCellEditable=function(t,e){return e.isEditable()&&this.isEditable()},t._37O=function(t,e){if(es(e))for(var i=this,n=i.lp(e),r=i._60I,o=i._rowHeight,a=i._29I,s=a.x,l=a.y,c=a.width,h=a.height,u=0;u<r.size();u++){var d=r.get(u),f=d.startX,g=d.column,v=g.getWidth();if(g!==i._31o&&g!==i._4o&&i.isCellEditable(t,g,e)&&n.x>=f&&n.x<f+v){var p={x:f,y:i.getRowIndex(t)*o,width:v,height:o},_={x:p.x+i.tx(),y:p.y+i.ty(),width:p.width,height:p.height},y=0,m=0;return p.x<s?y=p.x-s:p.x+p.width>s+c&&(y=p.x+p.width-s-c),y&&(i.tx(i.tx()-y),_.x-=y),p.y<l?m=p.y-l:p.y+o>l+h&&(m=p.y+o-l-h),m&&(i.ty(i.ty()-m),_.y-=m),i.beginEditing({data:t,column:g,value:i.getValue(t,g),event:e,rect:p,editorRect:_,view:i}),void 0}}}},og.BaseItemEditor=function(t,e,i,n){this._data=t,this._column=e,this._master=i,this._editInfo=n},ag("BaseItemEditor",e,{ms_ac:["data","column","master","editInfo"],editBeginning:function(){},getView:function(){},getValue:function(){},setValue:function(){}});var sg=h.Tab=function(){Vn(sg,this)};Ss("Tab",_l,{ms_ac:["view","closable","disabled"],_icon:c,_closable:!1,_disabled:!1,setParent:Ui});var lg=h.Column=function(){Vn(lg,this)};Ss("Column",_l,{_46o:1,ms_ac:["accessType","valueType",ie,Ce,Ie,Tt,"align",$e,"sortOrder",xe,"sortable","clickable","nullable","emptiable","slider","colorPicker","itemEditor"],_visible:!0,_width:80,_sortOrder:Oe,_sortFunc:c,_sortable:!0,_clickable:!0,setWidth:function(t){16>t&&(t=16);var e=this._width;this._width=t,this.fp(Tt,e,t)},getToolTip:function(t,e){return this.formatValue(e.getValue(t,this))}});var cg=h.Property=function(){Vn(cg,this)};Ss("Property",_l,{_46o:1,ms_ac:["accessType","valueType",Ce,Ie,"categoryName",$e,"align","nullable","emptiable","slider","itemEditor","colorPicker"],_categoryName:c,getToolTip:function(t,e,i){var n=this;return e?n.formatValue(i.getValue(t,n)):i.getPropertyName(n)}}),og.AccordionView=function(){var t=this;t._20o={},t._21o=new gl,t._10o=c,t._9o=c,t._11o=c,t._view=Kn(0,t),t.iv()},ag("AccordionView",e,{ms_v:1,ms_fire:1,ms_ac:[me,be,"titleHeight",Nt,Ut,"titleBackground","selectWidth",se,"orientation","separatorColor"],_expandIcon:d.accordionViewExpandIcon,_collapseIcon:d.accordionViewCollapseIcon,_titleHeight:Ta,_labelColor:d.accordionViewLabelColor,_labelFont:d.accordionViewLabelFont,_titleBackground:d.accordionViewTitleBackground,_selectBackground:d.accordionViewSelectBackground,_selectWidth:d.accordionViewSelectWidth,_orientation:"v",_separatorColor:d.accordionViewSeparatorColor,onPropertyChanged:function(){this.iv()},getView:function(){return this._view},getTitles:function(){return this._21o},getCurrentTitle:function(){return this._10o},add:function(t,e,i,n){var r=this,o=tr();if(r._20o[t])throw t+" already exists";o.onmousedown=ja,o.style.cursor=ni,o.addEventListener($?ci:oi,function(t){ja(t)},!1),o.addEventListener($?ui:si,function(e){ja(e),es(e)&&(r._10o===t?r.collapse():r.expand(t))},!1),or(r._view,o),r._20o[t]={content:e,div:o,canvas:er(o),icon:n},r._21o.add(t),i&&r.expand(t),r.iv()},remove:function(t){var e=this,i=e._20o[t];i&&(ms(i.div),delete e._20o[t],e._21o.remove(t),e.iv())},clear:function(){var t=this;t._20o={},t._21o.clear(),t.iv()},isExpanded:function(t){return this._10o===t},expand:function(t){var e=this;e._20o[t]&&e._10o!==t&&(e._10o=t,e.onExpanded(t),e.iv())},onExpanded:function(){},collapse:function(){var t=this;t._10o&&(t.onCollapsed(t._10o),delete t._10o,t.iv())},onCollapsed:function(){},initCanvas:function(t,e,i){rr(t,e,i);var n=dr(t);return fr(n,0,0,1),n.clearRect(0,0,e,i),n},drawTitle:function(t,e,i,n,r){var o=this,a=Wa(r.icon),s=o.isExpanded(e),l=o._titleHeight,c=o._titleBackground,h=o._selectWidth,u=o._separatorColor,d=Wa(s?o._expandIcon:o._collapseIcon),f=h+4;ho(t,0,0,i,n,c),s&&h&&ho(t,0,0,h,n,o._selectBackground),(s||o._21o.get(o._21o.size()-1)!==e)&&ho(t,0,n-1,i,1,u?u:Ja(c)),a&&(Ha(t,a,f+hl(a)/2,l/2),f+=hl(a)+2),Ka(t,e,o.getLabelFont(e),o.getLabelColor(e),f,0,0,l),d&&Ha(t,d,i-hl(d)/2-4,l/2)},validateImpl:function(){var t=this,e=t._view,i=0,n=0,r=t.getWidth(),o=t.getHeight(),a=t._titleHeight,s=t._21o.size()*a,l=t._11o,c=t._9o;delete t._11o,delete t._9o,t._21o.each(function(e){var l,c,h=t._20o[e],u=h.content,d=t._10o===e;sn(t)?(mr(h.div,i,0,a,o),l=t.initCanvas(h.canvas,a,o),gr(l,0,o),vr(l,-E),t.drawTitle(l,e,o,a,h),l.restore(),d?(c=w(0,r-s),u&&(t._11o=u,t._9o=yr(u),mr(u,i+a,0,c,o)),i+=a+c):i+=a):(mr(h.div,0,n,r,a),l=t.initCanvas(h.canvas,r,a),t.drawTitle(l,e,r,a,h),l.restore(),d?(c=w(0,o-s),u&&(t._11o=u,t._9o=yr(u),mr(u,0,n+a,r,c)),n+=a+c):n+=a)});var h=t._9o;l&&l!==t._11o&&l.endEditing&&l.endEditing(),h&&h!==c&&or(e,h),c&&c!==h&&ms(c)}}),og.SplitView=function(t,e,i,n){var r=this,o=r._dividerDiv=tr(),a=r._60O=er(),s=r._61O=er(),l=a.style,h=s.style;r._view=Kn(1,r),or(r._view,o),l.msTouchAction=ri,l.pointerEvents=ri,l.cursor=ni,
h.msTouchAction=ri,h.pointerEvents=ri,h.cursor=ni,t&&r.setLeftView(t),e&&r.setRightView(e),i&&r.setOrientation(i),n!=c&&r.setPosition(n),r.setStatus(It),new hg(r)},ag("SplitView",e,{ms_v:1,ms_fire:1,ms_ac:["continuousLayout","dividerSize","dividerBackground","toggleIcon","togglable","dragOpacity","orientation","draggable","status"],_continuousLayout:!1,_position:.5,_togglable:!0,_orientation:"h",_draggable:!0,_dividerSize:d.splitViewDividerSize,_dividerBackground:d.splitViewDividerBackground,_dragOpacity:d.splitViewDragOpacity,_toggleIcon:d.splitViewToggleIcon,onPropertyChanged:function(){this.iv()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(t,e){var i=this,n=i._position;isNaN(t)||(e||(i._82O=0>t?-1:t>1?1:0),i._position=t,i.fp(Me,n,t))},getLeftView:function(){return this._leftView},setLeftView:function(t){var e=this,i=e._leftView,n=e._view;if(e._leftView!==t){if(i&&i!==e._rightView){var r=yr(i);r.parentNode===n&&ms(r)}if(e._leftView=t,t){var o=yr(t);o.parentNode!==n&&n.insertBefore(o,e._dividerDiv)}e.fp("leftView",i,t)}},getRightView:function(){return this._rightView},setRightView:function(t){var e=this,i=e._rightView,n=e._view;if(e._rightView!==t){if(i&&i!==e._leftView){var r=yr(i);r.parentNode===n&&ms(r)}if(e._rightView=t,t){var o=yr(t);o.parentNode!==n&&n.insertBefore(o,e._dividerDiv)}e.fp("rightView",i,t)}},validateImpl:function(){var t=this,e=t._draggable,i=t._position,n=t.getWidth(),r=t.getHeight(),o=t._dividerSize,a=t._dividerBackground,s=$?18:8,l=t._dividerDiv,c=t._82O,h=t._60O,u=t._61O,d=t._toggleIcon,f=t._status,g=l.style,v=null,p=$?20:4,y=d.comps[0];o>=s||0===o?t._coverDiv&&(ms(t._coverDiv),delete t._coverDiv):t._coverDiv||(t._coverDiv=tr(),X&&(t._coverDiv.style.background=Qe),or(l,t._coverDiv)),t._togglable?h.parentNode||(or(l,h),or(l,u)):(ms(h),ms(u));var m=t._coverDiv,b=t._leftView,C=t._rightView;if(sn(t)){if(o>n&&(o=n),f===It)if(1===c)var I=x(i,n),S=w(0,n-o-I);else-1===c?(S=x(-i,n),I=w(0,n-o-S)):(I=_((n-o)*i),S=w(0,n-o-I));else"cl"===f?(I=0,S=w(0,n-o)):"cr"===f&&(S=0,I=w(0,n-o));b&&mr(b,0,0,I,r),C&&mr(C,I+o,0,S,r),mr(l,I,0,o,r),t._22o=I,m&&(mr(m,o/2-s/2,0,s,r),m.style.cursor=e?ei:""),l.style.cursor=e?ei:"";var O=l.clientHeight/2,T=l.clientWidth;rr(h,T,T),mr(h,0,O-T-p,T,T),v=dr(h),fr(v,0,0,1),y.rotation=-E,fl(v,d,0,0,T,T),v.restore(),rr(u,T,T),mr(u,0,O+p,T,T),v=dr(u),fr(v,0,0,1),y.rotation=E,fl(v,d,0,0,T,T),v.restore()}else{if(o>r&&(o=r),f===It)if(1===c)var M=x(i,r),P=w(0,r-o-M);else-1===c?(P=x(-i,r),M=w(0,r-o-P)):(M=_((r-o)*i),P=w(0,r-o-M));else"cl"===f?(M=0,P=w(0,r-o)):"cr"===f&&(P=0,M=w(0,r-o));b&&mr(b,0,0,n,M),C&&mr(C,0,M+o,n,P),mr(l,0,M,n,o),t._22o=M,m&&(mr(m,0,o/2-s/2,n,s),m.style.cursor=e?ii:""),g.cursor=e?ii:"";var k=l.clientWidth/2,T=l.clientHeight;rr(h,T,T),mr(h,k-T-p,0,T,T),v=dr(h),fr(v,0,0,1),y.rotation=0,fl(v,d,0,0,T,T),v.restore(),rr(u,T,T),mr(u,k+p,0,T,T),v=dr(u),fr(v,0,0,1),y.rotation=D,fl(v,d,0,0,T,T),v.restore()}g.background=a}});var hg=function(t){this.sv=t,this.addListeners()};Is(hg,e,{ms_listener:1,getView:function(){return this.sv.getView()},handle_touchstart:function(t){var e=this,i=e.sv,n=i._dividerDiv,r=i._60O,o=i._61O,a=i._status,s=t.target;if(s===r)a===It?i.setStatus("cl"):"cr"===a&&i.setStatus(It);else if(s===o)a===It?i.setStatus("cr"):"cl"===a&&i.setStatus(It);else if(Mr(t)&&(s===n||s===i._coverDiv)&&(ja(t),i.isDraggable())){i.getLeftView(),i.getRightView();var l=e.maskDiv=tr();if(l.style.left=0,l.style.top=0,l.style.width=i.getWidth()+"px",l.style.height=i.getHeight()+"px",i.getView().appendChild(l),!i.isContinuousLayout()){var c=e.resizeDiv=tr();c.style.left=n.style.left,c.style.top=n.style.top,c.style.width=n.style.width,c.style.height=n.style.height,c.style.opacity=i.getDragOpacity(),c.style.background=i.getDividerBackground(),or(e.getView(),c)}e._lastAbsPosition=i._22o,e._86o=sn(i)?as(t).x:as(t).y,ys(e,t)}},handleWindowTouchMove:function(t){Mr(t)&&this.update(t,this.sv.isContinuousLayout())},handleWindowTouchEnd:function(t){var e=this;e.update(t,!0),e.sv.setStatus(It),e.maskDiv&&ms(e.maskDiv),e.resizeDiv&&ms(e.resizeDiv),e.maskDiv=e.resizeDiv=c},handle_mousedown:function(t){es(t)&&this.handle_touchstart(t)},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)},update:function(t,e){var i=this,n=i.sv,r=sn(n)?n.getWidth():n.getHeight(),o=n._dividerSize,a=i._lastAbsPosition-i._86o;sn(n)?(a+=as(t).x,a>r-o&&(a=r-o),0>a&&(a=0),i.resizeDiv&&(i.resizeDiv.style.left=a+vt)):(a+=as(t).y,a>r-o&&(a=r-o),0>a&&(a=0),i.resizeDiv&&(i.resizeDiv.style.top=a+vt)),e&&r!==o&&(1===n._82O?n.setPosition(a,1):-1===n._82O?n.setPosition(a-r+o,1):n.setPosition(a/(r-o),1))}}),og.TabView=function(){var t=this,e=t._view=Kn(1,t),i=t._91O=tr(1),n=t._tabModel=new yl,r=n.sm(),o=t.invalidate;t._7o=new gl,t._canvas=er(i),or(e,i),or(e,t._92O=tr(1)),r.setSelectionMode(tt),r.ms(o,t),n.mm(o,t),n.md(o,t),n.mh(o,t),new ug(t),t.iv()},ag("TabView",e,{ms_v:1,ms_fire:1,ms_tx:1,ms_ty:1,ms_lp:1,ms_ac:["movable","tabGap","tabHeight","tabPosition",Nt,Ut,"tabBackground","selectWidth",se,"moveBackground","insertColor"],_tabPosition:at,_tabHeight:Ta,_tabGap:d.tabViewTabGap,_labelColor:d.tabViewLabelColor,_labelFont:d.tabViewLabelFont,_tabBackground:d.tabViewTabBackground,_selectWidth:d.tabViewSelectWidth,_selectBackground:d.tabViewSelectBackground,_moveBackground:d.tabViewMoveBackground,_insertColor:d.tabViewInsertColor,_movable:!0,getContentDiv:function(){return this._92O},getTitleDiv:function(){return this._91O},getTabModel:function(){return this._tabModel},add:function(t,e,i){var n=new sg,r=this._tabModel;return n.setName(t),n.setView(e),r.add(n),i&&r.sm().ss(n),n},getLabel:function(t){return t.toLabel()},onPropertyChanged:function(){this.iv()},_7Q:function(t){this._23o=t,this.iv()},get:function(t){var e=this,i=e._tabModel;if(vn(t))return i._roots.get(t);if(gn(t)){var n;return i.each(function(i){t===e.getLabel(i)&&(n=i)}),n}return t instanceof sg?t:c},select:function(t){this._tabModel.sm().ss(this.get(t))},remove:function(t){var e=this;if(t=e.get(t)){var i=e._tabModel,n=i._roots.indexOf(t);e._tabModel.remove(t),e._12Q(--n)}},getCurrentTab:function(){return this._8o},hideTabView:function(t,e){e.parentNode===this._92O&&(On(e)?(e.style.display=gt,e._tab_=t):ms(e),_a())},showTabView:function(t,e){On(e)&&(e.style.display="block",e._tab_=t),e.parentNode!==this._92O&&(or(this._92O,e),_a())},_24o:function(){var t,e=this,i=e._8o,n=e._9o,r=e._tabModel.sm().ld();r&&(t=yr(r.getView())),t!==n&&(n&&(i.getView()&&i.getView().endEditing&&i.getView().endEditing(),e.hideTabView(i,n)),t&&e.showTabView(r,t)),e._8o=r,e._9o=t,i!==r&&e.onTabChanged(i,r)},onTabClosing:function(){return!0},onTabChanged:function(){},onTabClosed:function(t,e){this._12Q(--e)},_12Q:function(t){var e=this,i=e._tabModel,n=i.size();if(n&&!i.sm().ld()){t==c&&(t=0),t>=n&&(t=n-1),0>t&&(t=0);for(var r=t;r>=0;r--){var o=e.get(r);if(!o.isDisabled())return e.select(o),o}for(r=t+1;n>r;r++)if(o=e.get(r),!o.isDisabled())return e.select(o),o}},_9Q:function(t){var e=4,i=Wa(t.getIcon());i&&(e+=hl(i,t)+4);var n=this.getLabel(t);return n&&(e+=ts(this.getLabelFont(t),n).width+4),t.isClosable()&&(e+=10),e},drawTab:function(t,e,i,n,r,o,a){var s,l=this,c=l._tabPosition,h=i+4,u=l._selectWidth,d=Wa(e.getIcon()),f=e.isDisabled(),g=l.getLabelColor(e),v=l.getLabelFont(e),p=l.getLabel(e),_=l._selectBackground,y=c===rt+"-vertical",m=c===ot+"-vertical";(y||m)&&(h=n+4),f&&(t.globalAlpha=ha),ho(t,i,n,r,o,a),e===l._8o&&u&&(c===at?ho(t,i,n+o-u,r,u,_):c===rt?ho(t,i+r-u,n,u,o,_):c===ot?ho(t,i,n,u,o,_):y?ho(t,i+r-u,n,u,o,_):m?ho(t,i,n,u,o,_):ho(t,i,n,r,u,_));var b=r/2;if(y&&(gr(t,b,n+o/2),vr(t,D),gr(t,-b,-n-o/2)),d){var w=ul(d,e),x=hl(d,e);if(y||m){var C=i+r/2,I=h+w/2;gr(t,C,I),vr(t,E),gr(t,-C,-I),Ha(t,d,i+r/2,h+w/2,e,l),gr(t,C,I),vr(t,-E),gr(t,-C,-I),h+=w+4}else Ha(t,d,h+x/2,n+o/2,e,l),h+=x+4}return y||m?(gr(t,r/2,h+r/2),vr(t,E),gr(t,-r/2,-h-r/2),Ka(t,p,v,g,i,h,o,r),gr(t,r/2,h+r/2),vr(t,-E),gr(t,-r/2,-h-r/2)):Ka(t,p,v,g,h,n,r,o),y&&(gr(t,b,n+o/2),vr(t,-D),gr(t,-b,-n-o/2)),e.isClosable()&&(s=m?{x:i+r-12,y:n+o-12,width:12,height:12}:{x:i+r-12,y:n+2,width:12,height:12},this.drawCloseIcon(e,t,g,s)),f&&(t.globalAlpha=1),s},drawCloseIcon:function(t,e,i,n){var r=n.x,o=n.y;e.strokeStyle=i,e.lineWidth=1,e.beginPath(),e.moveTo(r+2,o+8),e.lineTo(r+8,o+2),e.moveTo(r+8,o+8),e.lineTo(r+2,o+2),e.stroke()},validateImpl:function(){var t=this;t._24o();var e,i=t._canvas,n=t._tabPosition,r=t._91O,o=t._92O,a=t._tabModel,s=t.getWidth(),l=t.getHeight(),c=t._tabHeight,h=t._7o,u=t._tabGap,d=n===at,f=n===rt,g=n===ot,v=n===rt+"-vertical",p=n===ot+"-vertical",_=t._23o,y=0;if((f||g)&&a._roots.each(function(e){y=w(t._9Q(e),y)}),d?(mr(r,0,0,s,c),e={x:0,y:c,width:s,height:w(0,l-c)}):f?(mr(r,0,0,y,l),e={x:y,y:0,width:w(0,s-y),height:l}):g?(mr(r,s-y,0,y,l),e={x:0,y:0,width:w(0,s-y),height:l}):v?(mr(r,0,0,c,l),e={x:c,y:0,width:w(0,s-c),height:l}):p?(mr(r,s-c,0,c,l),e={x:0,y:0,width:w(0,s-c),height:l}):(mr(r,0,l-c,s,c),e={x:0,y:0,width:s,height:w(0,l-c)}),mr(o,e),v||p){t._9o&&(e.x=0,mr(t._8o.getView(),e)),rr(i,c,l);var m=dr(i),b=0;if(fr(m,0,t.ty(),1),m.clearRect(0,0,c,l),h.clear(),a._roots.each(function(e){var i,n=t._9Q(e);_&&_.tab===e||(i=t.drawTab(m,e,0,b,c,n,t._tabBackground)),h.add({_75o:i,tab:e,startY:b,endY:b+n,height:n}),b+=n+u}),t._23Q=w(0,b-u),_){var x=_.position;t.drawTab(m,_.tab,0,_.startY,c,_.height,t._moveBackground),ho(m,0,x,c,1,t._insertColor)}m.restore(),t.ty(t.ty())}else if(f||g){t._9o&&(e.x=0,mr(t._8o.getView(),e)),rr(i,y,l);var m=dr(i),b=0;if(fr(m,0,t.ty(),1),m.clearRect(0,0,y,l),h.clear(),a._roots.each(function(e){var i;_&&_.tab===e||(i=t.drawTab(m,e,0,b,y,c,t._tabBackground)),h.add({_75o:i,tab:e,startY:b,endY:b+c,height:c}),b+=c+u}),t._23Q=w(0,b-u),_){var x=_.position;t.drawTab(m,_.tab,0,_.startY,y,_.height,t._moveBackground),ho(m,0,x,y,1,t._insertColor)}m.restore(),t.ty(t.ty())}else{t._9o&&(e.y=0,mr(t._8o.getView(),e)),rr(i,s,c);var m=dr(i),C=0;if(fr(m,t.tx(),0,1),m.clearRect(0,0,s,c),h.clear(),a._roots.each(function(e){var i,n=t._9Q(e);_&&_.tab===e||(i=t.drawTab(m,e,C,0,n,c,t._tabBackground)),h.add({_75o:i,tab:e,startX:C,endX:C+n,width:n}),C+=n+u}),t._64I=w(0,C-u),_){var x=_.position;t.drawTab(m,_.tab,_.startX,0,_.width,c,t._moveBackground),Un(m,t._insertColor,x,0,c)}m.restore(),t.tx(t.tx())}for(var I=[],S=o.children,O=0;O<S.length;O++){var T=S[O],M=T._tab_;M&&!a.contains(M)&&I.push(T)}I.forEach(function(t){o.removeChild(t)})}});var ug=function(t){this.tv=t,this.addListeners()};Is(ug,e,{ms_listener:1,getView:function(){return this.tv._91O},handle_mousewheel:function(t){this.handleScroll(t,10*(t.wheelDelta/40))},handle_DOMMouseScroll:function(t){this.handleScroll(t,10*-t.detail)},handleScroll:function(t,e){ja(t);var i=this.tv,n=i._tabPosition;!i._40o()||n!==at&&n!==st||i.tx(this.tv.tx()+e),!i._41o()||n!==rt&&n!==ot&&n!==rt+"-vertical"&&n!==ot+"-vertical"||i.ty(this.tv.ty()+e)},_8Q:function(t){var e,i,n=this.tv,r=n._tabPosition,o=n._7o;if(r===at||r===st){var a=n.lp(t).x;for(e=0;e<o.size();e++)if(i=o.get(e),i.startX<=a&&a<=i.endX)return i}else if(r===rt||r===ot||r===rt+"-vertical"||r===ot+"-vertical"){var s=n.lp(t).y;for(e=0;e<o.size();e++)if(i=o.get(e),i.startY<=s&&s<=i.endY)return i}return c},isClickable:function(t){var e=this.tv,i=e._tabPosition,n=this._73o=this._8Q(t);return!e._40o()||i!==at&&i!==st?!e._41o()||i!==rt&&i!==ot&&i!==rt+"-vertical"&&i!==ot+"-vertical"?n&&(!n.tab.isDisabled()||e.isMovable()):!0:!0},handle_mousemove:function(t){var e=this;Cr?e._74o=e._8Q(t):e.getView().style.cursor=e.isClickable(t)?ni:""},handle_mousedown:function(t){this.handle_mousemove(t),this.handle_touchstart(t)},handle_touchstart:function(t){var e=this,i=e.tv,n=i._tabPosition;ja(t),e.isClickable(t)&&(n===at||n===st?(e.x=as(t).x,e.lp=i.lp(t),e.tx=i.tx()):(e.y=as(t).y,e.lp=i.lp(t),e.ty=i.ty()),ys(e,t))},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(t){var e,i=this,n=i.tv,r=n._tabPosition,o=i._73o;if(r===at||r===st){if(e=as(t).x-i.x,!i._25o&&!i.moving&&C(e)>2&&(n._40o()&&!os(t)?i._25o=1:o&&n.isMovable()&&(i.moving=1)),i._25o)n.tx(i.tx+e);else if(i.moving){var a=i.lp.x+e,s=n._tabGap/2;n._7o.each(function(t){var i=t.endX,r=a-t.startX<i-a;a>=t.startX&&i>=a&&n._7Q({tab:o.tab,startX:o.startX+e,width:o.width,front:r,insertTab:t.tab,position:r?w(0,t.startX-s):x(n._64I,i+s)})})}}else if(e=as(t).y-i.y,!i._25o&&!i.moving&&C(e)>2&&(n._41o()&&!os(t)?i._25o=1:o&&n.isMovable()&&(i.moving=1)),i._25o)n.ty(i.ty+e);else if(i.moving){var l=i.lp.y+e,s=n._tabGap/2;n._7o.each(function(t){var i=t.endY,r=l-t.startY<i-l;l>=t.startY&&i>=l&&n._7Q({tab:o.tab,startY:o.startY+e,height:o.height,front:r,insertTab:t.tab,position:r?w(0,t.startY-s):x(n._23Q,i+s)})})}},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)},handleWindowTouchEnd:function(){var t=this,e=t.tv,i=e._tabPosition,n=e.getTabModel(),r=n._roots,o=t._73o;if(t.moving){var a=e._23o;if(a&&a.insertTab!==a.tab){var s=a.tab,l=r.remove(s),h=r.indexOf(a.insertTab);h>=0&&(a.front||h++,h<=r.size()&&(r.add(s,h),n._38I(s,l,h)))}e._7Q(c),delete t.moving}else if(!t._25o&&o){s=o.tab;var u=t._74o;if(!u||u.tab===s)if(!s.isDisabled()&&us(o._75o,t.lp)){var d=function(){var t=r.indexOf(s);n.remove(s),e.onTabClosed(s,t)};e.onTabClosing(s,d)&&d()}else s.isDisabled()||e._8o===s||n.sm().ss(s)}t._25o=t._73o=t._74o=i===at||i===st?t.x=t.lp=t.tx=c:t.y=t.lp=t.ty=c}}),og.PropertyView=function(t){var e=this;e._view=Kn(1,e),e._canvas=er(e._view),or(e._view,e._79O=tr()),e._rows=new gl,e._28o=new gl,e._26o={},e._26Q={};var i=e._propertyModel=new yl,n=e.ivm;i.mm(n,e),i.md(n,e),i.mh(n,e),e.dm(t?t:new yl),new dg(e)},ag("PropertyView",e,{ms_ac:[Nt,Qt,Ut,Ce,Ie,"categorizable",de,xe,ye,me,be,he,ue,ce,"selectRowIndex",se,"background",fe,_e,ve,pe,ge],ms_v:1,ms_dm:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,_45o:1,_47o:1,ms_tip:1,_29I:Xi,_59I:0,_9I:0,_selectRowIndex:-1,_editable:!0,_batchEditable:!0,_categorizable:!0,_indent:Ia,_background:d.propertyViewBackground,_expandIcon:d.propertyViewExpandIcon,_collapseIcon:d.propertyViewCollapseIcon,_scrollBarColor:Ma,_scrollBarSize:Da,_autoHideScrollBar:ga,_selectBackground:d.propertyViewSelectBackground,_rowHeight:Sa,_rowLineVisible:d.propertyViewRowLineVisible,_rowLineColor:d.propertyViewRowLineColor,_10I:.5,_columnLineVisible:d.propertyViewColumnLineVisible,_columnLineColor:d.propertyViewColumnLineColor,_labelColor:d.propertyViewLabelColor,_labelSelectColor:d.propertyViewLabelSelectColor,_labelFont:d.propertyViewLabelFont,getRows:function(){return this._rows},getColumnPosition:function(){return this._10I},setColumnPosition:function(t){0>t&&(t=0),t>1&&(t=1);var e=this,i=e._10I;e._10I=t,e.fp("columnPosition",i,t)},getPropertyName:function(t){return t.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(t,e,i){return i===this._selectRowIndex?this._labelSelectColor:this._labelColor},getPropertyFont:function(){return this._labelFont},getPropertyColor:function(t,e){return e===this._selectRowIndex?this._labelSelectColor:t.getColor()||this._labelColor},getCategoryFont:function(){return this._labelFont},getCategoryColor:function(){return this._labelColor},adjustTranslateX:function(){return 0},adjustTranslateY:function(t){var e=this.getHeight()-this._59I;return e>t&&(t=e),t>0?0:_(t)},isExpanded:function(t){if(!t)return!0;var e=this._26o[t];return e?e.isExpanded:!(this._26Q[t]===!1)},toggle:function(t){var e=this;e.isExpanded(t)?e.collapse(t):e.expand(t)},expandAll:function(){this.validate();for(var t in this._26o)this.expand(t)},expand:function(t){if(t&&t!==gt){var e=this,i=e._26o[t];i&&!i.isExpanded&&(i.isExpanded=!0,e.onExpanded(t),e.ivm())}},onExpanded:function(){},collapseAll:function(){this.validate();for(var t in this._26o)this.collapse(t)},collapse:function(t){if(t&&t!==gt){var e=this,i=e._26o[t];i&&i.isExpanded&&(i.isExpanded=!1,e.onCollapsed(t),e.ivm())}},onCollapsed:function(){},getCategoryName:function(t){if(!this.isCategorizable())return gt;var e=t.getCategoryName();return e?e:gt},getPropertyModel:function(){return this._propertyModel},setDataModel:function(t){var e=this,i=e._dataModel;i!==t&&(i&&(i.umd(e.handlePropertyChange,e),e._selectionModel||i.sm().ums(e.ivm,e)),e._dataModel=t,t.md(e.handlePropertyChange,e),e._selectionModel?e._selectionModel._21I(t):t.sm().ms(e.ivm,e),e.fp(Ve,i,t))},isVisible:function(t){return this._visibleFunc?this._visibleFunc(t):!0},onPropertyChanged:function(t){var e=this,i=t.property;tg[i]?e.ivm():e.iv(),i===Ee&&e._43o()},getCurrentData:function(){return this._27o},updateCurrentData:function(){this._27o=this.sm().ld()},getRawProperties:function(){return this._27o?this._propertyModel._roots:vl},handlePropertyChange:function(t){this._27o===t.data&&this.iv()},ivm:function(){this.invalidateModel()},invalidateModel:function(){var t=this;t._96I||(t.setSelectRowIndex(-1),t._96I=1,t.iv())},redraw:function(){this.iv()},validateModel:function(){var t=this,e=t._rows,n=t._28o,r={},o=new gl,a=t._27o;t.updateCurrentData(),a!==t._27o&&t.endEditing(),e.clear(),n.clear(),t.getRawProperties().each(function(e){if(t.isVisible(e)){o.add(e);var a=t.getCategoryName(e);r[a]||(n.add(a,a===gt?0:i),r[a]={isExpanded:t.isExpanded(a),properties:new gl})}}),t._sortFunc&&o.sort(t._sortFunc);for(var s in t._26o)t._26Q[s]=t.isExpanded(s);t._26o=r,n.each(function(i){i!==gt&&e.add(i);var n=r[i];n.isExpanded&&o.each(function(r){t.getCategoryName(r)===i&&(n.properties.add(r),e.add({property:r,data:t._27o}))},t)})},validateImpl:function(){var t=this;t._76o(),t._96I&&(t.validateModel(),delete t._96I);var e=t._canvas,i=t.getWidth(),n=t.getHeight(),r=-t.ty(),o=t._rowHeight,a=t._indent,s=i-a,l=t._rows,h=l.size(),u=t._9I=a+s*t._10I,d=t._59I=h*o;rr(e,i,n),t._29I={x:0,y:r,width:i,height:n},t._31I=y(r/o),t._14I=m((r+n)/o),t._31I<0&&(t._31I=0),t._14I>h&&(t._14I=h);var f,g=dr(e),v=t._background;fr(g,0,-r,1),g.beginPath(),g.rect(0,r,i,n),g.clip(),g.clearRect(0,r,i,n),t._93db(g),v&&ho(g,0,0,a,d,v);for(var p=t._31I;p<t._14I;p++){var _=l.get(p),r=o*p;if(gn(_))v&&ho(g,a,r,s,o,v),f=Wa(t.isExpanded(_)?t._expandIcon:t._collapseIcon),f&&Ga(g,f,Ne,0,r,a,o),g.save(),g.beginPath(),g.rect(a,r,s,o),g.clip(),t.drawCategoryName(g,_,p,a,r,s,o),g.restore();else{var b=_.property,w=_.data,f=Wa(b.getIcon()),x=t._selectRowIndex===p?t.getSelectBackground():c;if(f&&Ga(g,f,Ne,0,r,a,o),x&&ho(g,a,r,s,o,x),g.save(),g.beginPath(),g.rect(a,r,u-a,o),g.clip(),t.drawPropertyName(g,b,p,a,r,u-a,o),g.restore(),!t.isEditing(w,b)){var C=u+1,I=i-u-1;g.save(),g.beginPath(),g.rect(C,r,I,o),g.clip(),t._87o(t.drawPropertyValue(g,b,t.getValue(w,b),p,C,r,I,o,w),p,C,r,I,o),g.restore()}}t._rowLineVisible&&ho(g,a,r+o-1,s,1,t._rowLineColor)}t._columnLineVisible&&(ho(g,u,0,1,d,t._columnLineColor),ho(g,i-1,0,1,d)),t._92db(g),t._93I(),g.restore(),t.ty(t.ty())},drawCategoryName:function(t,e,i,n,r,o,a){Ka(t,e,this.getCategoryFont(e),this.getCategoryColor(e),n,r,o,a)},drawPropertyName:function(t,e,i,n,r,o,a){return e.drawPropertyName?(e.drawPropertyName(t,e,i,n,r,o,a,this),void 0):(Ka(t,this.getPropertyName(e),this.getPropertyFont(e,i),this.getPropertyColor(e,i),n,r,o,a),void 0)},drawPropertyValue:function(t,e,i,n,r,o,a,s,l){return e.drawPropertyValue?e.drawPropertyValue(t,e,i,n,r,o,a,s,l,this):(ig(t,i,e,this.getLabelFont(e,i,n),this.getLabelColor(e,i,n),r,o,a,s,l,this),void 0)},isPropertyEditable:function(t){return t.isEditable()&&this.isEditable()},setProperties:function(t){this._propertyModel.clear(),this.addProperties(t)},addProperties:function(t){if(t){var e=this._propertyModel;t.forEach(function(t){if(!(t instanceof cg)){var i=qa(t.className);t=Aa(i?i:cg,t)}e.add(t)})}},getRowIndexAt:function(t){var e=this,i=y(e.lp(t).y/e._rowHeight);return i>=0&&i<e._rows.size()?i:-1},getPropertyAt:function(t){var e=this,i=e.getRowIndexAt(t);return i>=0?e._rows.get(i).property:c},getToolTip:function(t){var e=this,i=e.getPropertyAt(t),n=e._27o;return i&&n?i.getToolTip(n,e._9I<e.lp(t).x,e):c}});var dg=function(t){this.pv=t,this.addListeners()};Is(dg,e,{ms_listener:1,getView:function(){return this.pv._view},setCursor:function(t){this.getView().style.cursor=t},clear:function(){var t=this;t._62O=t.cp=t.ty=t.p=c,t.setCursor(K)},handle_mousedown:function(t){this.handle_touchstart(t)},handle_touchstart:function(t){var e=this,i=e.pv;ja(t),i.setFocus(t)&&(es(t)?(e.cp=as(t),e.ty=i.ty(),e.p=i.getColumnPosition(),e.handle_touchmove(t)):i.setSelectRowIndex(i.getRowIndexAt(t)))},handleWindowMouseUp:function(){this.clear()},handleWindowTouchEnd:function(){this.clear()},handle_mouseup:function(t){this.handle_touchend(t)},handle_touchend:function(t){var e=this;if(e.cp&&!e._62O){var i=e.pv,n=i.lp(t),r=n.x,o=n.y,a=i._indent,s=i.getRowIndexAt(t),l=i._9I;if(s>=0){var c=i._rowHeight,h=c*s,u=i._rows.get(s),d=u.property;if(gn(u))Wa(i.isExpanded(u)?i._expandIcon:i._collapseIcon)&&r>=0&&a>=r&&o>=h&&h+c>=o?i.toggle(u):ns(t)&&i.toggle(u);else if(r>l&&i.isPropertyEditable(d,t)){var f={x:l+1,y:h,width:i.getWidth()-l-1,height:c},g={x:f.x+i.tx(),y:f.y+i.ty(),width:f.width,height:f.height},v=0,p=i._29I;f.y<p.y?v=f.y-p.y:f.y+c>p.y+p.height&&(v=f.y+c-p.y-p.height),v&&(i.ty(i.ty()-v),g.y-=v),i.beginEditing({data:u.data,property:d,value:i.getValue(u.data,d),event:t,rect:f,editorRect:g,view:i})}}i.setSelectRowIndex(s)}e.clear()},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(t){var e=this,i=e.pv,n=e.ty,r=e.cp,o=as(t),a=e._62O;if("p"===a)i.setTranslateY(n+o.y-r.y);else if("c"===a){var s=i.getWidth()-i._indent;if(s>16){var l=e.p-(r.x-o.x)/s,c=16/s;c>l&&(l=c),l>1-c&&(l=1-c),i.setColumnPosition(l)}}else"s"===a&&i.setTranslateY(n+(r.y-o.y)*i._59I/i._29I.height)},handle_mousemove:function(t){this.handle_touchmove(t)},handle_touchmove:function(t){if(!Cr&&es(t)){var e=this,i=e.pv,n=C(i.lp(t).x-i._9I)<=($?8:3);e.cp?e._62O||(n?(e._62O="c",ys(e)):C(as(t).y-e.cp.y)>=2&&(e._62O=e.isV(t)?"s":"p",ys(e))):(n?e.setCursor(ei):e.setCursor(K),e.isV(t)&&i._43o())}},isV:function(t){var e=this.pv,i=e._29I;return e._41o()&&i.x+i.width-e.lp(t).x<Ea},handle_mousewheel:function(t){this.handleScroll(t,t.wheelDelta/40)},handle_DOMMouseScroll:function(t){2===t.axis&&this.handleScroll(t,-t.detail)},handleScroll:function(t,e){var i=this.pv;ja(t),i.endEditing(),i.translate(0,e*i.getRowHeight())},handle_keydown:function(t){var e=this.pv,i=e._rows.size(),n=e._selectRowIndex+(Fr(t)?-1:1);(Fr(t)||Hr(t))&&(0>n&&(n=0),n>=i&&(n=i-1),e.setSelectRowIndex(n))}}),og.ListView=function(t){this._5o(t),new fg(this)},ag("ListView",e,{ms_ac:[Nt,Qt,Ut,fe,de,_e,ve,xe,ye,he,ue,ce,le,se],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,_14Q:1,ms_dm:1,_45o:1,_checkMode:!1,_indent:Ia,_rowHeight:Sa,_rowLineVisible:d.listViewRowLineVisible,_rowLineColor:d.listViewRowLineColor,_scrollBarColor:Ma,_scrollBarSize:Da,_autoMakeVisible:fa,_autoHideScrollBar:ga,_selectBackground:d.listViewSelectBackground,_labelColor:d.listViewLabelColor,_labelSelectColor:d.listViewLabelSelectColor,_labelFont:d.listViewLabelFont,isCheckMode:function(){return this._checkMode},setCheckMode:function(t){var e=this,i=e._checkMode;e._checkMode=t,e.fp(we,i,t)},drawRow:function(t,e,i,n,r,o,a){var s=this,l=0,c=s._indent,h=s.getIconWidth(e);s.drawRowBackground(t,e,i,n,r,o,a),s._checkMode&&(Ha(t,s.getCheckIcon(e),l+c/2,r+a/2,e,s),l+=c),s.drawIcon(t,e,l,r,h,a),s.drawLabel(t,e,l+h,r,a)}});var fg=function(t){this.list=t,this._lastSelectDataTime=tn(),this.addListeners()};Is(fg,e,{ms_listener:1,getView:function(){return this.list._view},clear:function(t){var e=this,i=e.list;t&&"d"===e._62O&&!e.dragCancel&&i.handleDragAndDrop(t,"end"),i.draggingData&&(i.draggingData=null,i.redraw()),e.dragCancel=e._62O=e._isV=e._isH=e.cp=e.tx=e.ty=c},handle_mousedown:function(t){this.handle_touchstart(t)},handle_touchstart:function(t){var e=this,i=e.list;if(ja(t),i.setFocus(t)){var n=i.getDataAt(t);e.cp=as(t),e.tx=i.tx(),e.ty=i.ty(),es(t)?n&&i.handleDragAndDrop&&!e.isV(t)&&!e.isH(t)&&(i.draggingData=n,i.redraw(),i.handleDragAndDrop(t,"prepare")):(n&&e._33o(t,n),e.clear(t))}},handleWindowMouseUp:function(t){this.clear(t)},handleWindowTouchEnd:function(t){this.clear(t)},handle_mouseup:function(t){this.handle_touchend(t)},handle_touchend:function(t){var e=this,i=e.list;if(!e._isV&&!e._isH&&e.cp&&!e._62O){var n=i.getDataAt(t);n?(i.isCheckMode()?e._34o(t,n):e._33o(t,n),ns(t)?i.onDataDoubleClicked(n,t):i.onDataClicked(n,t)):i.handleBackgroundClick(t)}e.clear(t)},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(t){var e=this,i=e.list,n=e._62O,r=e.tx,o=e.ty,a=e.cp,s=as(t),l=i._29I;"p"===n?i.setTranslate(r+s.x-a.x,o+s.y-a.y):"v"===n?i.ty(o+(a.y-s.y)*i._59I/l.height):"h"===n?i.tx(r+(a.x-s.x)*i._91I/l.width):"d"===n&&(e.dragCancel||i.handleDragAndDrop(t,"between"))},handle_mousemove:function(t){this.handle_touchmove(t)},handle_touchmove:function(t){if(!Cr&&es(t)){var e=this,i=e.list;if(e._isV=e.isV(t),e._isH=e.isH(t),e.cp){if(!e._62O){if(ls(as(t),e.cp)<2)return;e._isV?e._62O="v":e._isH?e._62O="h":i.draggingData&&!this.dragCancel?(e._62O="d",i.handleDragAndDrop(t,"begin")):e._62O="p",e._62O&&"d"!==e._62O&&i.draggingData&&(i.draggingData=null,i.redraw()),ys(e)}}else e._isV&&i._43o(),e._isH&&i._42o()}},isV:function(t){var e=this.list,i=e._29I;return e._41o()&&i.x+i.width-e.lp(t).x<Ea},isH:function(t){var e=this.list,i=e._29I;return e._40o()&&i.y+i.height-e.lp(t).y<Ea},handle_mousewheel:function(t){this.handleScroll(t,t.wheelDelta/40,t.wheelDelta!==t.wheelDeltaX)},handle_DOMMouseScroll:function(t){this.handleScroll(t,-t.detail,1)},handleScroll:function(t,e,i){var n=this.list;ja(t),n.endEditing&&n.endEditing(),i&&n._41o()?n.translate(0,e*n.getRowHeight()):n._40o()&&n.translate(10*e,0)},handle_keydown:function(t){if(!d.isInput(t.target)){var e,i=this.list,n=i.sm(),r=i._rows,o=r.size();if(Pr(t))i.selectAll();else if(kr(t))i.handleDelete&&i.handleDelete(t);else if(Nr(t))"d"!==this._62O||this.dragCancel||(i.handleDragAndDrop(t,"cancel"),this.dragCancel=!0);else if(Gr(t))i.isCheckMode()&&(e=i.getFocusData(),e&&i.checkData(e));else if(Fr(t)||Hr(t)){var a=i.isCheckMode();if(e=a?i.getFocusData():n.ld()){var s=i.getRowIndex(e);s>=0&&(Fr(t)?0!==s&&(e=r.get(s-1),a?i.setFocusData(e):n.ss(e)):s!==o-1&&(e=r.get(s+1),a?i.setFocusData(e):n.ss(e)))}else o>0&&(e=r.get(0),a?i.setFocusData(e):n.ss(e))}}},_34o:function(t,e){var i=this.list,n=i.lp(t).x;return n>=0&&n<=i._indent?(i.checkData(e),void 0):(i.setFocusData(e),void 0)},_33o:function(t,e){var i=this.list,n=i.sm(),r=n.ld();if(os(t))i.isSelected(e)?n.rs(e):n.as(e);else if(rs(t))if(r)for(var o=i.getRowIndex(r),a=i.getRowIndex(e);o!==a;)o+=a>o?1:-1,n.as(i._rows.get(o));else n.ss(e);else if(es(t)){var s=tn();if(n.contains(e)){var l=s-this._lastSelectDataTime;i.handleDataDoubleSelect&&l>500&&1500>l&&i.handleDataDoubleSelect(t,e)}n.ss(e),this._lastSelectDataTime=s}else n.contains(e)||n.ss(e)}}),og.TreeView=function(t){var e=this;e._35o(),e._5o(t),new gg(e)},ag("TreeView",e,{ms_ac:[Nt,Qt,Ut,"rootVisible",we,"rootData",xe,ye,he,ue,ce,de,fe,_e,ve,me,be,le,se,"loader","doubleClickToToggle"],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,_48o:1,_14Q:1,_45o:1,_checkMode:c,_indent:Ia,_rowHeight:Sa,_rowLineVisible:d.treeViewRowLineVisible,_rowLineColor:d.treeViewRowLineColor,_scrollBarColor:Ma,_scrollBarSize:Da,_autoHideScrollBar:ga,_expandIcon:d.treeViewExpandIcon,_collapseIcon:d.treeViewCollapseIcon,_autoMakeVisible:fa,_selectBackground:d.treeViewSelectBackground,_labelColor:d.treeViewLabelColor,_labelSelectColor:d.treeViewLabelSelectColor,_labelFont:d.treeViewLabelFont,_doubleClickToToggle:d.treeViewDoubleClickToToggle,drawRow:function(t,e,i,n,r,o,a){var s=this;s.drawRowBackground(t,e,i,n,r,o,a),s._97I(t,e,i,0,r,o,a)},isOnToggleIcon:function(t){var e=this.getDataAt(t);if(e){var i=this.getIndent(),n=this.lp(t).x;if(Wa(this.getToggleIcon(e))){var r=i*this.getLevel(e);if(n>=r&&r+i>=n)return!0}}return!1}});var gg=function(t){Vn(gg,this,[t])};Is(gg,fg,{toggle:function(t,e,i,n){var r=this.list,o=r.lp(t).x;if(Wa(r.getToggleIcon(e))){var a=i*n;if(o>=a&&a+i>=o)return r.toggle(e),!0}return r.isDoubleClickToToggle()&&ns(t)?(r.toggle(e),!0):!1},_34o:function(t,e){var i=this.list,n=i.lp(t).x,r=i._levelMap[e._id],o=i._indent,a=o*(r+1);return n>=a&&a+o>=n?(i.checkData(e),void 0):(this.toggle(t,e,o,r)||i.setFocusData(e),void 0)},_33o:function(t,e){var i=this,n=i.list;i.toggle(t,e,n._indent,n.getLevel(e))||gg.superClass._33o.call(i,t,e)},handle_keydown:function(t){if(jr(t)||Wr(t)){var e=this.list,i=e._rows,n=e.isCheckMode(),r=e.sm(),o=n?e.getFocusData():r.ld();o?o.hasChildren()&&(jr(t)?e.collapse(o):e.expand(o)):i.size()>0&&(o=i.get(0),n?e.setFocusData(o):r.ss(o))}else gg.superClass.handle_keydown.call(this,t)}});var vg=og.TableView=function(t){this._98I(),this._5o(t),new pg(this)};ag("TableView",e,{ms_ac:[Nt,Qt,Ut,"sortMode",Ce,Ie,fe,_e,ve,pe,ge,"sortColumn",xe,ye,he,ue,ce,le,se],ms_v:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_45o:1,_47o:1,_sortMode:Se,_editable:!0,_batchEditable:!1,_rowHeight:Sa,_rowLineVisible:d.tableViewRowLineVisible,_rowLineColor:d.tableViewRowLineColor,_columnLineVisible:d.tableViewColumnLineVisible,_columnLineColor:d.tableViewColumnLineColor,_scrollBarColor:Ma,_scrollBarSize:Da,_autoHideScrollBar:ga,_autoMakeVisible:fa,_selectBackground:d.tableViewSelectBackground,_labelColor:d.tableViewLabelColor,_labelSelectColor:d.tableViewLabelSelectColor,_labelFont:d.tableViewLabelFont,getCheckColumn:function(){var t=this;if(!t._31o){var e=t._31o=new lg;e.setEditable(!0),e.setWidth(40),e.getValue=t.getCheckColumValue,e.drawCell=t.drawCheckColumnCell}return t._31o},isCheckMode:function(){return this._39o.contains(this._31o)},setCheckMode:function(t){var e=this,i=e._39o,n=e.getCheckColumn();t!==e.isCheckMode()&&(t?i.add(n,0):i.remove(n),e.fp(we,!t,t))},getCheckColumValue:function(t,e,i){return i.isSelected(t)},drawCheckColumnCell:function(t,e,i,n,r,o,a,s,l){Ha(t,l.getCheckIcon(e),r+a/2,o+s/2,e,l)}});var pg=function(t){Vn(pg,this,[t])};Is(pg,fg,{_34o:function(t,e){var i=this.list,n=i._31o;if(i.isCellEditable(e,n,t)){var r=i._3Q(n),o=i.lp(t).x;if(r&&o>=r.startX&&o<r.startX+n.getWidth())return i.checkData(e),void 0}i.setFocusData(e),i._37O(e,t)},_33o:function(t,e){pg.superClass._33o.apply(this,arguments),this.list._37O(e,t)}});var _g=og.TreeTableView=function(t){var e=this,i=e._4o=new lg;e._35o(),e._98I(),e._5o(t),i.setDisplayName("Name"),i.setEditable(!0),i.setWidth(180),i.drawCell=yg,i.getValue=mg,e._39o.add(i),new bg(e)},yg=function(t,e,i,n,r,o,a,s,l){l._97I(t,e,i,r,o,a,s)},mg=function(t,e,i){return i.getLabel(t)};ag("TreeTableView",e,{ms_ac:[Nt,Qt,Ut,"sortMode",Ce,Ie,de,we,"rootData","rootVisible",xe,ye,"sortColumn",me,be,he,ue,ce,le,ve,fe,_e,pe,ge,se,"loader"],ms_v:1,ms_bnb:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_48o:1,_14Q:1,_45o:1,_47o:1,_sortMode:Se,_checkMode:c,_editable:!0,_batchEditable:!1,_indent:Ia,_rowHeight:Sa,_rowLineVisible:d.treeTableViewRowLineVisible,_rowLineColor:d.treeTableViewRowLineColor,_columnLineVisible:d.treeTableViewColumnLineVisible,_columnLineColor:d.treeTableViewColumnLineColor,_expandIcon:d.treeTableViewExpandIcon,_collapseIcon:d.treeTableViewCollapseIcon,_scrollBarColor:Ma,_scrollBarSize:Da,_autoHideScrollBar:ga,_autoMakeVisible:fa,_selectBackground:d.treeTableViewSelectBackground,_labelColor:d.treeTableViewLabelColor,_labelSelectColor:d.treeTableViewLabelSelectColor,_labelFont:d.treeTableViewLabelFont,getTreeColumn:function(){return this._4o}});var bg=function(t){Vn(bg,this,[t])};Is(bg,fg,{_34o:function(t,e){var i=this.list,n=i._4o,r=i._3Q(n),o=i.lp(t).x;if(r){var a=i._indent,s=r.startX+a*i.getLevel(e);if(Wa(i.getToggleIcon(e))&&o>=s&&s+a>=o)return i.toggle(e),void 0;if(i.isCellEditable(e,n)&&(s+=a,o>=s&&s+a>=o))return i.checkData(e),void 0}i.setFocusData(e),i._37O(e,t)},_33o:function(t,e){var i=this.list,n=i.lp(t).x;if(Wa(i.getToggleIcon(e))){
var r=i._3Q(i._4o);if(r){var o=i._indent,a=r.startX+o*i.getLevel(e);if(n>=a&&a+o>=n)return i.toggle(e),void 0}}bg.superClass._33o.apply(this,arguments),i._37O(e,t)}});var wg=og.TableHeader=function(t){var e=this,i=e._view=Kn(1,e),n=e._39o=t.getColumnModel(),r=e.iv;e.tv=e._tableView=t,e._60I=new gl,e._canvas=er(i),i.style.background=d.tableHeaderBackground||"",i.style.height=Oa+vt,n.mm(r,e),n.md(r,e),n.mh(r,e),t.mp(function(t){Zf[t.property]&&e.iv()},e),new xg(e),e.iv()};ag("TableHeader",e,{ms_v:1,ms_lp:1,ms_fire:1,ms_ac:["checkIcon","sortDescIcon","sortAscIcon",Nt,Ut,de,"moveBackground","insertColor",pe,ge,"resizable","movable"],_checkIcon:kt,_movable:!0,_resizable:!0,_labelColor:d.tableHeaderLabelColor,_labelFont:d.tableHeaderLabelFont,_columnLineColor:d.tableHeaderColumnLineColor,_columnLineVisible:d.tableHeaderColumnLineVisible,_sortDescIcon:d.tableHeaderSortDescIcon,_sortAscIcon:d.tableHeaderSortAscIcon,_moveBackground:d.tableHeaderMoveBackground,_insertColor:d.tableHeaderInsertColor,_indent:Ia,getCheckIcon:function(){return this._checkIcon},getTableView:function(){return this.tv},getLabel:function(t){return t.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(t){return t.getColor()||this._labelColor},getLabelAlign:function(t){return t._align},onPropertyChanged:function(){this.iv()},_5Q:function(t){this._61I=t,this.iv()},getLogicalPoint:function(t){return _s(t,this._canvas,this.tv.tx())},validateImpl:function(){var t=this,e=t._canvas,i=t.getWidth(),n=t.getHeight(),r=t.tv,o=t._60I,a=t._61I,s=-r.tx(),l=0;(i!==e.clientWidth||n!==e.clientHeight)&&rr(e,i,n),o.clear(),t._39o._roots.each(function(t){if(t.isVisible()){var e=l+t.getWidth();s+i>=l&&e>=s&&o.add({column:t,startX:l}),l=e}});var c=dr(e);if(fr(c,-s,0,1),c.beginPath(),c.rect(s,0,i,n),c.clip(),c.clearRect(s,0,i,n),o.each(function(e){var i=e.column,r=e.startX,o=i.getWidth();o>0&&(c.save(),c.beginPath(),c.rect(r,0,o,n),c.clip(),a&&a.column===i||t.drawColumn(c,i,r,0,o,n),t._columnLineVisible&&ho(c,r+o-1,0,1,n,t._columnLineColor),c.restore())}),a){var h=a.column,l=a.startX,u=a.position,d=h.getWidth();c.save(),c.beginPath(),c.rect(l,0,d,n),c.clip(),c.fillStyle=t._moveBackground,c.fill(),t.drawColumn(c,h,l,0,d,n),c.restore(),Un(c,t._insertColor,u,0,n)}c.restore()},_6Q:function(t){var e=this.tv;return e._31o===t&&e.sm().getSelectionMode()===et},drawColumn:function(t,e,i,n,r,o){var a=this,s=a.tv,l=Wa(e.getIcon()),c=a.getLabelAlign(e);if(a._6Q(e)){var h=Wa(a._checkIcon);Ha(t,h,i+r/2,n+o/2,e,a)}else{var u=a.getLabel(e),d=a.getLabelFont(e),f=a.getLabelColor(e),g=ts(d,u).width,v=l?a._indent:0;c===rt?(l&&Ga(t,l,Ne,i,n,v,o),Ka(t,u,d,f,i+v,n,r,o,rt)):c===ot?(l&&Ga(t,l,Ne,i+r-g-v,n,v,o),Ka(t,u,d,f,i,n,r,o,ot)):(l&&Ga(t,l,Ne,i+(r-g-v)/2,n,v,o),Ka(t,u,d,f,i+(r-g+v)/2,n,0,o,rt))}if(e.isSortable()&&s.getSortColumn()===e&&(l=Wa(e.getSortOrder()===Oe?a._sortAscIcon:a._sortDescIcon))){var p=hl(l,e)/2+2;Ha(t,l,c===ot?i+p:i+r-p,n+o/2,e,s)}}});var xg=function(t){var e=this;e.th=t,e.tv=t._tableView,e.addListeners()};Is(xg,e,{ms_listener:1,getView:function(){return this.th.getView()},setCursor:function(t){this.getView().style.cursor=t},handle_mousemove:function(t){if(!Cr){var e=this;delete e._29o,e.setCursor(K);for(var i=e.th,n=i._60I,r=i.lp(t).x,o=n.size()-1;o>=0;o--){var a=n.get(o),s=a.column,l=a.startX+s.getWidth();if(i.isResizable()&&C(l-r)<=($?10:3))return e._29o=a,e.setCursor(ei),void 0;r>a.startX&&l>r&&(e._29o=a),(s.isClickable()||s.isSortable()||i.isMovable()||e.tv.getCheckColumn&&s===e.tv.getCheckColumn())&&r>a.startX&&l>r&&e.setCursor(ni)}}},handle_mousedown:function(t){this.handle_touchstart(t)},handle_touchstart:function(t){var e=this;ja(t),e.tv.endEditing(),e.handle_mousemove(t),e._29o&&(e.x=as(t).x,e.lx=e.th.lp(t).x,e.w=e._29o.column.getWidth(),ys(e,t))},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(t){var e=this,i=e.th,n=e.getView().style.cursor,r=e._29o,o=as(t).x-e.x;if(e.resizing||e.moving||(n===ei?e.resizing=1:i.isMovable()&&n===ni&&C(o)>2&&(e.moving=1)),e.resizing)r.column.setWidth(e.w+o);else if(e.moving){var a=e.lx+o;i._60I.each(function(t){var e=t.startX,n=e+t.column.getWidth();if(a>=e&&n>=a){var s={column:r.column,startX:r.startX+o,front:n-a>a-e,insertColumn:t.column};s.position=s.front?e:n,i._5Q(s)}})}},_16Q:function(t,e){var i=this,n=i.tv,r=i.th,o=r._checkIcon;if(r._6Q(t)){var a=Wa(o),s=i.lx,l=t.getWidth(),c=hl(a,t);if(s>=e+l/2-c&&e+l/2+c>=s){r.setCheckIcon(o===Pt?kt:Pt);var h=n.sm(),u=n._rows;return o===Pt?h.rs(u):h.ss(u),n.onCheckColumnClicked(t),!0}}return!1},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)},handleWindowTouchEnd:function(t){var e=this,i=e.tv,n=e.th,r=e._29o;if(e.moving){var o=n._61I;if(o&&o.insertColumn!==o.column){var a=o.column,s=i.getColumnModel()._roots,l=s.remove(a),h=s.indexOf(o.insertColumn);h>=0&&(o.front||h++,h<=s.size()&&(s.add(a,h),i.getColumnModel()._38I(a,l,h)))}n._5Q(c),delete e.moving}else if(!e.resizing&&r){a=r.column;var u=n.lp(t).x,d=r.startX,f=!0;if(n.onColumnClicked){var g=n.onColumnClicked(a,t,d);g===!1&&(f=!1)}if(f&&u>=d&&u<=d+a.getWidth()&&!e._16Q(a,d)){if(a.isSortable()){var v=i.getSortMode(),p=a.getSortOrder();v===Se?i.getSortColumn()===a?(p===Te&&i.setSortColumn(c),a.setSortOrder(p===Oe?Te:Oe)):i.setSortColumn(a):"bistate"===v&&(i.getSortColumn()===a?a.setSortOrder(p===Oe?Te:Oe):i.setSortColumn(a))}i.onColumnClicked(a,t,d)}}e._29o=e.resizing=e.x=e.lx=e.w=c}}),og.TablePane=function(t){this.init(new vg(t))},ag("TablePane",e,{ms_v:1,_44o:1}),og.TreeTablePane=function(t){this.init(new _g(t))},ag("TreeTablePane",e,{ms_v:1,_44o:1}),og.Toolbar=function(t){var e=this,i=e._view=Kn(1,e),n=i.style;n.background=d.toolbarBackground||"",n.height=Ta+vt,e._canvas=er(i),e._30o=new gl,e._90I=new gl,e.setItems(t||[]),i.handleGroupSelectedChanged=function(t){if(t.isSelected()){var i=t.getGroupId();null!=i&&e._items.forEach(function(e){var n=e.element;n&&n!==t&&n.setSelected&&n.getGroupId&&n.getGroupId()===i&&n.setSelected(!1)})}},new Cg(e)},ag("Toolbar",e,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_tip:1,ms_value:1,ms_ac:[Ct,Nt,Ut,Qt,se,"itemGap","separatorColor","currentItem","stickToRight"],_labelColor:d.toolbarLabelColor,_labelSelectColor:d.toolbarLabelSelectColor,_labelFont:d.toolbarLabelFont,_selectBackground:d.toolbarSelectBackground,_itemGap:d.toolbarItemGap,_separatorColor:d.toolbarSeparatorColor,_stickToRight:!1,getSumWidth:function(){return this._64I},getToolTip:function(t){var e=this.getItemInfoAt(t);return e?e.item.toolTip:c},getLabelColor:function(t){return t&&t.selected&&t.type!==Pt&&t.type!==Et?this._labelSelectColor:this._labelColor},onPropertyChanged:function(t){this.iv(),t.property===Ct&&this._items.forEach(function(t){$n(t)})},redraw:function(){this.iv()},addItem:function(t,e){var i=this._items;e==c?i.push(t):i.splice(e,0,t),this.fp(Ct,c,i)},removeItem:function(t){if(t)for(var e=this._items,i=0;i<e.length;i++)t===e[i]&&(e.splice(i,1),this.fp(Ct,c,e))},removeItemById:function(t){if(t!=c)for(var e=this._items,i=0;i<e.length;i++)t===e[i].id&&(e.splice(i,1),this.fp(Ct,c,e))},getItemById:function(t){if(t!=c)for(var e=this._items,i=0;i<e.length;i++){var n=e[i];if(t===n.id)return n}},getItemInfos:function(){return this._30o},getItemInfoAt:function(t){var e=this,i=0,n=e._30o,r=e.lp(t),o=r.x,a=r.y;if(a>=0&&a<=e.getHeight())for(;i<n.size();i++){var s=n.get(i);if(s.startX<=o&&o<=s.endX)return s}return c},drawItem:function(t,e,i,n,r){if(e.visible===!1)return 0;if(yn(e.visible)&&e.visible()===!1)return 0;var o=this,a=e.disabled;a&&(t.globalAlpha=ha);var s=o.drawItemImpl(t,e,i,n,r),l=o._itemGap;return a&&(t.globalAlpha=1),this._currentItem!==e||"separator"===e||e.separator===!0||e.unfocusable||_o(t,o._separatorColor,i-l/2,0,s+l,n),s},drawItemImpl:function(t,e,i,n,r){var o=this,a=o._view,s=o._itemGap,l=n/2,h=e.type,u=e.element,d=e.label;gn(u)&&(d=u,u=c);var f,g=o.getLabelFont(e),v=o.getLabelColor(e),p=e.selected,_=Wa(e.icon),y=hl(_,e),m=0,b=y+(d?ts(g,d).width:0);if("separator"===e||e.separator===!0)return Un(t,o._separatorColor,i,n/4,l),1;if(u){_&&Ha(t,_,i+y/2,l),Ka(t,d,g,v,i+y,0,0,n);var w=yr(u);r||o._90I.add(w),w.parentNode!==a&&or(a,w),u.iv&&u.iv(),u.validate&&u.validate();var x=w.getBoundingClientRect(),C=x.width,I=w.style;return nr(w),I.left=o.tx()+i+b+vt,I.top=(n-x.height)/2+vt,b+C}return h===Et?f=Wa(p?Vt:Rt):h===Pt&&(f=Wa(p?Pt:kt)),f?(m=hl(f,e),Ha(t,f,i+m/2,l),i+=m,b+=m):p&&ho(t,i-s/2,0,b+s,n,o.getSelectBackground(e)),_&&Ha(t,_,i+y/2,l),Ka(t,d,g,v,i+y,0,0,n),b},validateImpl:function(){var t=this,e=t._canvas,i=t.getWidth(),n=t.getHeight(),r=t._30o,o=t._items;rr(e,i,n);var a=dr(e),s=t._itemGap,l=s/2;fr(a,t.tx(),0,1),a.clearRect(0,0,i,n);var c=t._90I;t._90I=new gl,r.clear(),o.forEach(function(e){var i=t.drawItem(a,e,l,n);r.add({item:e,startX:l,endX:l+i,width:i}),i&&(l+=i+s)}),c.each(function(e){t._90I.contains(e)||ms(e)}),t._64I=w(0,l),a.restore(),t._stickToRight?(t._65O=0,a=dr(e),l=i-t._64I+s,fr(a,0,0,1),a.clearRect(0,0,i,n),r.clear(),o.forEach(function(e){var i=t.drawItem(a,e,l,n,!0);r.add({item:e,startX:l,endX:l+i,width:i}),i&&(l+=i+s)}),a.restore()):t.tx(t.tx())},handleClick:function(t){var e=this,i=t.type,n=t.action,r=t.groupId,o=t.selected;t.disabled||(r!=c?o||(t.selected=!0,this._items.forEach(function(e){e.groupId===r&&t!==e&&(e.selected=!1)}),n&&t.action(t,e)):i===Pt||"toggle"===i?(t.selected=!o,n&&t.action(t,e)):n&&t.action(t,e)),_a(),e.iv()}});var Cg=function(t){this.tb=t,this.addListeners()};Is(Cg,e,{ms_listener:1,getView:function(){return this.tb._view},handle_mousewheel:function(t){this.handleScroll(t,10*(t.wheelDelta/40))},handle_DOMMouseScroll:function(t){this.handleScroll(t,10*-t.detail)},handleScroll:function(t,e){ja(t);var i=this.tb;i.isScrollable()&&!i._stickToRight&&(i.tx(i.tx()+e),xr())},handle_mousemove:function(t){var e=this;Cr?e.info2=e.tb.getItemInfoAt(t):e.setItem(t)},handle_mouseout:function(t){var e=this;t.target===e.getView()?e.tb.setCurrentItem(c):e.handle_mousemove(t)},handle_mousedown:function(t){this.handle_mousemove(t),this.handle_touchstart(t)},handle_touchstart:function(t){var e=this,i=e.tb,n=t.target;es(t)&&(n===e.getView()||n===i._canvas)&&(ja(t),i.setFocus(t)&&(this.setItem(t,!0),(i.isScrollable()||e.info&&!e.info.item.disabled)&&(e.x=as(t).x,e.tx=i.tx(),ys(e,t))))},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(t){var e=this,i=e.tb;if(!i._stickToRight){var n=as(t).x-e.x;!e._25o&&C(n)>2&&i.isScrollable()&&(e._25o=1),e._25o&&i.tx(e.tx+n)}},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)},handleWindowTouchEnd:function(){var t=this,e=t.tb,i=t.info,n=t.info2;if(!t._25o&&i){var r=i.item;n&&n.item!==r||e.handleClick(r)}t._25o=t.x=t.tx=t.info2=c,t.setItem()},setItem:function(t,e){var i=this,n=i.tb,r=i.info=t?n.getItemInfoAt(t):c,o=r?r.item:c;n.setCurrentItem(o),e&&o&&yn(o.onDown)&&o.onDown(t)}}),og.BorderPane=function(){this._view=Kn(1,this),this.iv()},ag("BorderPane",e,{ms_v:1,ms_ac:["topHeight","bottomHeight","leftWidth","rightWidth"],ms_fire:1,getLeftView:function(){return this._leftView},setLeftView:function(t,e){this._12o("leftView",t),e!=c&&this.setLeftWidth(e)},getRightView:function(){return this._rightView},setRightView:function(t,e){this._12o("rightView",t),e!=c&&this.setRightWidth(e)},getTopView:function(){return this._topView},setTopView:function(t,e){this._12o("topView",t),e!=c&&this.setTopHeight(e)},getBottomView:function(){return this._bottomView},setBottomView:function(t,e){this._12o("bottomView",t),e!=c&&this.setBottomHeight(e)},getCenterView:function(){return this._centerView},setCenterView:function(t){this._12o("centerView",t)},_12o:function(t,e){var i=this,n="_"+t,r=i._view,o=i[n];o!==e&&(o&&(o.getView?ms(o.getView()):ms(o)),i[n]=e,e&&(e.getView?or(r,e.getView(),1):or(r,e,1)),i.fp(t,o,e))},onPropertyChanged:function(){this.iv()},validateImpl:function(){var t=this,e=t._topView,i=t._bottomView,n=t._leftView,r=t._rightView,o=t._centerView,a=t.getWidth(),s=t.getHeight(),l=0,h=0,u=a,d=s,f=0,g=0,v=0,p=0;e&&(f=t._topHeight==c?hr(e):t._topHeight,h=f),i&&(g=t._bottomHeight==c?hr(i):t._bottomHeight,d=s-g),n&&(v=t._leftWidth==c?cr(n):t._leftWidth,l=v),r&&(p=t._rightWidth==c?cr(r):t._rightWidth,u=a-p);var _=w(0,u-l),y=w(0,d-h);e&&mr(e,0,0,a,f),i&&mr(i,0,d,a,g),n&&mr(n,0,h,v,y),r&&mr(r,u,h,p,y),o&&mr(o,l,h,_,y)}})}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);